<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Investment Dashboard V3.0 - Series A Presentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://unpkg.com/d3@7"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Professional Design System -->
    <style>
        :root {
            /* Primary - Deep Professional Blue */
            --primary-50: #eff6ff;
            --primary-100: #dbeafe;
            --primary-200: #bfdbfe;
            --primary-300: #93c5fd;
            --primary-400: #60a5fa;
            --primary-500: #3b82f6;
            --primary-600: #2563eb;
            --primary-700: #1d4ed8;
            --primary-800: #1e40af;
            --primary-900: #1e3a8a;
            
            /* Accent - Success Green */
            --accent-50: #ecfdf5;
            --accent-100: #d1fae5;
            --accent-200: #a7f3d0;
            --accent-300: #6ee7b7;
            --accent-400: #34d399;
            --accent-500: #10b981;
            --accent-600: #059669;
            --accent-700: #047857;
            --accent-800: #065f46;
            --accent-900: #064e3b;
            
            /* Neutral - Sophisticated Grays */
            --neutral-50: #f8fafc;
            --neutral-100: #f1f5f9;
            --neutral-200: #e2e8f0;
            --neutral-300: #cbd5e1;
            --neutral-400: #94a3b8;
            --neutral-500: #64748b;
            --neutral-600: #475569;
            --neutral-700: #334155;
            --neutral-800: #1e293b;
            --neutral-900: #0f172a;
            
            /* Warning/Alert */
            --warning-500: #f59e0b;
            --danger-500: #ef4444;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--neutral-50);
            color: var(--neutral-900);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Professional Typography Scale */
        .text-display { font-size: 3.75rem; line-height: 1; font-weight: 900; letter-spacing: -0.025em; }
        .text-h1 { font-size: 2.25rem; line-height: 2.5rem; font-weight: 800; letter-spacing: -0.025em; }
        .text-h2 { font-size: 1.875rem; line-height: 2.25rem; font-weight: 700; letter-spacing: -0.025em; }
        .text-h3 { font-size: 1.5rem; line-height: 2rem; font-weight: 600; }
        .text-body { font-size: 1rem; line-height: 1.5rem; font-weight: 400; }
        .text-caption { font-size: 0.875rem; line-height: 1.25rem; font-weight: 500; }

        /* Premium Card Design */
        .professional-card {
            background: white;
            border: 1px solid var(--neutral-200);
            border-radius: 12px;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .professional-card:hover {
            border-color: var(--neutral-300);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transform: translateY(-1px);
        }

        .professional-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-500), var(--accent-500));
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .professional-card:hover::before {
            opacity: 1;
        }

        /* Enhanced Navigation */
        .nav-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-500), var(--accent-500));
            z-index: 100;
            transition: width 0.3s ease;
        }

        .nav-link {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0.75rem 1rem;
            border-radius: 8px;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--primary-500);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 80%;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary-600);
            background-color: var(--primary-50);
        }

        /* KPI Cards with Enhanced Styling */
        .kpi-card {
            background: white;
            border: 1px solid var(--neutral-200);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent-500);
            transition: width 0.3s ease;
        }

        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px -8px rgb(0 0 0 / 0.15);
            border-color: var(--neutral-300);
        }

        .kpi-card:hover::before {
            width: 6px;
        }

        .kpi-value {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1;
            background: linear-gradient(135deg, var(--primary-600), var(--accent-600));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Chart Containers */
        .chart-container {
            position: relative;
            width: 100%;
            margin: 0 auto;
            border-radius: 12px;
            overflow: hidden;
            background: white;
            padding: 1rem;
        }

        /* Timeline Enhancements */
        .timeline-item {
            position: relative;
            padding: 1rem;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid var(--neutral-200);
            background: white;
        }

        .timeline-item:hover {
            background: var(--neutral-50);
            border-color: var(--primary-300);
            transform: translateX(4px);
        }

        .timeline-bar {
            position: relative;
            height: 8px;
            background: var(--neutral-200);
            border-radius: 4px;
            overflow: hidden;
        }

        .timeline-progress {
            position: absolute;
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--primary-500), var(--accent-500));
            transition: all 0.3s ease;
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-500), var(--accent-500));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
            cursor: pointer;
            box-shadow: 0 8px 25px -8px rgb(0 0 0 / 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 50;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px -8px rgb(0 0 0 / 0.4);
        }

        /* Breadcrumb Navigation */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 0;
            font-size: 0.875rem;
            color: var(--neutral-500);
        }

        .breadcrumb-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .breadcrumb-item:not(:last-child)::after {
            content: '/';
            color: var(--neutral-400);
        }

        .breadcrumb-item.active {
            color: var(--primary-600);
            font-weight: 500;
        }

        /* Loading States */
        .loading-skeleton {
            background: linear-gradient(90deg, var(--neutral-200) 25%, var(--neutral-100) 50%, var(--neutral-200) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Tooltip System */
        .tooltip {
            position: absolute;
            background: var(--neutral-900);
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            font-size: 0.875rem;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transform: translateY(4px);
            transition: all 0.2s ease;
        }

        .tooltip.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .text-display { font-size: 2.5rem; }
            .text-h1 { font-size: 1.875rem; line-height: 2.25rem; }
            .text-h2 { font-size: 1.5rem; line-height: 2rem; }
            
            .kpi-card {
                padding: 1rem;
            }
            
            .kpi-value {
                font-size: 2rem;
            }
            
            .fab {
                bottom: 1rem;
                right: 1rem;
                width: 50px;
                height: 50px;
                font-size: 1rem;
            }
        }

        /* Enhanced Slider Styling */
        .slider {
            -webkit-appearance: none;
            appearance: none;
            background: var(--neutral-200);
            border-radius: 6px;
            outline: none;
            transition: all 0.3s ease;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-500), var(--accent-500));
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-500), var(--accent-500));
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        /* Print Styles */
        @media print {
            .nav-progress,
            .fab,
            header {
                display: none !important;
            }
            
            .professional-card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid var(--neutral-300);
            }
            
            body {
                background: white;
            }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Progress Bar -->
    <div class="nav-progress" id="nav-progress"></div>

    <!-- Enhanced Header & Navigation -->
    <header class="bg-white/95 backdrop-blur-lg sticky top-0 z-50 border-b border-neutral-200">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-sm"></i>
                        </div>
                        <span class="ml-3 font-bold text-xl text-neutral-800">RAG Investment</span>
                    </div>
                    <span class="hidden md:block text-sm font-medium text-neutral-500 px-3 py-1 bg-neutral-100 rounded-full">V3.0 Series A</span>
                </div>
                
                <div class="hidden lg:block">
                    <div class="flex items-center space-x-1">
                        <a href="#executive-summary" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-star mr-2"></i>Executive Summary
                        </a>
                        <a href="#investment-thesis" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-lightbulb mr-2"></i>Investment Thesis
                        </a>
                        <a href="#financial-plan" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-chart-bar mr-2"></i>Financial Plan
                        </a>
                        <a href="#tech-roadmap" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-code-branch mr-2"></i>Technology
                        </a>
                        <a href="#operations-plan" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-cogs mr-2"></i>Operations
                        </a>
                        <a href="#team-execution" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-users mr-2"></i>Team
                        </a>
                    </div>
                </div>

                <div class="flex items-center space-x-3">
                    <button id="theme-toggle" class="p-2 rounded-lg hover:bg-neutral-100 transition-colors">
                        <i class="fas fa-moon text-neutral-600"></i>
                    </button>
                    <button class="hidden md:flex items-center space-x-2 bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg transition-colors text-sm font-medium">
                        <i class="fas fa-download"></i>
                        <span>Export PDF</span>
                    </button>
                </div>
            </div>

            <!-- Mobile Navigation -->
            <div class="lg:hidden pb-3">
                <div class="flex space-x-1 overflow-x-auto">
                    <a href="#executive-summary" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Executive</a>
                    <a href="#investment-thesis" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Thesis</a>
                    <a href="#financial-plan" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Financial</a>
                    <a href="#tech-roadmap" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Tech</a>
                    <a href="#operations-plan" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Operations</a>
                    <a href="#team-execution" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Team</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <!-- Breadcrumb Navigation -->
        <nav class="breadcrumb">
            <div class="breadcrumb-item">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </div>
            <div class="breadcrumb-item active">
                <span id="current-section">Executive Summary</span>
            </div>
        </nav>

        <!-- Executive Summary Section -->
        <section id="executive-summary" class="mb-20 scroll-mt-16">
            <div class="text-center mb-12">
                <h1 class="text-display text-neutral-900 mb-4">RAG Investment Dashboard</h1>
                <p class="text-xl text-neutral-600 max-w-3xl mx-auto mb-8">
                    Transforming Mexico's transportation financing through AI-Native technology. 
                    A de-risked proposition with institutional-grade execution certainty.
                </p>
                <div class="flex items-center justify-center space-x-6">
                    <div class="flex items-center space-x-2 text-neutral-500">
                        <i class="fas fa-calendar-alt"></i>
                        <span class="text-sm">Series A Target: Q2 2025</span>
                    </div>
                    <div class="flex items-center space-x-2 text-neutral-500">
                        <i class="fas fa-chart-line"></i>
                        <span class="text-sm">12-Month Roadmap</span>
                    </div>
                    <div class="flex items-center space-x-2 text-neutral-500">
                        <i class="fas fa-shield-alt"></i>
                        <span class="text-sm">De-risked Execution</span>
                    </div>
                </div>
            </div>

            <!-- Hero Metrics Dashboard -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="professional-card p-6 text-center">
                    <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-dollar-sign text-white text-xl"></i>
                    </div>
                    <div class="kpi-value">$7.26M</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Investment Required</p>
                    <p class="text-xs text-neutral-500">MXN Seed Capital</p>
                </div>

                <div class="professional-card p-6 text-center">
                    <div class="w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-chart-line text-white text-xl"></i>
                    </div>
                    <div class="kpi-value">457%</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">5-Year ROI</p>
                    <p class="text-xs text-neutral-500">Projected Return</p>
                </div>

                <div class="professional-card p-6 text-center">
                    <div class="w-12 h-12 bg-gradient-to-br from-warning-500 to-yellow-600 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-clock text-white text-xl"></i>
                    </div>
                    <div class="kpi-value">20</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Payback Period</p>
                    <p class="text-xs text-neutral-500">Months to Break-Even</p>
                </div>

                <div class="professional-card p-6 text-center">
                    <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-rocket text-white text-xl"></i>
                    </div>
                    <div class="kpi-value">$45M</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Series A Target</p>
                    <p class="text-xs text-neutral-500">MXN Valuation Goal</p>
                </div>
            </div>

            <!-- Investment Thesis Highlights -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                <div class="professional-card p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-brain text-white"></i>
                        </div>
                        <h3 class="text-h3 text-neutral-900">AI-Native Advantage</h3>
                    </div>
                    <p class="text-neutral-700 mb-4">
                        We're not digitizing traditional financing—we're building a proprietary AI workforce that transforms 
                        variable operational costs into fixed capital investment, creating exponential efficiency gains.
                    </p>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">4 Synergistic AI Agents</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">$6.3M Annual Savings vs Traditional</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">SaaS-like Scalability & Margins</span>
                        </div>
                    </div>
                </div>

                <div class="professional-card p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-shield-alt text-white"></i>
                        </div>
                        <h3 class="text-h3 text-neutral-900">De-risked Execution</h3>
                    </div>
                    <p class="text-neutral-700 mb-4">
                        Golden handcuffs equity structure ensures core technical team retention. 
                        Proven team chemistry and sequential validation approach minimize execution risk.
                    </p>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">Pre-assembled Senior Technical Team</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">~7% Collective Equity Alignment</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">Sequential Risk Validation</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Capital Allocation Sankey Preview -->
            <div class="professional-card p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-h3 text-neutral-900">Capital Allocation Overview</h3>
                    <button class="text-primary-600 hover:text-primary-700 text-sm font-medium flex items-center space-x-2">
                        <span>View Details</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-code text-white text-xl"></i>
                        </div>
                        <div class="text-lg font-bold text-neutral-900">32%</div>
                        <p class="text-xs text-neutral-600">Core AI Development</p>
                        <p class="text-xs font-medium text-primary-600">$2.33M</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-br from-accent-500 to-accent-600 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-truck text-white text-xl"></i>
                        </div>
                        <div class="text-lg font-bold text-neutral-900">36%</div>
                        <p class="text-xs text-neutral-600">Pilot Investment</p>
                        <p class="text-xs font-medium text-accent-600">$2.63M</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-br from-warning-500 to-yellow-600 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-users text-white text-xl"></i>
                        </div>
                        <div class="text-lg font-bold text-neutral-900">25%</div>
                        <p class="text-xs text-neutral-600">Team & Operations</p>
                        <p class="text-xs font-medium text-warning-600">$1.83M</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-umbrella text-white text-xl"></i>
                        </div>
                        <div class="text-lg font-bold text-neutral-900">7%</div>
                        <p class="text-xs text-neutral-600">Emergency Reserve</p>
                        <p class="text-xs font-medium text-purple-600">$476K</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Investment Thesis Section -->
        <section id="investment-thesis" class="mb-20 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-h1 text-neutral-900 mb-4">Investment Thesis</h2>
                <p class="text-xl text-neutral-600 max-w-4xl mx-auto">
                    The fundamental financial advantage of RAG's AI-Native model: 
                    transforming variable operational costs into fixed capital investment for exponential scalability.
                </p>
            </div>
            
            <!-- Strategic Overview -->
            <div class="professional-card p-8 mb-12">
                <div class="flex items-start space-x-6">
                    <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-lightbulb text-white text-2xl"></i>
                    </div>
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-4">Strategic Investment Overview</h3>
                        <p class="text-neutral-700 text-lg leading-relaxed mb-6">
                            This investment doesn't fund operational expenses—it acquires a productive asset: 
                            an ecosystem of four synergistic AI agents. This model transforms the variable costs 
                            of traditional financing into fixed capital investment, generating exponential efficiency, 
                            competitive moats, and high-margin scalability similar to a SaaS model.
                        </p>
                        <div class="bg-gradient-to-r from-primary-50 to-accent-50 p-6 rounded-lg border border-primary-200">
                            <p class="text-primary-800 font-medium">
                                <i class="fas fa-quote-left text-primary-500 mr-2"></i>
                                We're financing a proprietary "AI workforce" that guarantees a high-margin business model 
                                and establishes the foundation for market dominance.
                                <i class="fas fa-quote-right text-primary-500 ml-2"></i>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced KPI Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="kpi-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-microchip text-white"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">TECH INVESTMENT</span>
                    </div>
                    <div class="kpi-value">$2.33M</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Core AI Development</p>
                    <p class="text-xs text-neutral-500">MXN in proprietary AI agents + SaaS platform</p>
                    <div class="mt-3 flex items-center space-x-2">
                        <div class="flex-1 bg-neutral-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-primary-500 to-primary-600 h-2 rounded-full" style="width: 32%"></div>
                        </div>
                        <span class="text-xs font-medium text-neutral-600">32%</span>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-accent-500 to-accent-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-piggy-bank text-white"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">ANNUAL SAVINGS</span>
                    </div>
                    <div class="kpi-value">$6.3M</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">vs Traditional Model</p>
                    <p class="text-xs text-neutral-500">MXN by replacing 20+ traditional roles</p>
                    <div class="mt-3 flex items-center space-x-2 text-accent-600">
                        <i class="fas fa-arrow-up text-xs"></i>
                        <span class="text-xs font-medium">270% efficiency gain</span>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-warning-500 to-yellow-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-white"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">PROJECTED ROI</span>
                    </div>
                    <div class="kpi-value">457%</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">5-Year Return</p>
                    <p class="text-xs text-neutral-500">On technology investment component</p>
                    <div class="mt-3 flex items-center space-x-2 text-warning-600">
                        <i class="fas fa-trophy text-xs"></i>
                        <span class="text-xs font-medium">Best-in-class returns</span>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-clock text-white"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">PAYBACK</span>
                    </div>
                    <div class="kpi-value">20</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Months to Break-Even</p>
                    <p class="text-xs text-neutral-500">Conservative estimate for tech recovery</p>
                    <div class="mt-3 flex items-center space-x-2 text-purple-600">
                        <i class="fas fa-rocket text-xs"></i>
                        <span class="text-xs font-medium">Rapid value creation</span>
                    </div>
                </div>
            </div>

            <!-- Interactive ROI Calculator Preview -->
            <div class="professional-card p-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-2">Investment Breakdown: $7,260,000 MXN</h3>
                        <p class="text-neutral-600">Strategic capital allocation designed to maximize business model validation and core technology asset development.</p>
                    </div>
                    <button id="roi-calculator-btn" class="bg-gradient-to-r from-primary-500 to-accent-500 hover:from-primary-600 hover:to-accent-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2">
                        <i class="fas fa-calculator"></i>
                        <span>Interactive ROI Calculator</span>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="chart-container h-80">
                        <canvas id="investmentSankeyChart"></canvas>
                    </div>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-primary-50 to-primary-100 rounded-lg border border-primary-200">
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-primary-500 rounded"></div>
                                <span class="font-medium text-primary-900">Core AI + SaaS Development</span>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-primary-900">$2,326,000</div>
                                <div class="text-sm text-primary-700">32.0%</div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-accent-50 to-accent-100 rounded-lg border border-accent-200">
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-accent-500 rounded"></div>
                                <span class="font-medium text-accent-900">Pilot Investment (CAPEX)</span>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-accent-900">$2,630,000</div>
                                <div class="text-sm text-accent-700">36.2%</div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-warning-50 to-yellow-100 rounded-lg border border-warning-200">
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-warning-500 rounded"></div>
                                <span class="font-medium text-warning-900">Team & Operations</span>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-warning-900">$1,828,000</div>
                                <div class="text-sm text-warning-700">25.2%</div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg border border-purple-200">
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-purple-500 rounded"></div>
                                <span class="font-medium text-purple-900">Emergency Reserve</span>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-purple-900">$476,000</div>
                                <div class="text-sm text-purple-700">6.6%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enhanced Financial Plan Section -->
        <section id="financial-plan" class="mb-20 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-h1 text-neutral-900 mb-4">Financial Plan</h2>
                <p class="text-xl text-neutral-600 max-w-4xl mx-auto">
                    Non-linear capital deployment designed to maximize efficiency and mitigate risks through sequential validation.
                </p>
            </div>
            
            <!-- Financial Overview Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-area text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">RUNWAY</span>
                    </div>
                    <div class="kpi-value text-primary-600">12-13</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Months Runway</p>
                    <p class="text-xs text-neutral-500">Conservative burn rate calculation</p>
                    <div class="mt-4 flex items-center space-x-2">
                        <div class="flex-1 bg-neutral-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-primary-500 to-accent-500 h-2 rounded-full" style="width: 75%"></div>
                        </div>
                        <span class="text-xs font-medium text-neutral-600">75% to Series A</span>
                    </div>
                </div>

                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-piggy-bank text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">MONTHLY BURN</span>
                    </div>
                    <div class="kpi-value text-accent-600">$580K</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Average Monthly</p>
                    <p class="text-xs text-neutral-500">Including CAPEX deployment</p>
                    <div class="mt-4 flex items-center space-x-2 text-accent-600">
                        <i class="fas fa-trending-down text-xs"></i>
                        <span class="text-xs font-medium">Decreasing post-CAPEX</span>
                    </div>
                </div>

                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-shield-alt text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">SAFETY BUFFER</span>
                    </div>
                    <div class="kpi-value text-purple-600">$476K</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Emergency Reserve</p>
                    <p class="text-xs text-neutral-500">6.6% of total investment</p>
                    <div class="mt-4 flex items-center space-x-2 text-purple-600">
                        <i class="fas fa-lock text-xs"></i>
                        <span class="text-xs font-medium">Risk mitigation fund</span>
                    </div>
                </div>
            </div>

            <!-- Interactive Financial Explorer -->
            <div class="professional-card p-8 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-2">Cash Flow & Monthly Expenditure</h3>
                        <p class="text-neutral-600">Interactive month-by-month financial exploration. Visualizes spending by category and remaining cash, demonstrating prudent capital control.</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="waterfall-view" class="bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-chart-waterfall mr-2"></i>Waterfall View
                        </button>
                        <button id="scenario-analysis" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-calculator mr-2"></i>Scenarios
                        </button>
                    </div>
                </div>

                <!-- Enhanced Month Slider -->
                <div class="mb-8">
                    <div class="flex items-center justify-between mb-3">
                        <label for="month-slider" class="text-sm font-medium text-neutral-700">
                            Month: <span id="month-label" class="font-bold text-primary-600 text-lg">1</span>
                        </label>
                        <div class="flex items-center space-x-4 text-sm text-neutral-600">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-primary-500 rounded"></div>
                                <span>Team</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-accent-500 rounded"></div>
                                <span>Development</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-warning-500 rounded"></div>
                                <span>CAPEX</span>
                            </div>
                        </div>
                    </div>
                    <input id="month-slider" type="range" min="1" max="12" value="1" 
                           class="w-full h-3 bg-neutral-200 rounded-lg appearance-none cursor-pointer slider">
                    <div class="flex justify-between text-xs text-neutral-500 mt-2">
                        <span>Jan 2025</span>
                        <span>Mar 2025</span>
                        <span>Jun 2025</span>
                        <span>Sep 2025</span>
                        <span>Dec 2025</span>
                    </div>
                </div>
                
                <!-- Enhanced KPI Cards -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="kpi-card bg-gradient-to-br from-primary-50 to-primary-100 border-primary-200">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-calendar-day text-primary-600"></i>
                            <span class="text-xs font-medium text-primary-700 bg-primary-200 px-2 py-1 rounded-full">MONTHLY</span>
                        </div>
                        <p class="text-sm text-primary-700 font-medium">Monthly Spend</p>
                        <p id="kpi-gasto-mes" class="text-2xl font-bold text-primary-900"></p>
                    </div>
                    <div class="kpi-card bg-gradient-to-br from-accent-50 to-accent-100 border-accent-200">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-chart-line text-accent-600"></i>
                            <span class="text-xs font-medium text-accent-700 bg-accent-200 px-2 py-1 rounded-full">CUMULATIVE</span>
                        </div>
                        <p class="text-sm text-accent-700 font-medium">Total Spent</p>
                        <p id="kpi-gasto-acumulado" class="text-2xl font-bold text-accent-900"></p>
                    </div>
                    <div class="kpi-card bg-gradient-to-br from-warning-50 to-yellow-100 border-warning-200">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-wallet text-warning-600"></i>
                            <span class="text-xs font-medium text-warning-700 bg-warning-200 px-2 py-1 rounded-full">REMAINING</span>
                        </div>
                        <p class="text-sm text-warning-700 font-medium">Cash Available</p>
                        <p id="kpi-efectivo" class="text-2xl font-bold text-warning-900"></p>
                    </div>
                    <div class="kpi-card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-shield-alt text-purple-600"></i>
                            <span class="text-xs font-medium text-purple-700 bg-purple-200 px-2 py-1 rounded-full">BUFFER</span>
                        </div>
                        <p class="text-sm text-purple-700 font-medium">Emergency Fund</p>
                        <p class="text-2xl font-bold text-purple-900">$476K</p>
                    </div>
                </div>

                <!-- Enhanced Chart Container -->
                <div class="chart-container h-96">
                    <canvas id="financialPlanChart"></canvas>
                </div>

                <!-- Drill-down Details Panel -->
                <div id="financial-details" class="mt-6 p-6 bg-gradient-to-r from-neutral-50 to-neutral-100 rounded-lg border border-neutral-200 hidden">
                    <h4 class="font-bold text-lg mb-4 text-neutral-900">Month <span id="detail-month"></span> Breakdown</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div id="team-breakdown" class="space-y-2">
                            <h5 class="font-semibold text-primary-800 flex items-center">
                                <i class="fas fa-users mr-2"></i>Team Expenses
                            </h5>
                            <div class="text-sm text-neutral-700 space-y-1">
                                <div class="flex justify-between"><span>Core Team (3):</span><span id="core-team-cost"></span></div>
                                <div class="flex justify-between"><span>Additional Hires:</span><span id="additional-hires-cost"></span></div>
                                <div class="flex justify-between"><span>Benefits & Equity:</span><span id="benefits-cost"></span></div>
                            </div>
                        </div>
                        <div id="development-breakdown" class="space-y-2">
                            <h5 class="font-semibold text-accent-800 flex items-center">
                                <i class="fas fa-code mr-2"></i>Development
                            </h5>
                            <div class="text-sm text-neutral-700 space-y-1">
                                <div class="flex justify-between"><span>AI/ML Infrastructure:</span><span id="ai-infra-cost"></span></div>
                                <div class="flex justify-between"><span>SaaS Platform:</span><span id="saas-cost"></span></div>
                                <div class="flex justify-between"><span>Tools & Licenses:</span><span id="tools-cost"></span></div>
                            </div>
                        </div>
                        <div id="capex-breakdown" class="space-y-2">
                            <h5 class="font-semibold text-warning-800 flex items-center">
                                <i class="fas fa-truck mr-2"></i>CAPEX Investment
                            </h5>
                            <div class="text-sm text-neutral-700 space-y-1">
                                <div class="flex justify-between"><span>Vehicle Units:</span><span id="vehicle-cost"></span></div>
                                <div class="flex justify-between"><span>IoT Hardware:</span><span id="iot-cost"></span></div>
                                <div class="flex justify-between"><span>Installation:</span><span id="installation-cost"></span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ROI Scenario Analysis -->
            <div class="professional-card p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-h2 text-neutral-900">ROI Scenario Analysis</h3>
                    <div class="flex space-x-2">
                        <button class="scenario-btn active bg-accent-500 text-white px-4 py-2 rounded-lg text-sm font-medium" data-scenario="conservative">
                            Conservative
                        </button>
                        <button class="scenario-btn bg-neutral-200 text-neutral-700 hover:bg-neutral-300 px-4 py-2 rounded-lg text-sm font-medium" data-scenario="base">
                            Base Case
                        </button>
                        <button class="scenario-btn bg-neutral-200 text-neutral-700 hover:bg-neutral-300 px-4 py-2 rounded-lg text-sm font-medium" data-scenario="optimistic">
                            Optimistic
                        </button>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="chart-container h-64">
                        <canvas id="roiScenarioChart"></canvas>
                    </div>
                    <div class="space-y-4">
                        <div id="scenario-metrics" class="grid grid-cols-2 gap-4">
                            <div class="text-center p-4 bg-gradient-to-br from-accent-50 to-accent-100 rounded-lg border border-accent-200">
                                <div class="text-2xl font-bold text-accent-900" id="scenario-roi">457%</div>
                                <div class="text-sm text-accent-700">5-Year ROI</div>
                            </div>
                            <div class="text-center p-4 bg-gradient-to-br from-primary-50 to-primary-100 rounded-lg border border-primary-200">
                                <div class="text-2xl font-bold text-primary-900" id="scenario-payback">20</div>
                                <div class="text-sm text-primary-700">Months Payback</div>
                            </div>
                        </div>
                        <div class="space-y-3 text-sm">
                            <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg">
                                <span class="font-medium">Annual Savings:</span>
                                <span id="scenario-savings" class="font-bold text-accent-600">$6.3M MXN</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg">
                                <span class="font-medium">Series A Valuation:</span>
                                <span id="scenario-valuation" class="font-bold text-primary-600">$45M MXN</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg">
                                <span class="font-medium">Market Penetration:</span>
                                <span id="scenario-penetration" class="font-bold text-warning-600">0.8%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enhanced Technology Roadmap Section -->
        <section id="tech-roadmap" class="mb-20 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-h1 text-neutral-900 mb-4">Technology Roadmap</h2>
                <p class="text-xl text-neutral-600 max-w-4xl mx-auto">
                    Sequential risk mitigation approach: validate critical hypotheses first through our proprietary AI workforce ecosystem.
                </p>
            </div>

            <!-- AI Agents Overview Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="professional-card p-6 cursor-pointer agent-card" data-agent="hase">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-brain text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">CORE ENGINE</span>
                    </div>
                    <h3 class="text-lg font-bold text-neutral-900 mb-2">HASE</h3>
                    <p class="text-sm text-neutral-600 mb-3">Risk Scoring Engine</p>
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Budget:</span>
                            <span class="font-bold text-blue-600">$600K</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Timeline:</span>
                            <span class="font-medium">Months 1-6</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Target AUC:</span>
                            <span class="font-bold text-accent-600">>90%</span>
                        </div>
                    </div>
                </div>

                <div class="professional-card p-6 cursor-pointer agent-card" data-agent="pia">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-comments text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">INTERVENTION</span>
                    </div>
                    <h3 class="text-lg font-bold text-neutral-900 mb-2">PIA</h3>
                    <p class="text-sm text-neutral-600 mb-3">Proactive Intervention Agent</p>
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Budget:</span>
                            <span class="font-bold text-green-600">$400K</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Timeline:</span>
                            <span class="font-medium">Months 2-12</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Adoption:</span>
                            <span class="font-bold text-accent-600">>60%</span>
                        </div>
                    </div>
                </div>

                <div class="professional-card p-6 cursor-pointer agent-card" data-agent="super-pma">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-truck text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">MONETIZATION</span>
                    </div>
                    <h3 class="text-lg font-bold text-neutral-900 mb-2">Super-PMA</h3>
                    <p class="text-sm text-neutral-600 mb-3">Predictive Maintenance Agent</p>
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Budget:</span>
                            <span class="font-bold text-purple-600">$450K</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Timeline:</span>
                            <span class="font-medium">Months 3-12</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Revenue:</span>
                            <span class="font-bold text-accent-600">$300+/month</span>
                        </div>
                    </div>
                </div>

                <div class="professional-card p-6 cursor-pointer agent-card" data-agent="asistente">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-robot text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">SUPPORT</span>
                    </div>
                    <h3 class="text-lg font-bold text-neutral-900 mb-2">Digital Assistant</h3>
                    <p class="text-sm text-neutral-600 mb-3">Multimodal Support Agent</p>
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Budget:</span>
                            <span class="font-bold text-orange-600">$250K</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Timeline:</span>
                            <span class="font-medium">Months 4-12</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Automation:</span>
                            <span class="font-bold text-accent-600">~70%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Gantt Chart -->
            <div class="professional-card p-8 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-2">Development Timeline & Dependencies</h3>
                        <p class="text-neutral-600">Interactive Gantt view showing critical path, resource allocation, and inter-agent dependencies.</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="gantt-view-toggle" class="bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-project-diagram mr-2"></i>Dependencies
                        </button>
                        <button id="resource-overlay" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-users mr-2"></i>Resources
                        </button>
                    </div>
                </div>
                
                <!-- Gantt Chart Container -->
                <div id="gantt-container" class="relative">
                    <!-- Month Headers -->
                    <div class="grid grid-cols-12 gap-2 mb-4 text-center text-sm font-medium text-neutral-600">
                        <div>Jan</div><div>Feb</div><div>Mar</div><div>Apr</div><div>May</div><div>Jun</div>
                        <div>Jul</div><div>Aug</div><div>Sep</div><div>Oct</div><div>Nov</div><div>Dec</div>
                    </div>
                    
                    <!-- Gantt Bars -->
                    <div class="space-y-4" id="gantt-bars">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Detailed Agent Breakdown Modal -->
            <div id="agent-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-8">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center space-x-4">
                                <div id="modal-agent-icon" class="w-16 h-16 rounded-xl flex items-center justify-center">
                                    <i id="modal-agent-icon-class" class="text-white text-2xl"></i>
                                </div>
                                <div>
                                    <h3 id="modal-agent-title" class="text-2xl font-bold text-neutral-900"></h3>
                                    <p id="modal-agent-subtitle" class="text-neutral-600"></p>
                                </div>
                            </div>
                            <button id="close-modal" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                                <i class="fas fa-times text-neutral-500"></i>
                            </button>
                        </div>

                        <!-- Agent Details Grid -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Budget Breakdown -->
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                    <i class="fas fa-dollar-sign text-primary-500 mr-3"></i>
                                    Budget Breakdown
                                </h4>
                                <div id="modal-budget-details" class="space-y-3">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>

                            <!-- Technical Stack -->
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                    <i class="fas fa-code text-accent-500 mr-3"></i>
                                    Tech Stack
                                </h4>
                                <div id="modal-tech-stack" class="space-y-2">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>

                            <!-- KPIs & Metrics -->
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                    <i class="fas fa-chart-line text-warning-500 mr-3"></i>
                                    Key Performance Indicators
                                </h4>
                                <div id="modal-kpis" class="space-y-3">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>

                            <!-- Timeline & Milestones -->
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                    <i class="fas fa-calendar-alt text-purple-500 mr-3"></i>
                                    Timeline & Milestones
                                </h4>
                                <div id="modal-timeline" class="space-y-3">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Resource Allocation Chart -->
                        <div class="mt-8 professional-card p-6">
                            <h4 class="text-lg font-bold text-neutral-900 mb-4">Resource Allocation Over Time</h4>
                            <div class="chart-container h-64">
                                <canvas id="agent-resource-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. Plan Operativo y de Negocio -->
        <section id="operations-plan" class="mb-16 scroll-mt-16">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-2">Plan Operativo (COO/CEO View)</h2>
            <p class="text-lg text-slate-600 mb-8">Sincronizando GTM, legal y el piloto con los hitos tecnológicos para construir un negocio viable.</p>
            
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="font-bold text-xl mb-2 text-teal-800">Hitos Operativos y de Negocio</h3>
                <p class="text-slate-600 mb-6">Las actividades operativas están programadas para capitalizar los avances tecnológicos, asegurando la construcción de un negocio sólido y legalmente compatible. El enfoque legal ágil evita la carga regulatoria prematura de una SOFOM.</p>
                <div id="ops-timeline-container" class="space-y-4"></div>
                <div id="ops-details-pane" class="mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200 hidden">
                    <h4 id="ops-details-title" class="font-bold text-lg mb-2"></h4>
                    <p id="ops-details-tasks" class="text-sm text-slate-700 whitespace-pre-line"></p>
                    <p id="ops-details-kpi" class="text-sm font-semibold text-orange-600 mt-2"></p>
                </div>
            </div>
        </section>

        <!-- 4. Plan de Asignación de Recursos Humanos -->
        <section id="team-execution" class="scroll-mt-16">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-2">Plan de Equipo (HR View)</h2>
            <p class="text-lg text-slate-600 mb-8">La ventaja competitiva más defendible y el principal mitigador del riesgo de ejecución.</p>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="font-bold text-xl mb-4 text-teal-800">La Piedra Angular: El Núcleo ESOP</h3>
                    <div class="space-y-4 text-slate-700">
                        <p>La certeza de ejecución recae sobre un equipo pre-ensamblado de 3 miembros técnicos senior con química y velocidad probadas.</p>
                        <blockquote class="border-l-4 border-orange-500 pl-4 italic">
                            Su compensación es estratégica: salarios bajos más un <strong>~7% de equity</strong> colectivo, creando <strong>"golden handcuffs"</strong> que eliminan el riesgo de fuga de talento.
                        </blockquote>
                        <p>Para los inversionistas, esto no es un plan de RRHH, es la garantía de que el equipo que construye el valor permanecerá para entregarlo. Es una asignación de capital sofisticada que dirige el equity a los creadores de IP a largo plazo.</p>
                    </div>
                </div>
                 <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="font-bold text-xl mb-4 text-teal-800">Asignación de Recursos Mensual</h3>
                    <p class="text-slate-600 mb-4">La tabla muestra cómo cada hora de trabajo del equipo técnico está directamente vinculada a un hito del plan maestro. Use el filtro para seguir la trayectoria de un rol específico.</p>
                    
                    <div class="mb-4">
                        <label for="role-filter" class="block text-sm font-medium text-gray-700">Filtrar por Rol:</label>
                        <select id="role-filter" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md">
                            <option value="all">Todos los Roles</option>
                        </select>
                    </div>

                    <div class="overflow-x-auto">
                        <table id="hr-table" class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rol</th>
                                    <!-- Months will be generated by JS -->
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <!-- Rows will be generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Floating Action Button -->
    <div class="fab" id="fab" title="Executive Summary">
        <i class="fas fa-star"></i>
    </div>

    <footer class="bg-neutral-800 text-white mt-20">
        <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p>&copy; 2025 Rodando a Gas. Plan Maestro Interactivo.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- ENHANCED DATA STRUCTURES ---
            const financialData = {
                labels: Array.from({ length: 12 }, (_, i) => `Month ${i + 1}`),
                gastoEquipo: [110000, 125000, 125000, 125000, 125000, 125000, 125000, 125000, 125000, 125000, 125000, 115000],
                gastoDesarrollo: [190000, 210000, 255000, 245000, 245000, 245000, 225000, 225000, 225000, 190000, 190000, 206000],
                gastoCapex: [0, 0, 0, 0, 0, 876667, 876667, 876666, 0, 0, 0, 0],
                gastoTotal: [],
                gastoAcumulado: [],
                efectivoRestante: [],
                inversionInicial: 7260000,
                // Detailed breakdowns for drill-down
                teamBreakdown: [
                    {coreTeam: 85000, additionalHires: 15000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 85000, additionalHires: 20000, benefits: 10000}
                ],
                developmentBreakdown: [
                    {aiInfra: 120000, saas: 50000, tools: 20000},
                    {aiInfra: 130000, saas: 60000, tools: 20000},
                    {aiInfra: 150000, saas: 80000, tools: 25000},
                    {aiInfra: 140000, saas: 80000, tools: 25000},
                    {aiInfra: 140000, saas: 80000, tools: 25000},
                    {aiInfra: 140000, saas: 80000, tools: 25000},
                    {aiInfra: 120000, saas: 80000, tools: 25000},
                    {aiInfra: 120000, saas: 80000, tools: 25000},
                    {aiInfra: 120000, saas: 80000, tools: 25000},
                    {aiInfra: 100000, saas: 70000, tools: 20000},
                    {aiInfra: 100000, saas: 70000, tools: 20000},
                    {aiInfra: 110000, saas: 76000, tools: 20000}
                ],
                capexBreakdown: [
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 750000, iot: 100000, installation: 26667},
                    {vehicles: 750000, iot: 100000, installation: 26667},
                    {vehicles: 750000, iot: 100000, installation: 26666},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0}
                ]
            };

            // Calculate totals
            let acumulado = 0;
            for (let i = 0; i < 12; i++) {
                const totalMes = financialData.gastoEquipo[i] + financialData.gastoDesarrollo[i] + financialData.gastoCapex[i];
                financialData.gastoTotal.push(totalMes);
                acumulado += totalMes;
                financialData.gastoAcumulado.push(acumulado);
                financialData.efectivoRestante.push(financialData.inversionInicial - acumulado);
            }

            const investmentData = {
                labels: ['Core AI + SaaS Development', 'Pilot Investment (CAPEX)', 'Team & Operations', 'Emergency Reserve'],
                datasets: [{
                    data: [2326000, 2630000, 1828000, 476000],
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.8)',  // Primary
                        'rgba(16, 185, 129, 0.8)',  // Accent
                        'rgba(245, 158, 11, 0.8)',  // Warning
                        'rgba(139, 92, 246, 0.8)'   // Purple
                    ],
                    borderColor: [
                        'rgb(59, 130, 246)',
                        'rgb(16, 185, 129)',
                        'rgb(245, 158, 11)',
                        'rgb(139, 92, 246)'
                    ],
                    borderWidth: 2
                }]
            };

            // ROI Scenarios Data
            const roiScenarios = {
                conservative: {
                    roi: '320%',
                    payback: 24,
                    savings: '$4.8M MXN',
                    valuation: '$35M MXN',
                    penetration: '0.5%'
                },
                base: {
                    roi: '457%',
                    payback: 20,
                    savings: '$6.3M MXN',
                    valuation: '$45M MXN',
                    penetration: '0.8%'
                },
                optimistic: {
                    roi: '680%',
                    payback: 16,
                    savings: '$8.2M MXN',
                    valuation: '$65M MXN',
                    penetration: '1.2%'
                }
            };

            // COMPREHENSIVE AI AGENTS DATA - Complete Triple-Click Details
            const agentDetails = {
                "hase": {
                    name: "HASE",
                    fullName: "Hybrid Adaptive Scoring Engine",
                    description: "Risk Scoring Engine - The foundation of our AI-Native advantage",
                    budget: "$600,000",
                    hours: "1,440",
                    timeline: {
                        start: 1,
                        end: 6,
                        phases: [
                            { name: "Foundation", months: "1-3", description: "Data ingestion, feature engineering, model training v0.5-v0.8" },
                            { name: "Production", months: "4-6", description: "Production deployment, API development, validation" }
                        ]
                    },
                    breakdown: {
                        software: { amount: "$540,000", description: "Data Scientist + ML Engineer + Backend dev hours" },
                        infrastructure: { amount: "$50,000", description: "AWS/GCP compute, GPU training, databases" },
                        licenses: { amount: "$10,000", description: "MLflow, MLOps tools" }
                    },
                    kpis: [
                        { metric: ">80% AUC", target: "Month 3", status: "foundation" },
                        { metric: ">90% AUC", target: "Month 6", status: "production" }
                    ],
                    techStack: ["Python", "XGBoost", "FastAPI", "SHAP", "PostgreSQL", "TimescaleDB"],
                    icon: "fas fa-brain",
                    color: "from-blue-500 to-blue-600",
                    dependencies: []
                },
                "pia": {
                    name: "PIA",
                    fullName: "Proactive Intervention Agent",
                    description: "WhatsApp-based intervention system reducing delinquency through behavioral nudges",
                    budget: "$400,000",
                    hours: "976",
                    timeline: {
                        start: 2,
                        end: 12,
                        phases: [
                            { name: "Development", months: "2-5", description: "WhatsApp API integration, decision trees, LLM prompts" },
                            { name: "Validation", months: "6-12", description: "Pilot testing, adoption tracking, effectiveness measurement" }
                        ]
                    },
                    breakdown: {
                        software: { amount: "$310,000", description: "ML Engineer + Full-Stack dev hours" },
                        licenses_apis: { amount: "$75,000", description: "WhatsApp Business API, Twilio, LLMs" },
                        infrastructure: { amount: "$15,000", description: "Cloud hosting, message queue" }
                    },
                    kpis: [
                        { metric: ">60% adoption rate", target: "Month 8", status: "critical" },
                        { metric: "50-67% delinquency reduction", target: "Month 12", status: "revenue-impact" }
                    ],
                    techStack: ["WhatsApp Business API", "Twilio", "LLMs", "Decision Trees", "Node.js"],
                    icon: "fas fa-comments",
                    color: "from-green-500 to-green-600",
                    dependencies: ["hase"]
                },
                "super-pma": {
                    name: "Super-PMA",
                    fullName: "Super Predictive Maintenance Agent",
                    description: "IoT-powered predictive maintenance marketplace generating recurring revenue",
                    budget: "$450,000",
                    hours: "1,024",
                    timeline: {
                        start: 3,
                        end: 12,
                        phases: [
                            { name: "Development", months: "3-8", description: "IoT integration, predictive algorithms, marketplace MVP" },
                            { name: "Marketplace Validation", months: "7-12", description: "Revenue generation, service provider network, optimization" }
                        ]
                    },
                    breakdown: {
                        software: { amount: "$350,000", description: "Data Scientist + IoT Engineer + Full-Stack dev" },
                        infrastructure: { amount: "$60,000", description: "Apache Kafka, real-time streaming" },
                        hardware: { amount: "$20,000", description: "OBD-II, GPS, sensors for testing" },
                        licenses: { amount: "$20,000", description: "IoT platforms, telematic analysis tools" }
                    },
                    kpis: [
                        { metric: ">$300 MXN/vehicle/month", target: "Month 10", status: "revenue-critical" },
                        { metric: "25% maintenance cost reduction", target: "Month 12", status: "value-prop" },
                        { metric: "30-50% downtime reduction", target: "Month 12", status: "operational" }
                    ],
                    techStack: ["RandomForest", "XGBoost", "Apache Kafka", "OBD-II", "GPS sensors", "React Native"],
                    icon: "fas fa-truck",
                    color: "from-purple-500 to-purple-600",
                    dependencies: ["hase"]
                },
                "asistente": {
                    name: "Digital Assistant",
                    fullName: "Multimodal Digital Assistant",
                    description: "GPT-4 Vision powered support agent automating 70% of customer queries",
                    budget: "$250,000",
                    hours: "1,024",
                    timeline: {
                        start: 4,
                        end: 12,
                        phases: [
                            { name: "Development", months: "4-8", description: "Chatbot core, knowledge base, diagnostic capabilities" },
                            { name: "Optimization", months: "7-12", description: "Image analysis, automation refinement, NPS tracking" }
                        ]
                    },
                    breakdown: {
                        software: { amount: "$180,000", description: "ML Engineer + Full-Stack dev" },
                        licenses_apis: { amount: "$55,000", description: "GPT-4 Vision, Claude 3, Make/n8n" },
                        infrastructure: { amount: "$15,000", description: "Chatbot hosting, diagnostic API" }
                    },
                    kpis: [
                        { metric: "~70% query automation", target: "Month 10", status: "efficiency" },
                        { metric: "30-40% service cost reduction", target: "Month 12", status: "cost-savings" },
                        { metric: "NPS >70", target: "Month 12", status: "satisfaction" }
                    ],
                    techStack: ["GPT-4 Vision", "Claude 3", "BERT", "Make/n8n", "WhatsApp", "Python"],
                    icon: "fas fa-robot",
                    color: "from-orange-500 to-orange-600",
                    dependencies: ["pia"]
                }
            };

            // TEAM ALLOCATION - Complete 8 people x 12 months matrix
            const teamAllocation = {
                "Científico_Datos": {
                    salary: "$35,000/month",
                    equity: "~3.0%",
                    totalCost: "$420,000",
                    hours: "960",
                    allocation: [
                        "HASE (100%)", "HASE (100%)", "HASE (80%) Super-PMA (20%)", 
                        "Super-PMA (80%) HASE (20%)", "Super-PMA (100%)", "Super-PMA (100%)",
                        "Análisis Piloto (HASE, PMA)", "Análisis Piloto (HASE, PMA)", "Optimización Modelos",
                        "Documentación (Modelos)", "Soporte (Serie A)", "Soporte (Serie A)"
                    ]
                },
                "Ingeniero_ML": {
                    salary: "$30,000/month",
                    equity: "~2.0%",
                    totalCost: "$360,000",
                    hours: "992",
                    allocation: [
                        "HASE (100%)", "PIA (50%) HASE (50%)", "PIA (80%) Asistente (20%)",
                        "PIA (70%) Asistente (30%)", "PIA (100%)", "Asistente (70%) PIA (30%)",
                        "Asistente (100%)", "Análisis Piloto (PIA, Asistente)", "Optimización Modelos",
                        "Documentación (IA)", "Soporte (Serie A)", "Soporte (Serie A)"
                    ]
                },
                "Full_Stack_Dev": {
                    salary: "$30,000/month",
                    equity: "~2.0%",
                    totalCost: "$360,000",
                    hours: "800",
                    allocation: [
                        "SaaS (100%)", "SaaS (80%) PIA (20%)", "SaaS (50%) PIA (50%)",
                        "Asistente (50%) PMA (50%)", "Asistente (50%) PMA (50%)", "Integración Piloto",
                        "Soporte Piloto", "Optimización General", "Soporte GTM",
                        "Soporte (Serie A)", "Soporte (Serie A)", "Soporte (Serie A)"
                    ]
                },
                "Backend_Dev": {
                    salary: "$9,000/month",
                    totalCost: "$108,000",
                    hours: "944",
                    allocation: [
                        "-", "HASE (API)", "HASE (API)", "PIA (API)", "PIA (API)",
                        "Integración General", "Soporte Piloto", "Soporte Piloto",
                        "Optimización Backend", "Documentación API", "Mantenimiento", "Mantenimiento"
                    ]
                },
                "IoT_Engineer": {
                    salary: "$9,000/month",
                    totalCost: "$108,000",
                    hours: "768",
                    allocation: [
                        "-", "Super-PMA (HW)", "Super-PMA (HW)", "Super-PMA (Streaming)",
                        "Super-PMA (Streaming)", "Despliegue Piloto", "Monitoreo Piloto",
                        "Monitoreo Piloto", "Optimización Datos", "Documentación HW", "Mantenimiento", "Mantenimiento"
                    ]
                },
                "Frontend_Dev": {
                    salary: "$9,000/month",
                    totalCost: "$108,000",
                    hours: "640",
                    duration: "8 months",
                    allocation: [
                        "-", "-", "App (UI/UX)", "App (Dashboard)", "App (Backend Connect)",
                        "App (QA)", "App (Feedback)", "App (Feedback)", "App (Ajustes)",
                        "Finalización App", "-", "Soporte (Serie A)"
                    ]
                },
                "DevOps_Engineer": {
                    salary: "$9,000/month",
                    totalCost: "$108,000",
                    hours: "960",
                    duration: "6 months",
                    allocation: [
                        "Infra (Cloud, CI/CD)", "Infra (DBs)", "Infra (Seguridad)", "Monitoreo",
                        "Monitoreo", "Soporte Piloto", "Soporte Piloto", "Optimización Infra",
                        "-", "-", "-", "-"
                    ]
                },
                "QA_Engineer": {
                    salary: "$9,000/month",
                    totalCost: "$108,000",
                    hours: "960",
                    duration: "6 months",
                    allocation: [
                        "-", "-", "-", "-", "-", "Pruebas (Carga)",
                        "Pruebas (Piloto)", "Pruebas (Piloto)", "Pruebas (Regresión)",
                        "Documentación QA", "-", "-"
                    ]
                }
            };
            
            const techTimelineData = [
                { category: 'HASE', start: 1, end: 3, color: '#0d9488', tasks: 'Ingesta de datos, definición de features, entrenamiento de modelos v0.5 a v0.8.', milestone: 'Hito: HASE v0.8 entrenado con >80% de precisión (AUC).' },
                { category: 'PIA', start: 1, end: 5, color: '#0f766e', tasks: 'Diseño de arquitectura, motor de alertas, integración WhatsApp Business API, pruebas MVP.', milestone: 'Hito: MVP de PIA funcional.' },
                { category: 'Super-PMA', start: 3, end: 8, color: '#115e59', tasks: 'Diseño de integración IoT, desarrollo motor predictivo, marketplace básico, optimización con datos del piloto.', milestone: 'Hito: MVP del marketplace funcional.' },
                { category: 'Asistente Digital', start: 4, end: 8, color: '#134e4a', tasks: 'Núcleo del chatbot, base de conocimiento, diagnóstico por texto, análisis de imagen básico.', milestone: 'Hito: MVP multimodal del Asistente funcional.' },
                { category: 'Optimización y Serie A', start: 9, end: 12, color: '#f59e0b', tasks: 'Refinamiento de los 4 agentes, análisis de datos, preparación de data room técnico y roadmap para Serie A.', milestone: 'Hito: Term sheet de Serie A en negociación.' }
            ];

            const opsTimelineData = [
                { phase: 'Meses 1-3: Fundación y Preparación', color: '#0d9488', tasks: 'GTM: Identificación y pre-calificación de operadores para el piloto.\nLegales: Desarrollo y registro de contratos de adhesión ante PROFECO.\nPiloto: Negociación y compra de las 3 unidades Higer H6C.\nProducto: Definición de métricas de éxito del piloto.', kpi: 'KPI: 100% de operadores del piloto pre-seleccionados. Contratos registrados.' },
                { phase: 'Meses 4-6: Lanzamiento y Despliegue', color: '#0f766e', tasks: 'GTM: Firma de contratos con operadores del piloto.\nLegales: Validación de cumplimiento para PLD.\nPiloto: Instalación de hardware IoT. Despliegue de la primera unidad.\nProducto: Lanzamiento de la App Android MVP.', kpi: 'KPI: 3 contratos de piloto firmados. 1ra unidad operando.' },
                { phase: 'Meses 7-9: Validación y Recolección de Datos', color: '#115e59', tasks: 'GTM: Onboarding y soporte continuo a los operadores.\nLegales: Auditoría de cumplimiento y preparación de políticas.\nPiloto: Despliegue de unidades 2 y 3. Monitoreo 24/7.\nProducto: Recolección de feedback y datos de rendimiento.', kpi: 'KPI: 3 unidades operando >95% del tiempo. NPS > 50.' },
                { phase: 'Meses 10-12: Tracción y Preparación Serie A', color: '#f59e0b', tasks: 'GTM: Documentación de testimoniales y casos de éxito.\nLegales: Preparación del data room legal para la S.A.P.I.\nPiloto: Análisis final de datos y reportes de economía unitaria.\nProducto: Consolidación del roadmap de producto para la Serie A.', kpi: 'KPI: Morosidad del piloto en 0%. NPS > 70. Data room completo.' }
            ];

            const hrData = {
                roles: ['Científico de Datos', 'Ingeniero de ML', 'Desarrollador Full-Stack', 'Desarrollador Backend', 'Desarrollador IoT', 'Desarrollador Frontend', 'Ingeniero DevOps', 'Ingeniero QA'],
                allocations: [
                    ['HASE (100%)', 'HASE (100%)', 'HASE (80%) Super-PMA (20%)', 'Super-PMA (80%) HASE (20%)', 'Super-PMA (100%)', 'Super-PMA (100%)', 'Análisis Piloto (HASE, PMA)', 'Análisis Piloto (HASE, PMA)', 'Optimización Modelos', 'Documentación (Modelos)', 'Soporte (Serie A)', 'Soporte (Serie A)'],
                    ['HASE (100%)', 'PIA (50%) HASE (50%)', 'PIA (80%) Asistente (20%)', 'PIA (70%) Asistente (30%)', 'PIA (100%)', 'Asistente (70%) PIA (30%)', 'Asistente (100%)', 'Análisis Piloto (PIA, Asistente)', 'Optimización Modelos', 'Documentación (IA)', 'Soporte (Serie A)', 'Soporte (Serie A)'],
                    ['SaaS (100%)', 'SaaS (80%) PIA (20%)', 'SaaS (50%) PIA (50%)', 'Asistente (50%) PMA (50%)', 'Asistente (50%) PMA (50%)', 'Integración Piloto', 'Soporte Piloto', 'Optimización General', 'Soporte GTM', 'Soporte (Serie A)', 'Soporte (Serie A)', 'Soporte (Serie A)'],
                    ['-', 'HASE (API)', 'HASE (API)', 'PIA (API)', 'PIA (API)', 'Integración General', 'Soporte Piloto', 'Soporte Piloto', 'Optimización Backend', 'Documentación API', 'Mantenimiento', 'Mantenimiento'],
                    ['-', 'Super-PMA (HW)', 'Super-PMA (HW)', 'Super-PMA (Streaming)', 'Super-PMA (Streaming)', 'Despliegue Piloto', 'Monitoreo Piloto', 'Monitoreo Piloto', 'Optimización Datos', 'Documentación HW', 'Mantenimiento', 'Mantenimiento'],
                    ['-', '-', 'App (UI/UX)', 'App (Dashboard)', 'App (Backend Connect)', 'App (QA)', 'App (Feedback)', 'App (Feedback)', 'App (Ajustes)', 'Finalización App', '-', 'Soporte (Serie A)'],
                    ['Infra (Cloud, CI/CD)', 'Infra (DBs)', 'Infra (Seguridad)', 'Monitoreo', 'Monitoreo', 'Soporte Piloto', 'Soporte Piloto', 'Optimización Infra', '-', '-', '-', '-'],
                    ['-', '-', '-', '-', '-', 'Pruebas (Carga)', 'Pruebas (Piloto)', 'Pruebas (Piloto)', 'Pruebas (Regresión)', 'Documentación QA', '-', '-']
                ]
            };

            // --- ENHANCED CHARTS ---

            // Investment Sankey Chart (using Chart.js doughnut as approximation)
            const sankeyCtx = document.getElementById('investmentSankeyChart').getContext('2d');
            new Chart(sankeyCtx, {
                type: 'doughnut',
                data: investmentData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '65%',
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.95)',
                            titleColor: '#f1f5f9',
                            bodyColor: '#f1f5f9',
                            borderColor: 'rgba(59, 130, 246, 0.5)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    const percentage = ((context.parsed / 7260000) * 100).toFixed(1);
                                    return `${context.label}: ${new Intl.NumberFormat('en-US', { 
                                        style: 'currency', 
                                        currency: 'USD',
                                        minimumFractionDigits: 0,
                                        maximumFractionDigits: 0
                                    }).format(context.parsed)} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateRotate: true,
                        duration: 1500,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // Enhanced Financial Plan Chart
            const financialCtx = document.getElementById('financialPlanChart').getContext('2d');
            const financialChart = new Chart(financialCtx, {
                type: 'bar',
                data: {
                    labels: financialData.labels,
                    datasets: [
                        {
                            label: 'Team Expenses',
                            data: financialData.gastoEquipo,
                            backgroundColor: 'rgba(59, 130, 246, 0.8)',
                            borderColor: 'rgb(59, 130, 246)',
                            borderWidth: 1,
                            stack: 'Stack 0',
                        },
                        {
                            label: 'Development Costs',
                            data: financialData.gastoDesarrollo,
                            backgroundColor: 'rgba(16, 185, 129, 0.8)',
                            borderColor: 'rgb(16, 185, 129)',
                            borderWidth: 1,
                            stack: 'Stack 0',
                        },
                        {
                            label: 'CAPEX Investment',
                            data: financialData.gastoCapex,
                            backgroundColor: 'rgba(245, 158, 11, 0.8)',
                            borderColor: 'rgb(245, 158, 11)',
                            borderWidth: 1,
                            stack: 'Stack 0',
                        },
                        {
                            label: 'Cash Remaining',
                            data: financialData.efectivoRestante,
                            type: 'line',
                            borderColor: 'rgb(139, 92, 246)',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            fill: true,
                            yAxisID: 'y1',
                            tension: 0.4,
                            borderWidth: 3,
                            pointBackgroundColor: 'rgb(139, 92, 246)',
                            pointBorderColor: 'white',
                            pointBorderWidth: 2,
                            pointRadius: 6,
                            pointHoverRadius: 8
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.95)',
                            titleColor: '#f1f5f9',
                            bodyColor: '#f1f5f9',
                            borderColor: 'rgba(59, 130, 246, 0.5)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += new Intl.NumberFormat('en-US', { 
                                            style: 'currency', 
                                            currency: 'USD', 
                                            minimumFractionDigits: 0,
                                            maximumFractionDigits: 0
                                        }).format(context.parsed.y);
                                    }
                                    return label;
                                },
                                afterBody: function(context) {
                                    const monthIndex = context[0].dataIndex;
                                    const month = monthIndex + 1;
                                    return [`Click to view Month ${month} breakdown`];
                                }
                            }
                        },
                        legend: {
                            position: 'top',
                            align: 'end',
                            labels: {
                                usePointStyle: true,
                                pointStyle: 'circle',
                                padding: 20,
                                font: {
                                    size: 12,
                                    weight: '500'
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            grid: { 
                                display: false 
                            },
                            ticks: {
                                font: {
                                    size: 11,
                                    weight: '500'
                                },
                                color: '#64748b'
                            }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Monthly Expenditure (USD)',
                                font: {
                                    size: 12,
                                    weight: '600'
                                },
                                color: '#334155'
                            },
                            ticks: {
                                callback: value => `$${(value / 1000).toFixed(0)}K`,
                                font: {
                                    size: 11
                                },
                                color: '#64748b'
                            },
                            grid: {
                                color: 'rgba(148, 163, 184, 0.2)'
                            }
                        },
                        y1: {
                            position: 'right',
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Cash Remaining (USD)',
                                font: {
                                    size: 12,
                                    weight: '600'
                                },
                                color: '#334155'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                            ticks: {
                                callback: value => `$${(value / 1000000).toFixed(1)}M`,
                                font: {
                                    size: 11
                                },
                                color: '#64748b'
                            }
                        }
                    },
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const monthIndex = elements[0].index;
                            showFinancialDetails(monthIndex + 1);
                        }
                    }
                }
            });

            // ROI Scenario Chart
            const roiCtx = document.getElementById('roiScenarioChart').getContext('2d');
            let roiChart = new Chart(roiCtx, {
                type: 'line',
                data: {
                    labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'],
                    datasets: [{
                        label: 'Conservative',
                        data: [0, 50, 120, 200, 320],
                        borderColor: 'rgb(245, 158, 11)',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.95)',
                            titleColor: '#f1f5f9',
                            bodyColor: '#f1f5f9',
                            borderColor: 'rgba(59, 130, 246, 0.5)',
                            borderWidth: 1,
                            cornerRadius: 8
                        }
                    },
                    scales: {
                        x: {
                            grid: { display: false },
                            ticks: {
                                font: { size: 11, weight: '500' },
                                color: '#64748b'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'ROI (%)',
                                font: { size: 12, weight: '600' },
                                color: '#334155'
                            },
                            ticks: {
                                callback: value => `${value}%`,
                                font: { size: 11 },
                                color: '#64748b'
                            },
                            grid: {
                                color: 'rgba(148, 163, 184, 0.2)'
                            }
                        }
                    },
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // --- ENHANCED INTERACTIONS ---

            // Financial Slider with Enhanced Features
            const slider = document.getElementById('month-slider');
            const monthLabel = document.getElementById('month-label');
            const kpiGastoMes = document.getElementById('kpi-gasto-mes');
            const kpiGastoAcumulado = document.getElementById('kpi-gasto-acumulado');
            const kpiEfectivo = document.getElementById('kpi-efectivo');

            function formatCurrency(value) {
                if (value >= 1000000) return `$${(value / 1000000).toFixed(2)}M`;
                if (value >= 1000) return `$${(value / 1000).toFixed(0)}K`;
                return `$${Math.round(value).toLocaleString()}`;
            }

            function updateFinancials(month) {
                const index = month - 1;
                monthLabel.textContent = month;
                kpiGastoMes.textContent = formatCurrency(financialData.gastoTotal[index]);
                kpiGastoAcumulado.textContent = formatCurrency(financialData.gastoAcumulado[index]);
                kpiEfectivo.textContent = formatCurrency(financialData.efectivoRestante[index]);
                
                // Highlight current month in chart
                financialChart.data.datasets.forEach((dataset, datasetIndex) => {
                    if (dataset.type !== 'line') {
                        dataset.borderWidth = Array(12).fill(1);
                        dataset.borderWidth[index] = 3;
                        dataset.borderColor = Array(12).fill(dataset.borderColor);
                        dataset.borderColor[index] = '#1e293b';
                    }
                });
                financialChart.update('none');
            }

            // Show detailed financial breakdown
            function showFinancialDetails(month) {
                const index = month - 1;
                const detailsPanel = document.getElementById('financial-details');
                const detailMonth = document.getElementById('detail-month');
                
                // Update month
                detailMonth.textContent = month;
                
                // Update team breakdown
                const teamData = financialData.teamBreakdown[index];
                document.getElementById('core-team-cost').textContent = formatCurrency(teamData.coreTeam);
                document.getElementById('additional-hires-cost').textContent = formatCurrency(teamData.additionalHires);
                document.getElementById('benefits-cost').textContent = formatCurrency(teamData.benefits);
                
                // Update development breakdown
                const devData = financialData.developmentBreakdown[index];
                document.getElementById('ai-infra-cost').textContent = formatCurrency(devData.aiInfra);
                document.getElementById('saas-cost').textContent = formatCurrency(devData.saas);
                document.getElementById('tools-cost').textContent = formatCurrency(devData.tools);
                
                // Update CAPEX breakdown
                const capexData = financialData.capexBreakdown[index];
                document.getElementById('vehicle-cost').textContent = formatCurrency(capexData.vehicles);
                document.getElementById('iot-cost').textContent = formatCurrency(capexData.iot);
                document.getElementById('installation-cost').textContent = formatCurrency(capexData.installation);
                
                // Show the panel with animation
                detailsPanel.classList.remove('hidden');
                detailsPanel.style.opacity = '0';
                detailsPanel.style.transform = 'translateY(10px)';
                
                setTimeout(() => {
                    detailsPanel.style.transition = 'all 0.3s ease';
                    detailsPanel.style.opacity = '1';
                    detailsPanel.style.transform = 'translateY(0)';
                }, 10);
            }

            // ROI Scenario switching
            function updateROIScenario(scenario) {
                const scenarioData = roiScenarios[scenario];
                
                // Update metrics
                document.getElementById('scenario-roi').textContent = scenarioData.roi;
                document.getElementById('scenario-payback').textContent = scenarioData.payback;
                document.getElementById('scenario-savings').textContent = scenarioData.savings;
                document.getElementById('scenario-valuation').textContent = scenarioData.valuation;
                document.getElementById('scenario-penetration').textContent = scenarioData.penetration;
                
                // Update chart data based on scenario
                let chartData;
                switch(scenario) {
                    case 'conservative':
                        chartData = [0, 50, 120, 200, 320];
                        roiChart.data.datasets[0].borderColor = 'rgb(245, 158, 11)';
                        roiChart.data.datasets[0].backgroundColor = 'rgba(245, 158, 11, 0.1)';
                        break;
                    case 'base':
                        chartData = [0, 80, 180, 300, 457];
                        roiChart.data.datasets[0].borderColor = 'rgb(16, 185, 129)';
                        roiChart.data.datasets[0].backgroundColor = 'rgba(16, 185, 129, 0.1)';
                        break;
                    case 'optimistic':
                        chartData = [0, 120, 250, 450, 680];
                        roiChart.data.datasets[0].borderColor = 'rgb(59, 130, 246)';
                        roiChart.data.datasets[0].backgroundColor = 'rgba(59, 130, 246, 0.1)';
                        break;
                }
                
                roiChart.data.datasets[0].data = chartData;
                roiChart.data.datasets[0].label = scenario.charAt(0).toUpperCase() + scenario.slice(1);
                roiChart.update();
            }

            // Event Listeners
            slider.addEventListener('input', (e) => {
                updateFinancials(parseInt(e.target.value));
            });

            // Scenario buttons
            document.querySelectorAll('.scenario-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // Update button states
                    document.querySelectorAll('.scenario-btn').forEach(b => {
                        b.classList.remove('active', 'bg-accent-500', 'text-white');
                        b.classList.add('bg-neutral-200', 'text-neutral-700', 'hover:bg-neutral-300');
                    });
                    
                    e.target.classList.remove('bg-neutral-200', 'text-neutral-700', 'hover:bg-neutral-300');
                    e.target.classList.add('active', 'bg-accent-500', 'text-white');
                    
                    // Update scenario
                    updateROIScenario(e.target.dataset.scenario);
                });
            });

            // ROI Calculator Button
            document.getElementById('roi-calculator-btn').addEventListener('click', () => {
                // Scroll to ROI section
                document.querySelector('#financial-plan .professional-card:last-child').scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            });

            // Initialize
            updateFinancials(1);

            // --- ENHANCED TECH ROADMAP FUNCTIONALITY ---

            // Generate Interactive Gantt Chart
            function generateGanttChart() {
                const ganttBars = document.getElementById('gantt-bars');
                ganttBars.innerHTML = '';

                Object.keys(agentDetails).forEach(agentKey => {
                    const agent = agentDetails[agentKey];
                    const agentDiv = document.createElement('div');
                    agentDiv.className = 'gantt-row flex items-center space-x-4 p-3 rounded-lg hover:bg-neutral-50 transition-colors';
                    
                    // Agent info
                    const agentInfo = document.createElement('div');
                    agentInfo.className = 'w-48 flex items-center space-x-3';
                    agentInfo.innerHTML = `
                        <div class="w-8 h-8 bg-gradient-to-br ${agent.color} rounded-lg flex items-center justify-center">
                            <i class="${agent.icon} text-white text-sm"></i>
                        </div>
                        <div>
                            <div class="font-semibold text-sm text-neutral-900">${agent.name}</div>
                            <div class="text-xs text-neutral-500">${agent.budget}</div>
                        </div>
                    `;
                    
                    // Timeline bar
                    const timelineDiv = document.createElement('div');
                    timelineDiv.className = 'flex-1 relative';
                    
                    const barContainer = document.createElement('div');
                    barContainer.className = 'grid grid-cols-12 gap-2 h-8';
                    
                    for (let month = 1; month <= 12; month++) {
                        const monthDiv = document.createElement('div');
                        monthDiv.className = 'relative';
                        
                        if (month >= agent.timeline.start && month <= agent.timeline.end) {
                            const intensity = month <= (agent.timeline.start + agent.timeline.end) / 2 ? 0.8 : 0.6;
                            monthDiv.innerHTML = `
                                <div class="h-6 bg-gradient-to-r ${agent.color} rounded cursor-pointer transition-all duration-200 hover:scale-105" 
                                     style="opacity: ${intensity}"
                                     data-agent="${agentKey}" data-month="${month}"></div>
                            `;
                        } else {
                            monthDiv.innerHTML = '<div class="h-6 bg-neutral-100 rounded"></div>';
                        }
                        
                        barContainer.appendChild(monthDiv);
                    }
                    
                    timelineDiv.appendChild(barContainer);
                    agentDiv.appendChild(agentInfo);
                    agentDiv.appendChild(timelineDiv);
                    ganttBars.appendChild(agentDiv);
                });

                // Add dependencies visualization
                if (document.getElementById('gantt-view-toggle').classList.contains('active')) {
                    showDependencies();
                }
            }

            // Show agent dependencies
            function showDependencies() {
                // Add dependency lines (simplified version)
                const ganttContainer = document.getElementById('gantt-container');
                let dependencyLines = ganttContainer.querySelector('.dependency-lines');
                
                if (!dependencyLines) {
                    dependencyLines = document.createElement('div');
                    dependencyLines.className = 'dependency-lines absolute inset-0 pointer-events-none';
                    ganttContainer.appendChild(dependencyLines);
                }
                
                dependencyLines.innerHTML = '';
                
                // Add visual indicators for dependencies
                Object.keys(agentDetails).forEach((agentKey, index) => {
                    const agent = agentDetails[agentKey];
                    if (agent.dependencies.length > 0) {
                        const indicator = document.createElement('div');
                        indicator.className = 'absolute left-48 text-xs text-neutral-500';
                        indicator.style.top = `${(index * 60) + 20}px`;
                        indicator.innerHTML = `<i class="fas fa-arrow-left mr-1"></i>Depends on: ${agent.dependencies.join(', ').toUpperCase()}`;
                        dependencyLines.appendChild(indicator);
                    }
                });
            }

            // Agent Modal System
            function showAgentModal(agentKey) {
                const agent = agentDetails[agentKey];
                const modal = document.getElementById('agent-modal');
                
                // Update modal content
                document.getElementById('modal-agent-title').textContent = agent.fullName;
                document.getElementById('modal-agent-subtitle').textContent = agent.description;
                
                // Update icon
                const iconContainer = document.getElementById('modal-agent-icon');
                const iconClass = document.getElementById('modal-agent-icon-class');
                iconContainer.className = `w-16 h-16 rounded-xl flex items-center justify-center bg-gradient-to-br ${agent.color}`;
                iconClass.className = `${agent.icon} text-white text-2xl`;
                
                // Budget breakdown
                const budgetDetails = document.getElementById('modal-budget-details');
                budgetDetails.innerHTML = '';
                Object.keys(agent.breakdown).forEach(key => {
                    const item = agent.breakdown[key];
                    const div = document.createElement('div');
                    div.className = 'flex justify-between items-center p-3 bg-neutral-50 rounded-lg';
                    div.innerHTML = `
                        <div>
                            <div class="font-medium text-neutral-900">${key.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())}</div>
                            <div class="text-sm text-neutral-600">${item.description}</div>
                        </div>
                        <div class="font-bold text-primary-600">${item.amount}</div>
                    `;
                    budgetDetails.appendChild(div);
                });
                
                // Tech stack
                const techStack = document.getElementById('modal-tech-stack');
                techStack.innerHTML = '';
                agent.techStack.forEach(tech => {
                    const span = document.createElement('span');
                    span.className = 'inline-block bg-neutral-100 text-neutral-700 px-3 py-1 rounded-full text-sm font-medium mr-2 mb-2';
                    span.textContent = tech;
                    techStack.appendChild(span);
                });
                
                // KPIs
                const kpis = document.getElementById('modal-kpis');
                kpis.innerHTML = '';
                agent.kpis.forEach(kpi => {
                    const div = document.createElement('div');
                    div.className = 'flex justify-between items-center p-3 bg-neutral-50 rounded-lg';
                    const statusColors = {
                        'foundation': 'text-blue-600',
                        'production': 'text-green-600',
                        'critical': 'text-red-600',
                        'revenue-impact': 'text-purple-600',
                        'revenue-critical': 'text-red-600',
                        'value-prop': 'text-accent-600',
                        'operational': 'text-neutral-600',
                        'efficiency': 'text-blue-600',
                        'cost-savings': 'text-green-600',
                        'satisfaction': 'text-orange-600'
                    };
                    div.innerHTML = `
                        <div class="font-medium text-neutral-900">${kpi.metric}</div>
                        <div class="text-sm ${statusColors[kpi.status] || 'text-neutral-600'}">${kpi.target}</div>
                    `;
                    kpis.appendChild(div);
                });
                
                // Timeline
                const timeline = document.getElementById('modal-timeline');
                timeline.innerHTML = '';
                agent.timeline.phases.forEach(phase => {
                    const div = document.createElement('div');
                    div.className = 'border-l-4 border-primary-500 pl-4 py-2';
                    div.innerHTML = `
                        <div class="font-medium text-neutral-900">${phase.name}</div>
                        <div class="text-sm text-neutral-600">Months ${phase.months}</div>
                        <div class="text-sm text-neutral-500 mt-1">${phase.description}</div>
                    `;
                    timeline.appendChild(div);
                });
                
                // Show modal
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            // Event Listeners for Tech Roadmap
            document.addEventListener('click', (e) => {
                // Agent card clicks
                if (e.target.closest('.agent-card')) {
                    const agentKey = e.target.closest('.agent-card').dataset.agent;
                    showAgentModal(agentKey);
                }
                
                // Gantt bar clicks
                if (e.target.dataset.agent) {
                    showAgentModal(e.target.dataset.agent);
                }
                
                // Close modal
                if (e.target.id === 'close-modal' || e.target.id === 'agent-modal') {
                    document.getElementById('agent-modal').classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }
            });

            // Gantt view toggles
            document.getElementById('gantt-view-toggle').addEventListener('click', (e) => {
                e.target.classList.toggle('active');
                if (e.target.classList.contains('active')) {
                    e.target.classList.remove('bg-primary-500', 'hover:bg-primary-600');
                    e.target.classList.add('bg-accent-500', 'hover:bg-accent-600');
                    showDependencies();
                } else {
                    e.target.classList.remove('bg-accent-500', 'hover:bg-accent-600');
                    e.target.classList.add('bg-primary-500', 'hover:bg-primary-600');
                    const dependencyLines = document.querySelector('.dependency-lines');
                    if (dependencyLines) dependencyLines.remove();
                }
            });

            document.getElementById('resource-overlay').addEventListener('click', (e) => {
                e.target.classList.toggle('active');
                if (e.target.classList.contains('active')) {
                    e.target.classList.remove('bg-accent-500', 'hover:bg-accent-600');
                    e.target.classList.add('bg-primary-500', 'hover:bg-primary-600');
                    // Show resource allocation overlay
                    showResourceOverlay();
                } else {
                    e.target.classList.remove('bg-primary-500', 'hover:bg-primary-600');
                    e.target.classList.add('bg-accent-500', 'hover:bg-accent-600');
                    hideResourceOverlay();
                }
            });

            function showResourceOverlay() {
                // Add resource allocation indicators to Gantt bars
                const ganttBars = document.querySelectorAll('[data-agent]');
                ganttBars.forEach(bar => {
                    const agent = bar.dataset.agent;
                    const month = parseInt(bar.dataset.month);
                    
                    // Calculate resource intensity based on team allocation
                    let resourceCount = 0;
                    Object.keys(teamAllocation).forEach(role => {
                        const allocation = teamAllocation[role].allocation[month - 1];
                        if (allocation && allocation.includes(agent.toUpperCase())) {
                            resourceCount++;
                        }
                    });
                    
                    if (resourceCount > 0) {
                        bar.innerHTML += `<div class="absolute -top-1 -right-1 w-4 h-4 bg-orange-500 text-white text-xs rounded-full flex items-center justify-center">${resourceCount}</div>`;
                    }
                });
            }

            function hideResourceOverlay() {
                // Remove resource indicators
                document.querySelectorAll('.absolute.-top-1.-right-1').forEach(el => el.remove());
            }

            // Initialize Gantt Chart
            generateGanttChart();

            // Tech Timeline (Legacy support)
            const techContainer = document.getElementById('tech-timeline-container');
            const techDetailsPane = document.getElementById('tech-details-pane');
            const techDetailsTitle = document.getElementById('tech-details-title');
            const techDetailsTasks = document.getElementById('tech-details-tasks');
            const techDetailsMilestone = document.getElementById('tech-details-milestone');
            
            techTimelineData.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'timeline-item cursor-pointer p-3 rounded-lg hover:bg-slate-50';
                const width = ((item.end - item.start + 1) / 12) * 100;
                const left = ((item.start - 1) / 12) * 100;

                itemEl.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-semibold text-sm">${item.category}</span>
                        <span class="text-xs text-slate-500">Mes ${item.start} - ${item.end}</span>
                    </div>
                    <div class="timeline-bar h-4 w-full bg-slate-200">
                        <div class="timeline-progress" style="width: ${width}%; left: ${left}%; background-color: ${item.color};"></div>
                    </div>
                `;
                itemEl.addEventListener('click', () => {
                    techDetailsTitle.textContent = item.category;
                    techDetailsTasks.textContent = item.tasks;
                    techDetailsMilestone.textContent = item.milestone;
                    techDetailsPane.classList.remove('hidden');
                });
                techContainer.appendChild(itemEl);
            });

            // Ops Timeline
            const opsContainer = document.getElementById('ops-timeline-container');
            const opsDetailsPane = document.getElementById('ops-details-pane');
            const opsDetailsTitle = document.getElementById('ops-details-title');
            const opsDetailsTasks = document.getElementById('ops-details-tasks');
            const opsDetailsKpi = document.getElementById('ops-details-kpi');

            opsTimelineData.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'ops-item cursor-pointer p-4 rounded-lg border border-slate-200 hover:bg-slate-50 hover:border-slate-300 transition-colors';
                itemEl.style.borderLeft = `5px solid ${item.color}`;
                itemEl.innerHTML = `<h4 class="font-semibold">${item.phase}</h4>`;
                
                itemEl.addEventListener('click', () => {
                    opsDetailsTitle.textContent = item.phase;
                    opsDetailsTasks.textContent = item.tasks;
                    opsDetailsKpi.textContent = item.kpi;
                    opsDetailsPane.classList.remove('hidden');
                });
                opsContainer.appendChild(itemEl);
            });

            // HR Table
            const hrTable = document.getElementById('hr-table');
            const roleFilter = document.getElementById('role-filter');
            const theadRow = hrTable.querySelector('thead tr');
            const tbody = hrTable.querySelector('tbody');

            // Populate filter and table header
            hrData.roles.forEach(role => {
                const option = document.createElement('option');
                option.value = role;
                option.textContent = role;
                roleFilter.appendChild(option);
            });
            for(let i = 1; i <= 12; i++) {
                const th = document.createElement('th');
                th.className = 'px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider';
                th.textContent = `M${i}`;
                theadRow.appendChild(th);
            }

            // Populate table body
            hrData.allocations.forEach((alloc, i) => {
                const tr = document.createElement('tr');
                tr.dataset.role = hrData.roles[i];
                tr.innerHTML = `<td class="px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900">${hrData.roles[i]}</td>`;
                alloc.forEach(task => {
                    const td = document.createElement('td');
                    td.className = 'px-3 py-2 whitespace-nowrap text-xs text-center text-gray-500';
                    td.textContent = task;
                    tr.appendChild(td);
                });
                tbody.appendChild(tr);
            });

            roleFilter.addEventListener('change', (e) => {
                const selectedRole = e.target.value;
                tbody.querySelectorAll('tr').forEach(tr => {
                    if (selectedRole === 'all' || tr.dataset.role === selectedRole) {
                        tr.style.display = '';
                        tr.style.backgroundColor = selectedRole === 'all' ? '' : '#fffbeb';
                    } else {
                        tr.style.display = 'none';
                    }
                });
                if(selectedRole === 'all') {
                     tbody.querySelectorAll('tr').forEach(tr => tr.style.backgroundColor = '');
                }
            });

            // Enhanced Navigation System
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');
            const progressBar = document.getElementById('nav-progress');
            const currentSectionSpan = document.getElementById('current-section');
            const fab = document.getElementById('fab');

            // Progress tracking and navigation
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                
                // Update progress bar
                progressBar.style.width = scrollPercent + '%';
                
                // Update active section
                let current = '';
                let currentSectionName = '';
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100;
                    const sectionId = section.getAttribute('id');
                    
                    if (scrollTop >= sectionTop) {
                        current = sectionId;
                        // Get section name from navigation
                        const navLink = document.querySelector(`[href="#${sectionId}"]`);
                        if (navLink) {
                            currentSectionName = navLink.textContent.trim().replace(/.*\s/, '');
                        }
                    }
                });

                // Update navigation
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active');
                    }
                });

                // Update breadcrumb
                if (currentSectionName) {
                    currentSectionSpan.textContent = currentSectionName;
                }

                // Show/hide FAB based on scroll position
                if (scrollTop > 300) {
                    fab.style.transform = 'scale(1)';
                    fab.style.opacity = '1';
                } else {
                    fab.style.transform = 'scale(0.8)';
                    fab.style.opacity = '0.7';
                }
            });

            // FAB click handler
            fab.addEventListener('click', () => {
                document.getElementById('executive-summary').scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                const currentSection = document.querySelector('section.active') || sections[0];
                const currentIndex = Array.from(sections).indexOf(currentSection);
                
                if (e.key === 'j' || e.key === 'J') {
                    // Next section
                    e.preventDefault();
                    const nextIndex = Math.min(currentIndex + 1, sections.length - 1);
                    sections[nextIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else if (e.key === 'k' || e.key === 'K') {
                    // Previous section
                    e.preventDefault();
                    const prevIndex = Math.max(currentIndex - 1, 0);
                    sections[prevIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });

            // Theme toggle (placeholder for future implementation)
            document.getElementById('theme-toggle').addEventListener('click', () => {
                // Future: implement dark/light mode toggle
                console.log('Theme toggle clicked - feature coming soon');
            });

            // Smooth scrolling for all navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Enhanced tooltips
            function createTooltip(element, text) {
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltip';
                tooltip.textContent = text;
                document.body.appendChild(tooltip);

                element.addEventListener('mouseenter', (e) => {
                    const rect = element.getBoundingClientRect();
                    tooltip.style.left = rect.left + (rect.width / 2) + 'px';
                    tooltip.style.top = rect.top - 40 + 'px';
                    tooltip.classList.add('show');
                });

                element.addEventListener('mouseleave', () => {
                    tooltip.classList.remove('show');
                });
            }

            // Add tooltips to key elements
            document.querySelectorAll('[title]').forEach(el => {
                const title = el.getAttribute('title');
                el.removeAttribute('title');
                createTooltip(el, title);
            });

            // Initialize page
            setTimeout(() => {
                // Trigger initial scroll event to set up navigation
                window.dispatchEvent(new Event('scroll'));
            }, 100);

        });
    </script>
</body>
</html>
