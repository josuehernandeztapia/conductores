<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Investment Dashboard V3.0 - Series A Presentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://unpkg.com/d3@7"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Professional Design System -->
    <style>
        :root {
            /* Primary - Deep Professional Blue */
            --primary-50: #eff6ff;
            --primary-100: #dbeafe;
            --primary-200: #bfdbfe;
            --primary-300: #93c5fd;
            --primary-400: #60a5fa;
            --primary-500: #3b82f6;
            --primary-600: #2563eb;
            --primary-700: #1d4ed8;
            --primary-800: #1e40af;
            --primary-900: #1e3a8a;
            
            /* Accent - Success Green */
            --accent-50: #ecfdf5;
            --accent-100: #d1fae5;
            --accent-200: #a7f3d0;
            --accent-300: #6ee7b7;
            --accent-400: #34d399;
            --accent-500: #10b981;
            --accent-600: #059669;
            --accent-700: #047857;
            --accent-800: #065f46;
            --accent-900: #064e3b;
            
            /* Neutral - Sophisticated Grays */
            --neutral-50: #f8fafc;
            --neutral-100: #f1f5f9;
            --neutral-200: #e2e8f0;
            --neutral-300: #cbd5e1;
            --neutral-400: #94a3b8;
            --neutral-500: #64748b;
            --neutral-600: #475569;
            --neutral-700: #334155;
            --neutral-800: #1e293b;
            --neutral-900: #0f172a;
            
            /* Warning/Alert */
            --warning-500: #f59e0b;
            --danger-500: #ef4444;
        }

        /* Dark Mode Variables */
        [data-theme="dark"] {
            /* Primary - Brighter blues for dark mode */
            --primary-50: #1e3a8a;
            --primary-100: #1d4ed8;
            --primary-200: #2563eb;
            --primary-300: #3b82f6;
            --primary-400: #60a5fa;
            --primary-500: #93c5fd;
            --primary-600: #bfdbfe;
            --primary-700: #dbeafe;
            --primary-800: #eff6ff;
            --primary-900: #f8fafc;
            
            /* Accent - Brighter greens for dark mode */
            --accent-50: #064e3b;
            --accent-100: #065f46;
            --accent-200: #047857;
            --accent-300: #059669;
            --accent-400: #10b981;
            --accent-500: #34d399;
            --accent-600: #6ee7b7;
            --accent-700: #a7f3d0;
            --accent-800: #d1fae5;
            --accent-900: #ecfdf5;
            
            /* Neutral - Dark theme grays */
            --neutral-50: #0f172a;
            --neutral-100: #1e293b;
            --neutral-200: #334155;
            --neutral-300: #475569;
            --neutral-400: #64748b;
            --neutral-500: #94a3b8;
            --neutral-600: #cbd5e1;
            --neutral-700: #e2e8f0;
            --neutral-800: #f1f5f9;
            --neutral-900: #f8fafc;
            
            /* Warning/Alert - Adjusted for dark mode */
            --warning-500: #fbbf24;
            --danger-500: #f87171;
        }

        /* Dark mode body styling */
        [data-theme="dark"] body {
            background-color: var(--neutral-50);
            color: var(--neutral-900);
        }

        /* Dark mode card styling */
        [data-theme="dark"] .professional-card {
            background-color: var(--neutral-100);
            border-color: var(--neutral-200);
            color: var(--neutral-900);
        }

        [data-theme="dark"] .professional-card:hover {
            border-color: var(--neutral-300);
            background-color: var(--neutral-200);
        }

        /* Dark mode navigation */
        [data-theme="dark"] header {
            background-color: var(--neutral-100);
            border-bottom: 1px solid var(--neutral-200);
        }

        [data-theme="dark"] .nav-link {
            color: var(--neutral-700);
        }

        [data-theme="dark"] .nav-link:hover,
        [data-theme="dark"] .nav-link.active {
            color: var(--primary-500);
        }

        /* Dark mode text colors */
        [data-theme="dark"] .text-neutral-900 { color: var(--neutral-900) !important; }
        [data-theme="dark"] .text-neutral-800 { color: var(--neutral-800) !important; }
        [data-theme="dark"] .text-neutral-700 { color: var(--neutral-700) !important; }
        [data-theme="dark"] .text-neutral-600 { color: var(--neutral-600) !important; }
        [data-theme="dark"] .text-neutral-500 { color: var(--neutral-500) !important; }

        /* Dark mode background colors */
        [data-theme="dark"] .bg-white { background-color: var(--neutral-100) !important; }
        [data-theme="dark"] .bg-neutral-50 { background-color: var(--neutral-100) !important; }
        [data-theme="dark"] .bg-neutral-100 { background-color: var(--neutral-200) !important; }
        [data-theme="dark"] .bg-neutral-800 { background-color: var(--neutral-100) !important; }

        /* Dark mode gradients */
        [data-theme="dark"] .bg-gradient-to-br.from-primary-50.to-accent-50 {
            background: linear-gradient(to bottom right, var(--neutral-200), var(--neutral-300)) !important;
        }

        [data-theme="dark"] .bg-gradient-to-r.from-primary-50.to-primary-100 {
            background: linear-gradient(to right, var(--neutral-200), var(--neutral-300)) !important;
        }

        /* Theme toggle button styling */
        .theme-toggle-btn {
            position: relative;
            width: 60px;
            height: 30px;
            background-color: var(--neutral-200);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            padding: 3px;
        }

        .theme-toggle-btn.dark {
            background-color: var(--primary-600);
        }

        .theme-toggle-slider {
            width: 24px;
            height: 24px;
            background-color: white;
            border-radius: 50%;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .theme-toggle-btn.dark .theme-toggle-slider {
            transform: translateX(30px);
            background-color: var(--neutral-100);
        }

        .theme-toggle-icon {
            font-size: 12px;
            transition: all 0.3s ease;
        }

        /* Light mode icon */
        .theme-toggle-btn:not(.dark) .theme-toggle-icon {
            color: #fbbf24;
        }

        /* Dark mode icon */
        .theme-toggle-btn.dark .theme-toggle-icon {
            color: #93c5fd;
        }

        /* Dark mode specific component styling */
        [data-theme="dark"] .kpi-card {
            background-color: var(--neutral-200);
            border-color: var(--neutral-300);
        }

        [data-theme="dark"] .kpi-card:hover {
            background-color: var(--neutral-300);
        }

        [data-theme="dark"] .timeline-item:hover {
            background-color: var(--neutral-200);
        }

        [data-theme="dark"] .heatmap-cell {
            border-color: var(--neutral-300);
        }

        [data-theme="dark"] .heatmap-role-label:hover {
            background-color: var(--neutral-200);
        }

        [data-theme="dark"] .heatmap-tooltip {
            background-color: var(--neutral-100);
            color: var(--neutral-900);
            border: 1px solid var(--neutral-300);
        }

        [data-theme="dark"] .heatmap-tooltip::after {
            border-color: var(--neutral-100) transparent transparent transparent;
        }

        /* Dark mode chart styling */
        [data-theme="dark"] .chart-container {
            background-color: var(--neutral-100);
            border-radius: 12px;
            padding: 1rem;
        }

        /* Dark mode FAB */
        [data-theme="dark"] #fab {
            background-color: var(--primary-600);
            color: var(--neutral-100);
        }

        [data-theme="dark"] #fab:hover {
            background-color: var(--primary-500);
        }

        /* Dark mode breadcrumb */
        [data-theme="dark"] .breadcrumb {
            background-color: var(--neutral-200);
            border-color: var(--neutral-300);
        }

        /* Dark mode footer */
        [data-theme="dark"] footer {
            background-color: var(--neutral-100);
            border-top: 1px solid var(--neutral-200);
        }

        /* Smooth theme transition */
        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        /* Disable transitions during theme change to prevent flicker */
        .theme-transitioning * {
            transition: none !important;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--neutral-50);
            color: var(--neutral-900);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Professional Typography Scale */
        .text-display { font-size: 3.75rem; line-height: 1; font-weight: 900; letter-spacing: -0.025em; }
        .text-h1 { font-size: 2.25rem; line-height: 2.5rem; font-weight: 800; letter-spacing: -0.025em; }
        .text-h2 { font-size: 1.875rem; line-height: 2.25rem; font-weight: 700; letter-spacing: -0.025em; }
        .text-h3 { font-size: 1.5rem; line-height: 2rem; font-weight: 600; }
        .text-body { font-size: 1rem; line-height: 1.5rem; font-weight: 400; }
        .text-caption { font-size: 0.875rem; line-height: 1.25rem; font-weight: 500; }

        /* Premium Card Design */
        .professional-card {
            background: white;
            border: 1px solid var(--neutral-200);
            border-radius: 12px;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .professional-card:hover {
            border-color: var(--neutral-300);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transform: translateY(-1px);
        }

        .professional-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-500), var(--accent-500));
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .professional-card:hover::before {
            opacity: 1;
        }

        /* Enhanced Navigation */
        .nav-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-500), var(--accent-500));
            z-index: 100;
            transition: width 0.3s ease;
        }

        .nav-link {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0.75rem 1rem;
            border-radius: 8px;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--primary-500);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 80%;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary-600);
            background-color: var(--primary-50);
        }

        /* KPI Cards with Enhanced Styling */
        .kpi-card {
            background: white;
            border: 1px solid var(--neutral-200);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent-500);
            transition: width 0.3s ease;
        }

        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px -8px rgb(0 0 0 / 0.15);
            border-color: var(--neutral-300);
        }

        .kpi-card:hover::before {
            width: 6px;
        }

        .kpi-value {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1;
            background: linear-gradient(135deg, var(--primary-600), var(--accent-600));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Chart Containers */
        .chart-container {
            position: relative;
            width: 100%;
            margin: 0 auto;
            border-radius: 12px;
            overflow: hidden;
            background: white;
            padding: 1rem;
        }

        /* Timeline Enhancements */
        .timeline-item {
            position: relative;
            padding: 1rem;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid var(--neutral-200);
            background: white;
        }

        .timeline-item:hover {
            background: var(--neutral-50);
            border-color: var(--primary-300);
            transform: translateX(4px);
        }

        .timeline-bar {
            position: relative;
            height: 8px;
            background: var(--neutral-200);
            border-radius: 4px;
            overflow: hidden;
        }

        .timeline-progress {
            position: absolute;
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--primary-500), var(--accent-500));
            transition: all 0.3s ease;
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-500), var(--accent-500));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
            cursor: pointer;
            box-shadow: 0 8px 25px -8px rgb(0 0 0 / 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 50;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px -8px rgb(0 0 0 / 0.4);
        }

        /* Breadcrumb Navigation */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 0;
            font-size: 0.875rem;
            color: var(--neutral-500);
        }

        .breadcrumb-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .breadcrumb-item:not(:last-child)::after {
            content: '/';
            color: var(--neutral-400);
        }

        .breadcrumb-item.active {
            color: var(--primary-600);
            font-weight: 500;
        }

        /* Loading States */
        .loading-skeleton {
            background: linear-gradient(90deg, var(--neutral-200) 25%, var(--neutral-100) 50%, var(--neutral-200) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Tooltip System */
        .tooltip {
            position: absolute;
            background: var(--neutral-900);
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            font-size: 0.875rem;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transform: translateY(4px);
            transition: all 0.2s ease;
        }

        .tooltip.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .text-display { font-size: 2.5rem; }
            .text-h1 { font-size: 1.875rem; line-height: 2.25rem; }
            .text-h2 { font-size: 1.5rem; line-height: 2rem; }
            
            .kpi-card {
                padding: 1rem;
            }
            
            .kpi-value {
                font-size: 2rem;
            }
            
            .fab {
                bottom: 1rem;
                right: 1rem;
                width: 50px;
                height: 50px;
                font-size: 1rem;
            }
        }

        /* Enhanced Slider Styling */
        .slider {
            -webkit-appearance: none;
            appearance: none;
            background: var(--neutral-200);
            border-radius: 6px;
            outline: none;
            transition: all 0.3s ease;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-500), var(--accent-500));
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-500), var(--accent-500));
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        /* Heatmap Grid Styles */
        .grid-cols-13 {
            grid-template-columns: 200px repeat(12, 1fr);
        }

        .heatmap-cell {
            height: 40px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .heatmap-cell:hover {
            transform: scale(1.05);
            z-index: 10;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .heatmap-role-label {
            height: 40px;
            display: flex;
            align-items: center;
            padding: 0 1rem;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .heatmap-role-label:hover {
            background-color: var(--neutral-100);
            transform: translateX(4px);
        }

        /* Intensity Colors */
        .intensity-0 { background-color: var(--neutral-200); color: var(--neutral-500); }
        .intensity-1 { background-color: rgb(147, 197, 253); color: rgb(30, 64, 175); } /* blue-300 */
        .intensity-2 { background-color: rgb(59, 130, 246); color: white; } /* blue-500 */
        .intensity-3 { background-color: rgb(29, 78, 216); color: white; } /* blue-700 */

        /* Tooltip for heatmap */
        .heatmap-tooltip {
            position: absolute;
            background: var(--neutral-900);
            color: white;
            padding: 0.75rem;
            border-radius: 8px;
            font-size: 0.875rem;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transform: translateY(4px);
            transition: all 0.2s ease;
            min-width: 200px;
            box-shadow: 0 8px 25px -8px rgba(0, 0, 0, 0.3);
        }

        .heatmap-tooltip.show {
            opacity: 1;
            transform: translateY(0);
        }

        .heatmap-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--neutral-900) transparent transparent transparent;
        }

        /* Print Styles */
        @media print {
            .nav-progress,
            .fab,
            header {
                display: none !important;
            }
            
            .professional-card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid var(--neutral-300);
            }
            
            body {
                background: white;
            }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Progress Bar -->
    <div class="nav-progress" id="nav-progress"></div>

    <!-- Enhanced Header & Navigation -->
    <header class="bg-white/95 backdrop-blur-lg sticky top-0 z-50 border-b border-neutral-200">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-sm"></i>
                        </div>
                        <span class="ml-3 font-bold text-xl text-neutral-800">RAG Investment</span>
                    </div>
                    <span class="hidden md:block text-sm font-medium text-neutral-500 px-3 py-1 bg-neutral-100 rounded-full">V3.0 Series A</span>
                </div>
                
                <div class="hidden lg:block">
                    <div class="flex items-center space-x-1">
                        <a href="#executive-summary" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-star mr-2"></i>Executive Summary
                        </a>
                        <a href="#investment-thesis" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-lightbulb mr-2"></i>Investment Thesis
                        </a>
                        <a href="#financial-plan" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-chart-bar mr-2"></i>Financial Plan
                        </a>
                        <a href="#tech-roadmap" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-code-branch mr-2"></i>Technology
                        </a>
                        <a href="#operations-plan" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-cogs mr-2"></i>Operations
                        </a>
                        <a href="#team-execution" class="nav-link text-neutral-700 text-sm font-medium">
                            <i class="fas fa-users mr-2"></i>Team
                        </a>
                    </div>
                </div>

                <div class="flex items-center space-x-3">
                                    <div class="flex items-center space-x-3">
                    <span class="text-sm text-neutral-600 hidden sm:block">Theme</span>
                    <div id="theme-toggle" class="theme-toggle-btn">
                        <div class="theme-toggle-slider">
                            <i class="fas fa-sun theme-toggle-icon"></i>
                        </div>
                    </div>
                </div>
                    <button class="hidden md:flex items-center space-x-2 bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg transition-colors text-sm font-medium">
                        <i class="fas fa-download"></i>
                        <span>Export PDF</span>
                    </button>
                </div>
            </div>

            <!-- Mobile Navigation -->
            <div class="lg:hidden pb-3">
                <div class="flex space-x-1 overflow-x-auto">
                    <a href="#executive-summary" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Executive</a>
                    <a href="#investment-thesis" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Thesis</a>
                    <a href="#financial-plan" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Financial</a>
                    <a href="#tech-roadmap" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Tech</a>
                    <a href="#operations-plan" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Operations</a>
                    <a href="#team-execution" class="nav-link text-neutral-700 text-xs font-medium whitespace-nowrap">Team</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <!-- Breadcrumb Navigation -->
        <nav class="breadcrumb">
            <div class="breadcrumb-item">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </div>
            <div class="breadcrumb-item active">
                <span id="current-section">Executive Summary</span>
            </div>
        </nav>

        <!-- Executive Summary Section -->
        <section id="executive-summary" class="mb-20 scroll-mt-16">
            <div class="text-center mb-12">
                <h1 class="text-display text-neutral-900 mb-4">RAG Investment Dashboard</h1>
                <p class="text-xl text-neutral-600 max-w-3xl mx-auto mb-8">
                    Transforming Mexico's transportation financing through AI-Native technology. 
                    A de-risked proposition with institutional-grade execution certainty.
                </p>
                
                <!-- Compelling Value Proposition -->
                <div class="professional-card p-8 max-w-5xl mx-auto mb-8 bg-gradient-to-br from-primary-50 to-accent-50 border-primary-200">
                    <div class="flex items-start space-x-6">
                        <div class="w-20 h-20 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-shield-check text-white text-3xl"></i>
                        </div>
                        <div class="flex-1 text-left">
                            <h3 class="text-h2 text-neutral-900 mb-4">The De-Risked Investment Opportunity</h3>
                            <p class="text-lg text-neutral-700 mb-6 leading-relaxed">
                                Unlike traditional fintech ventures, we've eliminated the three critical risks that destroy 80% of Series A companies: 
                                <strong class="text-primary-600">market uncertainty</strong>, <strong class="text-accent-600">execution risk</strong>, 
                                and <strong class="text-warning-600">talent flight</strong>.
                            </p>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="text-center p-4 bg-white rounded-lg border border-primary-200">
                                    <div class="w-12 h-12 bg-primary-100 rounded-full mx-auto mb-3 flex items-center justify-center">
                                        <i class="fas fa-bullseye text-primary-600"></i>
                                    </div>
                                    <div class="font-bold text-primary-900">Market Validated</div>
                                    <div class="text-sm text-primary-700 mt-1">3 pre-qualified operators ready</div>
                                </div>
                                <div class="text-center p-4 bg-white rounded-lg border border-accent-200">
                                    <div class="w-12 h-12 bg-accent-100 rounded-full mx-auto mb-3 flex items-center justify-center">
                                        <i class="fas fa-cogs text-accent-600"></i>
                                    </div>
                                    <div class="font-bold text-accent-900">Execution Certain</div>
                                    <div class="text-sm text-accent-700 mt-1">Pre-assembled technical team</div>
                                </div>
                                <div class="text-center p-4 bg-white rounded-lg border border-warning-200">
                                    <div class="w-12 h-12 bg-warning-100 rounded-full mx-auto mb-3 flex items-center justify-center">
                                        <i class="fas fa-handshake text-warning-600"></i>
                                    </div>
                                    <div class="font-bold text-warning-900">Team Locked</div>
                                    <div class="text-sm text-warning-700 mt-1">Golden handcuffs strategy</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-center space-x-6">
                    <div class="flex items-center space-x-2 text-neutral-500">
                        <i class="fas fa-calendar-alt"></i>
                        <span class="text-sm">Series A Target: Q2 2025</span>
                    </div>
                    <div class="flex items-center space-x-2 text-neutral-500">
                        <i class="fas fa-chart-line"></i>
                        <span class="text-sm">12-Month Roadmap</span>
                    </div>
                    <div class="flex items-center space-x-2 text-neutral-500">
                        <i class="fas fa-shield-alt"></i>
                        <span class="text-sm">De-risked Execution</span>
                    </div>
                </div>
            </div>

            <!-- Hero Metrics Dashboard -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="professional-card p-6 text-center">
                    <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-dollar-sign text-white text-xl"></i>
                    </div>
                    <div class="kpi-value">$7.26M</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Investment Required</p>
                    <p class="text-xs text-neutral-500">MXN Seed Capital</p>
                </div>

                <div class="professional-card p-6 text-center">
                    <div class="w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-chart-line text-white text-xl"></i>
                    </div>
                    <div class="kpi-value">457%</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">5-Year ROI</p>
                    <p class="text-xs text-neutral-500">Projected Return</p>
                </div>

                <div class="professional-card p-6 text-center">
                    <div class="w-12 h-12 bg-gradient-to-br from-warning-500 to-yellow-600 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-clock text-white text-xl"></i>
                    </div>
                    <div class="kpi-value">20</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Payback Period</p>
                    <p class="text-xs text-neutral-500">Months to Break-Even</p>
                </div>

                <div class="professional-card p-6 text-center">
                    <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-rocket text-white text-xl"></i>
                    </div>
                    <div class="kpi-value">$45M</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Series A Target</p>
                    <p class="text-xs text-neutral-500">MXN Valuation Goal</p>
                </div>
            </div>

            <!-- Investment Thesis Highlights -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                <div class="professional-card p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-brain text-white"></i>
                        </div>
                        <h3 class="text-h3 text-neutral-900">AI-Native Advantage</h3>
                    </div>
                    <p class="text-neutral-700 mb-4">
                        We're not digitizing traditional financing—we're building a proprietary AI workforce that transforms 
                        variable operational costs into fixed capital investment, creating exponential efficiency gains.
                    </p>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">4 Synergistic AI Agents</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">$6.3M Annual Savings vs Traditional</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">SaaS-like Scalability & Margins</span>
                        </div>
                    </div>
                </div>

                <div class="professional-card p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-shield-alt text-white"></i>
                        </div>
                        <h3 class="text-h3 text-neutral-900">De-risked Execution</h3>
                    </div>
                    <p class="text-neutral-700 mb-4">
                        Golden handcuffs equity structure ensures core technical team retention. 
                        Proven team chemistry and sequential validation approach minimize execution risk.
                    </p>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">Pre-assembled Senior Technical Team</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">~7% Collective Equity Alignment</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-accent-500"></i>
                            <span class="text-sm text-neutral-600">Sequential Risk Validation</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Capital Allocation Sankey Preview -->
            <div class="professional-card p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-h3 text-neutral-900">Capital Allocation Overview</h3>
                    <button class="text-primary-600 hover:text-primary-700 text-sm font-medium flex items-center space-x-2">
                        <span>View Details</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-code text-white text-xl"></i>
                        </div>
                        <div class="text-lg font-bold text-neutral-900">32%</div>
                        <p class="text-xs text-neutral-600">Core AI Development</p>
                        <p class="text-xs font-medium text-primary-600">$2.33M</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-br from-accent-500 to-accent-600 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-truck text-white text-xl"></i>
                        </div>
                        <div class="text-lg font-bold text-neutral-900">36%</div>
                        <p class="text-xs text-neutral-600">Pilot Investment</p>
                        <p class="text-xs font-medium text-accent-600">$2.63M</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-br from-warning-500 to-yellow-600 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-users text-white text-xl"></i>
                        </div>
                        <div class="text-lg font-bold text-neutral-900">25%</div>
                        <p class="text-xs text-neutral-600">Team & Operations</p>
                        <p class="text-xs font-medium text-warning-600">$1.83M</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-umbrella text-white text-xl"></i>
                        </div>
                        <div class="text-lg font-bold text-neutral-900">7%</div>
                        <p class="text-xs text-neutral-600">Emergency Reserve</p>
                        <p class="text-xs font-medium text-purple-600">$476K</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Investment Thesis Section -->
        <section id="investment-thesis" class="mb-20 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-h1 text-neutral-900 mb-4">Investment Thesis</h2>
                <p class="text-xl text-neutral-600 max-w-4xl mx-auto">
                    The fundamental financial advantage of RAG's AI-Native model: 
                    transforming variable operational costs into fixed capital investment for exponential scalability.
                </p>
            </div>
            
            <!-- Strategic Overview -->
            <div class="professional-card p-8 mb-12">
                <div class="flex items-start space-x-6">
                    <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-lightbulb text-white text-2xl"></i>
                    </div>
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-4">Strategic Investment Overview</h3>
                        <p class="text-neutral-700 text-lg leading-relaxed mb-6">
                            This investment doesn't fund operational expenses—it acquires a productive asset: 
                            an ecosystem of four synergistic AI agents. This model transforms the variable costs 
                            of traditional financing into fixed capital investment, generating exponential efficiency, 
                            competitive moats, and high-margin scalability similar to a SaaS model.
                        </p>
                        <div class="bg-gradient-to-r from-primary-50 to-accent-50 p-6 rounded-lg border border-primary-200">
                            <p class="text-primary-800 font-medium">
                                <i class="fas fa-quote-left text-primary-500 mr-2"></i>
                                We're financing a proprietary "AI workforce" that guarantees a high-margin business model 
                                and establishes the foundation for market dominance.
                                <i class="fas fa-quote-right text-primary-500 ml-2"></i>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced KPI Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="kpi-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-microchip text-white"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">TECH INVESTMENT</span>
                    </div>
                    <div class="kpi-value">$2.33M</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Core AI Development</p>
                    <p class="text-xs text-neutral-500">MXN in proprietary AI agents + SaaS platform</p>
                    <div class="mt-3 flex items-center space-x-2">
                        <div class="flex-1 bg-neutral-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-primary-500 to-primary-600 h-2 rounded-full" style="width: 32%"></div>
                        </div>
                        <span class="text-xs font-medium text-neutral-600">32%</span>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-accent-500 to-accent-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-piggy-bank text-white"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">ANNUAL SAVINGS</span>
                    </div>
                    <div class="kpi-value">$6.3M</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">vs Traditional Model</p>
                    <p class="text-xs text-neutral-500">MXN by replacing 20+ traditional roles</p>
                    <div class="mt-3 flex items-center space-x-2 text-accent-600">
                        <i class="fas fa-arrow-up text-xs"></i>
                        <span class="text-xs font-medium">270% efficiency gain</span>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-warning-500 to-yellow-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-white"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">PROJECTED ROI</span>
                    </div>
                    <div class="kpi-value">457%</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">5-Year Return</p>
                    <p class="text-xs text-neutral-500">On technology investment component</p>
                    <div class="mt-3 flex items-center space-x-2 text-warning-600">
                        <i class="fas fa-trophy text-xs"></i>
                        <span class="text-xs font-medium">Best-in-class returns</span>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-clock text-white"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">PAYBACK</span>
                    </div>
                    <div class="kpi-value">20</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Months to Break-Even</p>
                    <p class="text-xs text-neutral-500">Conservative estimate for tech recovery</p>
                    <div class="mt-3 flex items-center space-x-2 text-purple-600">
                        <i class="fas fa-rocket text-xs"></i>
                        <span class="text-xs font-medium">Rapid value creation</span>
                    </div>
                </div>
            </div>

            <!-- Interactive ROI Calculator Preview -->
            <div class="professional-card p-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-2">Investment Breakdown: $7,260,000 MXN</h3>
                        <p class="text-neutral-600">Strategic capital allocation designed to maximize business model validation and core technology asset development.</p>
                    </div>
                    <button id="roi-calculator-btn" class="bg-gradient-to-r from-primary-500 to-accent-500 hover:from-primary-600 hover:to-accent-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2">
                        <i class="fas fa-calculator"></i>
                        <span>Interactive ROI Calculator</span>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="chart-container h-80">
                        <canvas id="investmentSankeyChart"></canvas>
                    </div>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-primary-50 to-primary-100 rounded-lg border border-primary-200">
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-primary-500 rounded"></div>
                                <span class="font-medium text-primary-900">Core AI + SaaS Development</span>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-primary-900">$2,326,000</div>
                                <div class="text-sm text-primary-700">32.0%</div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-accent-50 to-accent-100 rounded-lg border border-accent-200">
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-accent-500 rounded"></div>
                                <span class="font-medium text-accent-900">Pilot Investment (CAPEX)</span>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-accent-900">$2,630,000</div>
                                <div class="text-sm text-accent-700">36.2%</div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-warning-50 to-yellow-100 rounded-lg border border-warning-200">
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-warning-500 rounded"></div>
                                <span class="font-medium text-warning-900">Team & Operations</span>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-warning-900">$1,828,000</div>
                                <div class="text-sm text-warning-700">25.2%</div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg border border-purple-200">
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-purple-500 rounded"></div>
                                <span class="font-medium text-purple-900">Emergency Reserve</span>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-purple-900">$476,000</div>
                                <div class="text-sm text-purple-700">6.6%</div>
                            </div>
                                                 </div>
                                         </div>
                </div>
            </div>

            <!-- Compelling Benefits Section -->
            <div class="professional-card p-8 mb-12">
                <div class="text-center mb-8">
                    <h3 class="text-h2 text-neutral-900 mb-4">Why Operators Choose Us: The Unbeatable Value Proposition</h3>
                    <p class="text-lg text-neutral-600 max-w-4xl mx-auto">
                        We don't just finance vehicles—we deliver a complete transformation that saves money, reduces risk, and builds wealth.
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Fuel Savings -->
                    <div class="text-center p-6 bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl border border-green-200">
                        <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <i class="fas fa-gas-pump text-white text-2xl"></i>
                        </div>
                        <h4 class="font-bold text-xl text-green-900 mb-3">Save Up to 50% on Fuel</h4>
                        <p class="text-green-800 mb-4">
                            GNV conversion delivers massive savings. That money goes straight to paying for the vehicle—it literally pays for itself.
                        </p>
                        <div class="bg-white p-4 rounded-lg border border-green-200">
                            <div class="text-2xl font-bold text-green-600 mb-1">$15,000 MXN</div>
                            <div class="text-sm text-green-700">Annual fuel savings per vehicle</div>
                        </div>
                    </div>

                    <!-- Flexible Financing -->
                    <div class="text-center p-6 bg-gradient-to-br from-blue-50 to-sky-100 rounded-xl border border-blue-200">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-sky-600 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <i class="fas fa-handshake text-white text-2xl"></i>
                        </div>
                        <h4 class="font-bold text-xl text-blue-900 mb-3">Financing That Actually Works</h4>
                        <p class="text-blue-800 mb-4">
                            No impossible credit requirements. No crushing monthly payments. Your daily work and fuel savings cover most of it.
                        </p>
                        <div class="bg-white p-4 rounded-lg border border-blue-200">
                            <div class="text-2xl font-bold text-blue-600 mb-1">60%</div>
                            <div class="text-sm text-blue-700">Payment covered by fuel savings</div>
                        </div>
                    </div>

                    <!-- Protection Guarantee -->
                    <div class="text-center p-6 bg-gradient-to-br from-orange-50 to-amber-100 rounded-xl border border-orange-200">
                        <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-amber-600 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <i class="fas fa-shield-alt text-white text-2xl"></i>
                        </div>
                        <h4 class="font-bold text-xl text-orange-900 mb-3">"Protección Conductores"</h4>
                        <p class="text-orange-800 mb-4">
                            Bad month? Vehicle breakdown? We've got you covered. Pause payments, adjust terms, keep you moving.
                        </p>
                        <div class="bg-white p-4 rounded-lg border border-orange-200">
                            <div class="text-2xl font-bold text-orange-600 mb-1">0%</div>
                            <div class="text-sm text-orange-700">Penalty for payment pauses</div>
                        </div>
                    </div>
                </div>

                <!-- Complete Unit Inclusion -->
                <div class="mt-12 p-8 bg-gradient-to-r from-neutral-50 to-neutral-100 rounded-xl border border-neutral-200">
                    <h4 class="text-xl font-bold text-neutral-900 mb-6 text-center">Your Vehicle Comes Complete & Ready to Work</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                        <div class="text-center p-3">
                            <div class="w-12 h-12 bg-primary-100 rounded-full mx-auto mb-2 flex items-center justify-center">
                                <i class="fas fa-bus text-primary-600"></i>
                            </div>
                            <div class="text-sm font-medium text-neutral-900">New 19+ Passenger Vehicle</div>
                        </div>
                        <div class="text-center p-3">
                            <div class="w-12 h-12 bg-green-100 rounded-full mx-auto mb-2 flex items-center justify-center">
                                <i class="fas fa-leaf text-green-600"></i>
                            </div>
                            <div class="text-sm font-medium text-neutral-900">Complete GNV Conversion</div>
                        </div>
                        <div class="text-center p-3">
                            <div class="w-12 h-12 bg-blue-100 rounded-full mx-auto mb-2 flex items-center justify-center">
                                <i class="fas fa-video text-blue-600"></i>
                            </div>
                            <div class="text-sm font-medium text-neutral-900">Security Cameras & GPS</div>
                        </div>
                        <div class="text-center p-3">
                            <div class="w-12 h-12 bg-purple-100 rounded-full mx-auto mb-2 flex items-center justify-center">
                                <i class="fas fa-shield-check text-purple-600"></i>
                            </div>
                            <div class="text-sm font-medium text-neutral-900">Public Service Insurance</div>
                        </div>
                        <div class="text-center p-3">
                            <div class="w-12 h-12 bg-orange-100 rounded-full mx-auto mb-2 flex items-center justify-center">
                                <i class="fas fa-chair text-orange-600"></i>
                            </div>
                            <div class="text-sm font-medium text-neutral-900">Seat Conversion</div>
                        </div>
                        <div class="text-center p-3">
                            <div class="w-12 h-12 bg-red-100 rounded-full mx-auto mb-2 flex items-center justify-center">
                                <i class="fas fa-certificate text-red-600"></i>
                            </div>
                            <div class="text-sm font-medium text-neutral-900">SEMOVI Compliant</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Granular Investment Breakdown -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-12">
                <!-- SaaS Operational Stack -->
                <div class="professional-card p-8">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h3 class="text-h3 text-neutral-900 mb-2">SaaS Operational Stack</h3>
                            <p class="text-neutral-600">Enterprise-grade tools for institutional scalability</p>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-primary-600">$436K</div>
                            <div class="text-sm text-neutral-500">Total SaaS Investment</div>
                        </div>
                    </div>
                    
                    <div class="space-y-4" id="saas-breakdown">
                        <!-- Will be populated by JavaScript -->
                    </div>
                    
                    <div class="mt-6 p-4 bg-gradient-to-r from-primary-50 to-accent-50 rounded-lg border border-primary-200">
                        <h4 class="font-bold text-primary-900 mb-2 flex items-center">
                            <i class="fas fa-shield-check text-primary-600 mr-2"></i>
                            Enterprise Readiness
                        </h4>
                        <p class="text-sm text-primary-800">
                            SOC2-ready security, NIIF compliance, and institutional-grade operational infrastructure 
                            positioning us for Series A institutional investors.
                        </p>
                    </div>
                </div>

                <!-- CAPEX Vehicle Investment -->
                <div class="professional-card p-8">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h3 class="text-h3 text-neutral-900 mb-2">Vehicle CAPEX Deployment</h3>
                            <p class="text-neutral-600">Strategic 3-unit pilot for market validation</p>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-accent-600">$2.63M</div>
                            <div class="text-sm text-neutral-500">Total CAPEX Investment</div>
                        </div>
                    </div>
                    
                    <!-- CAPEX Timeline -->
                    <div class="mb-6">
                        <h4 class="font-semibold text-neutral-900 mb-3">Deployment Timeline</h4>
                        <div class="grid grid-cols-3 gap-2">
                            <div class="text-center p-3 bg-gradient-to-br from-accent-50 to-accent-100 rounded-lg border border-accent-200">
                                <div class="font-bold text-accent-900">Month 6</div>
                                <div class="text-sm text-accent-700">$876.7K</div>
                                <div class="text-xs text-accent-600">Unit 1</div>
                            </div>
                            <div class="text-center p-3 bg-gradient-to-br from-accent-50 to-accent-100 rounded-lg border border-accent-200">
                                <div class="font-bold text-accent-900">Month 7</div>
                                <div class="text-sm text-accent-700">$876.7K</div>
                                <div class="text-xs text-accent-600">Unit 2</div>
                            </div>
                            <div class="text-center p-3 bg-gradient-to-br from-accent-50 to-accent-100 rounded-lg border border-accent-200">
                                <div class="font-bold text-accent-900">Month 8</div>
                                <div class="text-sm text-accent-700">$876.7K</div>
                                <div class="text-xs text-accent-600">Unit 3</div>
                            </div>
                        </div>
                    </div>

                    <!-- Per-Unit Breakdown -->
                    <div class="space-y-3" id="capex-breakdown">
                        <!-- Will be populated by JavaScript -->
                    </div>

                    <div class="mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-100 rounded-lg border border-green-200">
                        <h4 class="font-bold text-green-900 mb-2 flex items-center">
                            <i class="fas fa-chart-line text-green-600 mr-2"></i>
                            Revenue Projection
                        </h4>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <div class="text-green-700 font-medium">Monthly Revenue/Unit:</div>
                                <div class="text-green-600 font-bold">$300+ MXN</div>
                            </div>
                            <div>
                                <div class="text-green-700 font-medium">Payback Period:</div>
                                <div class="text-green-600 font-bold">24-30 months</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enhanced Financial Plan Section -->
        <section id="financial-plan" class="mb-20 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-h1 text-neutral-900 mb-4">Financial Plan</h2>
                <p class="text-xl text-neutral-600 max-w-4xl mx-auto">
                    Non-linear capital deployment designed to maximize efficiency and mitigate risks through sequential validation.
                </p>
            </div>
            
            <!-- Financial Overview Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-area text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">RUNWAY</span>
                    </div>
                    <div class="kpi-value text-primary-600">12-13</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Months Runway</p>
                    <p class="text-xs text-neutral-500">Conservative burn rate calculation</p>
                    <div class="mt-4 flex items-center space-x-2">
                        <div class="flex-1 bg-neutral-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-primary-500 to-accent-500 h-2 rounded-full" style="width: 75%"></div>
                        </div>
                        <span class="text-xs font-medium text-neutral-600">75% to Series A</span>
                    </div>
                </div>

                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-piggy-bank text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">MONTHLY BURN</span>
                    </div>
                    <div class="kpi-value text-accent-600">$580K</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Average Monthly</p>
                    <p class="text-xs text-neutral-500">Including CAPEX deployment</p>
                    <div class="mt-4 flex items-center space-x-2 text-accent-600">
                        <i class="fas fa-trending-down text-xs"></i>
                        <span class="text-xs font-medium">Decreasing post-CAPEX</span>
                    </div>
                </div>

                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-shield-alt text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">SAFETY BUFFER</span>
                    </div>
                    <div class="kpi-value text-purple-600">$476K</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Emergency Reserve</p>
                    <p class="text-xs text-neutral-500">6.6% of total investment</p>
                    <div class="mt-4 flex items-center space-x-2 text-purple-600">
                        <i class="fas fa-lock text-xs"></i>
                        <span class="text-xs font-medium">Risk mitigation fund</span>
                    </div>
                </div>
            </div>

            <!-- Interactive Financial Explorer -->
            <div class="professional-card p-8 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-2">Cash Flow & Monthly Expenditure</h3>
                        <p class="text-neutral-600">Interactive month-by-month financial exploration. Visualizes spending by category and remaining cash, demonstrating prudent capital control.</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="waterfall-view" class="bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-chart-waterfall mr-2"></i>Waterfall View
                        </button>
                        <button id="scenario-analysis" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-calculator mr-2"></i>Scenarios
                        </button>
                    </div>
                </div>

                <!-- Enhanced Month Slider -->
                <div class="mb-8">
                    <div class="flex items-center justify-between mb-3">
                        <label for="month-slider" class="text-sm font-medium text-neutral-700">
                            Month: <span id="month-label" class="font-bold text-primary-600 text-lg">1</span>
                        </label>
                        <div class="flex items-center space-x-4 text-sm text-neutral-600">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-primary-500 rounded"></div>
                                <span>Team</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-accent-500 rounded"></div>
                                <span>Development</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-warning-500 rounded"></div>
                                <span>CAPEX</span>
                            </div>
                        </div>
                    </div>
                    <input id="month-slider" type="range" min="1" max="12" value="1" 
                           class="w-full h-3 bg-neutral-200 rounded-lg appearance-none cursor-pointer slider">
                    <div class="flex justify-between text-xs text-neutral-500 mt-2">
                        <span>Jan 2025</span>
                        <span>Mar 2025</span>
                        <span>Jun 2025</span>
                        <span>Sep 2025</span>
                        <span>Dec 2025</span>
                    </div>
                </div>
                
                <!-- Enhanced KPI Cards -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="kpi-card bg-gradient-to-br from-primary-50 to-primary-100 border-primary-200">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-calendar-day text-primary-600"></i>
                            <span class="text-xs font-medium text-primary-700 bg-primary-200 px-2 py-1 rounded-full">MONTHLY</span>
                        </div>
                        <p class="text-sm text-primary-700 font-medium">Monthly Spend</p>
                        <p id="kpi-gasto-mes" class="text-2xl font-bold text-primary-900"></p>
                    </div>
                    <div class="kpi-card bg-gradient-to-br from-accent-50 to-accent-100 border-accent-200">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-chart-line text-accent-600"></i>
                            <span class="text-xs font-medium text-accent-700 bg-accent-200 px-2 py-1 rounded-full">CUMULATIVE</span>
                        </div>
                        <p class="text-sm text-accent-700 font-medium">Total Spent</p>
                        <p id="kpi-gasto-acumulado" class="text-2xl font-bold text-accent-900"></p>
                    </div>
                    <div class="kpi-card bg-gradient-to-br from-warning-50 to-yellow-100 border-warning-200">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-wallet text-warning-600"></i>
                            <span class="text-xs font-medium text-warning-700 bg-warning-200 px-2 py-1 rounded-full">REMAINING</span>
                        </div>
                        <p class="text-sm text-warning-700 font-medium">Cash Available</p>
                        <p id="kpi-efectivo" class="text-2xl font-bold text-warning-900"></p>
                    </div>
                    <div class="kpi-card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-shield-alt text-purple-600"></i>
                            <span class="text-xs font-medium text-purple-700 bg-purple-200 px-2 py-1 rounded-full">BUFFER</span>
                        </div>
                        <p class="text-sm text-purple-700 font-medium">Emergency Fund</p>
                        <p class="text-2xl font-bold text-purple-900">$476K</p>
                    </div>
                </div>

                <!-- Enhanced Chart Container -->
                <div class="chart-container h-96">
                    <canvas id="financialPlanChart"></canvas>
                </div>

                <!-- Drill-down Details Panel -->
                <div id="financial-details" class="mt-6 p-6 bg-gradient-to-r from-neutral-50 to-neutral-100 rounded-lg border border-neutral-200 hidden">
                    <h4 class="font-bold text-lg mb-4 text-neutral-900">Month <span id="detail-month"></span> Breakdown</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div id="team-breakdown" class="space-y-2">
                            <h5 class="font-semibold text-primary-800 flex items-center">
                                <i class="fas fa-users mr-2"></i>Team Expenses
                            </h5>
                            <div class="text-sm text-neutral-700 space-y-1">
                                <div class="flex justify-between"><span>Core Team (3):</span><span id="core-team-cost"></span></div>
                                <div class="flex justify-between"><span>Additional Hires:</span><span id="additional-hires-cost"></span></div>
                                <div class="flex justify-between"><span>Benefits & Equity:</span><span id="benefits-cost"></span></div>
                            </div>
                        </div>
                        <div id="development-breakdown" class="space-y-2">
                            <h5 class="font-semibold text-accent-800 flex items-center">
                                <i class="fas fa-code mr-2"></i>Development
                            </h5>
                            <div class="text-sm text-neutral-700 space-y-1">
                                <div class="flex justify-between"><span>AI/ML Infrastructure:</span><span id="ai-infra-cost"></span></div>
                                <div class="flex justify-between"><span>SaaS Platform:</span><span id="saas-cost"></span></div>
                                <div class="flex justify-between"><span>Tools & Licenses:</span><span id="tools-cost"></span></div>
                            </div>
                        </div>
                        <div id="capex-breakdown" class="space-y-2">
                            <h5 class="font-semibold text-warning-800 flex items-center">
                                <i class="fas fa-truck mr-2"></i>CAPEX Investment
                            </h5>
                            <div class="text-sm text-neutral-700 space-y-1">
                                <div class="flex justify-between"><span>Vehicle Units:</span><span id="vehicle-cost"></span></div>
                                <div class="flex justify-between"><span>IoT Hardware:</span><span id="iot-cost"></span></div>
                                <div class="flex justify-between"><span>Installation:</span><span id="installation-cost"></span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ROI Scenario Analysis -->
            <div class="professional-card p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-h2 text-neutral-900">ROI Scenario Analysis</h3>
                    <div class="flex space-x-2">
                        <button class="scenario-btn active bg-accent-500 text-white px-4 py-2 rounded-lg text-sm font-medium" data-scenario="conservative">
                            Conservative
                        </button>
                        <button class="scenario-btn bg-neutral-200 text-neutral-700 hover:bg-neutral-300 px-4 py-2 rounded-lg text-sm font-medium" data-scenario="base">
                            Base Case
                        </button>
                        <button class="scenario-btn bg-neutral-200 text-neutral-700 hover:bg-neutral-300 px-4 py-2 rounded-lg text-sm font-medium" data-scenario="optimistic">
                            Optimistic
                        </button>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="chart-container h-64">
                        <canvas id="roiScenarioChart"></canvas>
                    </div>
                    <div class="space-y-4">
                        <div id="scenario-metrics" class="grid grid-cols-2 gap-4">
                            <div class="text-center p-4 bg-gradient-to-br from-accent-50 to-accent-100 rounded-lg border border-accent-200">
                                <div class="text-2xl font-bold text-accent-900" id="scenario-roi">457%</div>
                                <div class="text-sm text-accent-700">5-Year ROI</div>
                            </div>
                            <div class="text-center p-4 bg-gradient-to-br from-primary-50 to-primary-100 rounded-lg border border-primary-200">
                                <div class="text-2xl font-bold text-primary-900" id="scenario-payback">20</div>
                                <div class="text-sm text-primary-700">Months Payback</div>
                            </div>
                        </div>
                        <div class="space-y-3 text-sm">
                            <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg">
                                <span class="font-medium">Annual Savings:</span>
                                <span id="scenario-savings" class="font-bold text-accent-600">$6.3M MXN</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg">
                                <span class="font-medium">Series A Valuation:</span>
                                <span id="scenario-valuation" class="font-bold text-primary-600">$45M MXN</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-neutral-50 rounded-lg">
                                <span class="font-medium">Market Penetration:</span>
                                <span id="scenario-penetration" class="font-bold text-warning-600">0.8%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enhanced Technology Roadmap Section -->
        <section id="tech-roadmap" class="mb-20 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-h1 text-neutral-900 mb-4">Technology Roadmap</h2>
                <p class="text-xl text-neutral-600 max-w-4xl mx-auto">
                    Sequential risk mitigation approach: validate critical hypotheses first through our proprietary AI workforce ecosystem.
                </p>
            </div>

            <!-- AI Agents Overview Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="professional-card p-6 cursor-pointer agent-card" data-agent="hase">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-brain text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">CORE ENGINE</span>
                    </div>
                    <h3 class="text-lg font-bold text-neutral-900 mb-2">HASE</h3>
                    <p class="text-sm text-neutral-600 mb-3">Risk Scoring Engine</p>
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Budget:</span>
                            <span class="font-bold text-blue-600">$600K</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Timeline:</span>
                            <span class="font-medium">Months 1-6</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Target AUC:</span>
                            <span class="font-bold text-accent-600">>90%</span>
                        </div>
                    </div>
                </div>

                <div class="professional-card p-6 cursor-pointer agent-card" data-agent="pia">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-comments text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">INTERVENTION</span>
                    </div>
                    <h3 class="text-lg font-bold text-neutral-900 mb-2">PIA</h3>
                    <p class="text-sm text-neutral-600 mb-3">Proactive Intervention Agent</p>
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Budget:</span>
                            <span class="font-bold text-green-600">$400K</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Timeline:</span>
                            <span class="font-medium">Months 2-12</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Adoption:</span>
                            <span class="font-bold text-accent-600">>60%</span>
                        </div>
                    </div>
                </div>

                <div class="professional-card p-6 cursor-pointer agent-card" data-agent="super-pma">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-truck text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">MONETIZATION</span>
                    </div>
                    <h3 class="text-lg font-bold text-neutral-900 mb-2">Super-PMA</h3>
                    <p class="text-sm text-neutral-600 mb-3">Predictive Maintenance Agent</p>
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Budget:</span>
                            <span class="font-bold text-purple-600">$450K</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Timeline:</span>
                            <span class="font-medium">Months 3-12</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Revenue:</span>
                            <span class="font-bold text-accent-600">$300+/month</span>
                        </div>
                    </div>
                </div>

                <div class="professional-card p-6 cursor-pointer agent-card" data-agent="asistente">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-robot text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">SUPPORT</span>
                    </div>
                    <h3 class="text-lg font-bold text-neutral-900 mb-2">Digital Assistant</h3>
                    <p class="text-sm text-neutral-600 mb-3">Multimodal Support Agent</p>
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Budget:</span>
                            <span class="font-bold text-orange-600">$250K</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Timeline:</span>
                            <span class="font-medium">Months 4-12</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-neutral-500">Automation:</span>
                            <span class="font-bold text-accent-600">~70%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Gantt Chart -->
            <div class="professional-card p-8 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-2">Development Timeline & Dependencies</h3>
                        <p class="text-neutral-600">Interactive Gantt view showing critical path, resource allocation, and inter-agent dependencies.</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="gantt-view-toggle" class="bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-project-diagram mr-2"></i>Dependencies
                        </button>
                        <button id="resource-overlay" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-users mr-2"></i>Resources
                        </button>
                    </div>
                </div>
                
                <!-- Gantt Chart Container -->
                <div id="gantt-container" class="relative">
                    <!-- Month Headers -->
                    <div class="grid grid-cols-12 gap-2 mb-4 text-center text-sm font-medium text-neutral-600">
                        <div>Jan</div><div>Feb</div><div>Mar</div><div>Apr</div><div>May</div><div>Jun</div>
                        <div>Jul</div><div>Aug</div><div>Sep</div><div>Oct</div><div>Nov</div><div>Dec</div>
                    </div>
                    
                    <!-- Gantt Bars -->
                    <div class="space-y-4" id="gantt-bars">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Detailed Agent Breakdown Modal -->
            <div id="agent-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-8">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center space-x-4">
                                <div id="modal-agent-icon" class="w-16 h-16 rounded-xl flex items-center justify-center">
                                    <i id="modal-agent-icon-class" class="text-white text-2xl"></i>
                                </div>
                                <div>
                                    <h3 id="modal-agent-title" class="text-2xl font-bold text-neutral-900"></h3>
                                    <p id="modal-agent-subtitle" class="text-neutral-600"></p>
                                </div>
                            </div>
                            <button id="close-modal" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                                <i class="fas fa-times text-neutral-500"></i>
                            </button>
                        </div>

                        <!-- Agent Details Grid -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Budget Breakdown -->
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                    <i class="fas fa-dollar-sign text-primary-500 mr-3"></i>
                                    Budget Breakdown
                                </h4>
                                <div id="modal-budget-details" class="space-y-3">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>

                            <!-- Technical Stack -->
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                    <i class="fas fa-code text-accent-500 mr-3"></i>
                                    Tech Stack
                                </h4>
                                <div id="modal-tech-stack" class="space-y-2">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>

                            <!-- KPIs & Metrics -->
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                    <i class="fas fa-chart-line text-warning-500 mr-3"></i>
                                    Key Performance Indicators
                                </h4>
                                <div id="modal-kpis" class="space-y-3">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>

                            <!-- Timeline & Milestones -->
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                    <i class="fas fa-calendar-alt text-purple-500 mr-3"></i>
                                    Timeline & Milestones
                                </h4>
                                <div id="modal-timeline" class="space-y-3">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Resource Allocation Chart -->
                        <div class="mt-8 professional-card p-6">
                            <h4 class="text-lg font-bold text-neutral-900 mb-4">Resource Allocation Over Time</h4>
                            <div class="chart-container h-64">
                                <canvas id="agent-resource-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enhanced Operations Plan Section -->
        <section id="operations-plan" class="mb-20 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-h1 text-neutral-900 mb-4">Operations Plan</h2>
                <p class="text-xl text-neutral-600 max-w-4xl mx-auto mb-8">
                    Synchronizing GTM, legal framework, and pilot execution with technology milestones to build a viable, compliant business.
                </p>
                
                <!-- Protection Conductores Story -->
                <div class="professional-card p-8 max-w-4xl mx-auto mb-8 bg-gradient-to-br from-green-50 to-emerald-100 border-green-200">
                    <div class="flex items-start space-x-6">
                        <div class="w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-shield-check text-white text-3xl"></i>
                        </div>
                        <div class="flex-1 text-left">
                            <h3 class="text-h2 text-neutral-900 mb-4">Our Competitive Moat: "Protección Conductores"</h3>
                            <p class="text-lg text-neutral-700 mb-6 leading-relaxed">
                                While competitors focus on credit scoring, we've built something revolutionary: 
                                <strong class="text-green-600">a guarantee system that actually protects operators</strong> when life gets difficult.
                            </p>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="p-4 bg-white rounded-lg border border-green-200">
                                    <div class="flex items-center space-x-3 mb-3">
                                        <i class="fas fa-pause-circle text-green-600"></i>
                                        <span class="font-bold text-green-900">Payment Pause</span>
                                    </div>
                                    <p class="text-sm text-green-800">Bad month? Vehicle breakdown? Pause payments without penalties while we help you get back on track.</p>
                                </div>
                                <div class="p-4 bg-white rounded-lg border border-green-200">
                                    <div class="flex items-center space-x-3 mb-3">
                                        <i class="fas fa-calendar-alt text-green-600"></i>
                                        <span class="font-bold text-green-900">Term Adjustment</span>
                                    </div>
                                    <p class="text-sm text-green-800">Flexible repayment calendar that adapts to your reality, not rigid bank schedules.</p>
                                </div>
                                <div class="p-4 bg-white rounded-lg border border-green-200">
                                    <div class="flex items-center space-x-3 mb-3">
                                        <i class="fas fa-tools text-green-600"></i>
                                        <span class="font-bold text-green-900">Keep Moving</span>
                                    </div>
                                    <p class="text-sm text-green-800">Active support to ensure you stay operational and earning, even during tough times.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Operations Overview Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-12">
                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-rocket text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">GTM</span>
                    </div>
                    <div class="kpi-value text-blue-600">3</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Pilot Operators</p>
                    <p class="text-xs text-neutral-500">Pre-qualified & contracted</p>
                </div>

                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-balance-scale text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">LEGAL</span>
                    </div>
                    <div class="kpi-value text-green-600">100%</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Compliance Ready</p>
                    <p class="text-xs text-neutral-500">PROFECO + PLD validated</p>
                </div>

                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-truck text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">PILOT</span>
                    </div>
                    <div class="kpi-value text-purple-600">0%</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Target Delinquency</p>
                    <p class="text-xs text-neutral-500">vs 15-25% traditional</p>
                </div>

                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">NPS</span>
                    </div>
                    <div class="kpi-value text-orange-600">70+</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Target NPS</p>
                    <p class="text-xs text-neutral-500">Customer satisfaction</p>
                </div>
            </div>

            <!-- Interactive Operations Timeline -->
            <div class="professional-card p-8 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-2">Operations & Business Milestones</h3>
                        <p class="text-neutral-600">Interactive timeline showing GTM, legal, and pilot synchronization with technology development.</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="ops-timeline-toggle" class="bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-project-diagram mr-2"></i>Milestones
                        </button>
                        <button id="compliance-matrix" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-shield-check mr-2"></i>Compliance
                        </button>
                    </div>
                </div>

                <!-- Operations Timeline -->
                <div id="ops-timeline-container" class="space-y-6">
                    <!-- Will be populated by JavaScript -->
                </div>

                <!-- Compliance Matrix -->
                <div id="compliance-matrix-container" class="hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="professional-card p-6">
                            <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                <i class="fas fa-gavel text-primary-500 mr-3"></i>
                                Legal Framework
                            </h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200">
                                    <span class="font-medium text-green-900">PROFECO Registration</span>
                                    <i class="fas fa-check-circle text-green-600"></i>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200">
                                    <span class="font-medium text-green-900">PLD Compliance</span>
                                    <i class="fas fa-check-circle text-green-600"></i>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg border border-yellow-200">
                                    <span class="font-medium text-yellow-900">SOFOM Preparation</span>
                                    <i class="fas fa-clock text-yellow-600"></i>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200">
                                    <span class="font-medium text-blue-900">S.A.P.I. Structure</span>
                                    <i class="fas fa-cog text-blue-600"></i>
                                </div>
                            </div>
                        </div>

                        <div class="professional-card p-6">
                            <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                <i class="fas fa-shield-alt text-accent-500 mr-3"></i>
                                Risk Mitigation & Legal Foundation
                            </h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200">
                                    <span class="font-medium text-green-900">Insurance Coverage</span>
                                    <span class="text-sm text-green-700">Comprehensive</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200">
                                    <span class="font-medium text-green-900">Legal Foundation</span>
                                    <span class="text-sm text-green-700">CMU201119DD6</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200">
                                    <span class="font-medium text-green-900">Regulatory Agility</span>
                                    <span class="text-sm text-green-700">Avoid SOFOM burden</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200">
                                    <span class="font-medium text-green-900">Pilot Validation</span>
                                    <span class="text-sm text-green-700">De-risked approach</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Pilot Dashboard Preview -->
            <div class="professional-card p-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-2">Live Pilot Dashboard</h3>
                        <p class="text-neutral-600">Simulated real-time metrics showing pilot performance and success indicators.</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                            <span class="text-sm text-neutral-600">Live Data</span>
                        </div>
                        <button id="pilot-dashboard-fullscreen" class="bg-gradient-to-r from-primary-500 to-accent-500 hover:from-primary-600 hover:to-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-expand mr-2"></i>Full Dashboard
                        </button>
                    </div>
                </div>

                <!-- KPI Gauges Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="text-center">
                        <div class="relative w-24 h-24 mx-auto mb-4">
                            <svg class="w-24 h-24 transform -rotate-90" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="var(--neutral-200)" stroke-width="8" fill="none"></circle>
                                <circle cx="50" cy="50" r="40" stroke="var(--accent-500)" stroke-width="8" fill="none" 
                                        stroke-dasharray="251.2" stroke-dashoffset="0" class="pilot-gauge" data-value="0"></circle>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-xl font-bold text-accent-600" id="delinquency-rate">0%</span>
                            </div>
                        </div>
                        <div class="font-medium text-neutral-900">Delinquency Rate</div>
                        <div class="text-sm text-neutral-500">Target: 0%</div>
                    </div>

                    <div class="text-center">
                        <div class="relative w-24 h-24 mx-auto mb-4">
                            <svg class="w-24 h-24 transform -rotate-90" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="var(--neutral-200)" stroke-width="8" fill="none"></circle>
                                <circle cx="50" cy="50" r="40" stroke="var(--primary-500)" stroke-width="8" fill="none" 
                                        stroke-dasharray="251.2" stroke-dashoffset="175.84" class="pilot-gauge" data-value="30"></circle>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-xl font-bold text-primary-600" id="uptime-rate">95%</span>
                            </div>
                        </div>
                        <div class="font-medium text-neutral-900">Vehicle Uptime</div>
                        <div class="text-sm text-neutral-500">Target: >95%</div>
                    </div>

                    <div class="text-center">
                        <div class="relative w-24 h-24 mx-auto mb-4">
                            <svg class="w-24 h-24 transform -rotate-90" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="var(--neutral-200)" stroke-width="8" fill="none"></circle>
                                <circle cx="50" cy="50" r="40" stroke="var(--warning-500)" stroke-width="8" fill="none" 
                                        stroke-dasharray="251.2" stroke-dashoffset="125.6" class="pilot-gauge" data-value="50"></circle>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-xl font-bold text-warning-600" id="nps-score">65</span>
                            </div>
                        </div>
                        <div class="font-medium text-neutral-900">NPS Score</div>
                        <div class="text-sm text-neutral-500">Target: >70</div>
                    </div>

                    <div class="text-center">
                        <div class="relative w-24 h-24 mx-auto mb-4">
                            <svg class="w-24 h-24 transform -rotate-90" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="var(--neutral-200)" stroke-width="8" fill="none"></circle>
                                <circle cx="50" cy="50" r="40" stroke="var(--purple-500)" stroke-width="8" fill="none" 
                                        stroke-dasharray="251.2" stroke-dashoffset="62.8" class="pilot-gauge" data-value="75"></circle>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-xl font-bold text-purple-600" id="revenue-target">$850</span>
                            </div>
                        </div>
                        <div class="font-medium text-neutral-900">Monthly Revenue</div>
                        <div class="text-sm text-neutral-500">Per vehicle (MXN)</div>
                    </div>
                </div>

                <!-- Alert System Simulation -->
                <div class="bg-gradient-to-r from-neutral-50 to-neutral-100 rounded-lg p-6 border border-neutral-200">
                    <h4 class="font-bold text-neutral-900 mb-4 flex items-center">
                        <i class="fas fa-bell text-warning-500 mr-3"></i>
                        Live Alert System
                    </h4>
                    <div class="space-y-3" id="alert-system">
                        <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-check-circle text-green-600"></i>
                                <span class="text-sm font-medium text-green-900">All vehicles operational</span>
                            </div>
                            <span class="text-xs text-green-700">2 min ago</span>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-info-circle text-blue-600"></i>
                                <span class="text-sm font-medium text-blue-900">Maintenance reminder scheduled</span>
                            </div>
                            <span class="text-xs text-blue-700">15 min ago</span>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg border border-yellow-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-exclamation-triangle text-yellow-600"></i>
                                <span class="text-sm font-medium text-yellow-900">Payment reminder sent to operator #2</span>
                            </div>
                            <span class="text-xs text-yellow-700">1 hour ago</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Full Pilot Dashboard Modal -->
            <div id="pilot-dashboard-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
                <div class="bg-white rounded-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-8">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center space-x-4">
                                <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-tachometer-alt text-white text-2xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-neutral-900">Live Pilot Dashboard</h3>
                                    <p class="text-neutral-600">Real-time monitoring and performance analytics</p>
                                </div>
                            </div>
                            <button id="close-pilot-modal" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                                <i class="fas fa-times text-neutral-500"></i>
                            </button>
                        </div>

                        <!-- Real-time Status -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div class="professional-card p-6 text-center">
                                <div class="w-12 h-12 bg-green-500 rounded-full mx-auto mb-3 flex items-center justify-center animate-pulse">
                                    <i class="fas fa-truck text-white"></i>
                                </div>
                                <div class="text-2xl font-bold text-green-600" id="active-vehicles">3</div>
                                <div class="text-sm text-neutral-600">Active Vehicles</div>
                                <div class="text-xs text-green-600 mt-1">All operational</div>
                            </div>
                            <div class="professional-card p-6 text-center">
                                <div class="w-12 h-12 bg-blue-500 rounded-full mx-auto mb-3 flex items-center justify-center">
                                    <i class="fas fa-users text-white"></i>
                                </div>
                                <div class="text-2xl font-bold text-blue-600" id="active-operators">3</div>
                                <div class="text-sm text-neutral-600">Active Operators</div>
                                <div class="text-xs text-blue-600 mt-1">100% compliance</div>
                            </div>
                            <div class="professional-card p-6 text-center">
                                <div class="w-12 h-12 bg-purple-500 rounded-full mx-auto mb-3 flex items-center justify-center">
                                    <i class="fas fa-dollar-sign text-white"></i>
                                </div>
                                <div class="text-2xl font-bold text-purple-600" id="daily-revenue">$2,760</div>
                                <div class="text-sm text-neutral-600">Daily Revenue</div>
                                <div class="text-xs text-purple-600 mt-1">MXN per day</div>
                            </div>
                            <div class="professional-card p-6 text-center">
                                <div class="w-12 h-12 bg-orange-500 rounded-full mx-auto mb-3 flex items-center justify-center">
                                    <i class="fas fa-exclamation-triangle text-white"></i>
                                </div>
                                <div class="text-2xl font-bold text-orange-600" id="active-alerts">2</div>
                                <div class="text-sm text-neutral-600">Active Alerts</div>
                                <div class="text-xs text-orange-600 mt-1">Low priority</div>
                            </div>
                        </div>

                        <!-- Vehicle Performance Grid -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                            <div class="professional-card p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h4 class="font-bold text-neutral-900">Vehicle #001</h4>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium">ACTIVE</span>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Operator:</span>
                                        <span class="text-sm font-medium">Miguel R.</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Daily Revenue:</span>
                                        <span class="text-sm font-medium text-green-600">$920 MXN</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Fuel Efficiency:</span>
                                        <span class="text-sm font-medium">8.2 km/m³</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Uptime:</span>
                                        <span class="text-sm font-medium text-green-600">98%</span>
                                    </div>
                                    <div class="mt-4">
                                        <div class="flex justify-between text-xs text-neutral-500 mb-1">
                                            <span>Payment Status</span>
                                            <span>Current</span>
                                        </div>
                                        <div class="w-full bg-neutral-200 rounded-full h-2">
                                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="professional-card p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h4 class="font-bold text-neutral-900">Vehicle #002</h4>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium">ACTIVE</span>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Operator:</span>
                                        <span class="text-sm font-medium">Carlos M.</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Daily Revenue:</span>
                                        <span class="text-sm font-medium text-green-600">$890 MXN</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Fuel Efficiency:</span>
                                        <span class="text-sm font-medium">7.9 km/m³</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Uptime:</span>
                                        <span class="text-sm font-medium text-green-600">96%</span>
                                    </div>
                                    <div class="mt-4">
                                        <div class="flex justify-between text-xs text-neutral-500 mb-1">
                                            <span>Payment Status</span>
                                            <span>Current</span>
                                        </div>
                                        <div class="w-full bg-neutral-200 rounded-full h-2">
                                            <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="professional-card p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h4 class="font-bold text-neutral-900">Vehicle #003</h4>
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium">MAINTENANCE</span>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Operator:</span>
                                        <span class="text-sm font-medium">José L.</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Daily Revenue:</span>
                                        <span class="text-sm font-medium text-yellow-600">$950 MXN</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Fuel Efficiency:</span>
                                        <span class="text-sm font-medium">8.5 km/m³</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-neutral-600">Uptime:</span>
                                        <span class="text-sm font-medium text-yellow-600">94%</span>
                                    </div>
                                    <div class="mt-4">
                                        <div class="flex justify-between text-xs text-neutral-500 mb-1">
                                            <span>Payment Status</span>
                                            <span>7 days early</span>
                                        </div>
                                        <div class="w-full bg-neutral-200 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 100%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Performance Charts -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="professional-card p-6">
                                <h4 class="font-bold text-neutral-900 mb-4">Revenue Trend (Last 30 Days)</h4>
                                <div class="chart-container h-64">
                                    <canvas id="pilot-revenue-chart"></canvas>
                                </div>
                            </div>
                            <div class="professional-card p-6">
                                <h4 class="font-bold text-neutral-900 mb-4">Delinquency Tracking</h4>
                                <div class="chart-container h-64">
                                    <canvas id="pilot-delinquency-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Legal Foundation & Credibility -->
            <div class="professional-card p-8 mb-8">
                <div class="text-center mb-8">
                    <h3 class="text-h2 text-neutral-900 mb-4">Institutional-Grade Legal Foundation</h3>
                    <p class="text-lg text-neutral-600 max-w-4xl mx-auto">
                        Built on solid legal ground with regulatory agility and institutional credibility from day one.
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Legal Structure -->
                    <div class="space-y-6">
                        <div class="flex items-start space-x-4 p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg border border-blue-200">
                            <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-building text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-blue-900 mb-2">S.A.P.I. Corporate Structure</h4>
                                <p class="text-sm text-blue-800">
                                    Sociedad Anónima Promotora de Inversión structure designed for institutional investment and Series A readiness.
                                </p>
                                <div class="mt-2 text-xs text-blue-700 font-medium">
                                    Registration: CMU201119DD6 • Incorporation: July 24, 2025
                                </div>
                            </div>
                        </div>

                        <div class="flex items-start space-x-4 p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-lg border border-green-200">
                            <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-gavel text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-green-900 mb-2">Regulatory Agility</h4>
                                <p class="text-sm text-green-800">
                                    Strategic avoidance of SOFOM regulatory burden during pilot phase, with clear path to compliance when scaling.
                                </p>
                                <div class="mt-2 text-xs text-green-700 font-medium">
                                    PROFECO registered • PLD compliant • Series A ready
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Credibility Indicators -->
                    <div class="space-y-6">
                        <div class="p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border border-purple-200">
                            <h4 class="font-bold text-purple-900 mb-4 flex items-center">
                                <i class="fas fa-certificate text-purple-600 mr-3"></i>
                                Institutional Credibility
                            </h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm font-medium text-purple-800">Legal Entity Status:</span>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium">ACTIVE</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm font-medium text-purple-800">Regulatory Compliance:</span>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium">CURRENT</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm font-medium text-purple-800">Series A Readiness:</span>
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium">PREPARED</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm font-medium text-purple-800">Data Room Status:</span>
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium">IN PROGRESS</span>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg border border-orange-200">
                            <h4 class="font-bold text-orange-900 mb-4 flex items-center">
                                <i class="fas fa-handshake text-orange-600 mr-3"></i>
                                Investor Confidence Factors
                            </h4>
                            <ul class="space-y-2 text-sm text-orange-800">
                                <li class="flex items-center space-x-2">
                                    <i class="fas fa-check-circle text-orange-600 text-xs"></i>
                                    <span>Transparent corporate governance structure</span>
                                </li>
                                <li class="flex items-center space-x-2">
                                    <i class="fas fa-check-circle text-orange-600 text-xs"></i>
                                    <span>Clear intellectual property ownership</span>
                                </li>
                                <li class="flex items-center space-x-2">
                                    <i class="fas fa-check-circle text-orange-600 text-xs"></i>
                                    <span>Comprehensive insurance and risk coverage</span>
                                </li>
                                <li class="flex items-center space-x-2">
                                    <i class="fas fa-check-circle text-orange-600 text-xs"></i>
                                    <span>Institutional-grade financial reporting</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enhanced Team & Execution Section -->
        <section id="team-execution" class="mb-20 scroll-mt-16">
            <div class="text-center mb-12">
                <h2 class="text-h1 text-neutral-900 mb-4">Team & Execution</h2>
                <p class="text-xl text-neutral-600 max-w-4xl mx-auto">
                    The most defensible competitive advantage and primary execution risk mitigator: our Golden Handcuffs strategy.
                </p>
            </div>

            <!-- Golden Handcuffs Hero Section -->
            <div class="professional-card p-8 mb-12 bg-gradient-to-br from-primary-50 to-accent-50 border-primary-200">
                <div class="flex items-start space-x-6">
                    <div class="w-16 h-16 bg-gradient-to-br from-warning-500 to-yellow-600 rounded-xl flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-handshake text-white text-2xl"></i>
                    </div>
                    <div class="flex-1">
                        <h3 class="text-h2 text-neutral-900 mb-4">The Golden Handcuffs Strategy</h3>
                        <p class="text-lg text-neutral-700 mb-6 leading-relaxed">
                            Execution certainty relies on a pre-assembled team of 3 senior technical members with proven chemistry and velocity. 
                            Their compensation is strategic: low salaries plus <strong class="text-primary-600">~7% collective equity</strong>, 
                            creating <strong class="text-warning-600">"golden handcuffs"</strong> that eliminate talent flight risk.
                        </p>
                        <div class="bg-white p-6 rounded-lg border border-primary-200">
                            <p class="text-primary-800 font-medium italic">
                                <i class="fas fa-quote-left text-primary-500 mr-2"></i>
                                For investors, this isn't an HR plan—it's the guarantee that the team building the value will stay to deliver it. 
                                It's sophisticated capital allocation directing equity to long-term IP creators.
                                <i class="fas fa-quote-right text-primary-500 ml-2"></i>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Overview Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-users text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">CORE TEAM</span>
                    </div>
                    <div class="kpi-value text-primary-600">8</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Team Members</p>
                    <p class="text-xs text-neutral-500">3 senior + 5 specialized roles</p>
                    <div class="mt-4 flex items-center space-x-2">
                        <div class="flex-1 bg-neutral-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-primary-500 to-accent-500 h-2 rounded-full" style="width: 85%"></div>
                        </div>
                        <span class="text-xs font-medium text-neutral-600">85% retention</span>
                    </div>
                </div>

                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-warning-500 to-yellow-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-percentage text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">EQUITY POOL</span>
                    </div>
                    <div class="kpi-value text-warning-600">~7%</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Collective Equity</p>
                    <p class="text-xs text-neutral-500">Strategic retention mechanism</p>
                    <div class="mt-4 flex items-center space-x-2 text-warning-600">
                        <i class="fas fa-lock text-xs"></i>
                        <span class="text-xs font-medium">Golden handcuffs active</span>
                    </div>
                </div>

                <div class="professional-card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-clock text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full">TOTAL HOURS</span>
                    </div>
                    <div class="kpi-value text-accent-600">7,584</div>
                    <p class="text-sm font-medium text-neutral-600 mt-2">Development Hours</p>
                    <p class="text-xs text-neutral-500">Across 12-month timeline</p>
                    <div class="mt-4 flex items-center space-x-2 text-accent-600">
                        <i class="fas fa-rocket text-xs"></i>
                        <span class="text-xs font-medium">High velocity team</span>
                    </div>
                </div>
            </div>

            <!-- Interactive Resource Allocation Heatmap -->
            <div class="professional-card p-8 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-h2 text-neutral-900 mb-2">Resource Allocation Heatmap</h3>
                        <p class="text-neutral-600">Interactive 8×12 grid showing monthly task allocation. Hover for detailed breakdowns, click for role deep-dive.</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="heatmap-view-toggle" class="bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-th mr-2"></i>Grid View
                        </button>
                        <button id="workload-intensity" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            <i class="fas fa-fire mr-2"></i>Intensity
                        </button>
                    </div>
                </div>

                <!-- Heatmap Legend -->
                <div class="flex items-center justify-between mb-6 p-4 bg-neutral-50 rounded-lg">
                    <div class="flex items-center space-x-6">
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 bg-neutral-200 rounded"></div>
                            <span class="text-sm text-neutral-600">Not Active</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 bg-blue-300 rounded"></div>
                            <span class="text-sm text-neutral-600">Low Intensity</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 bg-blue-500 rounded"></div>
                            <span class="text-sm text-neutral-600">Medium Intensity</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 bg-blue-700 rounded"></div>
                            <span class="text-sm text-neutral-600">High Intensity</span>
                        </div>
                    </div>
                    <div class="text-sm text-neutral-500">
                        <i class="fas fa-info-circle mr-1"></i>
                        Hover cells for details, click roles for breakdown
                    </div>
                </div>

                <!-- Heatmap Grid -->
                <div class="overflow-x-auto">
                    <div class="min-w-full">
                        <!-- Month Headers -->
                        <div class="grid grid-cols-13 gap-1 mb-2">
                            <div class="text-sm font-medium text-neutral-600 text-center py-2">Role</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Jan</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Feb</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Mar</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Apr</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">May</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Jun</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Jul</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Aug</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Sep</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Oct</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Nov</div>
                            <div class="text-xs font-medium text-neutral-600 text-center py-2">Dec</div>
                        </div>

                        <!-- Heatmap Rows -->
                        <div id="heatmap-grid" class="space-y-1">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Golden Handcuffs Equity Breakdown -->
            <div class="professional-card p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-h2 text-neutral-900">Golden Handcuffs Equity Structure</h3>
                    <button id="equity-calculator" class="bg-gradient-to-r from-warning-500 to-yellow-600 hover:from-warning-600 hover:to-yellow-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2">
                        <i class="fas fa-calculator"></i>
                        <span>Equity Calculator</span>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Equity Distribution Chart -->
                    <div class="chart-container h-80">
                        <canvas id="equity-distribution-chart"></canvas>
                    </div>
                    
                    <!-- Detailed Equity Breakdown -->
                    <div class="space-y-4">
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-4 bg-gradient-to-r from-primary-50 to-primary-100 rounded-lg border border-primary-200">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-primary-500 rounded-full"></div>
                                    <div>
                                        <div class="font-medium text-primary-900">Data Scientist</div>
                                        <div class="text-sm text-primary-700">$35K/month + equity</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-bold text-primary-900">~3.0%</div>
                                    <div class="text-sm text-primary-700">$420K total</div>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-4 bg-gradient-to-r from-accent-50 to-accent-100 rounded-lg border border-accent-200">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-accent-500 rounded-full"></div>
                                    <div>
                                        <div class="font-medium text-accent-900">ML Engineer</div>
                                        <div class="text-sm text-accent-700">$30K/month + equity</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-bold text-accent-900">~2.0%</div>
                                    <div class="text-sm text-accent-700">$360K total</div>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-4 bg-gradient-to-r from-warning-50 to-yellow-100 rounded-lg border border-warning-200">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-warning-500 rounded-full"></div>
                                    <div>
                                        <div class="font-medium text-warning-900">Full-Stack Dev</div>
                                        <div class="text-sm text-warning-700">$30K/month + equity</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-bold text-warning-900">~2.0%</div>
                                    <div class="text-sm text-warning-700">$360K total</div>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-4 bg-gradient-to-r from-neutral-50 to-neutral-100 rounded-lg border border-neutral-200">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-neutral-500 rounded-full"></div>
                                    <div>
                                        <div class="font-medium text-neutral-900">Support Team (5)</div>
                                        <div class="text-sm text-neutral-700">$9K/month each</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-bold text-neutral-900">~0%</div>
                                    <div class="text-sm text-neutral-700">$540K total</div>
                                </div>
                            </div>
                        </div>

                        <!-- Retention Metrics -->
                        <div class="mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-100 rounded-lg border border-green-200">
                            <h4 class="font-bold text-green-900 mb-3 flex items-center">
                                <i class="fas fa-shield-alt text-green-600 mr-2"></i>
                                Retention Security Metrics
                            </h4>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <div class="text-green-700 font-medium">Vesting Schedule:</div>
                                    <div class="text-green-600">4-year cliff</div>
                                </div>
                                <div>
                                    <div class="text-green-700 font-medium">Equity Value:</div>
                                    <div class="text-green-600">$3.15M @ Series A</div>
                                </div>
                                <div>
                                    <div class="text-green-700 font-medium">Flight Risk:</div>
                                    <div class="text-green-600">< 5%</div>
                                </div>
                                <div>
                                    <div class="text-green-700 font-medium">Commitment Level:</div>
                                    <div class="text-green-600">Institutional</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Equity Calculator Modal -->
            <div id="equity-calculator-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-8">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center space-x-4">
                                <div class="w-16 h-16 bg-gradient-to-br from-warning-500 to-yellow-600 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-calculator text-white text-2xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-neutral-900">Equity Calculator</h3>
                                    <p class="text-neutral-600">Interactive equity valuation and scenarios</p>
                                </div>
                            </div>
                            <button id="close-equity-modal" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                                <i class="fas fa-times text-neutral-500"></i>
                            </button>
                        </div>

                        <!-- Calculator Controls -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4">Scenario Parameters</h4>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-neutral-700 mb-2">Series A Valuation (MXN)</label>
                                        <input type="range" id="valuation-slider" min="30000000" max="60000000" value="45000000" 
                                               class="w-full slider">
                                        <div class="flex justify-between text-xs text-neutral-500 mt-1">
                                            <span>$30M</span>
                                            <span id="valuation-display" class="font-bold text-primary-600">$45M</span>
                                            <span>$60M</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-neutral-700 mb-2">Team Equity Pool (%)</label>
                                        <input type="range" id="equity-pool-slider" min="5" max="15" value="7" step="0.5"
                                               class="w-full slider">
                                        <div class="flex justify-between text-xs text-neutral-500 mt-1">
                                            <span>5%</span>
                                            <span id="equity-pool-display" class="font-bold text-warning-600">7%</span>
                                            <span>15%</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-neutral-700 mb-2">Vesting Period (years)</label>
                                        <select id="vesting-period" class="w-full p-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500">
                                            <option value="3">3 years</option>
                                            <option value="4" selected>4 years (standard)</option>
                                            <option value="5">5 years</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4">Calculated Values</h4>
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center p-3 bg-primary-50 rounded-lg">
                                        <span class="font-medium text-primary-900">Total Equity Pool Value</span>
                                        <span id="total-pool-value" class="font-bold text-primary-600">$3.15M MXN</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 bg-accent-50 rounded-lg">
                                        <span class="font-medium text-accent-900">Data Scientist (3.0%)</span>
                                        <span id="data-scientist-value" class="font-bold text-accent-600">$1.35M MXN</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 bg-warning-50 rounded-lg">
                                        <span class="font-medium text-warning-900">ML Engineer (2.0%)</span>
                                        <span id="ml-engineer-value" class="font-bold text-warning-600">$900K MXN</span>
                                    </div>
                                    <div class="flex justify-between items-center p-3 bg-purple-50 rounded-lg">
                                        <span class="font-medium text-purple-900">Full-Stack Dev (2.0%)</span>
                                        <span id="fullstack-value" class="font-bold text-purple-600">$900K MXN</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Retention Analysis -->
                        <div class="professional-card p-6 mb-6">
                            <h4 class="text-lg font-bold text-neutral-900 mb-4">Golden Handcuffs Analysis</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-green-600 mb-2" id="retention-probability">95%</div>
                                    <div class="text-sm text-neutral-600">Retention Probability</div>
                                    <div class="text-xs text-neutral-500 mt-1">Based on equity value vs market</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-blue-600 mb-2" id="breakeven-months">18</div>
                                    <div class="text-sm text-neutral-600">Months to Break-Even</div>
                                    <div class="text-xs text-neutral-500 mt-1">When equity > opportunity cost</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-purple-600 mb-2" id="risk-score">Very Low</div>
                                    <div class="text-sm text-neutral-600">Flight Risk</div>
                                    <div class="text-xs text-neutral-500 mt-1">Institutional-grade retention</div>
                                </div>
                            </div>
                        </div>

                        <!-- Scenario Comparison Chart -->
                        <div class="professional-card p-6">
                            <h4 class="text-lg font-bold text-neutral-900 mb-4">Equity Value Scenarios</h4>
                            <div class="chart-container h-64">
                                <canvas id="equity-scenarios-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Role Detail Modal -->
            <div id="role-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-8">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center space-x-4">
                                <div id="modal-role-icon" class="w-16 h-16 rounded-xl flex items-center justify-center">
                                    <i id="modal-role-icon-class" class="text-white text-2xl"></i>
                                </div>
                                <div>
                                    <h3 id="modal-role-title" class="text-2xl font-bold text-neutral-900"></h3>
                                    <p id="modal-role-subtitle" class="text-neutral-600"></p>
                                </div>
                            </div>
                            <button id="close-role-modal" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                                <i class="fas fa-times text-neutral-500"></i>
                            </button>
                        </div>

                        <!-- Role Details Grid -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Monthly Allocation -->
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                    <i class="fas fa-calendar-alt text-primary-500 mr-3"></i>
                                    Monthly Allocation
                                </h4>
                                <div id="modal-monthly-allocation" class="space-y-2">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>

                            <!-- Compensation & Equity -->
                            <div class="professional-card p-6">
                                <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                    <i class="fas fa-dollar-sign text-accent-500 mr-3"></i>
                                    Compensation & Equity
                                </h4>
                                <div id="modal-compensation" class="space-y-3">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Workload Chart -->
                        <div class="mt-8 professional-card p-6">
                            <h4 class="text-lg font-bold text-neutral-900 mb-4">Monthly Workload Distribution</h4>
                            <div class="chart-container h-64">
                                <canvas id="role-workload-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Floating Action Button -->
    <div class="fab" id="fab" title="Executive Summary">
        <i class="fas fa-star"></i>
    </div>

    <footer class="bg-neutral-800 text-white mt-20">
        <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p>&copy; 2025 Rodando a Gas. Plan Maestro Interactivo.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- ENHANCED DATA STRUCTURES ---
            const financialData = {
                labels: Array.from({ length: 12 }, (_, i) => `Month ${i + 1}`),
                gastoEquipo: [110000, 125000, 125000, 125000, 125000, 125000, 125000, 125000, 125000, 125000, 125000, 115000],
                gastoDesarrollo: [190000, 210000, 255000, 245000, 245000, 245000, 225000, 225000, 225000, 190000, 190000, 206000],
                gastoCapex: [0, 0, 0, 0, 0, 876667, 876667, 876666, 0, 0, 0, 0],
                gastoTotal: [],
                gastoAcumulado: [],
                efectivoRestante: [],
                inversionInicial: 7260000,
                // Detailed breakdowns for drill-down
                teamBreakdown: [
                    {coreTeam: 85000, additionalHires: 15000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 95000, additionalHires: 20000, benefits: 10000},
                    {coreTeam: 85000, additionalHires: 20000, benefits: 10000}
                ],
                developmentBreakdown: [
                    {aiInfra: 120000, saas: 50000, tools: 20000},
                    {aiInfra: 130000, saas: 60000, tools: 20000},
                    {aiInfra: 150000, saas: 80000, tools: 25000},
                    {aiInfra: 140000, saas: 80000, tools: 25000},
                    {aiInfra: 140000, saas: 80000, tools: 25000},
                    {aiInfra: 140000, saas: 80000, tools: 25000},
                    {aiInfra: 120000, saas: 80000, tools: 25000},
                    {aiInfra: 120000, saas: 80000, tools: 25000},
                    {aiInfra: 120000, saas: 80000, tools: 25000},
                    {aiInfra: 100000, saas: 70000, tools: 20000},
                    {aiInfra: 100000, saas: 70000, tools: 20000},
                    {aiInfra: 110000, saas: 76000, tools: 20000}
                ],
                capexBreakdown: [
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 750000, iot: 100000, installation: 26667},
                    {vehicles: 750000, iot: 100000, installation: 26667},
                    {vehicles: 750000, iot: 100000, installation: 26666},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0},
                    {vehicles: 0, iot: 0, installation: 0}
                ]
            };

            // Calculate totals
            let acumulado = 0;
            for (let i = 0; i < 12; i++) {
                const totalMes = financialData.gastoEquipo[i] + financialData.gastoDesarrollo[i] + financialData.gastoCapex[i];
                financialData.gastoTotal.push(totalMes);
                acumulado += totalMes;
                financialData.gastoAcumulado.push(acumulado);
                financialData.efectivoRestante.push(financialData.inversionInicial - acumulado);
            }

            const investmentData = {
                labels: ['Core AI + SaaS Development', 'Pilot Investment (CAPEX)', 'Team & Operations', 'Emergency Reserve'],
                datasets: [{
                    data: [2326000, 2630000, 1828000, 476000],
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.8)',  // Primary
                        'rgba(16, 185, 129, 0.8)',  // Accent
                        'rgba(245, 158, 11, 0.8)',  // Warning
                        'rgba(139, 92, 246, 0.8)'   // Purple
                    ],
                    borderColor: [
                        'rgb(59, 130, 246)',
                        'rgb(16, 185, 129)',
                        'rgb(245, 158, 11)',
                        'rgb(139, 92, 246)'
                    ],
                    borderWidth: 2
                }]
            };

            // ROI Scenarios Data
            const roiScenarios = {
                conservative: {
                    roi: '320%',
                    payback: 24,
                    savings: '$4.8M MXN',
                    valuation: '$35M MXN',
                    penetration: '0.5%'
                },
                base: {
                    roi: '457%',
                    payback: 20,
                    savings: '$6.3M MXN',
                    valuation: '$45M MXN',
                    penetration: '0.8%'
                },
                optimistic: {
                    roi: '680%',
                    payback: 16,
                    savings: '$8.2M MXN',
                    valuation: '$65M MXN',
                    penetration: '1.2%'
                }
            };

            // COMPREHENSIVE AI AGENTS DATA - Complete Triple-Click Details
            const agentDetails = {
                "hase": {
                    name: "HASE",
                    fullName: "Hybrid Adaptive Scoring Engine",
                    description: "Risk Scoring Engine - The foundation of our AI-Native advantage",
                    budget: "$600,000",
                    hours: "1,440",
                    timeline: {
                        start: 1,
                        end: 6,
                        phases: [
                            { name: "Foundation", months: "1-3", description: "Data ingestion, feature engineering, model training v0.5-v0.8" },
                            { name: "Production", months: "4-6", description: "Production deployment, API development, validation" }
                        ]
                    },
                    breakdown: {
                        software: { amount: "$540,000", description: "Data Scientist + ML Engineer + Backend dev hours" },
                        infrastructure: { amount: "$50,000", description: "AWS/GCP compute, GPU training, databases" },
                        licenses: { amount: "$10,000", description: "MLflow, MLOps tools" }
                    },
                    kpis: [
                        { metric: ">80% AUC", target: "Month 3", status: "foundation" },
                        { metric: ">90% AUC", target: "Month 6", status: "production" }
                    ],
                    techStack: ["Python", "XGBoost", "FastAPI", "SHAP", "PostgreSQL", "TimescaleDB"],
                    icon: "fas fa-brain",
                    color: "from-blue-500 to-blue-600",
                    dependencies: []
                },
                "pia": {
                    name: "PIA",
                    fullName: "Proactive Intervention Agent",
                    description: "WhatsApp-based intervention system reducing delinquency through behavioral nudges",
                    budget: "$400,000",
                    hours: "976",
                    timeline: {
                        start: 2,
                        end: 12,
                        phases: [
                            { name: "Development", months: "2-5", description: "WhatsApp API integration, decision trees, LLM prompts" },
                            { name: "Validation", months: "6-12", description: "Pilot testing, adoption tracking, effectiveness measurement" }
                        ]
                    },
                    breakdown: {
                        software: { amount: "$310,000", description: "ML Engineer + Full-Stack dev hours" },
                        licenses_apis: { amount: "$75,000", description: "WhatsApp Business API, Twilio, LLMs" },
                        infrastructure: { amount: "$15,000", description: "Cloud hosting, message queue" }
                    },
                    kpis: [
                        { metric: ">60% adoption rate", target: "Month 8", status: "critical" },
                        { metric: "50-67% delinquency reduction", target: "Month 12", status: "revenue-impact" }
                    ],
                    techStack: ["WhatsApp Business API", "Twilio", "LLMs", "Decision Trees", "Node.js"],
                    icon: "fas fa-comments",
                    color: "from-green-500 to-green-600",
                    dependencies: ["hase"]
                },
                "super-pma": {
                    name: "Super-PMA",
                    fullName: "Super Predictive Maintenance Agent",
                    description: "IoT-powered predictive maintenance marketplace generating recurring revenue",
                    budget: "$450,000",
                    hours: "1,024",
                    timeline: {
                        start: 3,
                        end: 12,
                        phases: [
                            { name: "Development", months: "3-8", description: "IoT integration, predictive algorithms, marketplace MVP" },
                            { name: "Marketplace Validation", months: "7-12", description: "Revenue generation, service provider network, optimization" }
                        ]
                    },
                    breakdown: {
                        software: { amount: "$350,000", description: "Data Scientist + IoT Engineer + Full-Stack dev" },
                        infrastructure: { amount: "$60,000", description: "Apache Kafka, real-time streaming" },
                        hardware: { amount: "$20,000", description: "OBD-II, GPS, sensors for testing" },
                        licenses: { amount: "$20,000", description: "IoT platforms, telematic analysis tools" }
                    },
                    kpis: [
                        { metric: ">$300 MXN/vehicle/month", target: "Month 10", status: "revenue-critical" },
                        { metric: "25% maintenance cost reduction", target: "Month 12", status: "value-prop" },
                        { metric: "30-50% downtime reduction", target: "Month 12", status: "operational" }
                    ],
                    techStack: ["RandomForest", "XGBoost", "Apache Kafka", "OBD-II", "GPS sensors", "React Native"],
                    icon: "fas fa-truck",
                    color: "from-purple-500 to-purple-600",
                    dependencies: ["hase"]
                },
                "asistente": {
                    name: "Digital Assistant",
                    fullName: "Multimodal Digital Assistant",
                    description: "GPT-4 Vision powered support agent automating 70% of customer queries",
                    budget: "$250,000",
                    hours: "1,024",
                    timeline: {
                        start: 4,
                        end: 12,
                        phases: [
                            { name: "Development", months: "4-8", description: "Chatbot core, knowledge base, diagnostic capabilities" },
                            { name: "Optimization", months: "7-12", description: "Image analysis, automation refinement, NPS tracking" }
                        ]
                    },
                    breakdown: {
                        software: { amount: "$180,000", description: "ML Engineer + Full-Stack dev" },
                        licenses_apis: { amount: "$55,000", description: "GPT-4 Vision, Claude 3, Make/n8n" },
                        infrastructure: { amount: "$15,000", description: "Chatbot hosting, diagnostic API" }
                    },
                    kpis: [
                        { metric: "~70% query automation", target: "Month 10", status: "efficiency" },
                        { metric: "30-40% service cost reduction", target: "Month 12", status: "cost-savings" },
                        { metric: "NPS >70", target: "Month 12", status: "satisfaction" }
                    ],
                    techStack: ["GPT-4 Vision", "Claude 3", "BERT", "Make/n8n", "WhatsApp", "Python"],
                    icon: "fas fa-robot",
                    color: "from-orange-500 to-orange-600",
                    dependencies: ["pia"]
                }
            };

            // SAAS OPERATIONAL STACK - Complete Breakdown ($436,000 total)
            const saasBreakdown = {
                "Odoo_Enterprise": {
                    budget: "$216,000",
                    description: "ERP modules: Accounting, Finance, Inventory, Projects",
                    justification: "Operational scalability and financial management",
                    percentage: 49.5
                },
                "Financial_AI_Compliance": {
                    budget: "$120,000", 
                    description: "Stripe (payments), Xero (accounting), DocuSign (contracts)",
                    justification: "Regulatory compliance NIIF and Ley Fintech",
                    percentage: 27.5
                },
                "Enterprise_Security": {
                    budget: "$60,000",
                    description: "Auth0 (identity), security monitoring for SOC2-ready",
                    justification: "Institutional trust and compliance",
                    percentage: 13.8
                },
                "Basic_Communication": {
                    budget: "$40,000",
                    description: "Slack, Google Workspace",
                    justification: "Team productivity and collaboration",
                    percentage: 9.2
                }
            };

            // VAGONETAS CAPEX - Complete Breakdown ($2,630,000 total)
            const vagonetasBreakdown = {
                timeline: {
                    "Month_6": "$876,667",
                    "Month_7": "$876,667", 
                    "Month_8": "$876,666"
                },
                breakdown_per_unit: {
                    "Vehículo_Higer_H6C": {
                        amount: "~$730,000",
                        description: "New vehicle ready for 19+ passengers"
                    },
                    "Hardware_IoT": {
                        amount: "~$100,000",
                        description: "OBD-II, GPS, telematics, GNV flow sensors"
                    },
                    "Seguro_Legal": {
                        amount: "~$46,000",
                        description: "Comprehensive coverage + contract formalization"
                    }
                },
                total_units: 3,
                unit_cost: "$876,667",
                roi_projection: {
                    monthly_revenue_per_unit: "$300+ MXN",
                    payback_period: "24-30 months",
                    maintenance_savings: "25%"
                }
            };

            // TEAM ALLOCATION - Complete 8 people x 12 months matrix
            const teamAllocation = {
                "Científico_Datos": {
                    salary: "$35,000/month",
                    equity: "~3.0%",
                    totalCost: "$420,000",
                    hours: "960",
                    allocation: [
                        "HASE (100%)", "HASE (100%)", "HASE (80%) Super-PMA (20%)", 
                        "Super-PMA (80%) HASE (20%)", "Super-PMA (100%)", "Super-PMA (100%)",
                        "Análisis Piloto (HASE, PMA)", "Análisis Piloto (HASE, PMA)", "Optimización Modelos",
                        "Documentación (Modelos)", "Soporte (Serie A)", "Soporte (Serie A)"
                    ]
                },
                "Ingeniero_ML": {
                    salary: "$30,000/month",
                    equity: "~2.0%",
                    totalCost: "$360,000",
                    hours: "992",
                    allocation: [
                        "HASE (100%)", "PIA (50%) HASE (50%)", "PIA (80%) Asistente (20%)",
                        "PIA (70%) Asistente (30%)", "PIA (100%)", "Asistente (70%) PIA (30%)",
                        "Asistente (100%)", "Análisis Piloto (PIA, Asistente)", "Optimización Modelos",
                        "Documentación (IA)", "Soporte (Serie A)", "Soporte (Serie A)"
                    ]
                },
                "Full_Stack_Dev": {
                    salary: "$30,000/month",
                    equity: "~2.0%",
                    totalCost: "$360,000",
                    hours: "800",
                    allocation: [
                        "SaaS (100%)", "SaaS (80%) PIA (20%)", "SaaS (50%) PIA (50%)",
                        "Asistente (50%) PMA (50%)", "Asistente (50%) PMA (50%)", "Integración Piloto",
                        "Soporte Piloto", "Optimización General", "Soporte GTM",
                        "Soporte (Serie A)", "Soporte (Serie A)", "Soporte (Serie A)"
                    ]
                },
                "Backend_Dev": {
                    salary: "$9,000/month",
                    totalCost: "$108,000",
                    hours: "944",
                    allocation: [
                        "-", "HASE (API)", "HASE (API)", "PIA (API)", "PIA (API)",
                        "Integración General", "Soporte Piloto", "Soporte Piloto",
                        "Optimización Backend", "Documentación API", "Mantenimiento", "Mantenimiento"
                    ]
                },
                "IoT_Engineer": {
                    salary: "$9,000/month",
                    totalCost: "$108,000",
                    hours: "768",
                    allocation: [
                        "-", "Super-PMA (HW)", "Super-PMA (HW)", "Super-PMA (Streaming)",
                        "Super-PMA (Streaming)", "Despliegue Piloto", "Monitoreo Piloto",
                        "Monitoreo Piloto", "Optimización Datos", "Documentación HW", "Mantenimiento", "Mantenimiento"
                    ]
                },
                "Frontend_Dev": {
                    salary: "$9,000/month",
                    totalCost: "$108,000",
                    hours: "640",
                    duration: "8 months",
                    allocation: [
                        "-", "-", "App (UI/UX)", "App (Dashboard)", "App (Backend Connect)",
                        "App (QA)", "App (Feedback)", "App (Feedback)", "App (Ajustes)",
                        "Finalización App", "-", "Soporte (Serie A)"
                    ]
                },
                "DevOps_Engineer": {
                    salary: "$9,000/month",
                    totalCost: "$108,000",
                    hours: "960",
                    duration: "6 months",
                    allocation: [
                        "Infra (Cloud, CI/CD)", "Infra (DBs)", "Infra (Seguridad)", "Monitoreo",
                        "Monitoreo", "Soporte Piloto", "Soporte Piloto", "Optimización Infra",
                        "-", "-", "-", "-"
                    ]
                },
                "QA_Engineer": {
                    salary: "$9,000/month",
                    totalCost: "$108,000",
                    hours: "960",
                    duration: "6 months",
                    allocation: [
                        "-", "-", "-", "-", "-", "Pruebas (Carga)",
                        "Pruebas (Piloto)", "Pruebas (Piloto)", "Pruebas (Regresión)",
                        "Documentación QA", "-", "-"
                    ]
                }
            };
            
            const techTimelineData = [
                { category: 'HASE', start: 1, end: 3, color: '#0d9488', tasks: 'Ingesta de datos, definición de features, entrenamiento de modelos v0.5 a v0.8.', milestone: 'Hito: HASE v0.8 entrenado con >80% de precisión (AUC).' },
                { category: 'PIA', start: 1, end: 5, color: '#0f766e', tasks: 'Diseño de arquitectura, motor de alertas, integración WhatsApp Business API, pruebas MVP.', milestone: 'Hito: MVP de PIA funcional.' },
                { category: 'Super-PMA', start: 3, end: 8, color: '#115e59', tasks: 'Diseño de integración IoT, desarrollo motor predictivo, marketplace básico, optimización con datos del piloto.', milestone: 'Hito: MVP del marketplace funcional.' },
                { category: 'Asistente Digital', start: 4, end: 8, color: '#134e4a', tasks: 'Núcleo del chatbot, base de conocimiento, diagnóstico por texto, análisis de imagen básico.', milestone: 'Hito: MVP multimodal del Asistente funcional.' },
                { category: 'Optimización y Serie A', start: 9, end: 12, color: '#f59e0b', tasks: 'Refinamiento de los 4 agentes, análisis de datos, preparación de data room técnico y roadmap para Serie A.', milestone: 'Hito: Term sheet de Serie A en negociación.' }
            ];

            const opsTimelineData = [
                { phase: 'Meses 1-3: Fundación y Preparación', color: '#0d9488', tasks: 'GTM: Identificación y pre-calificación de operadores para el piloto.\nLegales: Desarrollo y registro de contratos de adhesión ante PROFECO.\nPiloto: Negociación y compra de las 3 unidades Higer H6C.\nProducto: Definición de métricas de éxito del piloto.', kpi: 'KPI: 100% de operadores del piloto pre-seleccionados. Contratos registrados.' },
                { phase: 'Meses 4-6: Lanzamiento y Despliegue', color: '#0f766e', tasks: 'GTM: Firma de contratos con operadores del piloto.\nLegales: Validación de cumplimiento para PLD.\nPiloto: Instalación de hardware IoT. Despliegue de la primera unidad.\nProducto: Lanzamiento de la App Android MVP.', kpi: 'KPI: 3 contratos de piloto firmados. 1ra unidad operando.' },
                { phase: 'Meses 7-9: Validación y Recolección de Datos', color: '#115e59', tasks: 'GTM: Onboarding y soporte continuo a los operadores.\nLegales: Auditoría de cumplimiento y preparación de políticas.\nPiloto: Despliegue de unidades 2 y 3. Monitoreo 24/7.\nProducto: Recolección de feedback y datos de rendimiento.', kpi: 'KPI: 3 unidades operando >95% del tiempo. NPS > 50.' },
                { phase: 'Meses 10-12: Tracción y Preparación Serie A', color: '#f59e0b', tasks: 'GTM: Documentación de testimoniales y casos de éxito.\nLegales: Preparación del data room legal para la S.A.P.I.\nPiloto: Análisis final de datos y reportes de economía unitaria.\nProducto: Consolidación del roadmap de producto para la Serie A.', kpi: 'KPI: Morosidad del piloto en 0%. NPS > 70. Data room completo.' }
            ];

            const hrData = {
                roles: ['Científico de Datos', 'Ingeniero de ML', 'Desarrollador Full-Stack', 'Desarrollador Backend', 'Desarrollador IoT', 'Desarrollador Frontend', 'Ingeniero DevOps', 'Ingeniero QA'],
                allocations: [
                    ['HASE (100%)', 'HASE (100%)', 'HASE (80%) Super-PMA (20%)', 'Super-PMA (80%) HASE (20%)', 'Super-PMA (100%)', 'Super-PMA (100%)', 'Análisis Piloto (HASE, PMA)', 'Análisis Piloto (HASE, PMA)', 'Optimización Modelos', 'Documentación (Modelos)', 'Soporte (Serie A)', 'Soporte (Serie A)'],
                    ['HASE (100%)', 'PIA (50%) HASE (50%)', 'PIA (80%) Asistente (20%)', 'PIA (70%) Asistente (30%)', 'PIA (100%)', 'Asistente (70%) PIA (30%)', 'Asistente (100%)', 'Análisis Piloto (PIA, Asistente)', 'Optimización Modelos', 'Documentación (IA)', 'Soporte (Serie A)', 'Soporte (Serie A)'],
                    ['SaaS (100%)', 'SaaS (80%) PIA (20%)', 'SaaS (50%) PIA (50%)', 'Asistente (50%) PMA (50%)', 'Asistente (50%) PMA (50%)', 'Integración Piloto', 'Soporte Piloto', 'Optimización General', 'Soporte GTM', 'Soporte (Serie A)', 'Soporte (Serie A)', 'Soporte (Serie A)'],
                    ['-', 'HASE (API)', 'HASE (API)', 'PIA (API)', 'PIA (API)', 'Integración General', 'Soporte Piloto', 'Soporte Piloto', 'Optimización Backend', 'Documentación API', 'Mantenimiento', 'Mantenimiento'],
                    ['-', 'Super-PMA (HW)', 'Super-PMA (HW)', 'Super-PMA (Streaming)', 'Super-PMA (Streaming)', 'Despliegue Piloto', 'Monitoreo Piloto', 'Monitoreo Piloto', 'Optimización Datos', 'Documentación HW', 'Mantenimiento', 'Mantenimiento'],
                    ['-', '-', 'App (UI/UX)', 'App (Dashboard)', 'App (Backend Connect)', 'App (QA)', 'App (Feedback)', 'App (Feedback)', 'App (Ajustes)', 'Finalización App', '-', 'Soporte (Serie A)'],
                    ['Infra (Cloud, CI/CD)', 'Infra (DBs)', 'Infra (Seguridad)', 'Monitoreo', 'Monitoreo', 'Soporte Piloto', 'Soporte Piloto', 'Optimización Infra', '-', '-', '-', '-'],
                    ['-', '-', '-', '-', '-', 'Pruebas (Carga)', 'Pruebas (Piloto)', 'Pruebas (Piloto)', 'Pruebas (Regresión)', 'Documentación QA', '-', '-']
                ]
            };

            // --- ENHANCED CHARTS ---

            // Investment Sankey Chart (using Chart.js doughnut as approximation)
            const sankeyCtx = document.getElementById('investmentSankeyChart').getContext('2d');
            new Chart(sankeyCtx, {
                type: 'doughnut',
                data: investmentData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '65%',
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.95)',
                            titleColor: '#f1f5f9',
                            bodyColor: '#f1f5f9',
                            borderColor: 'rgba(59, 130, 246, 0.5)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    const percentage = ((context.parsed / 7260000) * 100).toFixed(1);
                                    return `${context.label}: ${new Intl.NumberFormat('en-US', { 
                                        style: 'currency', 
                                        currency: 'USD',
                                        minimumFractionDigits: 0,
                                        maximumFractionDigits: 0
                                    }).format(context.parsed)} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateRotate: true,
                        duration: 1500,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // Enhanced Financial Plan Chart
            const financialCtx = document.getElementById('financialPlanChart').getContext('2d');
            const financialChart = new Chart(financialCtx, {
                type: 'bar',
                data: {
                    labels: financialData.labels,
                    datasets: [
                        {
                            label: 'Team Expenses',
                            data: financialData.gastoEquipo,
                            backgroundColor: 'rgba(59, 130, 246, 0.8)',
                            borderColor: 'rgb(59, 130, 246)',
                            borderWidth: 1,
                            stack: 'Stack 0',
                        },
                        {
                            label: 'Development Costs',
                            data: financialData.gastoDesarrollo,
                            backgroundColor: 'rgba(16, 185, 129, 0.8)',
                            borderColor: 'rgb(16, 185, 129)',
                            borderWidth: 1,
                            stack: 'Stack 0',
                        },
                        {
                            label: 'CAPEX Investment',
                            data: financialData.gastoCapex,
                            backgroundColor: 'rgba(245, 158, 11, 0.8)',
                            borderColor: 'rgb(245, 158, 11)',
                            borderWidth: 1,
                            stack: 'Stack 0',
                        },
                        {
                            label: 'Cash Remaining',
                            data: financialData.efectivoRestante,
                            type: 'line',
                            borderColor: 'rgb(139, 92, 246)',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            fill: true,
                            yAxisID: 'y1',
                            tension: 0.4,
                            borderWidth: 3,
                            pointBackgroundColor: 'rgb(139, 92, 246)',
                            pointBorderColor: 'white',
                            pointBorderWidth: 2,
                            pointRadius: 6,
                            pointHoverRadius: 8
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.95)',
                            titleColor: '#f1f5f9',
                            bodyColor: '#f1f5f9',
                            borderColor: 'rgba(59, 130, 246, 0.5)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += new Intl.NumberFormat('en-US', { 
                                            style: 'currency', 
                                            currency: 'USD', 
                                            minimumFractionDigits: 0,
                                            maximumFractionDigits: 0
                                        }).format(context.parsed.y);
                                    }
                                    return label;
                                },
                                afterBody: function(context) {
                                    const monthIndex = context[0].dataIndex;
                                    const month = monthIndex + 1;
                                    return [`Click to view Month ${month} breakdown`];
                                }
                            }
                        },
                        legend: {
                            position: 'top',
                            align: 'end',
                            labels: {
                                usePointStyle: true,
                                pointStyle: 'circle',
                                padding: 20,
                                font: {
                                    size: 12,
                                    weight: '500'
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            grid: { 
                                display: false 
                            },
                            ticks: {
                                font: {
                                    size: 11,
                                    weight: '500'
                                },
                                color: '#64748b'
                            }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Monthly Expenditure (USD)',
                                font: {
                                    size: 12,
                                    weight: '600'
                                },
                                color: '#334155'
                            },
                            ticks: {
                                callback: value => `$${(value / 1000).toFixed(0)}K`,
                                font: {
                                    size: 11
                                },
                                color: '#64748b'
                            },
                            grid: {
                                color: 'rgba(148, 163, 184, 0.2)'
                            }
                        },
                        y1: {
                            position: 'right',
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Cash Remaining (USD)',
                                font: {
                                    size: 12,
                                    weight: '600'
                                },
                                color: '#334155'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                            ticks: {
                                callback: value => `$${(value / 1000000).toFixed(1)}M`,
                                font: {
                                    size: 11
                                },
                                color: '#64748b'
                            }
                        }
                    },
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const monthIndex = elements[0].index;
                            showFinancialDetails(monthIndex + 1);
                        }
                    }
                }
            });

            // ROI Scenario Chart
            const roiCtx = document.getElementById('roiScenarioChart').getContext('2d');
            let roiChart = new Chart(roiCtx, {
                type: 'line',
                data: {
                    labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'],
                    datasets: [{
                        label: 'Conservative',
                        data: [0, 50, 120, 200, 320],
                        borderColor: 'rgb(245, 158, 11)',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.95)',
                            titleColor: '#f1f5f9',
                            bodyColor: '#f1f5f9',
                            borderColor: 'rgba(59, 130, 246, 0.5)',
                            borderWidth: 1,
                            cornerRadius: 8
                        }
                    },
                    scales: {
                        x: {
                            grid: { display: false },
                            ticks: {
                                font: { size: 11, weight: '500' },
                                color: '#64748b'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'ROI (%)',
                                font: { size: 12, weight: '600' },
                                color: '#334155'
                            },
                            ticks: {
                                callback: value => `${value}%`,
                                font: { size: 11 },
                                color: '#64748b'
                            },
                            grid: {
                                color: 'rgba(148, 163, 184, 0.2)'
                            }
                        }
                    },
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // --- ENHANCED INTERACTIONS ---

            // Financial Slider with Enhanced Features
            const slider = document.getElementById('month-slider');
            const monthLabel = document.getElementById('month-label');
            const kpiGastoMes = document.getElementById('kpi-gasto-mes');
            const kpiGastoAcumulado = document.getElementById('kpi-gasto-acumulado');
            const kpiEfectivo = document.getElementById('kpi-efectivo');

            function formatCurrency(value) {
                if (value >= 1000000) return `$${(value / 1000000).toFixed(2)}M`;
                if (value >= 1000) return `$${(value / 1000).toFixed(0)}K`;
                return `$${Math.round(value).toLocaleString()}`;
            }

            function updateFinancials(month) {
                const index = month - 1;
                monthLabel.textContent = month;
                kpiGastoMes.textContent = formatCurrency(financialData.gastoTotal[index]);
                kpiGastoAcumulado.textContent = formatCurrency(financialData.gastoAcumulado[index]);
                kpiEfectivo.textContent = formatCurrency(financialData.efectivoRestante[index]);
                
                // Highlight current month in chart
                financialChart.data.datasets.forEach((dataset, datasetIndex) => {
                    if (dataset.type !== 'line') {
                        dataset.borderWidth = Array(12).fill(1);
                        dataset.borderWidth[index] = 3;
                        dataset.borderColor = Array(12).fill(dataset.borderColor);
                        dataset.borderColor[index] = '#1e293b';
                    }
                });
                financialChart.update('none');
            }

            // Show detailed financial breakdown
            function showFinancialDetails(month) {
                const index = month - 1;
                const detailsPanel = document.getElementById('financial-details');
                const detailMonth = document.getElementById('detail-month');
                
                // Update month
                detailMonth.textContent = month;
                
                // Update team breakdown
                const teamData = financialData.teamBreakdown[index];
                document.getElementById('core-team-cost').textContent = formatCurrency(teamData.coreTeam);
                document.getElementById('additional-hires-cost').textContent = formatCurrency(teamData.additionalHires);
                document.getElementById('benefits-cost').textContent = formatCurrency(teamData.benefits);
                
                // Update development breakdown
                const devData = financialData.developmentBreakdown[index];
                document.getElementById('ai-infra-cost').textContent = formatCurrency(devData.aiInfra);
                document.getElementById('saas-cost').textContent = formatCurrency(devData.saas);
                document.getElementById('tools-cost').textContent = formatCurrency(devData.tools);
                
                // Update CAPEX breakdown
                const capexData = financialData.capexBreakdown[index];
                document.getElementById('vehicle-cost').textContent = formatCurrency(capexData.vehicles);
                document.getElementById('iot-cost').textContent = formatCurrency(capexData.iot);
                document.getElementById('installation-cost').textContent = formatCurrency(capexData.installation);
                
                // Show the panel with animation
                detailsPanel.classList.remove('hidden');
                detailsPanel.style.opacity = '0';
                detailsPanel.style.transform = 'translateY(10px)';
                
                setTimeout(() => {
                    detailsPanel.style.transition = 'all 0.3s ease';
                    detailsPanel.style.opacity = '1';
                    detailsPanel.style.transform = 'translateY(0)';
                }, 10);
            }

            // ROI Scenario switching
            function updateROIScenario(scenario) {
                const scenarioData = roiScenarios[scenario];
                
                // Update metrics
                document.getElementById('scenario-roi').textContent = scenarioData.roi;
                document.getElementById('scenario-payback').textContent = scenarioData.payback;
                document.getElementById('scenario-savings').textContent = scenarioData.savings;
                document.getElementById('scenario-valuation').textContent = scenarioData.valuation;
                document.getElementById('scenario-penetration').textContent = scenarioData.penetration;
                
                // Update chart data based on scenario
                let chartData;
                switch(scenario) {
                    case 'conservative':
                        chartData = [0, 50, 120, 200, 320];
                        roiChart.data.datasets[0].borderColor = 'rgb(245, 158, 11)';
                        roiChart.data.datasets[0].backgroundColor = 'rgba(245, 158, 11, 0.1)';
                        break;
                    case 'base':
                        chartData = [0, 80, 180, 300, 457];
                        roiChart.data.datasets[0].borderColor = 'rgb(16, 185, 129)';
                        roiChart.data.datasets[0].backgroundColor = 'rgba(16, 185, 129, 0.1)';
                        break;
                    case 'optimistic':
                        chartData = [0, 120, 250, 450, 680];
                        roiChart.data.datasets[0].borderColor = 'rgb(59, 130, 246)';
                        roiChart.data.datasets[0].backgroundColor = 'rgba(59, 130, 246, 0.1)';
                        break;
                }
                
                roiChart.data.datasets[0].data = chartData;
                roiChart.data.datasets[0].label = scenario.charAt(0).toUpperCase() + scenario.slice(1);
                roiChart.update();
            }

            // Event Listeners
            slider.addEventListener('input', (e) => {
                updateFinancials(parseInt(e.target.value));
            });

            // Scenario buttons
            document.querySelectorAll('.scenario-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // Update button states
                    document.querySelectorAll('.scenario-btn').forEach(b => {
                        b.classList.remove('active', 'bg-accent-500', 'text-white');
                        b.classList.add('bg-neutral-200', 'text-neutral-700', 'hover:bg-neutral-300');
                    });
                    
                    e.target.classList.remove('bg-neutral-200', 'text-neutral-700', 'hover:bg-neutral-300');
                    e.target.classList.add('active', 'bg-accent-500', 'text-white');
                    
                    // Update scenario
                    updateROIScenario(e.target.dataset.scenario);
                });
            });

            // ROI Calculator Button
            document.getElementById('roi-calculator-btn').addEventListener('click', () => {
                // Scroll to ROI section
                document.querySelector('#financial-plan .professional-card:last-child').scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            });

            // Initialize
            updateFinancials(1);

            // --- ENHANCED TECH ROADMAP FUNCTIONALITY ---

            // Generate Interactive Gantt Chart
            function generateGanttChart() {
                const ganttBars = document.getElementById('gantt-bars');
                ganttBars.innerHTML = '';

                Object.keys(agentDetails).forEach(agentKey => {
                    const agent = agentDetails[agentKey];
                    const agentDiv = document.createElement('div');
                    agentDiv.className = 'gantt-row flex items-center space-x-4 p-3 rounded-lg hover:bg-neutral-50 transition-colors';
                    
                    // Agent info
                    const agentInfo = document.createElement('div');
                    agentInfo.className = 'w-48 flex items-center space-x-3';
                    agentInfo.innerHTML = `
                        <div class="w-8 h-8 bg-gradient-to-br ${agent.color} rounded-lg flex items-center justify-center">
                            <i class="${agent.icon} text-white text-sm"></i>
                        </div>
                        <div>
                            <div class="font-semibold text-sm text-neutral-900">${agent.name}</div>
                            <div class="text-xs text-neutral-500">${agent.budget}</div>
                        </div>
                    `;
                    
                    // Timeline bar
                    const timelineDiv = document.createElement('div');
                    timelineDiv.className = 'flex-1 relative';
                    
                    const barContainer = document.createElement('div');
                    barContainer.className = 'grid grid-cols-12 gap-2 h-8';
                    
                    for (let month = 1; month <= 12; month++) {
                        const monthDiv = document.createElement('div');
                        monthDiv.className = 'relative';
                        
                        if (month >= agent.timeline.start && month <= agent.timeline.end) {
                            const intensity = month <= (agent.timeline.start + agent.timeline.end) / 2 ? 0.8 : 0.6;
                            monthDiv.innerHTML = `
                                <div class="h-6 bg-gradient-to-r ${agent.color} rounded cursor-pointer transition-all duration-200 hover:scale-105" 
                                     style="opacity: ${intensity}"
                                     data-agent="${agentKey}" data-month="${month}"></div>
                            `;
                        } else {
                            monthDiv.innerHTML = '<div class="h-6 bg-neutral-100 rounded"></div>';
                        }
                        
                        barContainer.appendChild(monthDiv);
                    }
                    
                    timelineDiv.appendChild(barContainer);
                    agentDiv.appendChild(agentInfo);
                    agentDiv.appendChild(timelineDiv);
                    ganttBars.appendChild(agentDiv);
                });

                // Add dependencies visualization
                if (document.getElementById('gantt-view-toggle').classList.contains('active')) {
                    showDependencies();
                }
            }

            // Show agent dependencies
            function showDependencies() {
                // Add dependency lines (simplified version)
                const ganttContainer = document.getElementById('gantt-container');
                let dependencyLines = ganttContainer.querySelector('.dependency-lines');
                
                if (!dependencyLines) {
                    dependencyLines = document.createElement('div');
                    dependencyLines.className = 'dependency-lines absolute inset-0 pointer-events-none';
                    ganttContainer.appendChild(dependencyLines);
                }
                
                dependencyLines.innerHTML = '';
                
                // Add visual indicators for dependencies
                Object.keys(agentDetails).forEach((agentKey, index) => {
                    const agent = agentDetails[agentKey];
                    if (agent.dependencies.length > 0) {
                        const indicator = document.createElement('div');
                        indicator.className = 'absolute left-48 text-xs text-neutral-500';
                        indicator.style.top = `${(index * 60) + 20}px`;
                        indicator.innerHTML = `<i class="fas fa-arrow-left mr-1"></i>Depends on: ${agent.dependencies.join(', ').toUpperCase()}`;
                        dependencyLines.appendChild(indicator);
                    }
                });
            }

            // Agent Modal System
            function showAgentModal(agentKey) {
                const agent = agentDetails[agentKey];
                const modal = document.getElementById('agent-modal');
                
                // Update modal content
                document.getElementById('modal-agent-title').textContent = agent.fullName;
                document.getElementById('modal-agent-subtitle').textContent = agent.description;
                
                // Update icon
                const iconContainer = document.getElementById('modal-agent-icon');
                const iconClass = document.getElementById('modal-agent-icon-class');
                iconContainer.className = `w-16 h-16 rounded-xl flex items-center justify-center bg-gradient-to-br ${agent.color}`;
                iconClass.className = `${agent.icon} text-white text-2xl`;
                
                // Budget breakdown
                const budgetDetails = document.getElementById('modal-budget-details');
                budgetDetails.innerHTML = '';
                Object.keys(agent.breakdown).forEach(key => {
                    const item = agent.breakdown[key];
                    const div = document.createElement('div');
                    div.className = 'flex justify-between items-center p-3 bg-neutral-50 rounded-lg';
                    div.innerHTML = `
                        <div>
                            <div class="font-medium text-neutral-900">${key.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())}</div>
                            <div class="text-sm text-neutral-600">${item.description}</div>
                        </div>
                        <div class="font-bold text-primary-600">${item.amount}</div>
                    `;
                    budgetDetails.appendChild(div);
                });
                
                // Tech stack
                const techStack = document.getElementById('modal-tech-stack');
                techStack.innerHTML = '';
                agent.techStack.forEach(tech => {
                    const span = document.createElement('span');
                    span.className = 'inline-block bg-neutral-100 text-neutral-700 px-3 py-1 rounded-full text-sm font-medium mr-2 mb-2';
                    span.textContent = tech;
                    techStack.appendChild(span);
                });
                
                // KPIs
                const kpis = document.getElementById('modal-kpis');
                kpis.innerHTML = '';
                agent.kpis.forEach(kpi => {
                    const div = document.createElement('div');
                    div.className = 'flex justify-between items-center p-3 bg-neutral-50 rounded-lg';
                    const statusColors = {
                        'foundation': 'text-blue-600',
                        'production': 'text-green-600',
                        'critical': 'text-red-600',
                        'revenue-impact': 'text-purple-600',
                        'revenue-critical': 'text-red-600',
                        'value-prop': 'text-accent-600',
                        'operational': 'text-neutral-600',
                        'efficiency': 'text-blue-600',
                        'cost-savings': 'text-green-600',
                        'satisfaction': 'text-orange-600'
                    };
                    div.innerHTML = `
                        <div class="font-medium text-neutral-900">${kpi.metric}</div>
                        <div class="text-sm ${statusColors[kpi.status] || 'text-neutral-600'}">${kpi.target}</div>
                    `;
                    kpis.appendChild(div);
                });
                
                // Timeline
                const timeline = document.getElementById('modal-timeline');
                timeline.innerHTML = '';
                agent.timeline.phases.forEach(phase => {
                    const div = document.createElement('div');
                    div.className = 'border-l-4 border-primary-500 pl-4 py-2';
                    div.innerHTML = `
                        <div class="font-medium text-neutral-900">${phase.name}</div>
                        <div class="text-sm text-neutral-600">Months ${phase.months}</div>
                        <div class="text-sm text-neutral-500 mt-1">${phase.description}</div>
                    `;
                    timeline.appendChild(div);
                });
                
                // Show modal
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            // Event Listeners for Tech Roadmap
            document.addEventListener('click', (e) => {
                // Agent card clicks
                if (e.target.closest('.agent-card')) {
                    const agentKey = e.target.closest('.agent-card').dataset.agent;
                    showAgentModal(agentKey);
                }
                
                // Gantt bar clicks
                if (e.target.dataset.agent) {
                    showAgentModal(e.target.dataset.agent);
                }
                
                // Close modal
                if (e.target.id === 'close-modal' || e.target.id === 'agent-modal') {
                    document.getElementById('agent-modal').classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }
            });

            // Gantt view toggles
            document.getElementById('gantt-view-toggle').addEventListener('click', (e) => {
                e.target.classList.toggle('active');
                if (e.target.classList.contains('active')) {
                    e.target.classList.remove('bg-primary-500', 'hover:bg-primary-600');
                    e.target.classList.add('bg-accent-500', 'hover:bg-accent-600');
                    showDependencies();
                } else {
                    e.target.classList.remove('bg-accent-500', 'hover:bg-accent-600');
                    e.target.classList.add('bg-primary-500', 'hover:bg-primary-600');
                    const dependencyLines = document.querySelector('.dependency-lines');
                    if (dependencyLines) dependencyLines.remove();
                }
            });

            document.getElementById('resource-overlay').addEventListener('click', (e) => {
                e.target.classList.toggle('active');
                if (e.target.classList.contains('active')) {
                    e.target.classList.remove('bg-accent-500', 'hover:bg-accent-600');
                    e.target.classList.add('bg-primary-500', 'hover:bg-primary-600');
                    // Show resource allocation overlay
                    showResourceOverlay();
                } else {
                    e.target.classList.remove('bg-primary-500', 'hover:bg-primary-600');
                    e.target.classList.add('bg-accent-500', 'hover:bg-accent-600');
                    hideResourceOverlay();
                }
            });

            function showResourceOverlay() {
                // Add resource allocation indicators to Gantt bars
                const ganttBars = document.querySelectorAll('[data-agent]');
                ganttBars.forEach(bar => {
                    const agent = bar.dataset.agent;
                    const month = parseInt(bar.dataset.month);
                    
                    // Calculate resource intensity based on team allocation
                    let resourceCount = 0;
                    Object.keys(teamAllocation).forEach(role => {
                        const allocation = teamAllocation[role].allocation[month - 1];
                        if (allocation && allocation.includes(agent.toUpperCase())) {
                            resourceCount++;
                        }
                    });
                    
                    if (resourceCount > 0) {
                        bar.innerHTML += `<div class="absolute -top-1 -right-1 w-4 h-4 bg-orange-500 text-white text-xs rounded-full flex items-center justify-center">${resourceCount}</div>`;
                    }
                });
            }

            function hideResourceOverlay() {
                // Remove resource indicators
                document.querySelectorAll('.absolute.-top-1.-right-1').forEach(el => el.remove());
            }

            // Initialize Gantt Chart
            generateGanttChart();

            // --- TEAM HEATMAP FUNCTIONALITY ---

            // Generate Interactive Heatmap
            function generateTeamHeatmap() {
                const heatmapGrid = document.getElementById('heatmap-grid');
                heatmapGrid.innerHTML = '';

                Object.keys(teamAllocation).forEach((role, roleIndex) => {
                    const roleData = teamAllocation[role];
                    const rowDiv = document.createElement('div');
                    rowDiv.className = 'grid grid-cols-13 gap-1';

                    // Role label
                    const roleLabel = document.createElement('div');
                    roleLabel.className = 'heatmap-role-label text-neutral-900 bg-neutral-50 border border-neutral-200';
                    roleLabel.innerHTML = `
                        <div>
                            <div class="font-semibold">${role.replace('_', ' ')}</div>
                            <div class="text-xs text-neutral-500">${roleData.salary}</div>
                        </div>
                    `;
                    roleLabel.addEventListener('click', () => showRoleModal(role));
                    rowDiv.appendChild(roleLabel);

                    // Monthly allocation cells
                    roleData.allocation.forEach((allocation, monthIndex) => {
                        const cellDiv = document.createElement('div');
                        cellDiv.className = 'heatmap-cell';
                        
                        // Calculate intensity based on allocation complexity
                        let intensity = 0;
                        if (allocation !== '-') {
                            if (allocation.includes('100%')) intensity = 3;
                            else if (allocation.includes('80%') || allocation.includes('70%')) intensity = 2;
                            else if (allocation.includes('50%') || allocation.includes('60%')) intensity = 1;
                            else intensity = 1;
                        }

                        cellDiv.className += ` intensity-${intensity}`;
                        cellDiv.dataset.role = role;
                        cellDiv.dataset.month = monthIndex + 1;
                        cellDiv.dataset.allocation = allocation;
                        cellDiv.dataset.intensity = intensity;

                        // Cell content
                        if (allocation !== '-') {
                            const shortAllocation = allocation.length > 10 ? 
                                allocation.split(' ')[0] : allocation;
                            cellDiv.textContent = shortAllocation;
                        }

                        // Hover events
                        cellDiv.addEventListener('mouseenter', showHeatmapTooltip);
                        cellDiv.addEventListener('mouseleave', hideHeatmapTooltip);
                        cellDiv.addEventListener('click', () => showRoleModal(role));

                        rowDiv.appendChild(cellDiv);
                    });

                    heatmapGrid.appendChild(rowDiv);
                });
            }

            // Heatmap tooltip system
            let heatmapTooltip = null;

            function showHeatmapTooltip(e) {
                const cell = e.target;
                const role = cell.dataset.role;
                const month = cell.dataset.month;
                const allocation = cell.dataset.allocation;
                const intensity = cell.dataset.intensity;

                if (allocation === '-') return;

                if (!heatmapTooltip) {
                    heatmapTooltip = document.createElement('div');
                    heatmapTooltip.className = 'heatmap-tooltip';
                    document.body.appendChild(heatmapTooltip);
                }

                const roleData = teamAllocation[role];
                const intensityLabels = ['Not Active', 'Low Intensity', 'Medium Intensity', 'High Intensity'];

                heatmapTooltip.innerHTML = `
                    <div class="font-semibold mb-2">${role.replace('_', ' ')} - Month ${month}</div>
                    <div class="text-sm mb-2">${allocation}</div>
                    <div class="text-xs text-gray-300">
                        <div>Intensity: ${intensityLabels[intensity]}</div>
                        <div>Salary: ${roleData.salary}</div>
                        ${roleData.equity ? `<div>Equity: ${roleData.equity}</div>` : ''}
                    </div>
                `;

                const rect = cell.getBoundingClientRect();
                heatmapTooltip.style.left = rect.left + (rect.width / 2) - 100 + 'px';
                heatmapTooltip.style.top = rect.top - heatmapTooltip.offsetHeight - 10 + 'px';
                heatmapTooltip.classList.add('show');
            }

            function hideHeatmapTooltip() {
                if (heatmapTooltip) {
                    heatmapTooltip.classList.remove('show');
                }
            }

            // Role Modal System
            function showRoleModal(roleKey) {
                const roleData = teamAllocation[roleKey];
                const modal = document.getElementById('role-modal');
                
                // Update modal content
                document.getElementById('modal-role-title').textContent = roleKey.replace('_', ' ');
                document.getElementById('modal-role-subtitle').textContent = `${roleData.salary} • ${roleData.totalCost} total cost`;
                
                // Update icon
                const iconContainer = document.getElementById('modal-role-icon');
                const iconClass = document.getElementById('modal-role-icon-class');
                iconContainer.className = 'w-16 h-16 rounded-xl flex items-center justify-center bg-gradient-to-br from-primary-500 to-primary-600';
                iconClass.className = 'fas fa-user text-white text-2xl';
                
                // Monthly allocation
                const monthlyAllocation = document.getElementById('modal-monthly-allocation');
                monthlyAllocation.innerHTML = '';
                roleData.allocation.forEach((allocation, index) => {
                    const div = document.createElement('div');
                    div.className = 'flex justify-between items-center p-2 bg-neutral-50 rounded text-sm';
                    div.innerHTML = `
                        <span class="font-medium">Month ${index + 1}:</span>
                        <span class="${allocation === '-' ? 'text-neutral-400' : 'text-neutral-900'}">${allocation}</span>
                    `;
                    monthlyAllocation.appendChild(div);
                });
                
                // Compensation details
                const compensation = document.getElementById('modal-compensation');
                compensation.innerHTML = `
                    <div class="flex justify-between items-center p-3 bg-neutral-50 rounded-lg">
                        <span class="font-medium">Monthly Salary:</span>
                        <span class="font-bold text-primary-600">${roleData.salary}</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-neutral-50 rounded-lg">
                        <span class="font-medium">Total Cost:</span>
                        <span class="font-bold text-accent-600">${roleData.totalCost}</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-neutral-50 rounded-lg">
                        <span class="font-medium">Development Hours:</span>
                        <span class="font-bold text-warning-600">${roleData.hours}</span>
                    </div>
                    ${roleData.equity ? `
                    <div class="flex justify-between items-center p-3 bg-gradient-to-r from-warning-50 to-yellow-100 rounded-lg border border-warning-200">
                        <span class="font-medium text-warning-900">Equity Stake:</span>
                        <span class="font-bold text-warning-600">${roleData.equity}</span>
                    </div>
                    ` : ''}
                `;
                
                // Show modal
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            // Equity Distribution Chart
            const equityCtx = document.getElementById('equity-distribution-chart').getContext('2d');
            new Chart(equityCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Data Scientist', 'ML Engineer', 'Full-Stack Dev', 'Support Team', 'Available Pool'],
                    datasets: [{
                        data: [3.0, 2.0, 2.0, 0, 93.0],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',   // Primary
                            'rgba(16, 185, 129, 0.8)',   // Accent
                            'rgba(245, 158, 11, 0.8)',   // Warning
                            'rgba(107, 114, 128, 0.8)',  // Neutral
                            'rgba(229, 231, 235, 0.8)'   // Light gray
                        ],
                        borderColor: [
                            'rgb(59, 130, 246)',
                            'rgb(16, 185, 129)',
                            'rgb(245, 158, 11)',
                            'rgb(107, 114, 128)',
                            'rgb(229, 231, 235)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true,
                                font: {
                                    size: 12,
                                    weight: '500'
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.95)',
                            titleColor: '#f1f5f9',
                            bodyColor: '#f1f5f9',
                            borderColor: 'rgba(59, 130, 246, 0.5)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    const label = context.label;
                                    const value = context.parsed;
                                    return `${label}: ${value}% equity`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateRotate: true,
                        duration: 1500,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // Event Listeners for Team Section
            document.addEventListener('click', (e) => {
                // Close role modal
                if (e.target.id === 'close-role-modal' || e.target.id === 'role-modal') {
                    document.getElementById('role-modal').classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }
            });

            // Heatmap view toggles
            document.getElementById('heatmap-view-toggle').addEventListener('click', (e) => {
                e.target.classList.toggle('active');
                // Toggle between grid and list view (future enhancement)
            });

            document.getElementById('workload-intensity').addEventListener('click', (e) => {
                e.target.classList.toggle('active');
                if (e.target.classList.contains('active')) {
                    // Show intensity overlay
                    document.querySelectorAll('.heatmap-cell').forEach(cell => {
                        const intensity = parseInt(cell.dataset.intensity);
                        if (intensity > 0) {
                            cell.style.borderWidth = '2px';
                            cell.style.borderColor = intensity === 3 ? '#dc2626' : 
                                                   intensity === 2 ? '#f59e0b' : '#10b981';
                        }
                    });
                } else {
                    // Hide intensity overlay
                    document.querySelectorAll('.heatmap-cell').forEach(cell => {
                        cell.style.border = 'none';
                    });
                }
            });

            // --- MODAL SYSTEMS FUNCTIONALITY ---

            // Equity Calculator System
            const equityCalculator = {
                currentValuation: 45000000,
                currentEquityPool: 7,
                currentVesting: 4,
                equityScenariosChart: null,

                init() {
                    this.setupEventListeners();
                    this.initializeChart();
                    this.updateCalculations();
                },

                setupEventListeners() {
                    // Open modal
                    document.getElementById('equity-calculator').addEventListener('click', () => {
                        document.getElementById('equity-calculator-modal').classList.remove('hidden');
                        document.body.style.overflow = 'hidden';
                        this.updateCalculations();
                    });

                    // Close modal
                    document.getElementById('close-equity-modal').addEventListener('click', () => {
                        document.getElementById('equity-calculator-modal').classList.add('hidden');
                        document.body.style.overflow = 'auto';
                    });

                    // Sliders
                    document.getElementById('valuation-slider').addEventListener('input', (e) => {
                        this.currentValuation = parseInt(e.target.value);
                        this.updateCalculations();
                    });

                    document.getElementById('equity-pool-slider').addEventListener('input', (e) => {
                        this.currentEquityPool = parseFloat(e.target.value);
                        this.updateCalculations();
                    });

                    document.getElementById('vesting-period').addEventListener('change', (e) => {
                        this.currentVesting = parseInt(e.target.value);
                        this.updateCalculations();
                    });
                },

                updateCalculations() {
                    const valuation = this.currentValuation;
                    const equityPool = this.currentEquityPool;
                    
                    // Update displays
                    document.getElementById('valuation-display').textContent = `$${(valuation / 1000000).toFixed(0)}M`;
                    document.getElementById('equity-pool-display').textContent = `${equityPool}%`;
                    
                    // Calculate values
                    const totalPoolValue = valuation * (equityPool / 100);
                    const dataScientistValue = valuation * 0.03;
                    const mlEngineerValue = valuation * 0.02;
                    const fullstackValue = valuation * 0.02;
                    
                    // Update value displays
                    document.getElementById('total-pool-value').textContent = `$${(totalPoolValue / 1000000).toFixed(2)}M MXN`;
                    document.getElementById('data-scientist-value').textContent = `$${(dataScientistValue / 1000000).toFixed(2)}M MXN`;
                    document.getElementById('ml-engineer-value').textContent = `$${(mlEngineerValue / 1000000).toFixed(1)}M MXN`;
                    document.getElementById('fullstack-value').textContent = `$${(fullstackValue / 1000000).toFixed(1)}M MXN`;
                    
                    // Update retention analysis
                    const retentionProb = Math.min(95, Math.max(70, 70 + (totalPoolValue / 1000000) * 5));
                    const breakevenMonths = Math.max(12, Math.min(36, 36 - (totalPoolValue / 1000000) * 2));
                    const riskScore = retentionProb > 90 ? 'Very Low' : retentionProb > 80 ? 'Low' : 'Medium';
                    
                    document.getElementById('retention-probability').textContent = `${Math.round(retentionProb)}%`;
                    document.getElementById('breakeven-months').textContent = Math.round(breakevenMonths);
                    document.getElementById('risk-score').textContent = riskScore;
                    
                    // Update chart
                    this.updateChart();
                },

                initializeChart() {
                    const ctx = document.getElementById('equity-scenarios-chart').getContext('2d');
                    this.equityScenariosChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['Conservative ($30M)', 'Base ($45M)', 'Optimistic ($60M)'],
                            datasets: [{
                                label: 'Total Team Equity Value',
                                data: [2.1, 3.15, 4.2],
                                borderColor: 'var(--primary-500)',
                                backgroundColor: 'var(--primary-100)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: (context) => `$${context.parsed.y}M MXN`
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: { display: true, text: 'Value (M MXN)' }
                                }
                            }
                        }
                    });
                },

                updateChart() {
                    if (this.equityScenariosChart) {
                        const baseValue = this.currentValuation * (this.currentEquityPool / 100) / 1000000;
                        this.equityScenariosChart.data.datasets[0].data = [
                            baseValue * 0.67, // Conservative
                            baseValue,        // Base
                            baseValue * 1.33  // Optimistic
                        ];
                        this.equityScenariosChart.update();
                    }
                }
            };

            // Pilot Dashboard System
            const pilotDashboard = {
                pilotRevenueChart: null,
                pilotDelinquencyChart: null,

                init() {
                    this.setupEventListeners();
                    this.initializeCharts();
                },

                setupEventListeners() {
                    // Open modal
                    document.getElementById('pilot-dashboard-fullscreen').addEventListener('click', () => {
                        document.getElementById('pilot-dashboard-modal').classList.remove('hidden');
                        document.body.style.overflow = 'hidden';
                        setTimeout(() => this.initializeCharts(), 100); // Ensure modal is visible
                    });

                    // Close modal
                    document.getElementById('close-pilot-modal').addEventListener('click', () => {
                        document.getElementById('pilot-dashboard-modal').classList.add('hidden');
                        document.body.style.overflow = 'auto';
                    });
                },

                initializeCharts() {
                    // Revenue Chart
                    const revenueCtx = document.getElementById('pilot-revenue-chart').getContext('2d');
                    if (this.pilotRevenueChart) this.pilotRevenueChart.destroy();
                    
                    this.pilotRevenueChart = new Chart(revenueCtx, {
                        type: 'line',
                        data: {
                            labels: Array.from({length: 30}, (_, i) => `Day ${i + 1}`),
                            datasets: [{
                                label: 'Daily Revenue',
                                data: Array.from({length: 30}, () => 2500 + Math.random() * 500),
                                borderColor: 'var(--accent-500)',
                                backgroundColor: 'var(--accent-100)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: (context) => `$${Math.round(context.parsed.y)} MXN`
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: { display: true, text: 'Revenue (MXN)' }
                                }
                            }
                        }
                    });

                    // Delinquency Chart
                    const delinquencyCtx = document.getElementById('pilot-delinquency-chart').getContext('2d');
                    if (this.pilotDelinquencyChart) this.pilotDelinquencyChart.destroy();
                    
                    this.pilotDelinquencyChart = new Chart(delinquencyCtx, {
                        type: 'line',
                        data: {
                            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
                            datasets: [{
                                label: 'Delinquency Rate',
                                data: [0, 0, 0, 0, 0, 0],
                                borderColor: 'var(--danger-500)',
                                backgroundColor: 'var(--danger-100)',
                                tension: 0.4,
                                fill: true
                            }, {
                                label: 'Industry Average',
                                data: [15, 18, 20, 22, 25, 25],
                                borderColor: 'var(--neutral-400)',
                                backgroundColor: 'transparent',
                                borderDash: [5, 5]
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                tooltip: {
                                    callbacks: {
                                        label: (context) => `${context.parsed.y}%`
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 30,
                                    title: { display: true, text: 'Delinquency (%)' }
                                }
                            }
                        }
                    });
                }
            };

            // Initialize modal systems
            equityCalculator.init();
            pilotDashboard.init();

            // Initialize Team Heatmap
            generateTeamHeatmap();

            // --- POPULATE GRANULAR CONTENT INTEGRATION ---

            // Populate SaaS Breakdown
            function populateSaasBreakdown() {
                const saasContainer = document.getElementById('saas-breakdown');
                if (!saasContainer) return;

                saasContainer.innerHTML = '';
                Object.keys(saasBreakdown).forEach(key => {
                    const item = saasBreakdown[key];
                    const div = document.createElement('div');
                    div.className = 'flex items-center justify-between p-4 bg-gradient-to-r from-neutral-50 to-neutral-100 rounded-lg border border-neutral-200 hover:border-primary-300 transition-colors cursor-pointer';
                    div.innerHTML = `
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-semibold text-neutral-900">${key.replace('_', ' ')}</h4>
                                <span class="text-sm font-bold text-primary-600">${item.budget}</span>
                            </div>
                            <p class="text-sm text-neutral-600 mb-2">${item.description}</p>
                            <p class="text-xs text-neutral-500 italic">${item.justification}</p>
                        </div>
                        <div class="ml-4 text-center">
                            <div class="text-lg font-bold text-primary-600">${item.percentage}%</div>
                            <div class="w-12 h-2 bg-neutral-200 rounded-full overflow-hidden">
                                <div class="h-full bg-gradient-to-r from-primary-500 to-accent-500 rounded-full" style="width: ${item.percentage}%"></div>
                            </div>
                        </div>
                    `;
                    
                    // Add click interaction for future modal
                    div.addEventListener('click', () => {
                        console.log(`SaaS Detail: ${key}`, item);
                    });
                    
                    saasContainer.appendChild(div);
                });
            }

            // Populate CAPEX Breakdown
            function populateCapexBreakdown() {
                const capexContainer = document.getElementById('capex-breakdown');
                if (!capexContainer) return;

                capexContainer.innerHTML = '';
                Object.keys(vagonetasBreakdown.breakdown_per_unit).forEach(key => {
                    const item = vagonetasBreakdown.breakdown_per_unit[key];
                    const div = document.createElement('div');
                    div.className = 'flex items-center justify-between p-3 bg-gradient-to-r from-accent-50 to-accent-100 rounded-lg border border-accent-200';
                    div.innerHTML = `
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-accent-500 to-accent-600 rounded-lg flex items-center justify-center">
                                <i class="fas fa-${key.includes('Vehículo') ? 'truck' : key.includes('Hardware') ? 'microchip' : 'shield-alt'} text-white text-sm"></i>
                            </div>
                            <div>
                                <div class="font-medium text-accent-900">${key.replace('_', ' ')}</div>
                                <div class="text-sm text-accent-700">${item.description}</div>
                            </div>
                        </div>
                        <div class="font-bold text-accent-600">${item.amount}</div>
                    `;
                    capexContainer.appendChild(div);
                });
            }

            // Initialize content integration
            populateSaasBreakdown();
            populateCapexBreakdown();

            // --- OPERATIONS PLAN FUNCTIONALITY ---

            // Operations Timeline Data
            const operationsTimelineData = [
                {
                    phase: "Foundation & Preparation",
                    months: "1-3",
                    color: "from-blue-500 to-blue-600",
                    icon: "fas fa-foundation",
                    tasks: [
                        "GTM: Operator identification and pre-qualification for pilot",
                        "Legal: PROFECO contract registration and development", 
                        "Pilot: Negotiation and purchase of 3 Higer H6C units",
                        "Product: Success metrics definition for pilot"
                    ],
                    kpi: "100% pilot operators pre-selected. Contracts registered.",
                    status: "completed"
                },
                {
                    phase: "Launch & Deployment", 
                    months: "4-6",
                    color: "from-green-500 to-green-600",
                    icon: "fas fa-rocket",
                    tasks: [
                        "GTM: Pilot operator contract signing",
                        "Legal: PLD compliance validation",
                        "Pilot: IoT hardware installation. First unit deployment",
                        "Product: Android MVP app launch"
                    ],
                    kpi: "3 pilot contracts signed. 1st unit operational.",
                    status: "in-progress"
                },
                {
                    phase: "Validation & Data Collection",
                    months: "7-9", 
                    color: "from-purple-500 to-purple-600",
                    icon: "fas fa-chart-line",
                    tasks: [
                        "GTM: Continuous operator onboarding and support",
                        "Legal: Compliance audit and policy preparation",
                        "Pilot: Units 2 and 3 deployment. 24/7 monitoring",
                        "Product: Feedback collection and performance data"
                    ],
                    kpi: "3 units operating >95% uptime. NPS > 50.",
                    status: "pending"
                },
                {
                    phase: "Traction & Series A Prep",
                    months: "10-12",
                    color: "from-orange-500 to-orange-600", 
                    icon: "fas fa-trophy",
                    tasks: [
                        "GTM: Success testimonials and case study documentation",
                        "Legal: S.A.P.I. legal data room preparation",
                        "Pilot: Final data analysis and unit economics reporting",
                        "Product: Series A product roadmap consolidation"
                    ],
                    kpi: "0% pilot delinquency. NPS > 70. Complete data room.",
                    status: "pending"
                }
            ];

            // Generate Operations Timeline
            function generateOperationsTimeline() {
                const timelineContainer = document.getElementById('ops-timeline-container');
                timelineContainer.innerHTML = '';

                operationsTimelineData.forEach((phase, index) => {
                    const phaseDiv = document.createElement('div');
                    phaseDiv.className = 'timeline-item cursor-pointer p-6 rounded-lg hover:bg-neutral-50 transition-all duration-300';
                    
                    const statusIcon = phase.status === 'completed' ? 'fa-check-circle text-green-500' :
                                     phase.status === 'in-progress' ? 'fa-clock text-yellow-500' :
                                     'fa-circle text-neutral-400';

                    phaseDiv.innerHTML = `
                        <div class="flex items-start space-x-6">
                            <div class="flex-shrink-0">
                                <div class="w-16 h-16 bg-gradient-to-br ${phase.color} rounded-xl flex items-center justify-center">
                                    <i class="${phase.icon} text-white text-xl"></i>
                                </div>
                                <div class="flex justify-center mt-2">
                                    <i class="fas ${statusIcon}"></i>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="text-lg font-bold text-neutral-900">${phase.phase}</h4>
                                    <span class="text-sm font-medium text-neutral-500 bg-neutral-100 px-3 py-1 rounded-full">${phase.months}</span>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                                    ${phase.tasks.map(task => `
                                        <div class="flex items-start space-x-2">
                                            <i class="fas fa-chevron-right text-neutral-400 text-xs mt-1"></i>
                                            <span class="text-sm text-neutral-700">${task}</span>
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="p-3 bg-gradient-to-r from-accent-50 to-accent-100 rounded-lg border border-accent-200">
                                    <span class="text-sm font-semibold text-accent-800">KPI: ${phase.kpi}</span>
                                </div>
                            </div>
                        </div>
                    `;

                    phaseDiv.addEventListener('click', () => {
                        // Add phase detail modal functionality
                        showPhaseDetails(phase);
                    });

                    timelineContainer.appendChild(phaseDiv);
                });
            }

            // Phase Details Modal System
            const phaseDetailsModal = {
                init() {
                    this.createModal();
                },

                createModal() {
                    const modal = document.createElement('div');
                    modal.id = 'phase-details-modal';
                    modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4';
                    modal.innerHTML = `
                        <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                            <div class="p-8">
                                <div class="flex items-center justify-between mb-6">
                                    <div class="flex items-center space-x-4">
                                        <div id="phase-modal-icon" class="w-16 h-16 rounded-xl flex items-center justify-center">
                                            <i id="phase-modal-icon-class" class="text-white text-2xl"></i>
                                        </div>
                                        <div>
                                            <h3 id="phase-modal-title" class="text-2xl font-bold text-neutral-900"></h3>
                                            <p id="phase-modal-subtitle" class="text-neutral-600"></p>
                                        </div>
                                    </div>
                                    <button id="close-phase-modal" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                                        <i class="fas fa-times text-neutral-500"></i>
                                    </button>
                                </div>

                                <!-- Phase Details Grid -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                                    <!-- Tasks Breakdown -->
                                    <div class="professional-card p-6">
                                        <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                            <i class="fas fa-tasks text-primary-500 mr-3"></i>
                                            Detailed Tasks
                                        </h4>
                                        <div id="phase-tasks-list" class="space-y-3">
                                            <!-- Populated by JavaScript -->
                                        </div>
                                    </div>

                                    <!-- KPIs & Deliverables -->
                                    <div class="professional-card p-6">
                                        <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                            <i class="fas fa-chart-line text-accent-500 mr-3"></i>
                                            KPIs & Success Criteria
                                        </h4>
                                        <div id="phase-kpis" class="space-y-3">
                                            <!-- Populated by JavaScript -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Timeline Visualization -->
                                <div class="professional-card p-6 mb-6">
                                    <h4 class="text-lg font-bold text-neutral-900 mb-4">Phase Timeline</h4>
                                    <div id="phase-timeline" class="relative">
                                        <!-- Populated by JavaScript -->
                                    </div>
                                </div>

                                <!-- Risk Mitigation -->
                                <div class="professional-card p-6">
                                    <h4 class="text-lg font-bold text-neutral-900 mb-4 flex items-center">
                                        <i class="fas fa-shield-alt text-warning-500 mr-3"></i>
                                        Risk Mitigation
                                    </h4>
                                    <div id="phase-risks" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <!-- Populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(modal);

                    // Event listeners
                    document.getElementById('close-phase-modal').addEventListener('click', () => {
                        modal.classList.add('hidden');
                        document.body.style.overflow = 'auto';
                    });
                },

                show(phase) {
                    const modal = document.getElementById('phase-details-modal');
                    
                    // Update header
                    document.getElementById('phase-modal-title').textContent = phase.phase;
                    document.getElementById('phase-modal-subtitle').textContent = `Months ${phase.months} • ${phase.status.toUpperCase()}`;
                    
                    // Update icon
                    const iconContainer = document.getElementById('phase-modal-icon');
                    const iconClass = document.getElementById('phase-modal-icon-class');
                    iconContainer.className = `w-16 h-16 rounded-xl flex items-center justify-center bg-gradient-to-br ${phase.color}`;
                    iconClass.className = `${phase.icon} text-white text-2xl`;
                    
                    // Update tasks
                    const tasksList = document.getElementById('phase-tasks-list');
                    tasksList.innerHTML = '';
                    phase.tasks.forEach(task => {
                        const taskDiv = document.createElement('div');
                        taskDiv.className = 'flex items-start space-x-3 p-3 bg-neutral-50 rounded-lg';
                        taskDiv.innerHTML = `
                            <i class="fas fa-chevron-right text-neutral-400 text-xs mt-1"></i>
                            <div class="flex-1">
                                <div class="font-medium text-neutral-900">${task.split(':')[0]}:</div>
                                <div class="text-sm text-neutral-600">${task.split(':')[1] || ''}</div>
                            </div>
                        `;
                        tasksList.appendChild(taskDiv);
                    });
                    
                    // Update KPIs
                    const kpisList = document.getElementById('phase-kpis');
                    kpisList.innerHTML = `
                        <div class="p-4 bg-gradient-to-r from-accent-50 to-accent-100 rounded-lg border border-accent-200">
                            <div class="font-bold text-accent-900 mb-2">Success Criteria</div>
                            <div class="text-sm text-accent-800">${phase.kpi}</div>
                        </div>
                    `;
                    
                    // Update timeline
                    const timeline = document.getElementById('phase-timeline');
                    const months = phase.months.split('-');
                    const startMonth = parseInt(months[0]);
                    const endMonth = parseInt(months[1] || months[0]);
                    
                    timeline.innerHTML = `
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-sm font-medium text-neutral-700">Month ${startMonth}</div>
                            <div class="text-sm font-medium text-neutral-700">Month ${endMonth}</div>
                        </div>
                        <div class="w-full bg-neutral-200 rounded-full h-3">
                            <div class="bg-gradient-to-r ${phase.color} h-3 rounded-full" style="width: ${phase.status === 'completed' ? '100%' : phase.status === 'in-progress' ? '60%' : '0%'}"></div>
                        </div>
                        <div class="mt-2 text-xs text-neutral-500 text-center">
                            ${phase.status === 'completed' ? 'Completed' : phase.status === 'in-progress' ? 'In Progress (60%)' : 'Pending'}
                        </div>
                    `;
                    
                    // Update risks
                    const risks = document.getElementById('phase-risks');
                    const phaseRisks = this.getPhaseRisks(phase.phase);
                    risks.innerHTML = '';
                    phaseRisks.forEach(risk => {
                        const riskDiv = document.createElement('div');
                        riskDiv.className = `p-3 bg-${risk.level === 'high' ? 'red' : risk.level === 'medium' ? 'yellow' : 'green'}-50 rounded-lg border border-${risk.level === 'high' ? 'red' : risk.level === 'medium' ? 'yellow' : 'green'}-200`;
                        riskDiv.innerHTML = `
                            <div class="font-medium text-${risk.level === 'high' ? 'red' : risk.level === 'medium' ? 'yellow' : 'green'}-900">${risk.risk}</div>
                            <div class="text-sm text-${risk.level === 'high' ? 'red' : risk.level === 'medium' ? 'yellow' : 'green'}-700 mt-1">${risk.mitigation}</div>
                        `;
                        risks.appendChild(riskDiv);
                    });
                    
                    // Show modal
                    modal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                },

                getPhaseRisks(phaseName) {
                    const riskMap = {
                        'Foundation & Preparation': [
                            { risk: 'Operator Selection', mitigation: 'Pre-qualified pool of 10+ candidates', level: 'low' },
                            { risk: 'Legal Delays', mitigation: 'PROFECO registration already initiated', level: 'low' }
                        ],
                        'Launch & Deployment': [
                            { risk: 'Technical Integration', mitigation: 'Phased rollout with fallback systems', level: 'medium' },
                            { risk: 'Operator Adoption', mitigation: 'Comprehensive training and support', level: 'medium' }
                        ],
                        'Validation & Data Collection': [
                            { risk: 'Performance Variance', mitigation: 'Multiple units for statistical significance', level: 'medium' },
                            { risk: 'Market Conditions', mitigation: 'Flexible payment terms and support', level: 'low' }
                        ],
                        'Traction & Series A Prep': [
                            { risk: 'Data Quality', mitigation: 'Redundant tracking and validation systems', level: 'low' },
                            { risk: 'Investor Readiness', mitigation: 'Professional data room and documentation', level: 'low' }
                        ]
                    };
                    return riskMap[phaseName] || [];
                }
            };

            // Initialize phase details modal
            phaseDetailsModal.init();

            // Show phase details function
            function showPhaseDetails(phase) {
                phaseDetailsModal.show(phase);
            }

            // Pilot Dashboard Animation
            function animatePilotGauges() {
                const gauges = document.querySelectorAll('.pilot-gauge');
                gauges.forEach(gauge => {
                    const value = parseInt(gauge.dataset.value);
                    const circumference = 2 * Math.PI * 40; // radius = 40
                    const offset = circumference - (value / 100) * circumference;
                    
                    gauge.style.strokeDashoffset = offset;
                    gauge.style.transition = 'stroke-dashoffset 2s ease-in-out';
                });

                // Animate values
                setTimeout(() => {
                    document.getElementById('delinquency-rate').textContent = '0%';
                    document.getElementById('uptime-rate').textContent = '98%';
                    document.getElementById('nps-score').textContent = '72';
                    document.getElementById('revenue-target').textContent = '$920';
                }, 1000);
            }

            // Simulate live alerts
            function simulateLiveAlerts() {
                const alertSystem = document.getElementById('alert-system');
                const alerts = [
                    { type: 'success', icon: 'check-circle', message: 'Payment received from operator #1', time: 'Just now' },
                    { type: 'info', icon: 'info-circle', message: 'Vehicle #2 maintenance completed', time: '5 min ago' },
                    { type: 'warning', icon: 'exclamation-triangle', message: 'Fuel efficiency optimization suggestion', time: '12 min ago' }
                ];

                setInterval(() => {
                    const randomAlert = alerts[Math.floor(Math.random() * alerts.length)];
                    const colorClass = randomAlert.type === 'success' ? 'green' : 
                                     randomAlert.type === 'info' ? 'blue' : 'yellow';
                    
                    const alertDiv = document.createElement('div');
                    alertDiv.className = `flex items-center justify-between p-3 bg-${colorClass}-50 rounded-lg border border-${colorClass}-200 opacity-0 transition-opacity duration-300`;
                    alertDiv.innerHTML = `
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-${randomAlert.icon} text-${colorClass}-600"></i>
                            <span class="text-sm font-medium text-${colorClass}-900">${randomAlert.message}</span>
                        </div>
                        <span class="text-xs text-${colorClass}-700">${randomAlert.time}</span>
                    `;

                    alertSystem.insertBefore(alertDiv, alertSystem.firstChild);
                    
                    // Animate in
                    setTimeout(() => alertDiv.classList.remove('opacity-0'), 100);
                    
                    // Remove old alerts
                    if (alertSystem.children.length > 4) {
                        alertSystem.removeChild(alertSystem.lastChild);
                    }
                }, 15000); // New alert every 15 seconds
            }

            // Event Listeners for Operations Section
            document.getElementById('ops-timeline-toggle').addEventListener('click', (e) => {
                const timelineContainer = document.getElementById('ops-timeline-container');
                const complianceContainer = document.getElementById('compliance-matrix-container');
                
                timelineContainer.classList.remove('hidden');
                complianceContainer.classList.add('hidden');
                
                // Update button states
                e.target.classList.add('bg-primary-500', 'hover:bg-primary-600');
                e.target.classList.remove('bg-neutral-200', 'text-neutral-700');
                document.getElementById('compliance-matrix').classList.remove('bg-accent-500', 'hover:bg-accent-600');
                document.getElementById('compliance-matrix').classList.add('bg-neutral-200', 'text-neutral-700');
            });

            document.getElementById('compliance-matrix').addEventListener('click', (e) => {
                const timelineContainer = document.getElementById('ops-timeline-container');
                const complianceContainer = document.getElementById('compliance-matrix-container');
                
                timelineContainer.classList.add('hidden');
                complianceContainer.classList.remove('hidden');
                
                // Update button states
                e.target.classList.add('bg-accent-500', 'hover:bg-accent-600');
                e.target.classList.remove('bg-neutral-200', 'text-neutral-700');
                document.getElementById('ops-timeline-toggle').classList.remove('bg-primary-500', 'hover:bg-primary-600');
                document.getElementById('ops-timeline-toggle').classList.add('bg-neutral-200', 'text-neutral-700');
            });

            document.getElementById('pilot-dashboard-fullscreen').addEventListener('click', () => {
                // Future: implement fullscreen pilot dashboard
                alert('Full Pilot Dashboard - Coming soon!\n\nFeatures:\n• Real-time vehicle tracking\n• Operator performance metrics\n• Predictive maintenance alerts\n• Financial performance tracking');
            });

            // Initialize Operations Plan
            generateOperationsTimeline();
            
            // Start pilot dashboard animations after a delay
            setTimeout(() => {
                animatePilotGauges();
                simulateLiveAlerts();
            }, 2000);

            // Tech Timeline (Legacy support)
            const techContainer = document.getElementById('tech-timeline-container');
            const techDetailsPane = document.getElementById('tech-details-pane');
            const techDetailsTitle = document.getElementById('tech-details-title');
            const techDetailsTasks = document.getElementById('tech-details-tasks');
            const techDetailsMilestone = document.getElementById('tech-details-milestone');
            
            techTimelineData.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'timeline-item cursor-pointer p-3 rounded-lg hover:bg-slate-50';
                const width = ((item.end - item.start + 1) / 12) * 100;
                const left = ((item.start - 1) / 12) * 100;

                itemEl.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-semibold text-sm">${item.category}</span>
                        <span class="text-xs text-slate-500">Mes ${item.start} - ${item.end}</span>
                    </div>
                    <div class="timeline-bar h-4 w-full bg-slate-200">
                        <div class="timeline-progress" style="width: ${width}%; left: ${left}%; background-color: ${item.color};"></div>
                    </div>
                `;
                itemEl.addEventListener('click', () => {
                    techDetailsTitle.textContent = item.category;
                    techDetailsTasks.textContent = item.tasks;
                    techDetailsMilestone.textContent = item.milestone;
                    techDetailsPane.classList.remove('hidden');
                });
                techContainer.appendChild(itemEl);
            });

            // Ops Timeline
            const opsContainer = document.getElementById('ops-timeline-container');
            const opsDetailsPane = document.getElementById('ops-details-pane');
            const opsDetailsTitle = document.getElementById('ops-details-title');
            const opsDetailsTasks = document.getElementById('ops-details-tasks');
            const opsDetailsKpi = document.getElementById('ops-details-kpi');

            opsTimelineData.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'ops-item cursor-pointer p-4 rounded-lg border border-slate-200 hover:bg-slate-50 hover:border-slate-300 transition-colors';
                itemEl.style.borderLeft = `5px solid ${item.color}`;
                itemEl.innerHTML = `<h4 class="font-semibold">${item.phase}</h4>`;
                
                itemEl.addEventListener('click', () => {
                    opsDetailsTitle.textContent = item.phase;
                    opsDetailsTasks.textContent = item.tasks;
                    opsDetailsKpi.textContent = item.kpi;
                    opsDetailsPane.classList.remove('hidden');
                });
                opsContainer.appendChild(itemEl);
            });

            // HR Table
            const hrTable = document.getElementById('hr-table');
            const roleFilter = document.getElementById('role-filter');
            const theadRow = hrTable.querySelector('thead tr');
            const tbody = hrTable.querySelector('tbody');

            // Populate filter and table header
            hrData.roles.forEach(role => {
                const option = document.createElement('option');
                option.value = role;
                option.textContent = role;
                roleFilter.appendChild(option);
            });
            for(let i = 1; i <= 12; i++) {
                const th = document.createElement('th');
                th.className = 'px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider';
                th.textContent = `M${i}`;
                theadRow.appendChild(th);
            }

            // Populate table body
            hrData.allocations.forEach((alloc, i) => {
                const tr = document.createElement('tr');
                tr.dataset.role = hrData.roles[i];
                tr.innerHTML = `<td class="px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900">${hrData.roles[i]}</td>`;
                alloc.forEach(task => {
                    const td = document.createElement('td');
                    td.className = 'px-3 py-2 whitespace-nowrap text-xs text-center text-gray-500';
                    td.textContent = task;
                    tr.appendChild(td);
                });
                tbody.appendChild(tr);
            });

            roleFilter.addEventListener('change', (e) => {
                const selectedRole = e.target.value;
                tbody.querySelectorAll('tr').forEach(tr => {
                    if (selectedRole === 'all' || tr.dataset.role === selectedRole) {
                        tr.style.display = '';
                        tr.style.backgroundColor = selectedRole === 'all' ? '' : '#fffbeb';
                    } else {
                        tr.style.display = 'none';
                    }
                });
                if(selectedRole === 'all') {
                     tbody.querySelectorAll('tr').forEach(tr => tr.style.backgroundColor = '');
                }
            });

            // Enhanced Navigation System
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');
            const progressBar = document.getElementById('nav-progress');
            const currentSectionSpan = document.getElementById('current-section');
            const fab = document.getElementById('fab');

            // Progress tracking and navigation
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                
                // Update progress bar
                progressBar.style.width = scrollPercent + '%';
                
                // Update active section
                let current = '';
                let currentSectionName = '';
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100;
                    const sectionId = section.getAttribute('id');
                    
                    if (scrollTop >= sectionTop) {
                        current = sectionId;
                        // Get section name from navigation
                        const navLink = document.querySelector(`[href="#${sectionId}"]`);
                        if (navLink) {
                            currentSectionName = navLink.textContent.trim().replace(/.*\s/, '');
                        }
                    }
                });

                // Update navigation
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active');
                    }
                });

                // Update breadcrumb
                if (currentSectionName) {
                    currentSectionSpan.textContent = currentSectionName;
                }

                // Show/hide FAB based on scroll position
                if (scrollTop > 300) {
                    fab.style.transform = 'scale(1)';
                    fab.style.opacity = '1';
                } else {
                    fab.style.transform = 'scale(0.8)';
                    fab.style.opacity = '0.7';
                }
            });

            // FAB click handler
            fab.addEventListener('click', () => {
                document.getElementById('executive-summary').scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                const currentSection = document.querySelector('section.active') || sections[0];
                const currentIndex = Array.from(sections).indexOf(currentSection);
                
                if (e.key === 'j' || e.key === 'J') {
                    // Next section
                    e.preventDefault();
                    const nextIndex = Math.min(currentIndex + 1, sections.length - 1);
                    sections[nextIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else if (e.key === 'k' || e.key === 'K') {
                    // Previous section
                    e.preventDefault();
                    const prevIndex = Math.max(currentIndex - 1, 0);
                    sections[prevIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });

            // --- DARK/LIGHT MODE TOGGLE FUNCTIONALITY ---

            // Theme management system
            const themeManager = {
                currentTheme: 'light',
                
                init() {
                    // Check for saved theme preference or default to light
                    const savedTheme = localStorage.getItem('dashboard-theme') || 'light';
                    this.setTheme(savedTheme);
                    this.updateToggleUI();
                },
                
                setTheme(theme) {
                    // Add transitioning class to prevent flicker
                    document.body.classList.add('theme-transitioning');
                    
                    this.currentTheme = theme;
                    document.documentElement.setAttribute('data-theme', theme);
                    localStorage.setItem('dashboard-theme', theme);
                    
                    // Update Chart.js themes if needed
                    this.updateChartThemes();
                    
                    // Remove transitioning class after theme change
                    setTimeout(() => {
                        document.body.classList.remove('theme-transitioning');
                    }, 100);
                },
                
                toggleTheme() {
                    const newTheme = this.currentTheme === 'light' ? 'dark' : 'light';
                    this.setTheme(newTheme);
                    this.updateToggleUI();
                    this.showThemeNotification(newTheme);
                },
                
                updateToggleUI() {
                    const toggleBtn = document.getElementById('theme-toggle');
                    const icon = toggleBtn.querySelector('.theme-toggle-icon');
                    
                    if (this.currentTheme === 'dark') {
                        toggleBtn.classList.add('dark');
                        icon.className = 'fas fa-moon theme-toggle-icon';
                    } else {
                        toggleBtn.classList.remove('dark');
                        icon.className = 'fas fa-sun theme-toggle-icon';
                    }
                },
                
                updateChartThemes() {
                    // Update existing charts with new theme colors
                    const isDark = this.currentTheme === 'dark';
                    
                    // Update chart text colors
                    Chart.defaults.color = isDark ? '#f1f5f9' : '#1e293b';
                    Chart.defaults.borderColor = isDark ? '#334155' : '#e2e8f0';
                    
                    // Re-render all existing charts
                    Object.values(Chart.instances).forEach(chart => {
                        if (chart && chart.update) {
                            chart.update();
                        }
                    });
                },
                
                showThemeNotification(theme) {
                    // Create temporary notification
                    const notification = document.createElement('div');
                    notification.className = `fixed top-20 right-4 z-50 px-4 py-2 rounded-lg shadow-lg transition-all duration-300 ${
                        theme === 'dark' 
                            ? 'bg-neutral-800 text-neutral-100 border border-neutral-700' 
                            : 'bg-white text-neutral-900 border border-neutral-200'
                    }`;
                    notification.innerHTML = `
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-${theme === 'dark' ? 'moon' : 'sun'} text-${theme === 'dark' ? 'blue' : 'yellow'}-500"></i>
                            <span class="text-sm font-medium">${theme === 'dark' ? 'Dark' : 'Light'} mode activated</span>
                        </div>
                    `;
                    
                    document.body.appendChild(notification);
                    
                    // Animate in
                    setTimeout(() => notification.style.transform = 'translateX(0)', 100);
                    
                    // Remove after 2 seconds
                    setTimeout(() => {
                        notification.style.opacity = '0';
                        notification.style.transform = 'translateX(100%)';
                        setTimeout(() => document.body.removeChild(notification), 300);
                    }, 2000);
                }
            };

            // Theme toggle event listener
            document.getElementById('theme-toggle').addEventListener('click', () => {
                themeManager.toggleTheme();
            });

            // Keyboard shortcut for theme toggle (Ctrl/Cmd + Shift + T)
            document.addEventListener('keydown', (e) => {
                if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'T') {
                    e.preventDefault();
                    themeManager.toggleTheme();
                }
            });

            // Initialize theme system
            themeManager.init();

            // Smooth scrolling for all navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Enhanced tooltips
            function createTooltip(element, text) {
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltip';
                tooltip.textContent = text;
                document.body.appendChild(tooltip);

                element.addEventListener('mouseenter', (e) => {
                    const rect = element.getBoundingClientRect();
                    tooltip.style.left = rect.left + (rect.width / 2) + 'px';
                    tooltip.style.top = rect.top - 40 + 'px';
                    tooltip.classList.add('show');
                });

                element.addEventListener('mouseleave', () => {
                    tooltip.classList.remove('show');
                });
            }

            // Add tooltips to key elements
            document.querySelectorAll('[title]').forEach(el => {
                const title = el.getAttribute('title');
                el.removeAttribute('title');
                createTooltip(el, title);
            });

            // Initialize page
            setTimeout(() => {
                // Trigger initial scroll event to set up navigation
                window.dispatchEvent(new Event('scroll'));
            }, 100);

        });
    </script>
</body>
</html>
