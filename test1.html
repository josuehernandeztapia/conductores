document.addEventListener('DOMContentLoaded', () => {
    // Funci√≥n para mostrar un toast notification
    function showToast(message) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000); // El toast desaparece despu√©s de 3 segundos
    }

    // Funcionalidad de copiar al portapapeles
    document.querySelectorAll('.copy-button').forEach(button => {
        button.addEventListener('click', (event) => {
            const targetId = event.currentTarget.dataset.copyTarget;
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
                const textToCopy = targetElement.textContent;
                navigator.clipboard.writeText(textToCopy)
                    .then(() => {
                        showToast(`${targetElement.id.toUpperCase()} copiada!`);
                        // Opcional: feedback visual temporal en el bot√≥n
                        event.currentTarget.textContent = '‚úÖ';
                        setTimeout(() => {
                            event.currentTarget.textContent = 'üìã';
                        }, 1000);
                    })
                    .catch(err => {
                        console.error('Error al copiar: ', err);
                        showToast('Error al copiar. Intenta manualmente.');
                    });
            }
        });
    });

    // Funcionalidad del bot√≥n principal "YA REALIC√â MI PAGO"
    const mainActionButton = document.getElementById('mainActionButton');
    mainActionButton.addEventListener('click', () => {
        mainActionButton.textContent = 'Cargando...';
        mainActionButton.disabled = true;

        // Simular una llamada a API
        setTimeout(() => {
            const success = Math.random() > 0.3; // 70% de √©xito, 30% de error

            if (success) {
                showToast('‚úÖ ¬°Pago registrado con √©xito!');
                mainActionButton.textContent = 'PAGO REGISTRADO';
                mainActionButton.style.backgroundColor = 'var(--primary-green-dark)'; // Cambiar color si est√° permanentemente
                // Aqu√≠ podr√≠as redirigir o actualizar la UI para mostrar el nuevo estado
            } else {
                showToast('‚ùå Error al registrar el pago. Intenta de nuevo.');
                mainActionButton.textContent = 'YA REALIC√â MI PAGO';
                mainActionButton.disabled = false;
            }
        }, 2000); // Simula 2 segundos de carga
    });

    // Funcionalidad de cambiar frecuencia de pago
    const weeklyBtn = document.getElementById('weeklyBtn');
    const monthlyBtn = document.getElementById('monthlyBtn');
    const changeFreqLink = document.getElementById('changeFreqLink');
    const amountSpan = document.querySelector('.payment-summary-card .amount');
    const dueDateText = document.querySelector('.due-date-card p');
    const savingsText = document.querySelector('.savings-card p');

    changeFreqLink.addEventListener('click', (e) => {
        e.preventDefault(); // Evita que el enlace recargue la p√°gina

        // Simular un modal o navegaci√≥n a pantalla de cambio
        // En un wireframe real, esto abrir√≠a un modal para confirmar el cambio.
        // Aqu√≠, simplemente cambiamos el estado directamente para demostrar la interacci√≥n.

        if (weeklyBtn.classList.contains('selected')) {
            // Cambiar a Mensual
            weeklyBtn.classList.remove('selected');
            weeklyBtn.classList.add('disabled');
            weeklyBtn.disabled = true;

            monthlyBtn.classList.add('selected');
            monthlyBtn.classList.remove('disabled');
            monthlyBtn.disabled = false;

            // Actualizar montos y fechas simuladas para el pago mensual
            amountSpan.textContent = '$3,200.00 MXN';
            document.querySelector('.payment-summary-card .subtext').textContent = 'Pago mensual estimado';
            dueDateText.textContent = 'Vence el viernes 26 de julio - 11:59 p.m.';
            savingsText.textContent = 'Ahorraste $950.00 este mes vs gasolina';
            showToast('Frecuencia cambiada a Mensual.');

        } else {
            // Cambiar a Semanal (opcional, si quisieras que el usuario pueda volver)
            // Para este wireframe, solo demostraremos el cambio a mensual.
            // weeklyBtn.classList.add('selected');
            // weeklyBtn.classList.remove('disabled');
            // weeklyBtn.disabled = false;

            // monthlyBtn.classList.remove('selected');
            // monthlyBtn.classList.add('disabled');
            // monthlyBtn.disabled = true;

            // amountSpan.textContent = '$845.00 MXN';
            // document.querySelector('.payment-summary-card .subtext').textContent = 'Pago semanal estimado';
            // dueDateText.textContent = 'Vence el viernes 28 de junio - 11:59 p.m.';
            // savingsText.textContent = 'Ahorraste $215.00 esta semana vs gasolina';
            // showToast('Frecuencia cambiada a Semanal.');
        }
    });
});
