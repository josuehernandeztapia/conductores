<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modelo Financiero Interactivo - Rodando a Gas</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<!-- Lucide Icons for a professional touch -->
<script src="https://unpkg.com/lucide@latest"></script>

<style>
/* Base Styles - Inspired by the Pitch Deck (Dark Theme) */
body {
font-family: 'Inter', sans-serif;
background-color: #020617; /* slate-950 from Tailwind for dark background */
color: #e2e8f0; /* slate-200 for main text */
overflow-x: hidden; /* Prevent horizontal scroll */
}
h1, h2, h3, h4 {
color: #f8fafc; /* slate-50 for titles */
font-weight: 700; /* Bold */
}
/* Gradient text highlight */
.highlight-text {
background: -webkit-linear-gradient(45deg, #22d3ee, #0ea5e9); /* cyan-400 to sky-500 */
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
}
/* Tabs Navigation */
.tab-button {
transition: all 0.3s ease;
cursor: pointer;
padding: 1rem 1.5rem;
border-bottom: 2px solid transparent;
color: #94a3b8; /* slate-400 */
font-weight: 500;
margin-right: 0.5rem;
border-radius: 0.5rem 0.5rem 0 0;
display: inline-flex; /* Allows icons aligned with text */
align-items: center;
gap: 0.5rem; /* Space between icon and text */
}
.tab-button.active {
border-color: #0ea5e9; /* sky-500 */
color: #f8fafc; /* slate-50 */
background-color: #0f172a; /* slate-900 */
font-weight: 600;
}
.tab-button:hover:not(.active) {
color: #cbd5e1; /* slate-300 */
background-color: #0f172a; /* slate-900 */
}
/* Section content */
.content-section { display: none; }
.content-section.active { display: block; }
/* Card Style */
.card {
background-color: #0f172a; /* slate-900 for card interior */
border-radius: 0.75rem; /* rounded-xl */
box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
padding: 1.5rem;
margin-bottom: 1.5rem;
border: 1px solid #1e293b; /* slate-800 for subtle borders */
}
/* Sliders */
.input-slider {
-webkit-appearance: none;
width: 100%;
height: 8px;
background: #1e293b; /* slate-800 */
border-radius: 9999px;
outline: none;
transition: background 0.2s ease-in-out;
}
.input-slider::-webkit-slider-thumb {
-webkit-appearance: none;
width: 20px;
height: 20px;
background: #0ea5e9; /* sky-500 */
border-radius: 9999px;
cursor: pointer;
box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.3); /* Ring when dragging */
transition: background 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}
.input-slider:hover::-webkit-slider-thumb {
background: #38bdf8; /* sky-400 */
}
/* Financial Tables */
.financial-table {
width: 100%;
border-collapse: collapse;
background-color: #0f172a; /* slate-900 */
border-radius: 0.75rem; /* rounded-xl */
overflow: hidden; /* So that rounded borders apply to thead/tbody */
}
.financial-table th, .financial-table td {
padding: 1rem; /* More padding for readability */
text-align: right;
border-bottom: 1px solid #1e293b; /* slate-800 */
font-size: 0.95rem;
}
.financial-table th {
background-color: #1a233b; /* A slightly lighter shade than the table background */
font-weight: 600;
color: #94a3b8; /* slate-400 */
text-transform: uppercase;
letter-spacing: 0.05em;
}
.financial-table td:first-child, .financial-table th:first-child {
text-align: left;
color: #e2e8f0; /* slate-200 */
}
.financial-table tr:last-child td {
border-bottom: none; /* Remove bottom border from last row */
}
.financial-table tr.bg-gray-50 { /* Style for total/subtotal rows */
background-color: #1e293b; /* slate-800 */
color: #f8fafc; /* slate-50 */
font-weight: 700;
}
.positive { color: #34d399; /* emerald-400 */ }
.negative { color: #f43f5e; /* rose-500 */ }
/* Key Metrics Indicators */
.metric-card {
background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); /* Subtle gradient */
border-left: 4px solid #0ea5e9; /* sky-500 */
padding: 1.25rem; /* More padding */
border-radius: 0.75rem;
box-shadow: 0 2px 4px rgba(0,0,0,0.2);
display: flex;
flex-direction: column;
justify-content: space-between;
}
.metric-card .text-sm {
color: #94a3b8; /* slate-400 */
font-weight: 500;
margin-bottom: 0.25rem;
}
.metric-card .text-2xl {
color: #f8fafc; /* slate-50 */
font-weight: 800; /* Extra bold */
}
.metric-row-title {
font-size: 0.875rem; /* text-sm */
font-weight: 600; /* font-semibold */
color: #64748b; /* slate-500 */
text-transform: uppercase;
letter-spacing: 0.05em;
margin-bottom: 0.75rem; /* mb-3 */
padding-left: 0.25rem;
}
/* Debug Panel */
.debug-info {
background: #1e293b; /* slate-800 */
color: #f8fafc; /* slate-50 */
border: 1px solid #334155; /* slate-700 */
border-radius: 0.5rem;
box-shadow: 0 4px 12px rgba(0,0,0,0.5);
}
.debug-info button {
background-color: #ef4444; /* red-500 */
color: white;
padding: 0.3rem 0.75rem;
border-radius: 0.375rem;
font-size: 0.75rem;
transition: background-color 0.2s ease;
}
.debug-info button:hover {
background-color: #dc2626; /* red-600 */
}
/* IFRS Compliant Cards */
.niif-compliant {
border-left: 4px solid #10b981; /* emerald-500 */
background-color: #0f172a; /* slate-900 */
}
/* Validation Panel */
#validation-panel-content {
background-color: #0f172a; /* slate-900 */
border: 1px solid #1e293b; /* slate-800 */
border-radius: 0.75rem;
box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
}
.validation-item {
border-left: 4px solid;
padding: 0.75rem;
border-radius: 0.5rem;
margin-bottom: 0.5rem;
}
.validation-item.error { background-color: #450a0a; border-color: #dc2626; color: #fecaca; } /* red-950 / red-600 */
.validation-item.warning { background-color: #422006; border-color: #f59e0b; color: #fffbeb; } /* amber-950 / amber-500 */
.validation-item.info { background-color: #075985; border-color: #3b82f6; color: #e0f2fe; } /* sky-950 / blue-500 */
.validation-item.passed { background-color: #064e3b; border-color: #10b981; color: #d1fae5; } /* emerald-950 / green-500 */

.validation-message { color: #cbd5e1; /* slate-300 */ }
.validation-message strong { color: #f8fafc; }
.validation-summary {
background-color: #1a233b; /* slate-800 */
color: #f8fafc;
border: 1px solid #334155;
}
.validation-summary.bg-red-200 { background-color: #450a0a; border-color: #dc2626; color: #fecaca; }
.validation-summary.bg-yellow-200 { background-color: #422006; border-color: #f59e0b; color: #fffbeb; }
.validation-summary.bg-green-200 { background-color: #064e3b; border-color: #10b981; color: #d1fae5; }
/* Tooltips - Maintain visibility and readability */
[data-tooltip] {
position: relative;
cursor: help;
}
[data-tooltip]:before, [data-tooltip]:after {
position: absolute;
visibility: hidden;
opacity: 0;
transition: opacity 0.2s ease-in-out;
pointer-events: none;
background-color: #1e293b; /* slate-800 */
color: #f8fafc;
border: 1px solid #334155; /* slate-700 */
border-radius: 0.5rem;
font-size: 0.8rem;
line-height: 1.4;
padding: 0.75rem;
width: 280px;
z-index: 100;
}
[data-tooltip]:before {
content: attr(data-tooltip);
bottom: 125%;
left: 50%;
transform: translateX(-50%);
}
[data-tooltip]:after {
content: '';
bottom: 125%;
left: 50%;
margin-left: -5px;
border-width: 5px;
border-style: solid;
border-color: #1e293b transparent transparent transparent;
transform: translateY(100% + 5px) translateX(-50%);
}
[data-tooltip]:hover:before, [data-tooltip]:hover:after {
visibility: visible;
opacity: 1;
}
/* Inputs and Selects */
input[type="number"], input[type="range"] {
background-color: #1a233b; /* slate-800 */
border-color: #334155; /* slate-700 */
color: #e2e8f0; /* slate-200 */
border-radius: 0.375rem; /* rounded-md */
}
input[type="number"]:focus, input[type="range"]::-webkit-slider-thumb:focus {
border-color: #0ea5e9; /* sky-500 */
box-shadow: 0 0 0 2px rgba(14, 165, 233, 0.5); /* Focus ring */
background-color: #1a233b; /* Ensure background doesn't change on focus */
}
label {
color: #cbd5e1; /* slate-300 */
}
/* Styles for slider value text */
span[id$="-valor"] {
color: #81e6d9; /* a green/cyan tone for values */
}
/* NEW: Compact Chart Styles */
.compact-chart {
padding: 1rem;
}
.compact-chart h4 {
font-size: 0.875rem;
margin-bottom: 0.5rem;
line-height: 1.2;
}
/* NEW: Horizontal Control Styles */
.control-grid {
display: grid;
grid-template-columns: auto 1fr;
gap: 1rem;
align-items: center;
}
.control-grid label {
text-align: left;
white-space: nowrap;
}
.control-grid .slider-container {
display: grid;
grid-template-columns: 1fr auto;
gap: 1rem;
align-items: center;
}
.units-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
gap: 1rem;
}

/* NEW: Financing Matrix Styles */
#financing-matrix-table {
width: 100%;
border-collapse: collapse;
margin-top: 1rem;
}
#financing-matrix-table th, #financing-matrix-table td {
text-align: center;
padding: 0.5rem;
border: 1px solid #1e293b;
}
#financing-matrix-table th {
font-size: 0.8rem;
font-weight: 600;
}
#financing-matrix-table td:first-child {
text-align: left;
font-weight: 500;
}
#financing-matrix-table input[type="number"] {
width: 100%;
padding: 0.25rem;
font-size: 0.85rem;
text-align: right;
-moz-appearance: textfield;
}
#financing-matrix-table input[type="number"]::-webkit-outer-spin-button,
#financing-matrix-table input[type="number"]::-webkit-inner-spin-button {
-webkit-appearance: none;
margin: 0;
}
.additional-value {
    font-weight: 500;
    padding: 0.25rem;
    border-radius: 0.25rem;
    color: #fcd34d; /* amber-300 */
}
.total-value {
    font-weight: 700;
    padding: 0.25rem;
    border-radius: 0.25rem;
    background-color: rgba(14, 165, 233, 0.1);
    color: #7dd3fc; /* sky-300 */
}
.instrument-header {
    background-color: #1a233b;
    color: #f8fafc;
    font-weight: 600;
    text-align: left;
    padding-left: 1rem;
}


/* Dynamic Validation Styles */
.validation-error {
border-color: #ef4444 !important;
box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2) !important;
}
.validation-warning {
border-color: #f59e0b !important;
box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.2) !important;
}
.validation-success {
border-color: #10b981 !important;
box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2) !important;
}
@media (max-width: 1024px) {
.compact-chart {
min-height: 280px;
}
}
</style>
</head>
<body class="text-gray-800">

<!-- Debug Panel -->
<div id="debug-info" class="debug-info" style="display:none; position: fixed; top: 10px; right: 10px; z-index: 1000; padding: 10px; max-height: 400px; overflow-y: auto;">
<div id="debug-content"></div>
<button onclick="toggleDebug()" class="bg-red-500 text-white px-2 py-1 rounded mt-2 text-xs">Cerrar</button>
</div>

<div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
<!-- Header and Key Metrics -->
<header class="mb-8 text-center bg-transparent rounded-xl p-6">
<h1 class="text-4xl lg:text-5xl font-black text-white leading-tight tracking-tighter mb-2">Modelo Financiero - Rodando a <span class="highlight-text">Gas</span></h1>
<p class="text-xl text-slate-400 mt-2">NIIF-Compliant | Series A Due Diligence</p>
<p class="text-sm text-amber-400 mt-1">‚ö†Ô∏è Modelo en desarrollo - Validaci√≥n continua</p>
<button onclick="toggleDebug()" class="mt-4 bg-sky-600 hover:bg-sky-500 text-white px-4 py-2 rounded-lg font-medium transition duration-300 inline-flex items-center gap-2">
<i data-lucide="bug" class="w-5 h-5"></i> Debug
</button>
<div class="mt-4 flex justify-center gap-2">
<button class="px-3 py-1 bg-slate-800 text-white rounded border border-slate-600 text-sm">Base Case</button>
<button class="px-3 py-1 bg-slate-700 text-slate-300 rounded border border-slate-600 text-sm">Conservative</button>
<button class="px-3 py-1 bg-slate-700 text-slate-300 rounded border border-slate-600 text-sm">Stress Test</button>
</div>
</header>

<!-- =================================================================== -->
<!-- ===== NEW INVESTOR-FOCUSED METRICS DASHBOARD ====================== -->
<!-- =================================================================== -->
<div class="space-y-8 mb-8">
<!-- Fila 1: Retorno y Escala (El "Hook") -->
<div>
<h3 class="metric-row-title">Retorno y Escala</h3>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
<div class="metric-card" data-tooltip="Indicador clave de la rentabilidad operativa del negocio al final del periodo de proyecci√≥n.">
<div class="text-sm">EBITDA A√±o 5</div>
<div class="text-2xl font-bold" id="ebitda-year5">$0M</div>
<div class="text-xs text-emerald-400">Rentabilidad Operativa</div>
</div>
<div class="metric-card" data-tooltip="Calculada sobre los flujos de efectivo para el accionista (despu√©s de deuda) y un valor terminal conservador (M√∫ltiplo P/B de 1.8x). Es el retorno real y magnificado de su inversi√≥n gracias al apalancamiento.">
<div class="text-sm">TIR Equity</div>
<div class="text-2xl font-bold" id="tir-equity">0%</div>
<div class="text-xs text-sky-400">Retorno para el Inversionista</div>
</div>
<div class="metric-card" data-tooltip="F√≥rmula: Efectivo + Cuentas por Cobrar Netas + Activos Fijos Netos. Es el indicador est√°ndar de la industria para medir la escala total del negocio que hemos construido.">
<div class="text-sm">Activos Totales Bajo Gesti√≥n</div>
<div class="text-2xl font-bold" id="aum-value">$0M</div>
<div class="text-xs text-purple-400">Magnitud del Negocio</div>
</div>
<div class="metric-card" data-tooltip="N√∫mero acumulado de unidades financiadas en 5 a√±os. Mide nuestra capacidad para capturar clientes y la penetraci√≥n de mercado.">
<div class="text-sm">Vagonetas Totales Financiadas</div>
<div class="text-2xl font-bold" id="total-vans-financed">0</div>
<div class="text-xs text-pink-400">Penetraci√≥n de Mercado</div>
</div>
</div>
</div>
<!-- Fila 2: La Maquinaria de Crecimiento (El "Motor") -->
<div>
<h3 class="metric-row-title">La Maquinaria de Crecimiento</h3>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
<div class="metric-card" data-tooltip="Capital total aportado por los socios (Serie A y futuras capitalizaciones). Es el 'costo' de la inversi√≥n para los accionistas.">
<div class="text-sm">Capital de Socios Levantado</div>
<div class="text-2xl font-bold" id="equity-raised">$0M</div>
<div class="text-xs text-blue-400">Serie A + Capital Calls</div>
</div>
<div class="metric-card" data-tooltip="Deuda total (Venture + Comercial) levantada para financiar la flota. Demuestra nuestra capacidad para apalancar el capital de socios.">
<div class="text-sm">Deuda Total Levantada</div>
<div class="text-2xl font-bold" id="total-debt-raised">$0M</div>
<div class="text-xs text-amber-400">Apalancamiento para Escalar</div>
</div>
<div class="metric-card" data-tooltip="Mide cu√°ntos ingresos generamos por cada peso de financiamiento total (Equity + Deuda). Un ratio >0.8x indica una excelente productividad del capital.">
<div class="text-sm">Funding Efficiency</div>
<div class="text-2xl font-bold" id="funding-efficiency">0.0x</div>
<div class="text-xs text-cyan-400">Revenue / Total Funding</div>
</div>
<div class="metric-card" data-tooltip="CAPEX total dividido entre unidades totales. Un valor <$750K demuestra una excelente eficiencia en la adquisici√≥n y preparaci√≥n de activos.">
<div class="text-sm">Capital Efficiency</div>
<div class="text-2xl font-bold" id="capital-per-unit">$0K</div>
<div class="text-xs text-blue-400">CAPEX por Unidad</div>
</div>
</div>
</div>
<!-- Fila 3: Resiliencia y Sostenibilidad (La "Base") -->
<div>
<h3 class="metric-row-title">Resiliencia y Sostenibilidad</h3>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
<div class="metric-card" data-tooltip="M√©trica de resiliencia. No solo muestra cu√°ntas unidades financiamos, sino cu√°ntas mantenemos productivas gracias a nuestro ecosistema de IA (PMA). Ajustado por NIIF 5.">
<div class="text-sm">Vagonetas Operativas (A√±o 5)</div>
<div class="text-2xl font-bold" id="vagonetas-operativas">0</div>
<div class="text-xs text-emerald-400">Ajustado por NIIF 5</div>
</div>
<div class="metric-card" data-tooltip="F√≥rmula: EBITDA / Servicio de Deuda. Un ratio >1.5x es saludable y demuestra nuestra capacidad para pagar c√≥modamente la deuda, un requisito para futuros prestamistas.">
<div class="text-sm">Debt Service Coverage</div>
<div class="text-2xl font-bold" id="dscr-final">0.0x</div>
<div class="text-xs text-sky-400">EBITDA / Servicio de Deuda</div>
</div>
<div class="metric-card" data-tooltip="Margen de Inter√©s Neto (NIM) del √∫ltimo a√±o. Mide la rentabilidad de la cartera de cr√©dito despu√©s de costos de financiamiento. Est√°ndar de la industria.">
<div class="text-sm">Net Interest Margin (NIM) Y5</div>
<div class="text-2xl font-bold" id="nim-y5">0.0%</div>
<div class="text-xs text-emerald-400">Rentabilidad de Cartera</div>
</div>
<div class="metric-card" data-tooltip="El a√±o en que los ingresos operativos superan los gastos operativos, marcando el punto en que el negocio se sostiene por s√≠ mismo sin necesidad de nuevas inyecciones de capital.">
<div class="text-sm">Autosuficiencia</div>
<div class="text-2xl font-bold" id="autosuficiency-year">A√±o 0</div>
<div class="text-xs text-blue-400">Ingresos > Gastos Operativos</div>
</div>
</div>
</div>
</div>
<!-- Tab Navigation -->
<div class="mb-6 border-b border-slate-800">
<nav class="flex flex-wrap -mb-px">
<button id="tab-control" class="tab-button active"> <i data-lucide="settings" class="w-5 h-5"></i> Control</button>
<button id="tab-financieros" class="tab-button"> <i data-lucide="wallet" class="w-5 h-5"></i> Financieros</button>
<button id="tab-niif" class="tab-button"> <i data-lucide="book" class="w-5 h-5"></i> NIIF</button>
<button id="tab-graficos" class="tab-button"> <i data-lucide="bar-chart-2" class="w-5 h-5"></i> Gr√°ficos</button>
<button id="tab-validacion" class="tab-button"> <i data-lucide="check-circle" class="w-5 h-5"></i> Validaci√≥n</button>
</nav>
</div>
<!-- Tab Content: Control -->
<div id="content-control" class="content-section active">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<!-- COLUMNA IZQUIERDA: El Modelo de Negocio (¬øQu√© y C√≥mo Vendemos?) -->
<div class="space-y-6">
<!-- Tarjeta 1: Paquete Financiado (El Producto Principal) -->
<div class="card">
<h4 class="font-semibold text-lg mb-4 text-white">üì¶ Paquete Financiado <span class="text-sm text-slate-400">(El Producto Principal)</span></h4>
<div id="paquete-financiado-controls" class="space-y-4"></div>
<div id="package-summary" class="mt-4 p-3 bg-slate-800 rounded"></div>
</div>
<!-- Tarjeta 2: Condiciones del Cr√©dito al Cliente -->
<div class="card">
<h4 class="font-semibold text-lg mb-4 text-white">üìù Condiciones del Cr√©dito al Cliente</h4>
<div id="condiciones-credito-controls" class="space-y-4"></div>
</div>
<!-- Tarjeta 3: Ingresos Operativos Adicionales -->
<div class="card">
<h4 class="font-semibold text-lg mb-4 text-white">üí∏ Ingresos Operativos Adicionales</h4>
<div id="ingresos-adicionales-controls" class="space-y-4"></div>
</div>
</div>
<!-- COLUMNA DERECHA: La Estrategia (Crecimiento y Riesgo) -->
<div class="space-y-6">
<!-- Tarjeta 4: Plan de Crecimiento y Operaciones -->
<div class="card">
<h4 class="font-semibold text-lg mb-4 text-white">üìà Plan de Crecimiento y Operaciones</h4>
<div id="plan-crecimiento-controls" class="space-y-4"></div>
</div>
<!-- Tarjeta 5: Matriz de Financiamiento -->
<div class="card">
<h4 class="font-semibold text-lg mb-4 text-white">üí∞ Matriz de Financiamiento <span class="text-sm text-slate-400">(La Historia del Capital)</span></h4>
<div id="matriz-financiamiento-controls" class="space-y-4"></div>
<div id="funding-coverage-card-container" class="mt-4"></div>
</div>
<!-- Tarjeta 6: Riesgo y Supuestos de Salida -->
<div class="card">
<h4 class="font-semibold text-lg mb-4 text-white">üõ°Ô∏è Riesgo y Supuestos de Salida</h4>
<div id="riesgo-salida-controls" class="space-y-4"></div>
</div>
</div>
</div>
<!-- RECALCULATE BUTTON -->
<div class="text-center mt-6">
<button onclick="forceCalculate()" class="mt-6 bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-3 rounded-lg font-medium transition duration-300 inline-flex items-center gap-2">
<i data-lucide="refresh-cw" class="w-5 h-5"></i> Recalcular Modelo
</button>
</div>
</div>
<!-- Tab Content: Financials -->
<div id="content-financieros" class="content-section">
<div class="space-y-6">
<div class="card">
<h3 class="text-xl font-semibold mb-4 text-white">Estado de Resultados (P&L)</h3>
<div class="overflow-x-auto">
<table class="financial-table">
<thead>
<tr>
<th>Concepto</th>
<th>A√±o 1</th>
<th>A√±o 2</th>
<th>A√±o 3</th>
<th>A√±o 4</th>
<th>A√±o 5</th>
</tr>
</thead>
<tbody id="pl-table-body"></tbody>
</table>
</div>
</div>
<div class="card">
<h3 class="text-xl font-semibold mb-4 text-white">Flujo de Efectivo</h3>
<div class="overflow-x-auto">
<table class="financial-table">
<thead>
<tr>
<th>Concepto</th>
<th>A√±o 0</th>
<th>A√±o 1</th>
<th>A√±o 2</th>
<th>A√±o 3</th>
<th>A√±o 4</th>
<th>A√±o 5</th>
</tr>
</thead>
<tbody id="cf-table-body"></tbody>
</table>
</div>
</div>
<div class="card">
<h3 class="text-xl font-semibold mb-4 text-white">Balance General</h3>
<div class="overflow-x-auto">
<table class="financial-table">
<thead>
<tr>
<th>Concepto</th>
<th>A√±o 1</th>
<th>A√±o 2</th>
<th>A√±o 3</th>
<th>A√±o 4</th>
<th>A√±o 5</th>
</tr>
</thead>
<tbody id="bs-table-body"></tbody>
</table>
</div>
<div id="balance-validation" class="mt-4 text-center font-semibold p-2 rounded-lg bg-gray-50"></div>
</div>
</div>
</div>
<!-- Tab Content: IFRS -->
<div id="content-niif" class="content-section">
<div class="space-y-6">
<div class="card niif-compliant">
<h3 class="text-xl font-semibold mb-4 text-white">NIIF 15 - Reconocimiento de Ingresos <span class="text-sm text-slate-400">(C√≥mo se reconocen los ingresos del negocio de financiamiento)</span></h3>
<div id="niif15-container">Calculando datos NIIF 15...</div>
</div>
<div class="card niif-compliant">
<h3 class="text-xl font-semibold mb-4 text-white">NIIF 9 - Provisiones Crediticias <span class="text-sm text-slate-400">(Impacto de la morosidad y las p√©rdidas esperadas)</span></h3>
<div id="niif9-container">Calculando datos NIIF 9...</div>
</div>
<div class="card niif-compliant">
<h3 class="text-xl font-semibold mb-4 text-white">NIIF 5 - Activos Mantenidos para Venta <span class="text-sm text-slate-400">(Tratamiento contable de vagonetas reposedas)</span></h3>
<div id="niif5-container">Calculando datos NIIF 5...</div>
</div>
</div>
</div>
<!-- Tab Content: Charts -->
<div id="content-graficos" class="content-section">
<div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
<!-- Row 1: Core Differentiation -->
<div class="xl:col-span-2 card">
<h4 class="text-lg font-semibold mb-3 text-white">üõ°Ô∏è Protecci√≥n Rodando‚Ñ¢ Impact</h4>
<div style="height: 320px;"><canvas id="proteccionImpactChart"></canvas></div>
</div>
<div class="card">
<h4 class="text-lg font-semibold mb-3 text-white">üìà Revenue Evolution</h4>
<div style="height: 320px;"><canvas id="revenueEvolutionChart"></canvas></div>
</div>
<!-- Row 2: Scaling & Efficiency -->
<div class="card">
<h4 class="text-lg font-semibold mb-3 text-white">üöÄ Capital Efficiency</h4>
<div style="height: 300px;"><canvas id="capitalEfficiencyChart"></canvas></div>
</div>
<div class="xl:col-span-2 card">
<h4 class="text-lg font-semibold mb-3 text-white">üí∏ Cash Flow Resilience</h4>
<div style="height: 300px;"><canvas id="cashFlowResilienceChart"></canvas></div>
</div>
<!-- Row 3: Future & Leadership -->
<div class="card">
<h4 class="font-semibold text-lg mb-3 text-white">üéÆ Gamification Impact</h4>
<div style="height: 280px;"><canvas id="gamificationChart"></canvas></div>
</div>
<div class="card">
<h4 class="text-lg font-semibold mb-3 text-white">üèÅ Path to Leadership</h4>
<div style="height: 280px;"><canvas id="leadershipChart"></canvas></div>
</div>
<div class="card">
<h4 class="text-lg font-semibold mb-3 text-white">üîç Competitive Moat</h4>
<div style="height: 280px;"><canvas id="moatChart"></canvas></div>
</div>
</div>
</div>
<!-- Tab Content: Validation -->
<div id="content-validacion" class="content-section">
<div id="validation-panel-content">
<h3 class="text-xl font-semibold mb-4 text-white">Resultados de Validaci√≥n del Modelo</h3>
<div id="validation-results-container">
<!-- Validation results will be inserted here -->
</div>
<!-- REMOVED: PDF Report Button -->
</div>
</div>
