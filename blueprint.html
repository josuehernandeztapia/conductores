<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Plan Maestro Operacional: Conductores</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* COMPREHENSIVE UX/UI OVERHAUL - CONSISTENT DESIGN SYSTEM */
        :root {
          /* CONDUCTORES BRAND PALETTE - STRICT ENFORCEMENT */
          --brand-teal: #0d9488;
          --brand-orange: #ea580c;
          --brand-sky: #0ea5e9;
          --brand-green: #10b981;
          --brand-amber: #f59e0b;
          --brand-purple: #8b5cf6;
          --brand-red: #ef4444;
          
          /* GRADIENTS - PREMIUM FEEL */
          --gradient-teal: linear-gradient(135deg, #0d9488, #14b8a6);
          --gradient-orange: linear-gradient(135deg, #ea580c, #f97316);
          --gradient-sky: linear-gradient(135deg, #0ea5e9, #38bdf8);
          --gradient-green: linear-gradient(135deg, #10b981, #34d399);
          --gradient-purple: linear-gradient(135deg, #8b5cf6, #a78bfa);
          
          /* SHADOWS - BRANDED */
          --shadow-teal: 0 8px 25px rgba(13, 148, 136, 0.25);
          --shadow-orange: 0 8px 25px rgba(234, 88, 12, 0.25);
          --shadow-sky: 0 8px 25px rgba(14, 165, 233, 0.25);
          
          /* TYPOGRAPHY - INTER FAMILY ONLY */
          --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
          --font-display: 900;
          --font-hero: 800;
          --font-section: 700;
          --font-body: 500;

          /* CONSISTENT COLOR PALETTE - Mobile-First */
          --primary-teal: #0d9488;        /* CTAs, funding, highlights */
          --secondary-sky: #0ea5e9;       /* metrics, tech elements */
          --accent-orange: #ea580c;       /* warnings, important callouts */
          --success-green: #10b981;       /* positive metrics, ROI */
          --background-white: #ffffff;    /* all cards and main content */
          --text-primary: #1e293b;        /* main text, headings */
          --text-secondary: #475569;      /* descriptions, labels - IMPROVED CONTRAST */
          --text-light: #64748b;         /* captions, metadata - IMPROVED CONTRAST */
          
          /* GRADIENTS */
          --gradient-hero: linear-gradient(135deg, #0f172a 0%, #0d9488 50%, #0f172a 100%);
          --gradient-primary: linear-gradient(135deg, #0d9488, #0ea5e9);
          --gradient-accent: linear-gradient(135deg, #ea580c, #06b6d4);
          
          /* BACKGROUNDS */
          --bg-primary: #ffffff;
          --bg-secondary: #f8fafc;
          --bg-card: #ffffff;
        }

        /* OVERRIDE ALL EXISTING FONT DECLARATIONS */
        * {
          font-family: var(--font-family) !important;
        }

        /* ACCESSIBILITY: Screen reader only content */
        .sr-only {
          position: absolute;
          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0, 0, 0, 0);
          white-space: nowrap;
          border: 0;
        }

        /* REPLACE ALL GENERIC COLORS */
        .text-green-600, .text-green-700, .text-green-800 { color: var(--brand-green) !important; }
        .text-blue-600, .text-blue-700, .text-blue-800 { color: var(--brand-sky) !important; }
        .text-orange-600, .text-orange-700, .text-orange-800 { color: var(--brand-orange) !important; }
        .text-purple-600, .text-purple-700, .text-purple-800 { color: var(--brand-purple) !important; }
        .text-teal-600, .text-teal-700, .text-teal-800 { color: var(--brand-teal) !important; }

        .bg-green-50 { background: rgba(16, 185, 129, 0.05) !important; }
        .bg-blue-50 { background: rgba(14, 165, 233, 0.05) !important; }
        .bg-orange-50 { background: rgba(234, 88, 12, 0.05) !important; }
        .bg-purple-50 { background: rgba(139, 92, 246, 0.05) !important; }
        .bg-teal-50 { background: rgba(13, 148, 136, 0.05) !important; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-size: 16px;
            line-height: 1.6;
        }

        /* PREMIUM CONTAINER SYSTEM */
        .container {
          width: 100%;
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 1rem;
        }

        @media (min-width: 640px) { .container { padding: 0 1.5rem; } }
        @media (min-width: 1024px) { .container { padding: 0 2rem; } }

        /* PREMIUM GRID SYSTEM */
        .grid-responsive {
          display: grid;
          gap: 1rem;
          grid-template-columns: 1fr;
        }

        @media (min-width: 768px) {
          .grid-responsive.md-2 { grid-template-columns: repeat(2, 1fr); }
          .grid-responsive.md-3 { grid-template-columns: repeat(3, 1fr); }
        }

        @media (min-width: 1024px) {
          .grid-responsive.lg-4 { grid-template-columns: repeat(4, 1fr); }
        }

        /* MOBILE-FIRST TYPOGRAPHY SCALE - MINIMUM 16PX BASE */
        .text-display {
          font-size: 2.5rem;
          font-weight: 900;
          line-height: 1.1;
          letter-spacing: -0.025em;
        }

        .text-hero {
          font-size: 2rem;
          font-weight: 800;
          line-height: 1.1;
        }

        .text-section {
          font-size: 1.5rem;
          font-weight: 700;
          line-height: 1.2;
        }
        
        /* Body text minimum 16px */
        .text-body {
          font-size: 16px;
          line-height: 1.6;
        }
        
        /* Captions minimum 14px */
        .text-caption {
          font-size: 14px;
          line-height: 1.4;
        }

        @media (min-width: 768px) {
          .text-display { font-size: 4rem; }
          .text-hero { font-size: 3rem; }
          .text-section { font-size: 2rem; }
        }

        @media (min-width: 1024px) {
          .text-display { font-size: 5rem; }
          .text-hero { font-size: 4rem; }
          .text-section { font-size: 2.5rem; }
        }

        /* HIGHLIGHT TEXT EFFECT - Pitchdeck signature */
        .highlight-text {
          background: var(--gradient-primary);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          font-weight: 800;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 400px;
        }

        /* MANDATORY CARD STRUCTURE - REPLACE ALL BASIC CARDS */
        .card-premium-enforced {
          background: linear-gradient(135deg, #ffffff 0%, rgba(13, 148, 136, 0.02) 100%);
          border: 1px solid rgba(148, 163, 184, 0.2);
          border-left: 6px solid var(--brand-teal);
          border-radius: 1rem;
          padding: 2rem;
          box-shadow: 0 4px 12px rgba(13, 148, 136, 0.1);
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          backdrop-filter: blur(10px);
        }

        .card-premium-enforced:hover {
          transform: translateY(-8px) scale(1.02);
          box-shadow: var(--shadow-teal);
          border-left-width: 8px;
        }

        .card-premium-enforced::before {
          content: '';
          position: absolute;
          top: 0;
          right: 0;
          width: 100px;
          height: 100px;
          background: radial-gradient(circle, rgba(13, 148, 136, 0.1), transparent);
          border-radius: 50%;
          transform: translate(50%, -50%);
        }

        /* KPI CARDS - MANDATORY STRUCTURE */
        .kpi-card-premium-mandatory {
          background: linear-gradient(135deg, #ffffff 0%, rgba(234, 88, 12, 0.05) 100%);
          border: 2px solid rgba(234, 88, 12, 0.1);
          border-radius: 1.5rem;
          padding: 2.5rem 2rem;
          text-align: center;
          position: relative;
          overflow: hidden;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .kpi-card-premium-mandatory:hover {
          transform: translateY(-12px) scale(1.05);
          box-shadow: var(--shadow-orange);
          border-color: rgba(234, 88, 12, 0.3);
        }

        .kpi-icon-container-mandatory {
          width: 4.5rem;
          height: 4.5rem;
          background: var(--gradient-orange);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 auto 1.5rem;
          box-shadow: var(--shadow-orange);
          position: relative;
        }

        .kpi-icon-container-mandatory::after {
          content: '';
          position: absolute;
          inset: -4px;
          border-radius: 50%;
          background: conic-gradient(from 0deg, var(--brand-orange), var(--brand-amber), var(--brand-orange));
          z-index: -1;
          animation: rotate-border 3s linear infinite;
        }

        @keyframes rotate-border {
          to { transform: rotate(360deg); }
        }

        .kpi-icon-mandatory {
          width: 2.5rem;
          height: 2.5rem;
          color: white;
          filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        .kpi-value-mandatory {
          font-size: 3.5rem;
          font-weight: var(--font-display);
          color: var(--brand-orange);
          margin: 1.5rem 0;
          line-height: 1;
          letter-spacing: -0.025em;
          text-shadow: 0 2px 4px rgba(234, 88, 12, 0.2);
        }

        .kpi-label-mandatory {
          font-size: 1.125rem;
          font-weight: 600;
          color: #374151;
          margin-bottom: 0.5rem;
          font-family: var(--font-family);
        }

        .kpi-status-bar-mandatory {
          width: 100%;
          height: 8px;
          background: rgba(148, 163, 184, 0.2);
          border-radius: 4px;
          overflow: hidden;
          margin-top: 1.5rem;
        }

        .status-fill-excellent {
          height: 100%;
          background: var(--gradient-green);
          border-radius: 4px;
          transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
        }

        .status-fill-excellent::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
          animation: shimmer-status 2s infinite;
        }

        @keyframes shimmer-status {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }

        /* ENHANCED ALERT CARDS - Consolidated Base */
        [class*="card-premium-alert"] {
          border-radius: 0.75rem;
          padding: 1.5rem;
          margin-bottom: 2rem;
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
          border-left: 4px solid;
        }
        
        .card-premium-alert-orange {
          background: linear-gradient(135deg, #fff7ed 0%, #fef3c7 100%);
          border-left-color: #ea580c;
        }
        
        .card-premium-alert-green {
          background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
          border-left-color: #16a34a;
        }
        
        .card-premium-alert-blue {
          background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
          border-left-color: #2563eb;
        }

        /* ICON SYSTEM ENFORCEMENT */
        .title-icon-mandatory {
          width: 1.5rem;
          height: 1.5rem;
          color: var(--brand-teal);
          margin-right: 0.75rem;
          vertical-align: middle;
        }
        .title-enhanced {
          display: flex;
          align-items: center;
          font-family: var(--font-family);
          font-weight: var(--font-section);
          color: #1e293b;
        }
        /* MVP METRIC ENHANCED */
        .mvp-metric-enhanced {
          display: flex;
          flex-direction: column;
          align-items: center;
          background: linear-gradient(135deg, #ffffff 0%, rgba(14, 165, 233, 0.05) 100%);
          border: 1px solid rgba(14, 165, 233, 0.1);
          border-radius: 1rem;
          padding: 1.5rem;
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
        }

        .mvp-metric-enhanced:hover {
          transform: translateY(-4px);
          box-shadow: var(--shadow-sky);
          border-color: rgba(14, 165, 233, 0.3);
        }

        .metric-icon-container {
          width: 3rem;
          height: 3rem;
          background: var(--gradient-sky);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 1rem;
          box-shadow: var(--shadow-sky);
        }

        .metric-icon {
          width: 1.5rem;
          height: 1.5rem;
          color: white;
        }

        .metric-value-large {
          font-size: 2.5rem;
          font-weight: var(--font-display);
          color: var(--brand-sky);
          margin-bottom: 0.5rem;
          line-height: 1;
        }

        .metric-label {
          font-size: 1rem;
          font-weight: 600;
          color: #374151;
          margin-bottom: 0.25rem;
        }

        .metric-detail {
          font-size: 0.75rem;
          color: #6b7280;
          text-align: center;
        }

        /* SAAS CATEGORY CARDS */
        .saas-category-card {
          background: linear-gradient(135deg, #ffffff 0%, rgba(13, 148, 136, 0.05) 100%);
          border: 1px solid rgba(13, 148, 136, 0.1);
          border-radius: 1rem;
          padding: 1.5rem;
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
        }

        .saas-category-card:hover {
          transform: translateY(-4px);
          box-shadow: var(--shadow-teal);
          border-color: rgba(13, 148, 136, 0.3);
        }

        .category-header {
          display: flex;
          align-items: center;
          gap: 1rem;
          margin-bottom: 1rem;
        }

        .category-icon-container {
          width: 3rem;
          height: 3rem;
          border-radius: 0.75rem;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .category-icon-container.teal-gradient {
          background: var(--gradient-teal);
        }

        .category-icon {
          width: 1.5rem;
          height: 1.5rem;
          color: white;
        }

        .category-title {
          font-size: 1.125rem;
          font-weight: 700;
          color: #0f172a;
        }

        .category-items {
          display: grid;
          gap: 0.75rem;
        }

        .saas-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.75rem;
          background: rgba(248, 250, 252, 0.8);
          border-radius: 0.5rem;
          transition: all 0.2s ease;
        }

        .saas-item:hover {
          background: rgba(13, 148, 136, 0.1);
        }

        .item-icon {
          width: 2rem;
          height: 2rem;
          background: var(--gradient-teal);
          border-radius: 0.5rem;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }
        .item-icon-sm {
          width: 1rem;
          height: 1rem;
          color: white;
        }

        .item-name {
          flex: 1;
          font-size: 0.875rem;
          font-weight: 500;
          color: #374151;
        }

        .item-cost {
          font-size: 0.875rem;
          font-weight: 700;
          color: var(--brand-teal);
        }

        /* REPLACE ALL BASIC BUTTONS */
        .btn-premium-mandatory {
          position: relative;
          display: inline-flex;
          align-items: center;
          gap: 0.75rem;
          padding: 1rem 2rem;
          background: var(--gradient-teal);
          color: white;
          border: none;
          border-radius: 0.75rem;
          font-family: var(--font-family);
          font-weight: 600;
          font-size: 0.95rem;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          overflow: hidden;
          isolation: isolate;
        }



        .btn-premium-mandatory:hover {
          transform: translateY(-2px);
          box-shadow: var(--shadow-teal);
        }

        .btn-premium-mandatory:active {
          transform: translateY(0);
        }

        .btn-icon-mandatory {
          width: 1.25rem;
          height: 1.25rem;
          transition: transform 0.3s ease;
        }

        .btn-premium-mandatory:hover .btn-icon-mandatory {
          transform: scale(1.1);
        }

        /* PHASE BUTTONS - MANDATORY STYLING */
        .phase-btn-premium-mandatory {
          position: relative;
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.75rem 1.5rem;
          background: rgba(248, 250, 252, 0.8);
          border: 2px solid rgba(148, 163, 184, 0.2);
          border-radius: 0.75rem;
          color: #64748b;
          font-family: var(--font-family);
          font-weight: 500;
          font-size: 0.875rem;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          backdrop-filter: blur(10px);
        }

        .phase-btn-premium-mandatory:hover {
          background: rgba(13, 148, 136, 0.1);
          border-color: rgba(13, 148, 136, 0.3);
          color: var(--brand-teal);
          transform: translateY(-2px);
        }

        .phase-btn-premium-mandatory.active {
          background: var(--gradient-teal);
          border-color: var(--brand-teal);
          color: white;
          box-shadow: var(--shadow-teal);
        }

        .phase-indicator-mandatory {
          width: 0.75rem;
          height: 0.75rem;
          border-radius: 50%;
          display: inline-block;
        }

        .phase-indicator-mandatory.blue { background: var(--brand-sky); }
        .phase-indicator-mandatory.green { background: var(--brand-green); }
        .phase-indicator-mandatory.purple { background: var(--brand-purple); }
        .phase-indicator-mandatory.orange { background: var(--brand-orange); }

        /* ESOP PROFILE CARDS PREMIUM */
        .esop-profile-card-premium {
          background: linear-gradient(135deg, #ffffff 0%, rgba(13, 148, 136, 0.05) 100%);
          border: 1px solid rgba(13, 148, 136, 0.1);
          border-radius: 1.5rem;
          padding: 2rem;
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
          box-shadow: 0 4px 12px rgba(13, 148, 136, 0.1);
        }

        .esop-profile-card-premium:hover {
          transform: translateY(-8px) scale(1.02);
          box-shadow: var(--shadow-teal);
          border-color: rgba(13, 148, 136, 0.3);
        }

        .profile-header {
          display: flex;
          flex-direction: column;
          align-items: center;
          margin-bottom: 1.5rem;
        }

        .profile-avatar-premium {
          position: relative;
          width: 5rem;
          height: 5rem;
          margin-bottom: 1rem;
        }

        .avatar-background {
          position: absolute;
          inset: 0;
          border-radius: 50%;
          background: var(--gradient-teal);
        }

        .avatar-background.blue-gradient {
          background: var(--gradient-sky);
        }

        .avatar-background.green-gradient {
          background: var(--gradient-green);
        }

        .avatar-background.purple-gradient {
          background: var(--gradient-purple);
        }

        .avatar-icon {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 2.5rem;
          height: 2.5rem;
          color: white;
          z-index: 2;
        }

        .avatar-ring {
          position: absolute;
          inset: -4px;
          border-radius: 50%;
          background: conic-gradient(from 0deg, var(--brand-teal), var(--brand-sky), var(--brand-teal));
          z-index: -1;
          animation: rotate-border 3s linear infinite;
        }

        .avatar-status-dot {
          position: absolute;
          bottom: 0;
          right: 0;
          width: 1rem;
          height: 1rem;
          background: var(--brand-green);
          border: 2px solid white;
          border-radius: 50%;
          z-index: 3;
        }
        .profile-badge-premium {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: linear-gradient(135deg, #f59e0b, #d97706);
          color: white;
          border-radius: 1rem;
          font-size: 0.75rem;
          font-weight: 700;
          box-shadow: 0 4px 8px rgba(245, 158, 11, 0.3);
        }

        .badge-icon {
          width: 0.875rem;
          height: 0.875rem;
        }

        .profile-content {
          text-align: center;
          margin-bottom: 1rem;
        }
        .profile-name {
          font-size: 1.25rem;
          font-weight: 800;
          color: #0f172a;
          margin-bottom: 0.25rem;
        }

        .profile-role {
          font-size: 0.875rem;
          color: var(--brand-teal);
          font-weight: 600;
        }
        .nav-link {
            transition: color 0.3s, border-color 0.3s;
        }
        .nav-link:hover, .nav-link.active {
            color: var(--accent-orange);
            border-bottom-color: var(--accent-orange);
        }
        /* CONSISTENT CARD SYSTEM - WHITE BACKGROUNDS WITH COLORED ACCENTS */
        .card-premium {
          background: var(--background-white);
          border-radius: 8px;
          padding: 24px;
          border: 1px solid #e5e7eb;
          border-left: 4px solid var(--primary-teal);
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          color: var(--text-primary);
        }

        .card-premium:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(13, 148, 136, 0.15);
        }
        
        /* CONSISTENT KPI CARDS */
        .kpi-card {
            background: var(--background-white);
            border: 1px solid #e5e7eb;
            border-left: 4px solid var(--secondary-sky);
            border-radius: 8px;
            padding: 24px;
            transition: all 0.3s ease;
            color: var(--text-primary);
        }
        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);
        }
        
        /* Mobile padding adjustments - Consolidated */
        @media (max-width: 768px) {
          .card-premium,
          .kpi-card {
            padding: 16px;
          }
          
          #hr-table { 
            font-size: 0.75rem; 
          }
          
          .chart-container { 
            height: 300px; 
          }
        }

        /* AGENT CARDS PREMIUM */
        .agent-card {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(13, 148, 136, 0.05) 100%);
            border-left: 4px solid var(--primary-teal);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 1rem;
            padding: 1.5rem;
        }
        .agent-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(13, 148, 136, 0.15);
        }

        .agent-card-premium {
          background: linear-gradient(135deg, var(--bg-card) 0%, rgba(13, 148, 136, 0.05) 100%);
          border-left: 4px solid var(--primary-teal);
        }

        .agent-card-premium:hover {
          transform: translateY(-8px) scale(1.02);
          box-shadow: 0 20px 40px rgba(13, 148, 136, 0.15);
        }

        /* KPI CARDS PREMIUM */
        .kpi-card-premium {
          text-align: center;
          background: linear-gradient(135deg, var(--bg-card) 0%, rgba(14, 165, 233, 0.05) 100%);
        }

        .kpi-value {
          font-size: 2rem;
          font-weight: 800;
          color: var(--primary-sky);
          margin: 0.5rem 0;
        }

        .kpi-label {
          font-size: 0.875rem;
          color: var(--slate-600);
          font-weight: 500;
        }
        /* Tab styling for weekly timeline */
        .tab-button {
            transition: all 0.3s;
        }
        .tab-button.active {
            background-color: var(--primary-teal);
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        /* Tooltip styles */
        [data-tooltip] {
            position: relative;
            cursor: pointer;
        }
        [data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-8px);
            background-color: #1f2937;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
            z-index: 10;
        }
        [data-tooltip]:hover::after {
            opacity: 1;
            visibility: visible;
        }


        /* AGREGAR: Loading States y Premium Animations */
        .loading-skeleton {
          background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
          background-size: 200% 100%;
          animation: loading 1.5s infinite;
        }

        @keyframes loading {
          0% { background-position: 200% 0; }
          100% { background-position: -200% 0; }
        }

        .fade-in-up {
          opacity: 0;
          transform: translateY(30px);
          transition: all 0.6s ease;
        }

        .fade-in-up.visible {
          opacity: 1;
          transform: translateY(0);
        }

        .chart-loading {
          position: relative;
        }

        .chart-loading::before {
          content: 'Cargando datos...';
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: rgba(255,255,255,0.9);
          padding: 20px;
          border-radius: 8px;
          z-index: 10;
          font-size: 14px;
          color: #374151;
        }

        /* Enhanced Hover Effects */
        .agent-card {
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .agent-card:hover {
          transform: translateY(-8px) scale(1.02);
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .kpi-card {
          transition: all 0.3s ease;
        }

        .kpi-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        /* Interactive Elements */
        .interactive-element {
          position: relative;
          overflow: hidden;
        }

        .interactive-element::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
          transition: left 0.5s;
        }

        .interactive-element:hover::before {
          left: 100%;
        }

        /* Section Highlighting */
        .section-highlight {
          background: linear-gradient(45deg, rgba(13, 148, 136, 0.1), rgba(16, 185, 129, 0.1));
          border-radius: 8px;
          animation: section-glow 2s ease-in-out;
        }

        @keyframes section-glow {
          0%, 100% { box-shadow: 0 0 0 rgba(13, 148, 136, 0.4); }
          50% { box-shadow: 0 0 20px rgba(13, 148, 136, 0.4); }
        }

        .cross-ref-highlight {
          background: rgba(245, 158, 11, 0.2);
          border-radius: 4px;
          animation: cross-ref-pulse 1.5s ease-in-out;
        }

        @keyframes cross-ref-pulse {
          0%, 100% { background: rgba(245, 158, 11, 0.2); }
          50% { background: rgba(245, 158, 11, 0.4); }
        }

        /* Button Enhancements */
        .btn-primary {
          background: var(--gradient-primary);
          color: white;
          font-weight: 600;
          transition: all 0.3s ease;
        }

        .btn-primary:hover {
          transform: translateY(-1px);
          box-shadow: 0 10px 15px -3px rgba(13, 148, 136, 0.4);
        }

        .btn-secondary {
          background: transparent;
          color: var(--primary-teal);
          border: 2px solid var(--primary-teal);
          padding: 10px 22px;
          border-radius: 8px;
          font-weight: 600;
          transition: all 0.3s ease;
          cursor: pointer;
        }

        .btn-secondary:hover {
          background: var(--primary-teal);
          color: white;
          transform: translateY(-1px);
        }

        /* Gradientes actualizados */
        .bg-gradient-to-br {
          background: var(--gradient-primary);
        }
        .bg-gradient-to-r {
          background: var(--gradient-accent);
        }

        .highlight-text {
          background: var(--gradient-primary);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Phase and Role Buttons */
        .phase-btn, .role-btn {
          padding: 8px 16px;
          border-radius: 6px;
          border: 2px solid transparent;
          background: #f8fafc;
          color: #64748b;
          font-weight: 500;
          transition: all 0.3s ease;
          cursor: pointer;
          display: inline-flex;
          align-items: center;
          gap: 8px;
        }

        .phase-btn:hover, .role-btn:hover {
          background: #e2e8f0;
          color: #475569;
          transform: translateY(-1px);
        }
        .phase-btn.active, .role-btn.active {
          background: var(--primary-teal);
          color: white;
          border-color: var(--primary-teal);
          box-shadow: 0 2px 8px rgba(13, 148, 136, 0.3);
        }

        .phase-indicator {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          display: inline-block;
        }
        /* Mobile-First Responsive Enhancements */
        @media (max-width: 768px) {
          /* Hero Section Mobile */
          #hero {
            min-height: 80vh;
            padding: 40px 16px 60px;
          }
          
          #hero h1 {
            font-size: 2.5rem;
            line-height: 1.1;
            margin-bottom: 1rem;
          }
          
          #hero p {
            font-size: 1rem;
            line-height: 1.4;
            margin-bottom: 2rem;
          }
          
          #hero .grid {
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
          }
          
          /* Navigation Mobile */
          .nav-mobile-active {
            padding-bottom: 80px; /* Space for fixed mobile nav */
          }
          
          .mobile-nav-link {
            color: #64748b;
            transition: all 0.2s ease;
          }
          
          .mobile-nav-link.active,
          .mobile-nav-link:hover {
            background-color: var(--primary-teal);
            color: white;
          }
          
          /* Cards and Components Mobile */
          .kpi-card,
          .agent-card,
          .milestone-card {
            margin-bottom: 1rem;
            padding: 1rem;
          }
          
          .agent-card h3 {
            font-size: 1rem;
          }
          
          /* Charts Mobile */
          .chart-container {
            height: 250px;
            margin: 1rem 0;
          }
          
          /* Tables Mobile */
          #hr-table {
            font-size: 0.75rem;
          }
          
          #hr-table th,
          #hr-table td {
            padding: 0.5rem 0.25rem;
          }
          
          /* Filters Mobile */
          .phase-btn,
          .role-btn {
            font-size: 0.75rem;
            padding: 0.5rem 0.75rem;
            margin: 0.25rem;
          }
          
          /* Modal Mobile */
          .fixed.inset-0 .bg-white {
            margin: 1rem;
            max-height: calc(100vh - 2rem);
          }
          
          /* Timeline Mobile */
          .timeline-item {
            padding: 0.75rem;
            margin: 0.5rem 0;
          }
          
          /* Progress Mobile */
          .milestone-card {
            padding: 1rem;
          }
          
          .milestone-card h4 {
            font-size: 0.9rem;
          }
          
          /* Scenario Calculator Mobile */
          #scenario-calculator .grid {
            grid-template-columns: 1fr;
            gap: 1rem;
          }
          
          /* Buttons Mobile */
          .btn-primary,
          .btn-secondary {
            padding: 12px 16px;
            font-size: 14px;
            width: 100%;
            margin-bottom: 0.5rem;
          }
          
          #hero .btn-primary,
          #hero .btn-secondary {
            width: auto;
            margin: 0.25rem;
          }
        }

        @media (max-width: 640px) {
          /* Extra small screens */
          .container {
            padding-left: 1rem;
            padding-right: 1rem;
          }
          
          #hero h1 {
            font-size: 2rem;
          }
          
          .text-3xl {
            font-size: 1.5rem;
          }
          
          .text-2xl {
            font-size: 1.25rem;
          }
          
          .text-xl {
            font-size: 1.125rem;
          }
          
          /* Grid layouts become single column */
          .grid-cols-2,
          .grid-cols-3,
          .grid-cols-4,
          .md\\:grid-cols-2,
          .md\\:grid-cols-3,
          .md\\:grid-cols-4,
          .lg\\:grid-cols-3,
          .lg\\:grid-cols-4 {
            grid-template-columns: 1fr !important;
          }
          
          /* Spacing adjustments */
          .mb-16 {
            margin-bottom: 2rem;
          }
          
          .mb-12 {
            margin-bottom: 1.5rem;
          }
          
          .mb-8 {
            margin-bottom: 1rem;
          }
          
          .p-6 {
            padding: 1rem;
          }
          
          .p-8 {
            padding: 1rem;
          }
        }

        /* PREMIUM ANIMATIONS & MICRO-INTERACTIONS */
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .fade-in-up {
          animation: fadeInUp 0.6s ease-out forwards;
        }

        /* STAGGER ANIMATION FOR CARD GRIDS */
        .stagger-animation > * {
          opacity: 0;
          transform: translateY(20px);
          animation: fadeInUp 0.6s ease-out forwards;
        }

        .stagger-animation > *:nth-child(1) { animation-delay: 0.1s; }
        .stagger-animation > *:nth-child(2) { animation-delay: 0.2s; }
        .stagger-animation > *:nth-child(3) { animation-delay: 0.3s; }
        .stagger-animation > *:nth-child(4) { animation-delay: 0.4s; }
        .stagger-animation > *:nth-child(5) { animation-delay: 0.5s; }
        .stagger-animation > *:nth-child(6) { animation-delay: 0.6s; }

        /* INTERACTIVE ELEMENTS */
        .interactive-element {
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          cursor: pointer;
        }

        .interactive-element:hover {
          transform: translateY(-2px);
        }

        .interactive-element:active {
          transform: translateY(0);
        }

        /* HERO PREMIUM BACKGROUND */
        .hero-premium {
          min-height: 100vh;
          position: relative;
          display: flex;
          align-items: center;
          overflow: hidden;
          background: var(--bg-dark);
        }

        .hero-bg {
          position: absolute;
          inset: 0;
          z-index: 1;
        }

        .gradient-overlay {
          position: absolute;
          inset: 0;
          background: var(--gradient-hero);
          opacity: 0.9;
        }

        .pattern-overlay {
          position: absolute;
          inset: 0;
          opacity: 0.1;
          background-image: radial-gradient(circle at 1px 1px, white 1px, transparent 0);
          background-size: 20px 20px;
        }

        .hero-content {
          position: relative;
          z-index: 10;
          text-align: center;
          color: white;
          max-width: 1200px;
          margin: 0 auto;
          padding: 2rem 1rem;
        }

        .hero-badge {
          display: inline-block;
          padding: 0.5rem 1rem;
          background: rgba(234, 88, 12, 0.2);
          border: 1px solid var(--accent-orange);
          border-radius: 2rem;
          font-size: 0.875rem;
          font-weight: 600;
          letter-spacing: 0.05em;
          margin-bottom: 1.5rem;
          backdrop-filter: blur(10px);
        }

        .hero-title {
          font-size: 2.5rem;
          font-weight: 900;
          line-height: 1.1;
          margin-bottom: 1.5rem;
          letter-spacing: -0.025em;
        }

        @media (min-width: 768px) {
          .hero-title { font-size: 4rem; }
        }

        .hero-subtitle {
          font-size: 1.125rem;
          line-height: 1.5;
          margin-bottom: 2rem;
          opacity: 0.9;
          max-width: 800px;
          margin-left: auto;
          margin-right: auto;
        }

        .credibility-grid {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 1rem;
          margin-bottom: 2rem;
        }

        .cred-item {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 1rem;
          font-size: 0.875rem;
          backdrop-filter: blur(10px);
        }

        .hero-ctas {
          display: flex;
          flex-direction: column;
          gap: 1rem;
          align-items: center;
        }

        @media (min-width: 640px) {
          .hero-ctas {
            flex-direction: row;
            justify-content: center;
          }
        }
        /* PREMIUM TOUCH-FRIENDLY IMPROVEMENTS - ENHANCED */
        @media (hover: none) and (pointer: coarse) {
          .btn-premium,
          .card-premium,
          .mobile-nav-item,
          .interactive-element,
          .agent-card,
          .kpi-card,
          .milestone-card,
          .phase-btn,
          .role-btn,
          input[type="range"],
          .btn-primary-hero-enhanced,
          .btn-secondary-hero-enhanced,
          .kpi-card-premium-mandatory,
          .phase-btn-premium-mandatory {
            min-height: 44px;
            min-width: 44px;
          }
          
          /* Enhanced slider for mobile */
          .slider-premium {
            height: 12px;
          }
          
          .slider-premium::-webkit-slider-thumb {
            width: 28px;
            height: 28px;
          }
          
          /* Remove hover effects on touch devices */
          .card-premium:hover,
          .btn-premium:hover,
          .interactive-element:hover,
          .solution-card-enhanced:hover,
          .market-size-card:hover,
          .esop-profile-card-premium-enhanced:hover {
            transform: none;
          }
          
          /* Add touch feedback */
          .btn-premium:active,
          .card-premium:active,
          .interactive-element:active,
          .btn-primary-hero-enhanced:active,
          .btn-secondary-hero-enhanced:active {
            transform: scale(0.98);
            transition: transform 0.1s;
          }
        }
        /* PREMIUM MOBILE OPTIMIZATIONS - COMPREHENSIVE */
        @media (max-width: 768px) {
          /* Ensure mobile nav space */
          body {
            padding-bottom: 80px;
          }
          
          /* Hero section mobile - Enhanced */
          .hero-premium-enhanced {
            min-height: 100vh;
            padding-top: 2rem;
          }
          
          .hero-title-enhanced {
            font-size: 2.5rem !important;
            line-height: 1.1;
          }
          
          .hero-subtitle-enhanced {
            font-size: 1.1rem !important;
            line-height: 1.5;
          }
          
          .credibility-grid-enhanced {
            flex-direction: column;
            gap: 0.75rem;
          }
          
          .cred-item-premium {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
          }
          
          /* Mobile button adjustments - Enhanced */
          .btn-primary-hero-enhanced,
          .btn-secondary-hero-enhanced {
            width: 100%;
            margin-bottom: 0.75rem;
            padding: 1rem;
            font-size: 0.95rem;
          }
          
          .hero-ctas-enhanced {
            flex-direction: column !important;
            width: 100%;
          }
          
          /* Card optimization - Enhanced */
          .card-premium,
          .kpi-card,
          .agent-card,
          .kpi-card-premium-mandatory {
            margin-bottom: 1rem;
            padding: 1.25rem;
          }
          
          /* Chart containers - Mobile optimized */
          .chart-container {
            height: 250px !important;
            margin: 1rem 0;
          }
          
          .chart-wrapper {
            height: 300px;
          }
          
          .roi-chart-container {
            height: 300px;
          }
          
          /* Grid mobile override - Comprehensive */
          .grid-responsive,
          .md\\:grid-cols-2,
          .md\\:grid-cols-3,
          .md\\:grid-cols-4,
          .lg\\:grid-cols-3,
          .lg\\:grid-cols-4,
          .tam-sam-som-container-premium,
          .solution-overview-premium,
          .investment-content-grid,
          .roi-kpis-grid {
            grid-template-columns: 1fr !important;
            gap: 1rem;
          }
          
          /* Modal mobile */
          .fixed.inset-0 .bg-white {
            margin: 0.5rem;
            max-height: calc(100vh - 1rem);
            border-radius: 0.75rem;
          }
          
          /* Table mobile */
          #hr-table {
            font-size: 0.75rem;
          }
          
          #hr-table th,
          #hr-table td {
            padding: 0.5rem 0.25rem;
          }
          
          /* Funding section mobile */
          .funding-main-content {
            grid-template-columns: 1fr !important;
            gap: 2rem;
          }
          
          .funding-amount-container {
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
          }
          
          .funding-number {
            font-size: 3.5rem;
          }
          
          .breakdown-item {
            padding: 1rem;
          }
          
          /* Market size cards mobile */
          .market-value {
            font-size: 2rem;
          }
          
          /* Solution cards mobile */
          .solution-card-enhanced {
            padding: 2rem;
          }
          
          /* ESOP cards mobile */
          .esop-profile-card-premium-enhanced {
            padding: 2rem;
          }
          
          .profile-avatar-mega {
            width: 5rem;
            height: 5rem;
          }
          
          .avatar-icon-enhanced {
            width: 2.5rem;
            height: 2.5rem;
          }
          
          /* Navigation mobile specific */
          .mobile-nav-premium {
            padding: 0.75rem 0.5rem;
          }
          
          .mobile-nav-item {
            padding: 0.5rem 0.25rem;
            min-height: 48px;
            font-size: 0.75rem;
          }
          
          .mobile-nav-item i {
            width: 1.25rem;
            height: 1.25rem;
          }
          
          /* ROI analysis mobile */
          .roi-header-section {
            flex-direction: column !important;
            gap: 1rem;
          }
          
          /* Executive view mobile */
          .executive-view-content .grid {
            grid-template-columns: 1fr !important;
            gap: 1rem;
          }
          
          /* Scenario calculator mobile */
          #scenario-calculator .grid {
            grid-template-columns: 1fr !important;
            gap: 1rem;
          }
          
          /* Financial plan mobile */
          .financial-breakdown-container .grid {
            grid-template-columns: 1fr !important;
          }
          
          /* Compliance section mobile */
          #compliance-container {
            grid-template-columns: 1fr !important;
            gap: 1rem;
          }
          
          /* Mobile typography - Enhanced */
          .text-section {
            font-size: 1.5rem !important;
          }
          
          .text-hero {
            font-size: 2rem !important;
          }
          
          .funding-title-premium {
            font-size: 2rem !important;
          }
          
          .solution-title {
            font-size: 1.25rem !important;
          }
        }

        /* Extra small screens - Comprehensive */
        @media (max-width: 640px) {
          .container {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
          }
          
          .text-3xl { font-size: 1.5rem; }
          .text-2xl { font-size: 1.25rem; }
          .text-xl { font-size: 1.125rem; }
          
          .mb-16 { margin-bottom: 2rem; }
          .mb-12 { margin-bottom: 1.5rem; }
          .mb-8 { margin-bottom: 1rem; }
          .p-6 { padding: 1rem; }
          .p-8 { padding: 1rem; }
          
          /* Hero adjustments for very small screens */
          .hero-title-enhanced {
            font-size: 2rem !important;
          }
          
          .hero-subtitle-enhanced {
            font-size: 1rem !important;
          }
          
          .hero-badge-enhanced {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
          }
          
          /* Button adjustments */
          .btn-primary-hero-enhanced,
          .btn-secondary-hero-enhanced {
            padding: 0.875rem 1.5rem;
            font-size: 0.875rem;
            min-width: auto;
          }
          
          /* Card adjustments */
          .card-premium,
          .kpi-card,
          .agent-card {
            padding: 1rem;
          }
          
          /* KPI values smaller */
          .kpi-value-mandatory {
            font-size: 2.5rem;
          }
          
          .metric-value-large {
            font-size: 2rem;
          }
          
          /* Funding section very small */
          .funding-card-premium-enhanced {
            padding: 2rem 1.5rem;
          }
          
          .funding-number {
            font-size: 3rem;
          }
          
          /* Solution icons smaller */
          .solution-icon-mega {
            width: 4rem;
            height: 4rem;
          }
          
          .solution-icon {
            width: 2rem;
            height: 2rem;
          }
        }

        /* Animation keyframes */
        @keyframes bounce {
          0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
          40%, 43% { transform: translate3d(0,-30px,0); }
          70% { transform: translate3d(0,-15px,0); }
          90% { transform: translate3d(0,-4px,0); }
        }

        @keyframes pulse {
          0%, 100% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.05); opacity: 0.8; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
          20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        /* Scroll Progress Indicator */
        .scroll-progress {
          position: fixed;
          top: 0;
          left: 0;
          width: 0%;
          height: 3px;
          background: var(--gradient-primary);
          z-index: 1000;
          transition: width 0.1s ease;
        }

        /* PREMIUM PROGRESS COMPONENTS */
        .progress-premium {
          width: 100%;
          height: 0.75rem;
          background: rgba(148, 163, 184, 0.2);
          border-radius: 0.375rem;
          overflow: hidden;
          position: relative;
        }

        .progress-fill {
          height: 100%;
          background: var(--gradient-primary);
          border-radius: 0.375rem;
          transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
        }

        .progress-fill::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
          animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }

        /* MILESTONE CARDS PREMIUM */
        .milestone-card {
          background: var(--bg-card);
          border-radius: 1rem;
          padding: 1.5rem;
          border-left: 4px solid var(--primary-teal);
          transition: all 0.3s ease;
          position: relative;
        }

        .milestone-card.completed {
          border-left-color: var(--success);
          background: linear-gradient(135deg, var(--bg-card) 0%, rgba(16, 185, 129, 0.05) 100%);
        }

        .milestone-card.in-progress {
          border-left-color: var(--accent-orange);
          background: linear-gradient(135deg, var(--bg-card) 0%, rgba(234, 88, 12, 0.05) 100%);
        }

        .milestone-status {
          position: absolute;
          top: 1rem;
          right: 1rem;
          font-size: 1.5rem;
        }

        .milestone-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .celebration-pulse {
          animation: celebration-pulse 1s ease-in-out infinite;
        }

        @keyframes celebration-pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }

        @keyframes confetti-fall {
          0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
          100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        /* Role highlighting CSS */
        .role-highlight-element {
          box-shadow: 0 0 0 3px rgba(234, 88, 12, 0.3) !important;
          border-radius: 8px;
          transition: box-shadow 0.3s ease;
        }

        .role-hint {
          animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
          from { transform: translateX(100%); }
          to { transform: translateX(0); }
        }

        /* AGREGAR: Cross-Reference Highlighting Styles */
        .cross-ref-link {
          transition: all 0.2s ease;
          font-size: 0.75rem;
          text-decoration: underline;
          cursor: pointer;
          margin-left: 8px;
        }

        .cross-ref-link:hover {
          background-color: rgba(13, 148, 136, 0.1);
          padding: 2px 4px;
          border-radius: 3px;
        }

        .section-highlight {
          background: linear-gradient(45deg, rgba(13, 148, 136, 0.1), rgba(16, 185, 129, 0.1));
          border-radius: 8px;
          animation: section-glow 2s ease-in-out;
        }

        @keyframes section-glow {
          0%, 100% { box-shadow: 0 0 0 rgba(13, 148, 136, 0.4); }
          50% { box-shadow: 0 0 20px rgba(13, 148, 136, 0.4); }
        }

        .cross-ref-highlight {
          background: rgba(245, 158, 11, 0.2);
          border-radius: 4px;
          animation: cross-ref-pulse 1.5s ease-in-out;
        }

        @keyframes cross-ref-pulse {
          0%, 100% { background: rgba(245, 158, 11, 0.2); }
          50% { background: rgba(245, 158, 11, 0.4); }
        }

        /* Validation Badge Styles */
        #validation-badge {
          transform: translateY(100px);
          transition: transform 0.3s ease-out;
        }

        #validation-badge:hover {
          transform: translateY(0) scale(1.05);
        }

        /* Modal Enhancement */
        #validation-modal {
          backdrop-filter: blur(4px);
        }

        #validation-modal .bg-white {
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        /* Test Results Styling */
        .test-results-modal {
          animation: slideInLeft 0.3s ease-out;
        }

        @keyframes slideInLeft {
          from { transform: translateX(-100%); }
          to { transform: translateX(0); }
        }

        /* Enhanced Tooltips for Cross-References */
        .cross-ref-link[title] {
          position: relative;
        }

        .cross-ref-link[title]:hover::after {
          content: attr(title);
          position: absolute;
          bottom: 100%;
          left: 50%;
          transform: translateX(-50%);
          background: rgba(0, 0, 0, 0.9);
          color: white;
          padding: 6px 12px;
          border-radius: 6px;
          font-size: 12px;
          white-space: nowrap;
          z-index: 1000;
          opacity: 1;
          animation: tooltipFadeIn 0.2s ease-out;
        }
        @keyframes tooltipFadeIn {
          from { opacity: 0; transform: translateX(-50%) translateY(4px); }
          to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        /* === INICIO DE NUEVO CDIGO CSS ESTANDARIZADO === */

        /* Estilo Base para Todas las Tarjetas Informativas */
        .card-standard {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid #e2e8f0;
            border-left-width: 4px; /* Grosor del acento */
            border-radius: 0.75rem; /* 12px */
            padding: 1.5rem; /* 24px */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease-in-out;
        }

        .card-standard:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -4px rgba(0, 0, 0, 0.07);
        }

        /* Modificadores de Color de Acento */
        .border-accent-teal { border-left-color: var(--brand-teal); }
        .border-accent-orange { border-left-color: var(--brand-orange); }
        .border-accent-sky { border-left-color: var(--brand-sky); }
        .border-accent-purple { border-left-color: var(--brand-purple); }
        .border-accent-green { border-left-color: var(--brand-green); }

        /* === FIN DE NUEVO CDIGO CSS ESTANDARIZADO === */

        /* MOBILE-FIRST NAVIGATION SYSTEM */
        .mobile-nav-premium {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: rgba(255, 255, 255, 0.98);
          backdrop-filter: blur(20px);
          border-top: 1px solid rgba(148, 163, 184, 0.2);
          z-index: 1000;
          padding: 0.5rem;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .mobile-nav-grid {
          display: grid;
          grid-template-columns: repeat(7, 1fr);
          gap: 0.25rem;
          max-width: 700px;
          margin: 0 auto;
        }

        .mobile-nav-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 0.75rem 0.5rem;
          border-radius: 0.75rem;
          transition: all 0.3s ease;
          text-decoration: none;
          color: var(--text-secondary);
          font-weight: 500;
          min-height: 60px;
          min-width: 44px;
        }

        .mobile-nav-item:hover,
        .mobile-nav-item.active {
          background: var(--primary-teal);
          color: white;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(13, 148, 136, 0.3);
        }
        .mobile-nav-item i {
          margin-bottom: 0.25rem;
        }
        
        /* Add padding to body for mobile nav */
        @media (max-width: 768px) {
          body {
            padding-bottom: 80px;
          }
        }

        /* DESKTOP NAVIGATION PREMIUM */
        .desktop-nav-premium {
          backdrop-filter: blur(20px);
          background: rgba(255, 255, 255, 0.95);
          border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }

        .nav-link-premium {
          position: relative;
          padding: 0.75rem 1rem;
          border-radius: 0.5rem;
          transition: all 0.3s ease;
          font-weight: 500;
          color: #374151;
        }

        .nav-link-premium::after {
          content: '';
          position: absolute;
          bottom: 0;
          left: 50%;
          width: 0;
          height: 2px;
          background: var(--gradient-primary);
          transition: all 0.3s ease;
          transform: translateX(-50%);
        }

        .nav-link-premium:hover,
        .nav-link-premium.active {
          color: var(--primary-teal);
          background: rgba(13, 148, 136, 0.05);
        }

        .nav-link-premium.active::after {
          width: 80%;
        }

        /* PREMIUM BUTTON SYSTEM - Consolidated */
        .btn-premium,
        .btn-premium-mandatory {
          position: relative;
          overflow: hidden;
          isolation: isolate;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-premium::before,
        .btn-premium-mandatory::before {
          content: '';
          position: absolute;
          inset: 0;
          background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
          transform: translateX(-100%);
          transition: transform 0.6s;
          z-index: -1;
        }

        .btn-premium:hover::before,
        .btn-premium-mandatory:hover::before {
          transform: translateX(100%);
        }

        .btn-primary-hero, .btn-secondary-hero {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 1rem 2rem;
          border-radius: 0.75rem;
          font-weight: 600;
          transition: all 0.3s ease;
          text-decoration: none;
          min-width: 200px;
          justify-content: center;
        }

        .btn-primary-hero {
          background: var(--gradient-accent);
          color: white;
          border: none;
        }

        .btn-primary-hero:hover {
          transform: translateY(-2px);
          box-shadow: 0 10px 25px rgba(234, 88, 12, 0.4);
        }
        .btn-secondary-hero {
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border: 2px solid rgba(255, 255, 255, 0.3);
          backdrop-filter: blur(10px);
        }

        .btn-secondary-hero:hover {
          background: rgba(255, 255, 255, 0.2);
          border-color: rgba(255, 255, 255, 0.5);
        }

        /* ENHANCED: Mobile-First Responsive Enhancements for V6 */
        @media (max-width: 768px) {
          /* Hero Section Mobile */
          #hero-team {
            min-height: 80vh;
            padding: 40px 16px 60px;
          }
          
          #hero-team h1 {
            font-size: 2.5rem !important;
            line-height: 1.1;
            margin-bottom: 1rem;
          }
          
          #hero-team h2 {
            font-size: 2rem !important;
            line-height: 1.1;
            margin-bottom: 1rem;
          }
          
          #hero-team p {
            font-size: 1rem !important;
            line-height: 1.4;
            margin-bottom: 2rem;
          }
          
          #hero-team .flex {
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 2rem;
          }
          
          /* Video Section Mobile */
          #video-cierre .relative[style*="padding-bottom"] {
            padding-bottom: 75% !important; /* More square on mobile */
          }
          
          #video-cierre .grid {
            grid-template-columns: 1fr !important;
            gap: 1rem;
          }
          
          #video-cierre h2 {
            font-size: 2rem !important;
            line-height: 1.1;
          }
          
          #video-cierre h3 {
            font-size: 1.5rem !important;
            line-height: 1.2;
          }
          
          #video-cierre .p-12 {
            padding: 2rem !important;
          }
          
          #video-cierre .p-8 {
            padding: 1rem !important;
          }
          
          /* Team Advantage Mobile */
          #team-advantage .grid {
            grid-template-columns: 1fr !important;
            gap: 1rem;
          }
          
          #team-advantage h2 {
            font-size: 2rem !important;
            line-height: 1.2;
          }
          
          #team-advantage .p-12 {
            padding: 2rem !important;
          }
          
          /* Mobile video container */
          .video-container-mobile {
            margin: 0 -1rem;
            border-radius: 0;
          }
          
          /* Mobile CTAs */
          .btn-primary-enhanced,
          .btn-secondary-enhanced {
            width: 100%;
            margin-bottom: 0.75rem;
            padding: 1rem;
            font-size: 0.9rem;
          }
          
          /* Mobile grid adjustments */
          .grid-mobile-stack > * {
            grid-column: 1 / -1;
          }
        }

        /* Enhanced tablet responsiveness */
        @media (min-width: 769px) and (max-width: 1024px) {
          #hero-team h1 {
            font-size: 4rem;
          }
          
          #video-cierre h2 {
            font-size: 3rem;
          }
          
          #team-advantage h2 {
            font-size: 2.5rem;
          }
        }

        /* High-resolution displays */
        @media (min-width: 1921px) {
          .container {
            max-width: 1800px;
          }
          
          #hero-team h1 {
            font-size: 7rem;
          }
          
          #video-cierre h2 {
            font-size: 4rem;
          }
        }

        /* PREMIUM HERO SECTION ENHANCED STYLES */
        .hero-premium-enhanced {
          min-height: 100vh;
          position: relative;
          display: flex;
          align-items: center;
          overflow: hidden;
          background: linear-gradient(135deg, #0f172a 0%, #0d9488 50%, #0f172a 100%);
        }

        .hero-bg-advanced {
          position: absolute;
          inset: 0;
          z-index: 1;
        }

        .gradient-overlay-primary {
          position: absolute;
          inset: 0;
          background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(13, 148, 136, 0.8) 50%, rgba(15, 23, 42, 0.9) 100%);
          opacity: 0.95;
        }

        .pattern-overlay-animated {
          position: absolute;
          inset: 0;
          opacity: 0.1;
          background-image: radial-gradient(circle at 1px 1px, white 1px, transparent 0);
          background-size: 20px 20px;
          animation: pattern-drift 20s linear infinite;
        }

        @keyframes pattern-drift {
          0% { transform: translate(0, 0); }
          100% { transform: translate(20px, 20px); }
        }

        .floating-elements {
          position: absolute;
          inset: 0;
          pointer-events: none;
        }

        .float-element {
          position: absolute;
          border-radius: 50%;
          background: linear-gradient(45deg, rgba(234, 88, 12, 0.3), rgba(13, 148, 136, 0.3));
          filter: blur(40px);
          animation: float-animation 6s ease-in-out infinite;
        }

        .float-1 {
          width: 200px;
          height: 200px;
          top: 20%;
          left: 10%;
          animation-delay: 0s;
        }

        .float-2 {
          width: 150px;
          height: 150px;
          top: 60%;
          right: 15%;
          animation-delay: 2s;
        }

        .float-3 {
          width: 100px;
          height: 100px;
          bottom: 30%;
          left: 70%;
          animation-delay: 4s;
        }

        @keyframes float-animation {
          0%, 100% { transform: translateY(0px) scale(1); opacity: 0.6; }
          50% { transform: translateY(-20px) scale(1.1); opacity: 0.8; }
        }

        .hero-content-premium {
          position: relative;
          z-index: 10;
          text-align: center;
          color: white;
          max-width: 1200px;
          margin: 0 auto;
          padding: 2rem 1rem;
        }

        .hero-badge-enhanced {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.75rem 1.5rem;
          background: rgba(234, 88, 12, 0.2);
          border: 1px solid var(--accent-orange);
          border-radius: 2rem;
          font-size: 0.875rem;
          font-weight: 600;
          letter-spacing: 0.05em;
          margin-bottom: 2rem;
          backdrop-filter: blur(10px);
          box-shadow: 0 4px 12px rgba(234, 88, 12, 0.3);
        }

        .hero-title-enhanced {
          font-size: 3rem;
          font-weight: 900;
          line-height: 1.1;
          margin-bottom: 1.5rem;
          letter-spacing: -0.025em;
        }

        @media (min-width: 768px) {
          .hero-title-enhanced { font-size: 4.5rem; }
        }
        .highlight-text-premium {
          background: linear-gradient(135deg, #ea580c, #dc2626);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          font-weight: 900;
          text-shadow: 0 0 30px rgba(234, 88, 12, 0.5);
        }

        .text-gradient-primary {
          background: linear-gradient(135deg, #0d9488, #0ea5e9);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          font-weight: 800;
        }

        .hero-subtitle-enhanced {
          font-size: 1.25rem;
          line-height: 1.6;
          margin-bottom: 2rem;
          opacity: 0.95;
          max-width: 900px;
          margin-left: auto;
          margin-right: auto;
        }

        .text-accent-glow {
          color: #ea580c;
          text-shadow: 0 0 20px rgba(234, 88, 12, 0.6);
        }

        .credibility-grid-enhanced {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 1rem;
          margin-bottom: 3rem;
        }

        .cred-item-premium {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.75rem 1.5rem;
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(255, 255, 255, 0.2);
          border-radius: 1.5rem;
          font-size: 0.9rem;
          font-weight: 600;
          backdrop-filter: blur(15px);
          transition: all 0.3s ease;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .cred-item-premium:hover {
          background: rgba(255, 255, 255, 0.15);
          border-color: rgba(255, 255, 255, 0.3);
          transform: translateY(-2px);
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .cred-icon {
          width: 1.25rem;
          height: 1.25rem;
          color: #0ea5e9;
        }

        .hero-ctas-enhanced {
          display: flex;
          flex-direction: column;
          gap: 1rem;
          align-items: center;
        }

        @media (min-width: 640px) {
          .hero-ctas-enhanced {
            flex-direction: row;
            justify-content: center;
          }
        }
        .btn-primary-hero-enhanced, .btn-secondary-hero-enhanced {
          position: relative;
          display: inline-flex;
          align-items: center;
          gap: 0.75rem;
          padding: 1.25rem 2.5rem;
          border-radius: 1rem;
          font-weight: 700;
          font-size: 1rem;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          text-decoration: none;
          min-width: 220px;
          justify-content: center;
          overflow: hidden;
          border: none;
          cursor: pointer;
        }
        .btn-primary-hero-enhanced {
          background: linear-gradient(135deg, #ea580c, #dc2626);
          color: white;
          box-shadow: 0 4px 15px rgba(234, 88, 12, 0.4);
        }

        .btn-primary-hero-enhanced:hover {
          transform: translateY(-3px);
          box-shadow: 0 12px 30px rgba(234, 88, 12, 0.6);
        }

        .btn-secondary-hero-enhanced {
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border: 2px solid rgba(255, 255, 255, 0.3);
          backdrop-filter: blur(15px);
        }

        .btn-secondary-hero-enhanced:hover {
          background: rgba(255, 255, 255, 0.2);
          border-color: rgba(255, 255, 255, 0.5);
          transform: translateY(-3px);
          box-shadow: 0 12px 30px rgba(255, 255, 255, 0.2);
        }

        .btn-icon {
          width: 1.25rem;
          height: 1.25rem;
          transition: transform 0.3s ease;
        }

        .btn-primary-hero-enhanced:hover .btn-icon,
        .btn-secondary-hero-enhanced:hover .btn-icon {
          transform: scale(1.1);
        }

        .btn-glow {
          position: absolute;
          inset: 0;
          background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
          transform: translateX(-100%);
          transition: transform 0.6s;
        }

        .btn-primary-hero-enhanced:hover .btn-glow,
        .btn-secondary-hero-enhanced:hover .btn-glow {
          transform: translateX(100%);
        }

        /* PREMIUM FUNDING SECTION STYLES */
        .bg-gradient-premium-funding {
          background: linear-gradient(135deg, #f0fdfa 0%, #e6fffa 50%, #f0f9ff 100%);
        }

        .funding-card-premium-enhanced {
          background: white;
          border-radius: 2rem;
          padding: 3rem;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
          border: 1px solid rgba(13, 148, 136, 0.1);
          position: relative;
          overflow: hidden;
        }

        .funding-card-premium-enhanced::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 6px;
          background: linear-gradient(90deg, #ea580c, #0d9488, #0ea5e9);
        }

        .funding-header-section {
          text-align: center;
          margin-bottom: 3rem;
        }

        .funding-badge-premium {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.75rem 1.5rem;
          background: linear-gradient(135deg, #ea580c, #dc2626);
          color: white;
          border-radius: 2rem;
          font-size: 0.875rem;
          font-weight: 700;
          letter-spacing: 0.05em;
          margin-bottom: 1rem;
          box-shadow: 0 4px 12px rgba(234, 88, 12, 0.3);
        }

        .funding-title-premium {
          font-size: 2.5rem;
          font-weight: 900;
          color: #0f172a;
          margin-bottom: 0.5rem;
          background: linear-gradient(135deg, #0d9488, #0ea5e9);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .funding-main-content {
          display: grid;
          grid-template-columns: 1fr;
          gap: 3rem;
          margin-bottom: 3rem;
        }

        @media (min-width: 768px) {
          .funding-main-content {
            grid-template-columns: 1fr 1fr;
            align-items: center;
          }
        }

        .funding-ask-section {
          text-align: center;
        }

        .funding-amount-container {
          display: flex;
          align-items: baseline;
          justify-content: center;
          gap: 0.5rem;
          margin-bottom: 1.5rem;
        }

        .funding-currency {
          font-size: 2rem;
          font-weight: 700;
          color: #0d9488;
        }

        .funding-number {
          font-size: 5rem;
          font-weight: 900;
          color: #0f172a;
          line-height: 1;
        }

        .funding-unit {
          font-size: 1.5rem;
          font-weight: 600;
          color: #64748b;
        }

        .funding-timeline-premium {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 0.75rem;
          font-size: 1.125rem;
          color: #475569;
          margin-bottom: 1.5rem;
          padding: 1rem 2rem;
          background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
          border-radius: 1rem;
          border: 1px solid #cbd5e1;
        }

        .timeline-icon {
          width: 1.25rem;
          height: 1.25rem;
          color: #0d9488;
        }

        .funding-metrics-quick {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 1rem;
          font-size: 0.875rem;
        }

        .metric-item {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .metric-label {
          color: #64748b;
          font-weight: 500;
        }

        .metric-value {
          font-weight: 700;
          color: #0f172a;
        }

        .metric-value.highlight {
          color: #ea580c;
          font-size: 1.125rem;
        }

        .metric-separator {
          width: 1px;
          height: 1rem;
          background: #cbd5e1;
        }

        .funding-breakdown-visual {
          display: grid;
          gap: 1.5rem;
        }

        .breakdown-item {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 1.5rem;
          background: linear-gradient(135deg, #f8fafc, #f1f5f9);
          border-radius: 1rem;
          border: 1px solid #e2e8f0;
          transition: all 0.3s ease;
        }

        .breakdown-item:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
          border-color: #cbd5e1;
        }

        .breakdown-icon-container {
          width: 3rem;
          height: 3rem;
          border-radius: 1rem;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .breakdown-icon-container.orange {
          background: linear-gradient(135deg, #fed7aa, #fdba74);
        }

        .breakdown-icon-container.blue {
          background: linear-gradient(135deg, #bae6fd, #7dd3fc);
        }

        .breakdown-icon-container.green {
          background: linear-gradient(135deg, #bbf7d0, #86efac);
        }
        .breakdown-icon {
          width: 1.5rem;
          height: 1.5rem;
          color: white;
        }

        .breakdown-content {
          flex: 1;
        }

        .breakdown-value {
          font-size: 1.5rem;
          font-weight: 800;
          color: #0f172a;
          margin-bottom: 0.25rem;
        }

        .breakdown-label {
          font-size: 1rem;
          font-weight: 600;
          color: #374151;
          margin-bottom: 0.25rem;
        }

        .breakdown-detail {
          font-size: 0.875rem;
          color: #6b7280;
        }

        .funding-value-props {
          display: grid;
          grid-template-columns: 1fr;
          gap: 1.5rem;
          padding-top: 2rem;
          border-top: 1px solid #e5e7eb;
        }

        @media (min-width: 768px) {
          .funding-value-props {
            grid-template-columns: repeat(3, 1fr);
          }
        }

        .value-prop-item {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 1.5rem;
          background: linear-gradient(135deg, #fafafa, #f4f4f5);
          border-radius: 1rem;
          transition: all 0.3s ease;
        }

        .value-prop-item:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        .value-prop-icon-container {
          width: 3rem;
          height: 3rem;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .value-prop-icon-container.teal {
          background: linear-gradient(135deg, #0d9488, #14b8a6);
        }

        .value-prop-icon-container.purple {
          background: linear-gradient(135deg, #8b5cf6, #a855f7);
        }

        .value-prop-icon-container.emerald {
          background: linear-gradient(135deg, #10b981, #059669);
        }
        .value-prop-icon {
          width: 1.5rem;
          height: 1.5rem;
          color: white;
        }

        .value-prop-content {
          flex: 1;
        }

        .value-prop-title {
          font-size: 1rem;
          font-weight: 700;
          color: #0f172a;
          margin-bottom: 0.25rem;
        }

        .value-prop-subtitle {
          font-size: 0.875rem;
          color: #6b7280;
        }

        /* PREMIUM TAM/SAM/SOM CARDS STYLES */
        .tam-sam-som-container-premium {
          display: grid;
          grid-template-columns: 1fr;
          gap: 2rem;
          margin-bottom: 4rem;
        }

        @media (min-width: 768px) {
          .tam-sam-som-container-premium {
            grid-template-columns: repeat(3, 1fr);
          }
        }

        .market-size-card {
          background: white;
          border-radius: 1.5rem;
          padding: 2rem;
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
          border: 1px solid #e5e7eb;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          overflow: hidden;
        }

        .market-size-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 4px;
        }

        .tam-card::before {
          background: linear-gradient(90deg, #ea580c, #dc2626);
        }

        .sam-card::before {
          background: linear-gradient(90deg, #0d9488, #14b8a6);
        }

        .som-card::before {
          background: linear-gradient(90deg, #10b981, #059669);
        }

        .market-size-card:hover {
          transform: translateY(-8px);
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .market-card-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1.5rem;
        }

        .market-icon-container {
          width: 3rem;
          height: 3rem;
          border-radius: 1rem;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .orange-gradient {
          background: linear-gradient(135deg, #ea580c, #dc2626);
        }

        .teal-gradient {
          background: linear-gradient(135deg, #0d9488, #14b8a6);
        }

        .green-gradient {
          background: linear-gradient(135deg, #10b981, #059669);
        }

        .market-icon {
          width: 1.5rem;
          height: 1.5rem;
          color: white;
        }

        .market-badge {
          padding: 0.5rem 1rem;
          background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
          border-radius: 1rem;
          font-size: 0.75rem;
          font-weight: 700;
          color: #475569;
          letter-spacing: 0.05em;
        }

        .market-value-section {
          display: flex;
          align-items: baseline;
          gap: 0.5rem;
          margin-bottom: 1rem;
        }

        .market-value {
          font-size: 2.5rem;
          font-weight: 900;
          color: #0f172a;
          line-height: 1;
        }

        .market-currency {
          font-size: 1rem;
          font-weight: 600;
          color: #64748b;
        }

        .market-title {
          font-size: 1.25rem;
          font-weight: 700;
          color: #0f172a;
          margin-bottom: 0.5rem;
        }

        .market-description {
          font-size: 0.875rem;
          color: #6b7280;
          margin-bottom: 1rem;
          line-height: 1.5;
        }

        .market-growth-indicator {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: linear-gradient(135deg, #f8fafc, #f1f5f9);
          border-radius: 1rem;
          border: 1px solid #e2e8f0;
        }

        .growth-icon {
          width: 1rem;
          height: 1rem;
          color: #0d9488;
        }

        .growth-text {
          font-size: 0.75rem;
          font-weight: 600;
          color: #475569;
        }
        /* PREMIUM SOLUTION OVERVIEW STYLES */
        .solution-overview-premium {
          display: grid;
          grid-template-columns: 1fr;
          gap: 2rem;
          margin-bottom: 4rem;
        }

        @media (min-width: 768px) {
          .solution-overview-premium {
            grid-template-columns: repeat(3, 1fr);
          }
        }

        .solution-card-enhanced {
          position: relative;
          background: white;
          border-radius: 1.5rem;
          padding: 2.5rem;
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
          border: 1px solid #e5e7eb;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          overflow: hidden;
          text-align: center;
        }

        .solution-card-enhanced:hover {
          transform: translateY(-12px) scale(1.02);
          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .solution-card-background {
          position: absolute;
          inset: 0;
          opacity: 0.05;
          transition: opacity 0.3s ease;
        }

        .partners-card .solution-card-background {
          background: linear-gradient(135deg, #ea580c, #dc2626);
        }

        .tech-card .solution-card-background {
          background: linear-gradient(135deg, #0d9488, #14b8a6);
        }

        .roi-card .solution-card-background {
          background: linear-gradient(135deg, #8b5cf6, #a855f7);
        }

        .solution-card-enhanced:hover .solution-card-background {
          opacity: 0.1;
        }

        .solution-icon-mega {
          position: relative;
          width: 5rem;
          height: 5rem;
          border-radius: 1.5rem;
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 auto 2rem;
          transition: all 0.3s ease;
        }

        .orange-theme {
          background: linear-gradient(135deg, #ea580c, #dc2626);
        }

        .teal-theme {
          background: linear-gradient(135deg, #0d9488, #14b8a6);
        }

        .purple-theme {
          background: linear-gradient(135deg, #8b5cf6, #a855f7);
        }

        .solution-card-enhanced:hover .solution-icon-mega {
          transform: scale(1.1) rotate(5deg);
        }

        .solution-icon {
          width: 2.5rem;
          height: 2.5rem;
          color: white;
          z-index: 2;
          position: relative;
        }

        .icon-glow {
          position: absolute;
          inset: -10px;
          border-radius: 50%;
          opacity: 0;
          transition: opacity 0.3s ease;
        }
        .icon-glow.orange {
          background: radial-gradient(circle, rgba(234, 88, 12, 0.4), transparent);
        }

        .icon-glow.teal {
          background: radial-gradient(circle, rgba(13, 148, 136, 0.4), transparent);
        }

        .icon-glow.purple {
          background: radial-gradient(circle, rgba(139, 92, 246, 0.4), transparent);
        }

        .solution-card-enhanced:hover .icon-glow {
          opacity: 1;
        }

        .solution-content {
          position: relative;
          z-index: 2;
        }

        .solution-title {
          font-size: 1.5rem;
          font-weight: 800;
          color: #0f172a;
          margin-bottom: 1rem;
        }

        .solution-description {
          font-size: 1rem;
          color: #6b7280;
          margin-bottom: 1.5rem;
          line-height: 1.6;
        }

        .solution-highlight {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: linear-gradient(135deg, #f8fafc, #f1f5f9);
          border-radius: 1rem;
          border: 1px solid #e2e8f0;
        }

        .highlight-icon {
          width: 1rem;
          height: 1rem;
          color: #0d9488;
        }

        .solution-highlight span {
          font-size: 0.75rem;
          font-weight: 600;
          color: #475569;
        }

        .solution-decoration {
          position: absolute;
          bottom: -20px;
          right: -20px;
          width: 80px;
          height: 80px;
          border-radius: 50%;
          opacity: 0.1;
          transition: all 0.3s ease;
        }

        .partners-card .solution-decoration {
          background: linear-gradient(135deg, #ea580c, #dc2626);
        }

        .tech-card .solution-decoration {
          background: linear-gradient(135deg, #0d9488, #14b8a6);
        }

        .roi-card .solution-decoration {
          background: linear-gradient(135deg, #8b5cf6, #a855f7);
        }
        .solution-card-enhanced:hover .solution-decoration {
          transform: scale(1.2);
          opacity: 0.15;
        }

        /* ENHANCED ESOP CARDS */
        .esop-profile-card-premium-enhanced {
          position: relative;
          background: linear-gradient(135deg, #ffffff 0%, rgba(139, 92, 246, 0.05) 100%);
          border: 2px solid rgba(139, 92, 246, 0.1);
          border-radius: 2rem;
          padding: 2.5rem;
          overflow: hidden;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 0 10px 30px rgba(139, 92, 246, 0.1);
        }

        .esop-profile-card-premium-enhanced:hover {
          transform: translateY(-12px) scale(1.02);
          box-shadow: 0 25px 50px rgba(139, 92, 246, 0.25);
          border-color: rgba(139, 92, 246, 0.3);
        }

        .esop-card-background {
          position: absolute;
          inset: 0;
          opacity: 0.02;
          background: linear-gradient(135deg, #8b5cf6, #a855f7);
          transition: opacity 0.3s ease;
        }

        .esop-profile-card-premium-enhanced:hover .esop-card-background {
          opacity: 0.08;
        }

        .profile-header-enhanced {
          display: flex;
          flex-direction: column;
          align-items: center;
          margin-bottom: 2rem;
        }

        .profile-avatar-mega {
          position: relative;
          width: 6rem;
          height: 6rem;
          margin: 0 auto 1.5rem;
        }

        .avatar-background.purple-gradient {
          position: absolute;
          inset: 0;
          border-radius: 50%;
          background: linear-gradient(135deg, #8b5cf6, #a855f7);
        }

        .avatar-icon-enhanced {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 3rem;
          height: 3rem;
          color: white;
          z-index: 2;
        }

        .avatar-pulse-ring {
          position: absolute;
          inset: -6px;
          border-radius: 50%;
          background: conic-gradient(from 0deg, var(--brand-purple), var(--brand-sky), var(--brand-purple));
          z-index: -1;
          animation: rotate-border 3s linear infinite;
        }

        .avatar-pulse-ring.purple {
          background: conic-gradient(from 0deg, var(--brand-purple), var(--brand-sky), var(--brand-purple));
        }

        .avatar-pulse-ring.blue {
          background: conic-gradient(from 0deg, var(--brand-sky), var(--brand-teal), var(--brand-sky));
        }

        .avatar-pulse-ring.green {
          background: conic-gradient(from 0deg, var(--brand-green), var(--brand-teal), var(--brand-green));
        }

        .esop-badge-premium {
          position: relative;
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.75rem 1.5rem;
          background: linear-gradient(135deg, #f59e0b, #d97706);
          color: white;
          border-radius: 1.5rem;
          font-size: 0.875rem;
          font-weight: 700;
          box-shadow: 0 6px 15px rgba(245, 158, 11, 0.4);
          overflow: hidden;
        }

        .badge-glow {
          position: absolute;
          inset: 0;
          background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
          transform: translateX(-100%);
          transition: transform 0.6s;
        }

        .esop-badge-premium:hover .badge-glow {
          transform: translateX(100%);
        }

        .profile-name-enhanced {
          font-size: 1.5rem;
          font-weight: 900;
          color: #0f172a;
          margin-bottom: 0.5rem;
          background: linear-gradient(135deg, #8b5cf6, #a855f7);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .profile-subtitle-enhanced {
          font-size: 1rem;
          color: var(--brand-purple);
          font-weight: 600;
          margin-bottom: 1.5rem;
        }

        .equity-highlight-banner {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 1rem 1.5rem;
          background: linear-gradient(135deg, #fef3c7, #fde68a);
          border: 1px solid #f59e0b;
          border-radius: 1rem;
          margin-top: 1.5rem;
        }

        .equity-icon {
          font-size: 1.5rem;
        }

        .equity-text {
          flex: 1;
          font-size: 0.875rem;
          color: #92400e;
        }

        .equity-value {
          font-size: 0.875rem;
          font-weight: 700;
          color: #d97706;
        }

        /* SCENARIO STATUS CARDS */
        .scenario-status-card {
          display: flex;
          align-items: center;
          gap: 1.5rem;
          padding: 1.5rem 2rem;
          border-radius: 1.5rem;
          margin: 1rem 0;
          position: relative;
          overflow: hidden;
          transition: all 0.3s ease;
        }

        .scenario-status-card.excellent {
          background: linear-gradient(135deg, #dcfdf4, #a7f3d0);
          border: 2px solid #10b981;
        }

        .scenario-status-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .status-icon-container {
          position: relative;
          width: 4rem;
          height: 4rem;
          background: linear-gradient(135deg, #10b981, #059669);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .status-icon {
          width: 2rem;
          height: 2rem;
          color: white;
        }

        .icon-pulse-effect {
          position: absolute;
          inset: -4px;
          border-radius: 50%;
          background: radial-gradient(circle, rgba(16, 185, 129, 0.3), transparent);
          animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
          0%, 100% { transform: scale(1); opacity: 0.7; }
          50% { transform: scale(1.1); opacity: 0.3; }
        }

        .status-content {
          flex: 1;
        }

        .status-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          background: linear-gradient(135deg, #10b981, #059669);
          color: white;
          border-radius: 1rem;
          font-size: 0.75rem;
          font-weight: 700;
          margin-bottom: 0.5rem;
        }

        .status-metric {
          font-size: 2rem;
          font-weight: 900;
          color: #065f46;
          line-height: 1;
          margin-bottom: 0.25rem;
        }

        .status-description {
          font-size: 1rem;
          color: #047857;
          font-weight: 600;
        }

        .status-glow {
          position: absolute;
          inset: 0;
          background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
          transform: translateX(-100%);
          transition: transform 0.8s;
        }

        .scenario-status-card:hover .status-glow {
          transform: translateX(100%);
        }

        /* COLOR VARIANTS - Optimized with CSS Variables */
        .scenario-status-card.good {
          --card-bg-start: #dbeafe;
          --card-bg-end: #bfdbfe;
          --card-border: #3b82f6;
          --icon-bg-start: #3b82f6;
          --icon-bg-end: #2563eb;
          --text-color: #1d4ed8;
          
          background: linear-gradient(135deg, var(--card-bg-start), var(--card-bg-end));
          border-color: var(--card-border);
        }

        .scenario-status-card.good .status-icon-container,
        .scenario-status-card.good .status-badge {
          background: linear-gradient(135deg, var(--icon-bg-start), var(--icon-bg-end));
        }
        
        .scenario-status-card.good .status-description {
          color: var(--text-color);
        }

        .scenario-status-card.warning {
          --card-bg-start: #fef3c7;
          --card-bg-end: #fde68a;
          --card-border: #f59e0b;
          --icon-bg-start: #f59e0b;
          --icon-bg-end: #d97706;
          --text-color: #b45309;
          --metric-color: #92400e;
          
          background: linear-gradient(135deg, var(--card-bg-start), var(--card-bg-end));
          border-color: var(--card-border);
        }

        .scenario-status-card.warning .status-icon-container,
        .scenario-status-card.warning .status-badge {
          background: linear-gradient(135deg, var(--icon-bg-start), var(--icon-bg-end));
        }

        .scenario-status-card.warning .status-metric {
          color: var(--metric-color);
        }

        .scenario-status-card.warning .status-description {
          color: var(--text-color);
        }

        /* PREMIUM FINANCIAL SECTION STYLES */
        .investment-breakdown-premium {
          background: white;
          border-radius: 2rem;
          padding: 3rem;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
          border: 1px solid rgba(13, 148, 136, 0.1);
          margin-bottom: 3rem;
          position: relative;
          overflow: hidden;
        }

        .investment-breakdown-premium::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 6px;
          background: linear-gradient(90deg, #0d9488, #0ea5e9, #8b5cf6);
        }
        .investment-header-section {
          text-align: center;
          margin-bottom: 3rem;
        }

        .investment-title {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 0.75rem;
          font-size: 2rem;
          font-weight: 800;
          color: #0f172a;
          margin-bottom: 0.5rem;
        }

        .title-icon {
          width: 2rem;
          height: 2rem;
          color: #0d9488;
        }
        .investment-subtitle {
          font-size: 1.125rem;
          color: #6b7280;
          font-weight: 500;
        }

        .investment-content-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 3rem;
          align-items: start;
        }

        @media (min-width: 768px) {
          .investment-content-grid {
            grid-template-columns: 1fr 1fr;
          }
        }

        .chart-container-premium {
          position: relative;
        }

        .chart-wrapper {
          position: relative;
          height: 400px;
          width: 100%;
        }

        .chart-center-info {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          text-align: center;
          pointer-events: none;
        }

        .center-value {
          font-size: 2rem;
          font-weight: 900;
          color: #0f172a;
          line-height: 1;
        }

        .center-label {
          font-size: 0.875rem;
          color: #6b7280;
          font-weight: 600;
          margin-top: 0.25rem;
        }

        .breakdown-summary-card {
          background: linear-gradient(135deg, #f8fafc, #f1f5f9);
          border-radius: 1.5rem;
          padding: 2rem;
          border: 1px solid #e2e8f0;
          height: fit-content;
        }

        .summary-header {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          margin-bottom: 1.5rem;
        }

        .summary-icon {
          width: 1.5rem;
          height: 1.5rem;
          color: #0d9488;
        }

        .summary-title {
          font-size: 1.125rem;
          font-weight: 700;
          color: #0f172a;
        }

        .summary-stats {
          display: grid;
          gap: 1rem;
        }

        .stat-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 0.75rem 1rem;
          background: white;
          border-radius: 0.75rem;
          border: 1px solid #e5e7eb;
        }

        .stat-label {
          font-size: 0.875rem;
          color: #6b7280;
          font-weight: 500;
        }

        .stat-value {
          font-size: 1rem;
          font-weight: 700;
          color: #0d9488;
        }

        /* ROI ANALYSIS PREMIUM STYLES */
        .roi-analysis-premium {
          background: white;
          border-radius: 2rem;
          padding: 3rem;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
          border: 1px solid rgba(13, 148, 136, 0.1);
          margin-top: 3rem;
          position: relative;
          overflow: hidden;
        }

        .roi-analysis-premium::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 6px;
          background: linear-gradient(90deg, #10b981, #0ea5e9, #ea580c);
        }

        .roi-header-section {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
          margin-bottom: 3rem;
        }

        @media (min-width: 768px) {
          .roi-header-section {
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
          }
        }

        .roi-title {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          font-size: 2rem;
          font-weight: 800;
          color: #0f172a;
        }

        .roi-controls-premium {
          display: flex;
          align-items: center;
          gap: 1rem;
        }

        .roi-slider-container {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          min-width: 200px;
        }

        .slider-label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          font-weight: 600;
          color: #374151;
        }

        .label-icon {
          width: 1rem;
          height: 1rem;
          color: #0d9488;
        }

        .slider-value {
          color: #ea580c;
          font-weight: 700;
        }

        .slider-premium {
          width: 100%;
          height: 8px;
          border-radius: 4px;
          background: #e5e7eb;
          outline: none;
          appearance: none;
          cursor: pointer;
          position: relative;
        }

        .slider-premium::-webkit-slider-thumb {
          appearance: none;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: linear-gradient(135deg, #0d9488, #0ea5e9);
          cursor: pointer;
          box-shadow: 0 4px 8px rgba(13, 148, 136, 0.3);
          transition: all 0.3s ease;
        }

        .slider-premium::-webkit-slider-thumb:hover {
          transform: scale(1.1);
          box-shadow: 0 6px 12px rgba(13, 148, 136, 0.4);
        }

        .roi-kpis-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 1.5rem;
          margin-bottom: 3rem;
        }

        @media (min-width: 768px) {
          .roi-kpis-grid {
            grid-template-columns: repeat(3, 1fr);
          }
        }

        .roi-kpi-card {
          background: white;
          border-radius: 1.5rem;
          padding: 2rem;
          border: 1px solid #e5e7eb;
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
        }

        .roi-kpi-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .primary-kpi {
          border-left: 4px solid #10b981;
          background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(5, 150, 105, 0.05));
        }

        .secondary-kpi {
          border-left: 4px solid #0ea5e9;
          background: linear-gradient(135deg, rgba(14, 165, 233, 0.05), rgba(2, 132, 199, 0.05));
        }

        .tertiary-kpi {
          border-left: 4px solid #ea580c;
          background: linear-gradient(135deg, rgba(234, 88, 12, 0.05), rgba(220, 38, 38, 0.05));
        }

        .kpi-icon-container {
          width: 3rem;
          height: 3rem;
          border-radius: 1rem;
          background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 1rem;
        }

        .kpi-icon {
          width: 1.5rem;
          height: 1.5rem;
          color: #0d9488;
        }

        .kpi-content {
          flex: 1;
        }
        .kpi-label {
          font-size: 0.875rem;
          color: #6b7280;
          font-weight: 500;
          margin-bottom: 0.5rem;
        }

        .kpi-value {
          font-size: 2rem;
          font-weight: 900;
          color: #0f172a;
          line-height: 1;
          margin-bottom: 0.25rem;
        }

        .kpi-detail {
          font-size: 0.75rem;
          color: #9ca3af;
          font-weight: 500;
        }

        .kpi-status-indicator {
          position: absolute;
          top: 1rem;
          right: 1rem;
          width: 12px;
          height: 12px;
          border-radius: 50%;
        }

        .kpi-status-indicator.excellent {
          background: linear-gradient(135deg, #10b981, #059669);
          box-shadow: 0 0 10px rgba(16, 185, 129, 0.4);
        }

        .kpi-status-indicator.good {
          background: linear-gradient(135deg, #0ea5e9, #0284c7);
          box-shadow: 0 0 10px rgba(14, 165, 233, 0.4);
        }

        .roi-chart-container {
          position: relative;
          height: 400px;
          background: linear-gradient(135deg, #f8fafc, #f1f5f9);
          border-radius: 1.5rem;
          padding: 1.5rem;
          border: 1px solid #e2e8f0;
        }


    </style>
    
    <!-- PARTE 1: SCRIPTS FUNDACIONALES DE ANALTICA -->
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MM74F2WB');</script>
    
    <!-- Hotjar - Script para mapas de calor y grabaciones de sesiones -->
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:6485325,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
</head>
<body class="antialiased">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MM74F2WB"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <!-- Header & Navigation -->
    <header class="desktop-nav-premium sticky top-0 z-50 shadow-sm" role="banner">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8" role="navigation" aria-label="Navegacin principal">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="font-bold text-xl text-slate-800">Conductores</span>
                    <span class="ml-2 text-sm font-medium text-slate-500">Blueprint Operacional</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#tesis" class="nav-link-premium" aria-label="Ir a seccin de Tesis de Inversin">Tesis</a>
                        <a href="#financiero" class="nav-link-premium" aria-label="Ir a seccin Financiero">Financiero</a>
                        <a href="#tecnologia" class="nav-link-premium" aria-label="Ir a seccin de Tecnologa">Tecnologa</a>
                        <a href="#mvp-validacion" class="nav-link-premium" aria-label="Ir a seccin MVP">MVP</a>
                        <a href="#ejecucion" class="nav-link-premium" aria-label="Ir a seccin de Ejecucin">Ejecucin</a>
                        <a href="#equipo" class="nav-link-premium" aria-label="Ir a seccin de Equipo">Equipo</a>
                        <a href="#ecosistema-en-accion" class="nav-link-premium" aria-label="Ir a seccin del Ecosistema">Ecosistema</a>
                        <a href="#video-cierre" class="nav-link-premium" aria-label="Ir a seccin de Video">Video</a>
                    </div>
                </div>
                <!-- Role selector with proper label association -->
                <div class="ml-8 flex items-center gap-2">
                  <label for="role-selector" class="text-sm font-medium text-slate-600 flex items-center gap-2">
                    <i data-lucide="filter" class="w-4 h-4 text-slate-500" aria-hidden="true"></i>
                    Vista para:
                  </label>
                  <select id="role-selector" onchange="switchRole(this.value)" aria-label="Seleccionar vista por rol"
                    class="bg-white border border-gray-300 rounded-md pl-2 pr-8 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 appearance-none">
                    <option value="general">General</option>
                    <option value="investor">Inversionista</option>
                    <option value="cto">Tecnologa</option>
                    <option value="coo">Ejecucin</option>
                    <option value="cfo">Financiero</option>
                  </select>
                </div>
            </div>
        </nav>
    </header>

    <!-- MOBILE-FIRST: Sticky Bottom Navigation -->
    <nav class="md:hidden mobile-nav-premium" id="mobile-nav" role="navigation" aria-label="Navegacin mvil">
      <div class="mobile-nav-grid">
        <a href="#hero-team" class="mobile-nav-item" aria-label="Ir a inicio">
          <i data-lucide="home" class="w-5 h-5" aria-hidden="true"></i>
          <div class="text-xs">Inicio</div>
        </a>
        <a href="#financiero" class="mobile-nav-item" aria-label="Ir a seccin financiero">
          <i data-lucide="banknote" class="w-5 h-5" aria-hidden="true"></i>
          <div class="text-xs">Financiero</div>
        </a>
        <a href="#tecnologia" class="mobile-nav-item" aria-label="Ir a seccin tecnologa">
          <i data-lucide="brain-circuit" class="w-5 h-5" aria-hidden="true"></i>
          <div class="text-xs">Tech</div>
        </a>
        <a href="#mvp-validacion" class="mobile-nav-item" aria-label="Ir a seccin MVP">
          <i data-lucide="truck" class="w-5 h-5" aria-hidden="true"></i>
          <div class="text-xs">MVP</div>
        </a>
        <a href="#ejecucion" class="mobile-nav-item" aria-label="Ir a seccin ejecucin">
          <i data-lucide="trending-up" class="w-5 h-5" aria-hidden="true"></i>
          <div class="text-xs">Plan</div>
        </a>
        <a href="#ecosistema-en-accion" class="mobile-nav-item" aria-label="Ir a seccin ecosistema">
          <i data-lucide="monitor" class="w-5 h-5" aria-hidden="true"></i>
          <div class="text-xs">Demo</div>
        </a>
        <a href="#video-cierre" class="mobile-nav-item" aria-label="Ir a seccin video">
          <i data-lucide="video" class="w-5 h-5" aria-hidden="true"></i>
          <div class="text-xs">Video</div>
        </a>
      </div>
    </nav>

    <!-- PREMIUM HERO SECTION - ENHANCED STRUCTURE -->
    <section id="hero-team" class="hero-premium-enhanced">
      <div class="hero-bg-advanced">
        <div class="gradient-overlay-primary"></div>
        <div class="pattern-overlay-animated"></div>
        <div class="floating-elements">
          <div class="float-element float-1"></div>
          <div class="float-element float-2"></div>
          <div class="float-element float-3"></div>
        </div>
      </div>
      
      <div class="hero-content-premium">
        <div class="hero-badge-enhanced">
          <i data-lucide="rocket" class="w-4 h-4"></i>
          SEED STAGE  ROAD TO SERIE A
        </div>
        
        <h1 class="hero-title-enhanced">
          Dominamos el mercado con <span class="highlight-text-premium">24,000+</span> 
          <span class="text-gradient-primary">Transportistas. Ahora vamos a construir su IA.</span>
        </h1>
        
        <p class="hero-subtitle-enhanced">
          Nuestra ventaja injusta: 15+ aos de dominio del mercado. Buscamos una ronda SEED de $10M MXN para ejecutar nuestro detallado plan de IA y transformar 15,000 vagonetas en activos prsperos.
        </p>
        
        <div class="credibility-grid-enhanced">
          <div class="cred-item-premium">
            <i data-lucide="users" class="cred-icon"></i>
            <span class="cred-text">Entendimiento del Sector</span>
          </div>
          <div class="cred-item-premium">
            <i data-lucide="brain-circuit" class="cred-icon"></i>
            <span class="cred-text">4 Agentes IA</span>
          </div>
          <div class="cred-item-premium">
            <i data-lucide="shield-check" class="cred-icon"></i>
            <span class="cred-text">Colateral Social nico</span>
          </div>
        </div>
        
        <div class="hero-ctas-enhanced">
          <button onclick="document.getElementById('financiero').scrollIntoView({behavior: 'smooth'})" 
                  class="btn-primary-hero-enhanced" aria-label="Navegar a la seccin de anlisis financiero">
            <i data-lucide="trending-up" class="btn-icon" aria-hidden="true"></i>
            <span class="btn-text">Ver Financiero</span>
            <div class="btn-glow"></div>
          </button>
          <button onclick="document.getElementById('tecnologia').scrollIntoView({behavior: 'smooth'})" 
                  class="btn-secondary-hero-enhanced" aria-label="Navegar a la seccin de tecnologa">
            <i data-lucide="brain-circuit" class="btn-icon" aria-hidden="true"></i>
            <span class="btn-text">Explorar Tecnologa</span>
            <div class="btn-glow"></div>
          </button>
        </div>
      </div>
    </section>

    <section id="about-us" class="py-16 bg-slate-50">
      <div class="container mx-auto px-4">
        <div class="text-center max-w-4xl mx-auto">
          <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-teal-100 border-2 border-teal-200 mb-6">
            <i data-lucide="compass" class="w-8 h-8 text-teal-600"></i>
          </div>
          <h2 class="text-section text-slate-900 mb-6">
            Entendemos la operacin del transportista, no solo sus nmeros
          </h2>
          <p class="text-lg text-slate-600 mb-6">
            Donde las financieras tradicionales ven un "sector de alto riesgo", nosotros vemos una realidad operativa que ellos no comprenden. Nuestra ventaja no est solo en la tecnologa, sino en nuestro profundo conocimiento del terreno.
          </p>
          <p class="text-lg text-slate-600 mb-6">
            Sabemos que en <strong>vacaciones los ingresos caen hasta un 30%</strong> en algunas rutas por la baja de flujo de estudiantes. Entendemos que una obra vial puede reducir las vueltas diarias de 8 a 4. Comprendemos que en temporada de lluvias hay zonas que se inundan y la operacin cambia por completo. Sabemos del desafo constante de la <strong>rotacin de operadores</strong> y, lo ms importante, entendemos que si el "hombre-vagoneta" se enferma o tiene un imprevisto, <strong>la unidad queda parada por das</strong>, dejando de generar el flujo para cubrir sus pagos.
          </p>
          <p class="text-xl font-semibold text-slate-800">
            Por eso, no solo ofrecemos financiamiento: hemos diseado un <strong class="highlight-text">ecosistema de resiliencia</strong> que se adapta en tiempo real a estas oscilaciones. Somos sus socios en la operacin.
          </p>
        </div>
      </div>
    </section>

    <section id="dynamic-dashboard" class="py-8 bg-slate-50 border-b border-t">
      <div class="container mx-auto px-4">
        <div id="dynamic-dashboard-content" class="grid grid-cols-2 md:grid-cols-4 gap-4 transition-all duration-500">
          </div>
      </div>
    </section>

    <!-- PREMIUM FUNDING HIGHLIGHT SECTION - ENHANCED CARDS -->
    <section class="py-16 bg-gradient-premium-funding">
      <div class="container mx-auto px-4">
        <div class="max-w-6xl mx-auto">
          <div class="funding-card-premium-enhanced">
            <div class="funding-header-section">
              <div class="funding-badge-premium">
                <i data-lucide="target" class="w-4 h-4"></i>
                SEED FUNDING TARGET
              </div>
              <h2 class="funding-title-premium">Inversin Estratgica</h2>
            </div>
            
            <div class="funding-main-content grid grid-cols-1 md:grid-cols-2 gap-12">
              <div class="funding-ask-section">
                <div class="funding-amount-container">
                  <div class="funding-currency">$</div>
                  <div class="funding-number">10</div>
                  <div class="funding-unit">M MXN</div>
                </div>
                <div class="funding-timeline-premium">
                  <i data-lucide="calendar" class="timeline-icon"></i>
                  <span>12 meses  Serie A $45M</span>
                </div>
                <div class="funding-metrics-quick">
                  <div class="metric-item">
                    <span class="metric-label">Payback:</span>
                    <span class="metric-value">30 meses</span>
                  </div>
                  <div class="metric-separator"></div>
                  <div class="metric-item">
                    <span class="metric-label">ROI 5 aos con ramp-up realista:</span>
                    <span class="metric-value highlight">58%</span>
                    <div class="metric-qualifier mt-1">
                      <span class="text-sm text-slate-600">Investment Y1  Dominance Y5</span>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="funding-breakdown-visual">
                <div class="breakdown-item">
                  <div class="breakdown-icon-container orange">
                    <i data-lucide="cpu" class="breakdown-icon"></i>
                  </div>
                  <div class="breakdown-content">
                    <div class="breakdown-value">$2.13M</div>
                    <div class="breakdown-label">Core IA</div>
                    <div class="breakdown-detail">4 agentes nicos</div>
                  </div>
                </div>
                
                <div class="breakdown-item">
                  <div class="breakdown-icon-container blue">
                    <i data-lucide="truck" class="breakdown-icon"></i>
                  </div>
                  <div class="breakdown-content">
                    <div class="breakdown-value">$2.63M</div>
                    <div class="breakdown-label">CAPEX Piloto</div>
                    <div class="breakdown-detail">3 vagonetas</div>
                  </div>
                </div>
                
                <div class="breakdown-item">
                  <div class="breakdown-icon-container green">
                    <i data-lucide="users" class="breakdown-icon"></i>
                  </div>
                  <div class="breakdown-content">
                    <div class="breakdown-value">$1.94M</div>
                    <div class="breakdown-label">Equipo ESOP</div>
                    <div class="breakdown-detail">8 especialistas</div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="funding-value-props">
              <div class="value-prop-item">
                <div class="value-prop-icon-container teal">
                  <i data-lucide="users" class="value-prop-icon"></i>
                </div>
                <div class="value-prop-content">
                  <div class="value-prop-title">24K+ Clientes Desarrollados</div>
                  <div class="value-prop-subtitle">Generacin demanda probada</div>
                </div>
              </div>
              
              <div class="value-prop-item">
                <div class="value-prop-icon-container purple">
                  <i data-lucide="brain-circuit" class="value-prop-icon"></i>
                </div>
                <div class="value-prop-content">
                  <div class="value-prop-title">4 Agentes IA nicos</div>
                  <div class="value-prop-subtitle">Diferenciacin tecnolgica</div>
                </div>
              </div>
              
              <div class="value-prop-item">
                <div class="value-prop-icon-container emerald">
                  <i data-lucide="shield-check" class="value-prop-icon"></i>
                </div>
                <div class="value-prop-content">
                  <div class="value-prop-title">Colateral Social nico</div>
                  <div class="value-prop-subtitle">Imposible replicar</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Problem & Solution Section -->
    <section class="py-16 bg-gradient-to-br from-slate-50 to-white">
      <div class="container mx-auto px-4">
        <!-- Problem Statement -->
        <div class="text-center mb-16">
          <h2 class="text-section text-slate-900 mb-6">
            El Problema: <span class="highlight-text">15,000</span> Vagonetas Obsoletas
          </h2>
          <p class="text-lg md:text-xl text-slate-600 max-w-4xl mx-auto mb-8">
            Miles de transportistas atrapados en ciclos de deuda por prestamistas predatorios. 
            <strong class="text-orange-600">Conductores: los convierte en socios, no deudores.</strong>
          </p>
        </div>
        <!-- PREMIUM TAM/SAM/SOM CARDS -->
        <div class="tam-sam-som-container-premium">
          <div class="market-size-card tam-card">
            <div class="market-card-header">
              <div class="market-icon-container orange-gradient">
                <i data-lucide="globe" class="market-icon"></i>
              </div>
              <div class="market-badge">TAM</div>
            </div>
            <div class="market-value-section">
              <div class="market-value">$10.9B</div>
              <div class="market-currency">MXN</div>
            </div>
            <div class="market-title">Mercado Total</div>
            <div class="market-description">Renovacin vagonetas nivel nacional</div>
            <div class="market-growth-indicator">
              <i data-lucide="trending-up" class="growth-icon"></i>
              <span class="growth-text">Crecimiento sostenido</span>
            </div>
          </div>
          
          <div class="market-size-card sam-card">
            <div class="market-card-header">
              <div class="market-icon-container teal-gradient">
                <i data-lucide="map-pin" class="market-icon"></i>
              </div>
              <div class="market-badge">SAM</div>
            </div>
            <div class="market-value-section">
              <div class="market-value">$4.3B</div>
              <div class="market-currency">MXN</div>
            </div>
            <div class="market-title">Mercado Servible</div>
            <div class="market-description">Zonas metro con infraestructura GNV</div>
            <div class="market-growth-indicator">
              <i data-lucide="target" class="growth-icon"></i>
              <span class="growth-text">Mercado objetivo</span>
            </div>
          </div>
          
          <div class="market-size-card som-card">
            <div class="market-card-header">
              <div class="market-icon-container green-gradient">
                <i data-lucide="crosshair" class="market-icon"></i>
              </div>
              <div class="market-badge">SOM</div>
            </div>
            <div class="market-value-section">
              <div class="market-value">$1.1B</div>
              <div class="market-currency">MXN</div>
            </div>
            <div class="market-title">Mercado Obtenible</div>
            <div class="market-description">Cuota realista 3-5 aos</div>
            <div class="market-growth-indicator">
              <i data-lucide="zap" class="growth-icon"></i>
              <span class="growth-text">Cuota agresiva</span>
            </div>
          </div>
        </div>
        <!-- PREMIUM SOLUTION OVERVIEW -->
        <div class="solution-overview-premium">
          <div class="solution-card-enhanced partners-card">
            <div class="solution-card-background"></div>
            <div class="solution-icon-mega orange-theme">
              <i data-lucide="handshake" class="solution-icon"></i>
              <div class="icon-glow orange"></div>
            </div>
            <div class="solution-content">
              <h3 class="solution-title">Socios, No Acreedores</h3>
              <p class="solution-description">Financiamiento justo + flexibilidad real</p>
              <div class="solution-highlight">
                <i data-lucide="heart" class="highlight-icon"></i>
                <span>Filosofa humana</span>
              </div>
            </div>
            <div class="solution-decoration"></div>
          </div>
          
          <div class="solution-card-enhanced tech-card">
            <div class="solution-card-background"></div>
            <div class="solution-icon-mega teal-theme">
              <i data-lucide="shield-check" class="solution-icon"></i>
              <div class="icon-glow teal"></div>
            </div>
            <div class="solution-content">
              <h3 class="solution-title">Proteccin Conductores (El Game-Changer)</h3>
              <p class="solution-description">Nuestra arma secreta: un paquete de <strong>flexibilidad gestionado por IA</strong> que absorbe la volatilidad operativa. Reemplazamos las tasas moratorias punitivas con soporte proactivo que <strong>reduce la probabilidad de default entre un 50% y 67.5%</strong>.</p>
              <div class="solution-highlight">
                <i data-lucide="heart" class="highlight-icon"></i>
                <span>Emptica + Rentable</span>
              </div>
            </div>
            <div class="solution-decoration"></div>
          </div>
          
          <div class="solution-card-enhanced roi-card">
            <div class="solution-card-background"></div>
            <div class="solution-icon-mega purple-theme">
              <i data-lucide="trending-up" class="solution-icon"></i>
              <div class="icon-glow purple"></div>
            </div>
            <div class="solution-content">
              <h3 class="solution-title">ROI 58%</h3>
              <p class="solution-description">Ramp-up realista defendible en due diligence</p>
              <div class="solution-highlight">
                <i data-lucide="award" class="highlight-icon"></i>
                <span>Returns premium</span>
              </div>
            </div>
            <div class="solution-decoration"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- DEEP DIVE SECTION -->
    <section id="deep-dive-business-model" class="py-16 bg-gradient-to-br from-slate-50 to-white">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="text-section text-slate-900 mb-6">
            DEEP DIVE: <span class="highlight-text">El Motor del Negocio</span>
          </h2>
          <p class="text-lg md:text-xl text-slate-600 max-w-4xl mx-auto">
            Ms all de la IA, este es el modelo fundamental que nos hace rentables y defendibles. Qu hacemos, cmo lo hacemos y cmo ganamos dinero.
          </p>
        </div>

        <div class="mb-20">
          <h3 class="title-enhanced justify-center mb-8">
            <i data-lucide="package-check" class="title-icon-mandatory"></i>
            1. Qu Hacemos: El Paquete Integral
          </h3>
          <div class="max-w-4xl mx-auto">
            <div class="card-premium-enforced p-8">
              <div class="text-center">
                <h4 class="text-2xl font-bold text-slate-800 mb-2">Activo Productivo "Llave en Mano"</h4>
                <p class="text-slate-600 mb-6">Financiamos un paquete completo que incluye todo lo necesario para que el operador sea rentable desde el primer da.</p>
              </div>
              <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                <div class="bg-slate-50 p-4 rounded-lg flex flex-col items-center justify-start">
                  <i data-lucide="truck" class="w-10 h-10 text-teal-600 mx-auto mb-2"></i>
                  <p class="font-semibold text-sm text-slate-700">Vagoneta Nueva</p>
                  <p class="text-xs text-slate-500 mt-1">El activo productivo principal.</p>
                </div>
                <div class="bg-slate-50 p-4 rounded-lg flex flex-col items-center justify-start">
                  <i data-lucide="sliders-horizontal" class="w-10 h-10 text-teal-600 mx-auto mb-2"></i>
                  <p class="font-semibold text-sm text-slate-700">Conversin GNV + Bancas</p>
                  <p class="text-xs text-slate-500 mt-1">Acondicionamiento para mxima eficiencia.</p>
                </div>
                <div class="bg-slate-50 p-4 rounded-lg flex flex-col items-center justify-start">
                  <i data-lucide="satellite-dish" class="w-10 h-10 text-teal-600 mx-auto mb-2"></i>
                  <p class="font-semibold text-sm text-slate-700">Telemtica IoT</p>
                  <p class="text-xs text-slate-500 mt-1">El cerebro que alimenta nuestra IA.</p>
                </div>
                <div class="bg-slate-50 p-4 rounded-lg flex flex-col items-center justify-start">
                  <i data-lucide="file-check-2" class="w-10 h-10 text-teal-600 mx-auto mb-2"></i>
                  <p class="font-semibold text-sm text-slate-700">Puesta en Marcha y Seguro</p>
                  <p class="text-xs text-slate-500 mt-1">Trmites y proteccin incluidos.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="mb-20">
          <h3 class="title-enhanced justify-center mb-12">
            <i data-lucide="refresh-cw" class="title-icon-mandatory"></i>
            2. Cmo lo Hacemos: El Crculo Virtuoso
          </h3>
          <div class="relative grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <div class="card-premium text-center p-6">
              <div class="w-16 h-16 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-teal-200">
                <i data-lucide="users" class="w-8 h-8 text-teal-600"></i>
              </div>
              <h4 class="font-bold text-slate-800 mb-2">Paso 1: Originacin Probada</h4>
              <p class="text-sm text-slate-600">Aplicamos nuestra <strong>experiencia de +15 aos</strong> y el <strong>"colateral social"</strong> para adquirir clientes de alta calidad con un riesgo y costo radicalmente menores.</p>
            </div>
            <div class="card-premium text-center p-6">
              <div class="w-16 h-16 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-teal-200">
                <i data-lucide="brain-circuit" class="w-8 h-8 text-teal-600"></i>
              </div>
              <h4 class="font-bold text-slate-800 mb-2">Paso 2: Gestin con IA</h4>
              <p class="text-sm text-slate-600">El activo es protegido por nuestro <strong>ecosistema de 4 agentes de IA</strong>, el motor de nuestra "Resiliencia como Servicio" (detallado en la seccin de Tecnologa).</p>
            </div>
            <div class="card-premium text-center p-6">
              <div class="w-16 h-16 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-teal-200">
                <i data-lucide="database-zap" class="w-8 h-8 text-teal-600"></i>
              </div>
              <h4 class="font-bold text-slate-800 mb-2">Paso 3: Generacin de Valor y Datos</h4>
              <p class="text-sm text-slate-600">La operacin diaria genera <strong>datos propietarios</strong> y activa <strong>nuevos flujos de ingreso</strong> (servicios, GNV, marketplace), enriqueciendo el ecosistema.</p>
            </div>
            <div class="card-premium text-center p-6">
              <div class="w-16 h-16 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-teal-200">
                <i data-lucide="trending-up" class="w-8 h-8 text-teal-600"></i>
              </div>
              <h4 class="font-bold text-slate-800 mb-2">Paso 4: Refinamiento del Modelo</h4>
              <p class="text-sm text-slate-600">Los nuevos datos hacen a nuestra IA ms inteligente, permitindonos ofrecer un <strong>servicio superior</strong>, lo que atrae a ms clientes y <strong>reinicia el ciclo con ms fuerza</strong>.</p>
            </div>
          </div>
        </div>

        <div class="mb-20">
          <h3 class="title-enhanced justify-center mb-8">
            <i data-lucide="dollar-sign" class="title-icon-mandatory"></i>
            3. Cmo Ganamos Dinero: Monetizacin Multi-Capa
          </h3>
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="card-premium-enforced p-8 space-y-6">
              <div class="flex items-center gap-4">
                <i data-lucide="banknote" class="w-10 h-10 text-orange-600"></i>
                <h4 class="text-xl font-bold text-slate-800">Flujos Primarios</h4>
              </div>
              <div>
                <p class="font-semibold text-slate-700">Margen por Venta de Activo</p>
                <p class="text-3xl font-bold text-orange-600">>25%</p>
                <p class="text-sm text-slate-500">Sobre el paquete integral.</p>
              </div>
              <div>
                <p class="font-semibold text-slate-700">Tasa de Inters Cliente</p>
                <p class="text-3xl font-bold text-orange-600">~25.5%</p>
                <p class="text-sm text-slate-500">Tasa promedio objetivo sobre la cartera.</p>
              </div>
               <div>
                <p class="font-semibold text-slate-700">Enganche Cliente</p>
                <p class="text-3xl font-bold text-orange-600">15-20%</p>
                <p class="text-sm text-slate-500">Mitiga riesgo y asegura flujo inicial.</p>
              </div>
            </div>
            <div class="card-premium-enforced p-8 space-y-6">
              <div class="flex items-center gap-4">
                <i data-lucide="layers" class="w-10 h-10 text-sky-600"></i>
                <h4 class="text-xl font-bold text-slate-800">Ecosistema de Servicios</h4>
              </div>
              <div>
                <p class="font-semibold text-slate-700">Comisiones GNV (Generacin Demanda)</p>
                <p class="text-3xl font-bold text-sky-600">10-15%</p>
                <p class="text-sm text-slate-500">Ingreso recurrente por consumo.</p>
              </div>
              <div>
                <p class="font-semibold text-slate-700">Marketplace y Refacciones</p>
                <p class="text-3xl font-bold text-sky-600">3-5% | 30-50%</p>
                <p class="text-sm text-slate-500">Take-rate sobre transacciones y margen en venta directa.</p>
              </div>
            </div>
            <div class="bg-gradient-to-br from-teal-500 to-sky-600 p-8 rounded-2xl text-white shadow-xl">
              <div class="flex items-center gap-4 mb-6">
                <i data-lucide="pie-chart" class="w-10 h-10"></i>
                <h4 class="text-xl font-bold">Resultado Estratgico</h4>
              </div>
              <p class="text-lg mb-4">Reducimos la dependencia del financiamiento y diversificamos los ingresos para aumentar nuestro margen bruto por unidad del 20% a un:</p>
              <p class="text-6xl font-black my-4">35-40%</p>
              <p class="font-semibold">Esta diversificacin de ingresos consolida nuestro modelo como una <strong>Mobility Tech Platform</strong>.</p>
            </div>
          </div>
        </div>

        <div>
            <h3 class="title-enhanced justify-center mb-8">
                <i data-lucide="shield-check" class="title-icon-mandatory"></i>
                4. El Resultado: Un Modelo De-Riesgado
            </h3>
            <div class="max-w-4xl mx-auto">
                <div class="card-premium-enforced p-8 bg-slate-100 border-l-8 border-teal-500">
                    <p class="text-center text-slate-600 mb-6">Nuestro modelo no solo genera retornos, sino que mitiga sistemticamente los riesgos clave para un inversionista:</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                        <div class="bg-white p-4 rounded-lg">
                            <p class="font-bold text-teal-800 mb-1">Riesgo de Mercado Mitigado:</p>
                            <p class="text-slate-700">Nuestro <strong>playbook de originacin probado</strong> elimina la incertidumbre de la adquisicin de clientes.</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg">
                            <p class="font-bold text-teal-800 mb-1">Riesgo de Cartera Mitigado:</p>
                            <p class="text-slate-700">Nuestro <strong>ecosistema de IA</strong> protege los activos y asegura la capacidad de pago, reduciendo la tasa de default.</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg">
                            <p class="font-bold text-teal-800 mb-1">Riesgo de Modelo de Negocio Mitigado:</p>
                            <p class="text-slate-700">Nuestros <strong>ingresos diversificados</strong> (servicios, comisiones) reducen la dependencia de los mrgenes del financiamiento.</p>
                        </div>
                         <div class="bg-white p-4 rounded-lg">
                            <p class="font-bold text-teal-800 mb-1">Riesgo de Ejecucin Mitigado:</p>
                            <p class="text-slate-700">Nuestro <strong>paquete "llave en mano"</strong> estandariza la oferta y la operacin, permitiendo un escalamiento predecible.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
    </section>

<section id="traccion" class="py-20 bg-white text-gray-800">
  <div class="container mx-auto px-6">
    <div class="text-center mb-16">
        <h2 class="text-section text-slate-900 mb-6">
            Low-Hanging Fruits: <span class="highlight-text">Traccin Temprana Validada</span>
        </h2>
        <p class="text-lg text-slate-600 max-w-4xl mx-auto">
            Nuestra entrada al mercado no se basa en hiptesis, sino en un pipeline validado. Hemos mapeado operadores organizados con necesidad urgente de renovacin y, crucialmente, con la disposicin a colaborar aportando <strong>garantas reales: su capital social (carta aval) y la dacin en pago.</strong>
        </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="card-premium text-center p-6">
        <div class="w-16 h-16 bg-gradient-to-br from-orange-50 to-amber-50 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-orange-200">
            <i data-lucide="map-pin" class="w-8 h-8 text-orange-600"></i>
        </div>
        <h3 class="text-xl font-semibold mb-2 text-slate-800">Pipeline Cuantificado</h3>
        <p class="text-gray-700">Identificadas rutas clave en el <strong>Estado de Mxico</strong> con una necesidad de renovacin de <strong>2,700 unidades</strong> en los prximos 36 meses.</p>
      </div>

      <div class="card-premium text-center p-6">
        <div class="w-16 h-16 bg-gradient-to-br from-orange-50 to-amber-50 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-orange-200">
            <i data-lucide="file-check-2" class="w-8 h-8 text-orange-600"></i>
        </div>
        <h3 class="text-xl font-semibold mb-2 text-slate-800">Doble Garanta Comprometida</h3>
        <p class="text-gray-700">Las rutas emiten una <strong>carta aval institucional</strong> como respaldo, mientras que el operador firma la <strong>dacin en pago</strong> de la nueva unidad como garanta de cumplimiento.</p>
      </div>

      <div class="card-premium text-center p-6">
        <div class="w-16 h-16 bg-gradient-to-br from-orange-50 to-amber-50 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-orange-200">
            <i data-lucide="recycle" class="w-8 h-8 text-orange-600"></i>
        </div>
        <h3 class="text-xl font-semibold mb-2 text-slate-800">Mecanismo de Continuidad</h3>
        <p class="text-gray-700">En caso de default, la <strong>ruta se adjudica la unidad</strong>. Esto garantiza que el activo permanece productivo y el crdito vigente, eliminando el riesgo de prdida.</p>
      </div>
    </div>
  </div>
</section>

    <!-- Como Funciona Section -->
    <section id="como-funciona" class="py-16 bg-gradient-to-br from-slate-900 to-slate-800">
      <div class="container mx-auto text-center">
        <h2 class="text-5xl md:text-6xl font-black text-white mb-6 tracking-tighter">
          De Punitivo a <span class="highlight-text">Proactivo</span>
        </h2>
        <p class="text-lg text-slate-400 mb-12 max-w-3xl mx-auto leading-relaxed">
          As es como "Proteccin Conductores" rompe el ciclo de la deuda en 4 pasos automatizados.
        </p>
        <div class="grid md:grid-cols-4 gap-6 text-center max-w-6xl mx-auto">
          <div class="flex flex-col items-center">
            <div class="flex items-center justify-center w-20 h-20 rounded-full bg-slate-800 border border-slate-700 mb-4">
              <i data-lucide="radar" class="w-10 h-10 text-sky-400"></i>
            </div>
            <h3 class="font-bold text-white mb-2 text-center">1. Deteccin</h3>
            <p class="text-slate-400 text-sm">HASE detecta una anomala operativa (ej. cada en consumo de GNV).</p>
          </div>
          <div class="flex flex-col items-center">
            <div class="flex items-center justify-center w-20 h-20 rounded-full bg-slate-800 border border-slate-700 mb-4">
              <i data-lucide="message-square-heart" class="w-10 h-10 text-sky-400"></i>
            </div>
            <h3 class="font-bold text-white mb-2 text-center">2. Intervencin</h3>
            <p class="text-slate-400 text-sm">PIA contacta al operador va WhatsApp con un mensaje de apoyo, no de cobro.</p>
          </div>
          <div class="flex flex-col items-center">
            <div class="flex items-center justify-center w-20 h-20 rounded-full bg-slate-800 border border-slate-700 mb-4">
              <i data-lucide="toggle-right" class="w-10 h-10 text-sky-400"></i>
            </div>
            <h3 class="font-bold text-white mb-2 text-center">3. Activacin</h3>
            <p class="text-slate-400 text-sm">El operador activa "Proteccin Conductores" con un simple 'S', sin friccin.</p>
          </div>
          <div class="flex flex-col items-center">
            <div class="flex items-center justify-center w-20 h-20 rounded-full bg-slate-800 border border-slate-700 mb-4">
              <i data-lucide="line-chart" class="w-10 h-10 text-sky-400"></i>
            </div>
            <h3 class="font-bold text-white mb-2 text-center">4. Re-equilibrio</h3>
            <p class="text-slate-400 text-sm">Nuestro algoritmo recalcula el plan de pagos para mantener intacta la TIR del crdito, sin penalizaciones.</p>
          </div>
        </div>
      </div>
    </section>
    <!-- ARIA Live Region for Dynamic Updates -->
    <div id="aria-live-region" class="sr-only" aria-live="polite" aria-atomic="true"></div>
    
    <main id="main" class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12" role="main">
        
        <!-- 1. Tesis de Inversin y Diferenciadores -->
        <section id="tesis" class="mb-16 scroll-mt-16">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-2 text-center">Tesis de Inversin</h2>
            <p class="text-lg text-slate-600 mb-8 text-center">Estamos creando una nueva categora: <strong>Resiliencia como Servicio</strong>. Este es el blueprint para construir un foso competitivo inexpugnable en Mobility Tech.</p>
            
            <div class="text-center max-w-4xl mx-auto mb-16">
                <div class="inline-flex items-center gap-2 px-4 py-2 mb-6 bg-amber-100 border border-amber-300 rounded-full text-sm font-semibold text-amber-800">
                    <i data-lucide="alert-triangle" class="w-4 h-4"></i>
                    <span>Punto de Inflexin del Mercado</span>
                </div>
                <p class="text-lg text-slate-600 mb-6">
                    El mercado de Gas Natural Vehicular enfrenta un reto crtico: las nuevas generaciones de motores de las principales marcas ya no permiten la conversin a GNV debido a la aleacin de sus metales. Esto no solo frena la renovacin de flotas, sino que pone en riesgo la viabilidad de todo el ecosistema.
                </p>
                <p class="text-lg text-slate-600">
                    Nuestra solucin ataca directamente esta brecha. Introducimos vagonetas importadas, <strong>100% compatibles con la conversin a GNV</strong> y con un diseo que los transportistas ya conocen, asegurando la transicin hacia una movilidad ms limpia y rentable.
                </p>
            </div>
            <div class="my-12 border-t-2 border-dashed border-gray-300"></div>
            
            <!-- ENHANCED: Team-Market Fit Emphasis -->
            <div class="card-premium-alert-orange">
                <div class="flex items-center mb-4">
                    <i data-lucide="star" class="w-6 h-6 text-orange-600 mr-3"></i>
                    <h3 class="font-bold text-xl text-orange-800">Team-Market Fit Excepcional</h3>
                </div>
                <p class="text-orange-700">
                    Esta inversin no solo financia tecnologa superior, sino que asegura 
                    <strong>el nico equipo en Mxico</strong> que ha desarrollado 24,000+ clientes transportistas 
                    + dominio tecnolgico comprobado. Esta combinacin de dominio de mercado y claridad de ejecucin es imposible de replicar.
                </p>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md mb-12">
                <h3 class="font-bold text-xl mb-4 text-teal-800">Resumen Estratgico</h3>
                <p class="text-slate-700 leading-relaxed">
                    La inversin de <strong>$10,000,000 MXN</strong> financiar la ejecucin de este blueprint operacional. No estamos pidiendo un cheque en blanco para 'descubrir' una solucin; estamos pidiendo capital para construir la solucin que ya hemos diseado, validado en papel y detallado semana a semana. El objetivo es materializar nuestro ecosistema de IA y validar la economa unitaria con un piloto de 3 vagonetas, garantizando un camino de-riesgado hacia una Serie A de $45M.
                </p>
            </div>

            <div class="grid-responsive lg-4 gap-4 mb-8 stagger-animation">
                <div class="kpi-card-premium-mandatory" data-tooltip="$2.265M en 5 agentes de IA" data-ref="core-ia-budget">
                    <div class="kpi-icon-container-mandatory">
                        <i data-lucide="brain-circuit" class="kpi-icon-mandatory"></i>
                    </div>
                    <div class="kpi-value-mandatory">$2.13M</div>
                    <div class="kpi-label-mandatory">Core IA Investment</div>
                    <div class="kpi-status-bar-mandatory">
                        <div class="status-fill-excellent" style="width: 95%"></div>
                    </div>
                </div>
                <div class="kpi-card-premium-mandatory" data-tooltip="HASE: 1,584h | PIA: 576h | Super-PMA: 768h | Asistente: 480h | RAG-DNA: 432h">
                    <div class="kpi-icon-container-mandatory">
                        <i data-lucide="clock" class="kpi-icon-mandatory"></i>
                    </div>
                    <div class="kpi-value-mandatory">8,208h</div>
                    <div class="kpi-label-mandatory">Horas Desarrollo</div>
                    <div class="kpi-status-bar-mandatory">
                        <div class="status-fill-excellent" style="width: 88%"></div>
                    </div>
                </div>
                <div class="kpi-card-premium-mandatory" data-tooltip="STP + Oxxo + PLD: 70% no-bancarizado accesible">
                    <div class="kpi-icon-container-mandatory">
                        <i data-lucide="credit-card" class="kpi-icon-mandatory"></i>
                    </div>
                    <div class="kpi-value-mandatory">$75K</div>
                    <div class="kpi-label-mandatory">Stack Pagos Inclusivo</div>
                    <div class="kpi-status-bar-mandatory">
                        <div class="status-fill-excellent" style="width: 92%"></div>
                    </div>
                </div>
                <div class="kpi-card-premium-mandatory" data-tooltip="3 vagonetas  $876,667 cada una" data-ref="capex-breakdown">
                    <div class="kpi-icon-container-mandatory">
                        <i data-lucide="truck" class="kpi-icon-mandatory"></i>
                    </div>
                    <div class="kpi-value-mandatory">$2.63M</div>
                    <div class="kpi-label-mandatory">CAPEX Piloto</div>
                    <div class="kpi-status-bar-mandatory">
                        <div class="status-fill-excellent" style="width: 85%"></div>
                    </div>
                    <button onclick="document.getElementById('capex-modal').style.display='flex'" class="text-xs text-blue-600 underline mt-1 hover:text-blue-800 transition-colors" aria-label="Ver desglose detallado del CAPEX piloto">Ver desglose </button>
                </div>
            </div>

            <div class="card-premium mb-12">
                <h3 class="font-bold text-xl mb-4 text-teal-800">Diferenciadores Estratgicos Clave</h3>
                <div id="diferenciadores-container" class="grid-responsive md-2 lg-3 gap-6 stagger-animation">
                    <!-- Los diferenciadores se insertarn aqu por JS -->
                </div>
            </div>
            
            <!-- PREMIUM: Competitive Moat Section -->
            <div class="card-premium mb-12">
              <h3 class="font-bold text-xl mb-4 text-teal-800">Ventaja Competitiva Insuperable: 4 Fosos Interconectados</h3>
              
              <!-- Interactive Moat Visualization -->
              <div class="grid-responsive md-2 lg-4 gap-6 mb-8 stagger-animation">
                <div class="card-premium interactive-element bg-gradient-to-br from-blue-50 to-blue-100 border-l-4 border-blue-500 cursor-pointer" 
                     data-moat="datos" onclick="showMoatDetails('datos')">
                  <div class="flex items-center mb-4">
                    <i data-lucide="database" class="w-8 h-8 mr-3 text-blue-600"></i>
                    <h4 class="font-bold text-blue-800">Foso de Datos</h4>
                  </div>
                  <p class="text-sm text-blue-700 mb-3">Carta Aval de Ruta + Dacin en Pago: colateral social nico de 15+ aos</p>
                  <div class="text-xs text-blue-600 font-semibold"> Imposible replicar por competidores</div>
                </div>
                
                <div class="card-premium interactive-element bg-gradient-to-br from-green-50 to-green-100 border-l-4 border-green-500 cursor-pointer" 
                     data-moat="tech" onclick="showMoatDetails('tech')">
                  <div class="flex items-center mb-4">
                    <i data-lucide="brain-circuit" class="w-8 h-8 mr-3 text-green-600"></i>
                    <h4 class="font-bold text-green-800">Foso Tecnolgico</h4>
                  </div>
                  <p class="text-sm text-green-700 mb-3">4 agentes IA sinrgicos: HASE, PIA, Super-PMA, Asistente</p>
                  <div class="text-xs text-green-600 font-semibold"> Arquitectura multi-agente nica</div>
                </div>
                
                <div class="card-premium interactive-element bg-gradient-to-br from-purple-50 to-purple-100 border-l-4 border-purple-500 cursor-pointer" 
                     data-moat="ops" onclick="showMoatDetails('ops')">
                  <div class="flex items-center mb-4">
                    <i data-lucide="zap" class="w-8 h-8 mr-3 text-purple-600"></i>
                    <h4 class="font-bold text-purple-800">Foso Operacional</h4>
                  </div>
                  <p class="text-sm text-purple-700 mb-3">40% reduccin costos soporte, 30% menos reparaciones</p>
                  <div class="text-xs text-purple-600 font-semibold"> Escalabilidad sin recursos proporcionales</div>
                </div>
                
                <div class="card-premium interactive-element bg-gradient-to-br from-orange-50 to-orange-100 border-l-4 border-orange-500 cursor-pointer" 
                     data-moat="network" onclick="showMoatDetails('network')">
                  <div class="flex items-center mb-4">
                    <i data-lucide="network" class="w-8 h-8 mr-3 text-orange-600"></i>
                    <h4 class="font-bold text-orange-800">Foso de Red</h4>
                  </div>
                  <p class="text-sm text-orange-700 mb-3">Flywheel: ms datos  IA ms smart  mejor servicio</p>
                  <div class="text-xs text-orange-600 font-semibold"> Efecto red auto-reforzado</div>
                </div>
              </div>

              <!-- Detailed Moat Explanation (Hidden by default) -->
              <div id="moat-details" class="hidden bg-gray-50 p-8 rounded-lg">
                <div id="moat-content"></div>
              </div>
            </div>

            <!-- CONSOLIDATED: Por Qu Somos Imposibles de Replicar -->
            <section id="team-advantage" class="card-premium mb-12">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-slate-900 mb-6">
                        Por Qu Somos <span class="text-transparent bg-clip-text bg-gradient-to-r from-teal-600 to-blue-600">Imposibles de Replicar</span>
                    </h2>
                    <div class="w-24 h-1 bg-gradient-to-r from-teal-600 to-blue-600 mx-auto mb-6"></div>
                    <p class="text-lg text-slate-600 max-w-4xl mx-auto">
                        La combinacin nica de credibilidad de mercado, dominio tecnolgico y validacin externa que nos convierte en lderes indiscutibles del sector.
                    </p>
                </div>
                
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Market Development -->
                    <div class="card-premium border-l-orange-500">
                        <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i data-lucide="users" class="w-8 h-8 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-slate-900 mb-4 text-center">Market Development</h3>
                        <div class="text-center mb-4">
                            <div class="text-2xl font-bold text-orange-600">24K+</div>
                            <div class="text-sm text-slate-600">clientes transportistas desarrollados</div>
                        </div>
                        <p class="text-sm text-slate-600 text-center">
                            Ya desarrollamos la base de clientes que otros necesitaran aos en construir. 
                            <strong>Generacin de demanda probada.</strong>
                        </p>
                    </div>
                    
                    <!-- Tech + Capital Experience -->
                    <div class="card-premium border-l-blue-500">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i data-lucide="brain-circuit" class="w-8 h-8 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-slate-900 mb-4 text-center">Tech + Capital Experience</h3>
                        <div class="text-center mb-4">
                            <div class="text-2xl font-bold text-blue-600">3x</div>
                            <div class="text-sm text-slate-600">levantamiento capital exitoso</div>
                        </div>
                        <p class="text-sm text-slate-600 text-center">
                            3 tech leads trabajando juntos + experiencia levantando capital 3 veces. 
                            <strong>Ejecucin y fundraising comprobados.</strong>
                        </p>
                    </div>
                    
                    <!-- External Validation -->
                    <div class="card-premium border-l-green-500">
                        <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i data-lucide="award" class="w-8 h-8 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-slate-900 mb-4 text-center">External Validation</h3>
                        <div class="text-center mb-4">
                            <div class="text-2xl font-bold text-green-600">4</div>
                            <div class="text-sm text-slate-600">reconocimientos cronolgicos</div>
                        </div>
                        <p class="text-sm text-slate-600 text-center">
                            Bancomer Momentum ganador  Capital Emprendedor ganador  Facebook Entrepreneur finalista  EOY finalista. 
                            <strong>Terceros validan capacidades.</strong>
                        </p>
                    </div>
                </div>
                
                <!-- The Unfair Advantage -->
                <div class="mt-12 p-8 bg-gradient-to-br from-slate-900 to-teal-900 rounded-lg text-center text-white">
                    <h3 class="text-2xl font-bold mb-4">La Ventaja Injusta</h3>
                    <p class="text-lg max-w-4xl mx-auto leading-relaxed opacity-90">
                        Mientras otros equipos necesitan aos para entender el mercado y millones para ganar confianza, 
                        nosotros ya tenemos ambos. <strong>Esta combinacin es imposible de replicar por competidores.</strong>
                    </p>
                </div>
            </section>
            <!-- SECCIN 1: ROI COMPETITIVO (PRINCIPAL) -->
            <div class="roi-analysis-premium mb-8">
                <div class="roi-header-section">
                    <h3 class="roi-title">
                        <i data-lucide="trophy" class="title-icon"></i>
                        ROI vs Competencia: Nuestro Modelo vs Tradicional
                    </h3>
                    <div class="roi-controls-premium">
                        <div class="roi-slider-container">
                            <label for="roi-years" class="slider-label">
                                <i data-lucide="calendar" class="label-icon"></i>
                                Proyeccin a: <span id="years-label" class="slider-value">5</span> aos
                            </label>
                            <input id="roi-years" type="range" min="1" max="5" value="5" class="slider-premium">
                        </div>
                    </div>
                </div>
                
                <div class="roi-kpis-grid mb-6">
                    <div class="card-standard border-accent-green">
                        <div class="kpi-icon-container">
                            <i data-lucide="trending-up" class="kpi-icon"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">ROI vs Competencia (5 aos)</div>
                            <div id="roi-percentage" class="kpi-value">58%</div>
                            <div class="kpi-detail">ROI operativo del tramo tecnolgico</div>
                        </div>
                        <div class="kpi-status-indicator excellent"></div>
                    </div>
                    
                    <div class="card-standard border-accent-sky">
                        <div class="kpi-icon-container">
                            <i data-lucide="clock" class="kpi-icon"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Payback Period</div>
                            <div id="payback-period" class="kpi-value">24 meses</div>
                            <div class="kpi-detail">Recuperacin inversin</div>
                        </div>
                        <div class="kpi-status-indicator good"></div>
                    </div>
                    
                    <div class="card-standard border-accent-orange">
                        <div class="kpi-icon-container">
                            <i data-lucide="piggy-bank" class="kpi-icon"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Ahorro Total (5 aos)</div>
                            <div id="savings-total" class="kpi-value">$8.65M</div>
                            <div class="kpi-detail">vs operacin tradicional</div>
                        </div>
                        <div class="kpi-status-indicator excellent"></div>
                    </div>
                </div>
                
                <div class="roi-chart-container">
                    <canvas id="roiComparisonChart" role="img" aria-label="Grfico de comparacin de ROI entre nuestro modelo y competencia tradicional a lo largo de 5 aos"></canvas>
                </div>
            </div>
            <!-- TABLA ROI COMPETITIVO -->
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h4 class="font-bold text-xl mb-4 text-teal-800">ROI Competitivo: Ramp-Up Economics Detallado</h4>
                
                <div class="mb-6 p-4 bg-gradient-to-r from-teal-50 to-blue-50 rounded-lg border border-teal-200">
                    <h5 class="font-semibold text-teal-800 mb-2"> Modelo Realista: Investment  Break-Even  Competitive Advantage</h5>
                    <p class="text-sm text-teal-700">Comparacin directa: nuestro modelo IA-nativo vs financiera tradicional mismo volumen (750 unidades).</p>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ao</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Ramp Factor</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Costo Tradicional</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Costo IA-Nativo</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Ahorro Anual</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">ROI Acumulado</th>
                            </tr>
                        </thead>
                        <tbody id="competitive-roi-breakdown" class="bg-white divide-y divide-gray-200">
                            <!-- Populated by JavaScript -->
                        </tbody>
                        <tfoot class="bg-slate-50">
                          <tr>
                            <td colspan="6" class="px-6 py-4">
                              <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-md">
                                <h5 class="font-bold text-blue-800 mb-2 flex items-center gap-2">
                                  <i data-lucide="key" class="w-5 h-5"></i>
                                  Key Insight: La Ventaja Operativa
                                </h5>
                                <p class="text-sm text-blue-700">
                                  Este ROI se fundamenta en nuestra eficiencia de personal. Nuestro modelo IA-Nativo gestiona <strong>42 unidades por empleado (FTE)</strong>, un <strong>multiplicador de productividad de 2.8x</strong> frente a las 15 unidades/FTE de un modelo tradicional.
                                </p>
                              </div>
                            </td>
                          </tr>
                        </tfoot>
                    </table>
                </div>
            </div>

            <!-- SEPARADOR VISUAL -->
            <div class="my-12 border-t-2 border-dashed border-gray-300"></div>

            <!-- SECCIN 2: ROI TECH STACK (SECONDARY) -->
            <div class="bg-slate-50 p-8 rounded-lg border-l-4 border-purple-500 mb-8">
                <div class="mb-6">
                    <h3 class="text-xl font-bold text-slate-800 mb-2 flex items-center gap-2">
                        <i data-lucide="cpu" class="w-6 h-6 text-purple-600"></i>
                         Technical Deep Dive: ROI Tech Stack
                    </h3>
                    <p class="text-slate-600 text-sm">Anlisis detallado del retorno especfico de la inversin en tecnologa IA.</p>
                </div>
                
                <div class="grid md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white p-4 rounded-lg border">
                        <div class="text-2xl font-bold text-purple-600" id="tech-roi-percentage">110.3%</div>
                        <div class="text-sm text-slate-600">ROI Tech (5 aos)</div>
                        <div class="text-xs text-slate-500 mt-1">Retorno inversin IA</div>
                    </div>
                    <div class="bg-white p-4 rounded-lg border">
                        <div class="text-2xl font-bold text-purple-600" id="tech-payback-period">21 meses</div>
                        <div class="text-sm text-slate-600">Payback Tech</div>
                        <div class="text-xs text-slate-500 mt-1">Recuperacin tech stack</div>
                    </div>
                    <div class="bg-white p-4 rounded-lg border">
                        <div class="text-2xl font-bold text-purple-600" id="tech-investment-total">$4.90M</div>
                        <div class="text-sm text-slate-600">Inversin Tech</div>
                        <div class="text-xs text-slate-500 mt-1">Stack IA completo</div>
                    </div>
                </div>
                
                <div class="chart-container" style="height: 300px;">
                    <canvas id="techROIChart" role="img" aria-label="Grfico de retorno de inversin del stack tecnolgico de inteligencia artificial"></canvas>
                </div>
            </div>

            <!-- TABLA ROI TECH STACK -->
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h4 class="font-bold text-lg mb-4 text-purple-800">Tech Stack ROI: Breakdown Transparente</h4>
                
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <!-- Inversin Tech -->
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-purple-800 mb-3 flex items-center gap-2">
                            <i data-lucide="trending-down" class="w-4 h-4"></i>
                             Inversin Tech Stack
                        </h5>
                        <div class="space-y-2 text-sm" id="tech-investment-breakdown">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Ahorros Tech -->
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-green-800 mb-3 flex items-center gap-2">
                            <i data-lucide="trending-up" class="w-4 h-4"></i>
                             Ahorros Generados por IA
                        </h5>
                        <div class="space-y-2 text-sm" id="tech-savings-breakdown">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Clculo Tech ROI -->
                <div class="p-4 bg-gradient-to-r from-purple-50 to-green-50 rounded-lg border border-purple-200">
                    <div class="text-center">
                        <div class="font-semibold text-slate-700 mb-2">Clculo Tech ROI (5 aos)</div>
                        <div class="text-sm text-slate-600">
                            ($<span id="tech-cumulative-savings">10.31M</span> ahorros tech - $<span id="tech-investment-display">4.90M</span> inversin)  $4.90M  100 = <span class="font-bold text-purple-600">110.3%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- COMPETITIVE ANALYSIS SECTION -->
        <section class="py-16 bg-gradient-to-br from-slate-50 to-white">
          <div class="container mx-auto px-4">
            <div class="text-center mb-12">
              <h2 class="text-section text-slate-900 mb-6">
                Por Qu <span class="highlight-text">Nadie Ms</span> Puede Hacer Esto?
              </h2>
              <p class="text-lg md:text-xl text-slate-600 max-w-4xl mx-auto">
                Nuestros competidores ven el crdito como una transaccin. 
                <strong class="text-orange-600">Nosotros lo vemos como una asociacin.</strong>
              </p>
            </div>
            
            <div class="card-premium-enforced mb-8">
              <div class="overflow-x-auto">
                <table class="min-w-full">
                  <thead class="bg-gradient-to-r from-teal-500 to-sky-500 text-white">
                    <tr>
                      <th class="px-4 py-3 text-left font-bold">Caracterstica</th>
                      <th class="px-4 py-3 text-center font-bold">Financiera Tradicional</th>
                      <th class="px-4 py-3 text-center font-bold">Fintech Plataforma</th>
                      <th class="px-4 py-3 text-center font-bold"> Conductores</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-200">
                    <tr class="hover:bg-gray-50">
                      <td class="px-4 py-3 font-semibold text-slate-700">Datos de Riesgo</td>
                      <td class="px-4 py-3 text-center text-red-600">Estticos (Historial)</td>
                      <td class="px-4 py-3 text-center text-yellow-600">Dinmicos (Ingresos)</td>
                      <td class="px-4 py-3 text-center text-green-600 font-bold">Dinmicos + Operativos<br><span class="text-xs">(telemtica PMA, carta aval)</span></td>
                    </tr>
                    <tr class="hover:bg-gray-50">
                      <td class="px-4 py-3 font-semibold text-slate-700">Modelo Intervencin</td>
                      <td class="px-4 py-3 text-center text-red-600">Punitivo</td>
                      <td class="px-4 py-3 text-center text-yellow-600">Reactivo</td>
                      <td class="px-4 py-3 text-center text-green-600 font-bold">Proactivo + Predictivo<br><span class="text-xs">(con Nudges)</span></td>
                    </tr>
                    <tr class="hover:bg-gray-50">
                      <td class="px-4 py-3 font-semibold text-slate-700">Propuesta de Valor</td>
                      <td class="px-4 py-3 text-center text-red-600">Prstamo de Activo</td>
                      <td class="px-4 py-3 text-center text-yellow-600">Crdito Conveniente</td>
                      <td class="px-4 py-3 text-center text-green-600 font-bold">Resiliencia como Servicio</td>
                    </tr>
                    <tr class="hover:bg-gray-50">
                      <td class="px-4 py-3 font-semibold text-slate-700">Respuesta Competencia</td>
                      <td class="px-4 py-3 text-center text-red-600">Reactiva</td>
                      <td class="px-4 py-3 text-center text-yellow-600">Pricing War</td>
                      <td class="px-4 py-3 text-center text-green-600 font-bold">Domain Knowledge<br><span class="text-xs">+ Data Specificity</span></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6">
              <div class="card-premium-alert-orange">
                <h4 class="font-bold text-orange-800 mb-2 flex items-center gap-2">
                  <i data-lucide="building-2" class="w-5 h-5"></i>
                  Financieras Tradicionales
                </h4>
                <p class="text-orange-700 text-sm">Ignoran sector por "alto riesgo" percibido. Sin comprensin operativa real.</p>
              </div>
              <div class="card-premium-alert-blue">
                <h4 class="font-bold text-blue-800 mb-2 flex items-center gap-2">
                  <i data-lucide="smartphone" class="w-5 h-5"></i>
                  Fintechs Genricas
                </h4>
                <p class="text-blue-700 text-sm">Datos superficiales, sin knowledge domain. Compiten solo en pricing.</p>
              </div>
              <div class="card-premium-alert-green">
                <h4 class="font-bold text-green-800 mb-2 flex items-center gap-2">
                  <i data-lucide="shield-check" class="w-5 h-5"></i>
                  Nuestra Ventaja Injusta
                </h4>
                <p class="text-green-700 text-sm">24K+ clientes desarrollados + IA propietaria. Imposible replicar por competidores.</p>
              </div>
            </div>
          </div>
        </section>
        <!-- 2. Plan Financiero -->
        <section id="financiero" class="mb-16 scroll-mt-16">
            <h2 class="title-enhanced">
              <i data-lucide="trending-up" class="title-icon-mandatory" aria-hidden="true"></i>
              Plan Financiero "At a Glance"
            </h2>
            <p class="text-lg text-slate-600 mb-8">Un despliegue de capital no lineal para maximizar la eficiencia y mitigar riesgos.</p>
            
            <!-- PREMIUM INVESTMENT BREAKDOWN -->
            <div class="investment-breakdown-premium">
                <div class="investment-header-section">
                    <h3 class="investment-title">
                        <i data-lucide="rocket" class="title-icon"></i>
                        Una Ronda, Dos Inversiones: $10M MXN
                    </h3>
                    <div class="investment-subtitle">Capital para crear valor y capital para mitigar riesgo.</div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-gradient-to-br from-teal-50 to-cyan-50 p-8 rounded-2xl border border-teal-200">
                        <div class="text-center mb-4">
                            <div class="text-4xl font-bold text-teal-600">$7.66M MXN</div>
                            <div class="font-bold text-teal-800 mt-2">El Motor Tecnolgico y de Validacin</div>
                        </div>
                        <p class="text-sm text-teal-700 mb-4 text-center">Capital destinado a la <strong>creacin de valor</strong>. Financia los activos tangibles que generan directamente el ROI operativo.</p>
                        <ul class="space-y-3 text-sm">
                            <li class="flex items-center"><i data-lucide="cpu" class="w-5 h-5 text-teal-600 mr-3"></i><span><strong>$2.13M:</strong> Core IA (4 agentes nicos)</span></li>
                            <li class="flex items-center"><i data-lucide="truck" class="w-5 h-5 text-teal-600 mr-3"></i><span><strong>$2.63M:</strong> CAPEX Piloto (3 vagonetas)</span></li>
                            <li class="flex items-center"><i data-lucide="users" class="w-5 h-5 text-teal-600 mr-3"></i><span><strong>$1.94M:</strong> Equipo Tcnico ESOP (8 especialistas)</span></li>
                            <li class="flex items-center"><i data-lucide="database" class="w-5 h-5 text-teal-600 mr-3"></i><span><strong>$0.82M:</strong> SaaS, RAG-DNA y Pagos</span></li>
                        </ul>
                        <div class="mt-6 text-center bg-teal-100 border border-teal-300 text-teal-800 p-3 rounded-lg">
                            <span class="font-bold">Genera un ROI Operativo del 58.4%</span>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-amber-50 to-orange-50 p-8 rounded-2xl border border-amber-200">
                        <div class="text-center mb-4">
                            <div class="text-4xl font-bold text-orange-600">$2.34M MXN</div>
                            <div class="font-bold text-orange-800 mt-2">La Garanta de Ejecucin y Operacin</div>
                        </div>
                        <p class="text-sm text-orange-700 mb-4 text-center">Capital destinado a la <strong>mitigacin de riesgo</strong>. Asegura que el ROI se materialice sin contratiempos.</p>
                        <ul class="space-y-3 text-sm">
                            <li class="flex items-center"><i data-lucide="user-check" class="w-5 h-5 text-orange-600 mr-3"></i><span><strong>Liderazgo Operativo:</strong> COO/PMO dedicado</span></li>
                            <li class="flex items-center"><i data-lucide="calendar" class="w-5 h-5 text-orange-600 mr-3"></i><span><strong>Runway Extendido:</strong> 15-18 meses de pista</span></li>
                            <li class="flex items-center"><i data-lucide="shield" class="w-5 h-5 text-orange-600 mr-3"></i><span><strong>Reserva Estratgica Ampliada ($44k)</strong></span></li>
                            <li class="flex items-center"><i data-lucide="trending-up" class="w-5 h-5 text-orange-600 mr-3"></i><span><strong>Go-to-Market & Serie A Prep</strong></span></li>
                        </ul>
                         <div class="mt-6 text-center bg-orange-100 border border-orange-300 text-orange-800 p-3 rounded-lg">
                            <span class="font-bold">Asegura la ejecucin y protege la inversin</span>
                        </div>
                    </div>
                </div>
            </div>
                <div class="mt-8 bg-gradient-to-r from-teal-50 to-cyan-50 p-6 rounded-lg border border-teal-200">
                    <div class="text-center mb-6">
                        <h4 class="title-enhanced flex items-center justify-center">
                            <i data-lucide="briefcase" class="title-icon-mandatory"></i>
                            Desglose SaaS + Stack Tecnolgico ($631,000)
                        </h4>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="saas-category-card">
                            <div class="category-header">
                                <div class="category-icon-container teal-gradient">
                                    <i data-lucide="server" class="category-icon"></i>
                                </div>
                                <h5 class="category-title">SaaS Backbone ($436k)</h5>
                            </div>
                            <div class="category-items">
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="database" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">Odoo Enterprise (ERP completo)</span>
                                    <span class="item-cost">$216k</span>
                                </div>
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="brain-circuit" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">Financial AI (Xero, DocuSign)</span>
                                    <span class="item-cost">$100k</span>
                                </div>
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="shield-check" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">Seguridad SOC2 (Auth0)</span>
                                    <span class="item-cost">$60k</span>
                                </div>
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="message-square" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">Comunicacin (Slack, Google)</span>
                                    <span class="item-cost">$40k</span>
                                </div>
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="smartphone" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">Apps Mviles (Android)</span>
                                    <span class="item-cost">$20k</span>
                                </div>
                            </div>
                        </div>
                        <div class="saas-category-card">
                            <div class="category-header">
                                <div class="category-icon-container teal-gradient">
                                    <i data-lucide="credit-card" class="category-icon"></i>
                                </div>
                                <h5 class="category-title">Stack Pagos Inclusivos ($75k)</h5>
                            </div>
                            <div class="category-items">
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="banknote" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">STP Integration (SPEI directo)</span>
                                    <span class="item-cost">$35k + $8k/mes</span>
                                </div>
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="store" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">Oxxo Pay API (20,000+ tiendas)</span>
                                    <span class="item-cost">$20k + $5k/mes</span>
                                </div>
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="shield" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">PLD Compliance (anti-lavado)</span>
                                    <span class="item-cost">$12k</span>
                                </div>
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="terminal" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">Terminal POS backup</span>
                                    <span class="item-cost">$8k</span>
                                </div>
                            </div>
                            <div class="mt-3 p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200">
                                <p class="text-sm font-bold text-green-800 mb-1 flex items-center gap-1">
                                  <i data-lucide="target" class="w-3 h-3"></i>
                                  Impacto Crtico
                                </p>
                                <p class="text-xs text-green-700">70% poblacin no-bancarizada  100% accesible</p>
                                <p class="text-xs text-green-700">TAM mantiene $10.9B vs $3B solo tradicional</p>
                            </div>
                        </div>
                        <div class="saas-category-card">
                            <div class="category-header">
                                <div class="category-icon-container teal-gradient">
                                    <i data-lucide="zap" class="category-icon"></i>
                                </div>
                                <h5 class="category-title">Automation Tools ($120k)</h5>
                            </div>
                            <div class="category-items">
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="workflow" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">Make/n8n Enterprise</span>
                                    <span class="item-cost">$30k/ao</span>
                                </div>
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="message-circle" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">WhatsApp Business API</span>
                                    <span class="item-cost">$45k/ao</span>
                                </div>
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="brain" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">APIs Premium (GPT-4, Claude)</span>
                                    <span class="item-cost">$30k/ao</span>
                                </div>
                                <div class="saas-item">
                                    <div class="item-icon">
                                        <i data-lucide="activity" class="item-icon-sm"></i>
                                    </div>
                                    <span class="item-name">Monitoring & DevOps</span>
                                    <span class="item-cost">$15k</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 border-t pt-4">
                        <div class="text-center mb-4">
                            <h5 class="title-enhanced flex items-center justify-center">
                                <i data-lucide="calendar" class="title-icon-mandatory"></i>
                                Cronograma Implementacin SaaS
                            </h5>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-3 text-xs">
                            <div class="p-3 bg-white rounded border-l-4 border-teal-500">
                                <div class="font-semibold text-teal-800">Mes 1-2: Core Setup</div>
                                <div class="text-slate-600">Odoo Enterprise + Auth0 + AWS base</div>
                                <div class="text-teal-600 font-medium">Owner: DevOps + Full-Stack</div>
                            </div>
                            <div class="p-3 bg-white rounded border-l-4 border-green-500">
                                <div class="font-semibold text-green-800">Mes 2-3: Pagos Inclusivos</div>
                                <div class="text-slate-600">STP + Oxxo Pay + PLD compliance</div>
                                <div class="text-green-600 font-medium">Owner: Backend + Legal</div>
                            </div>
                            <div class="p-3 bg-white rounded border-l-4 border-purple-500">
                                <div class="font-semibold text-purple-800">Mes 3-4: Automation</div>
                                <div class="text-slate-600">Make/n8n + WhatsApp Business API</div>
                                <div class="text-purple-600 font-medium">Owner: ML Engineer + Backend</div>
                            </div>
                            <div class="p-3 bg-white rounded border-l-4 border-orange-500">
                                <div class="font-semibold text-orange-800">Mes 4+: Stack Completo</div>
                                <div class="text-slate-600">100% operativo + SOC2-ready</div>
                                <div class="text-orange-600 font-medium">Milestone: Stack empresarial operativo</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md mt-12">
                 <h3 class="font-bold text-xl mb-2 text-teal-800">Flujo de Caja y Gasto Mensual</h3>
                 <p class="text-slate-600 mb-4">Interacte con el deslizador para explorar el plan financiero mes a mes. El grfico visualiza el gasto por categora y el efectivo restante.</p>
                <div class="mb-8">
                    <label for="month-slider" class="block text-sm font-medium text-slate-700 mb-2">Mes: <span id="month-label" class="font-bold text-orange-600">1</span></label>
                    <input id="month-slider" type="range" min="1" max="12" value="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 text-center">
                    <div class="bg-slate-50 p-3 rounded-lg">
                        <p class="text-sm text-slate-500">Gasto del Mes</p>
                        <p id="kpi-gasto-mes" class="text-2xl font-bold"></p>
                    </div>
                    <div class="bg-slate-50 p-3 rounded-lg">
                        <p class="text-sm text-slate-500">Gasto Acumulado</p>
                        <p id="kpi-gasto-acumulado" class="text-2xl font-bold"></p>
                    </div>
                    <div class="bg-slate-50 p-3 rounded-lg border-2 border-teal-500">
                        <p class="text-sm text-slate-500">Efectivo Restante</p>
                        <p id="kpi-efectivo" class="text-2xl font-bold text-teal-600"></p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="financialPlanChart" role="img" aria-label="Grfico de flujo de caja mensual mostrando gastos por categora y efectivo restante"></canvas>
                </div>
                
                <div class="mt-6 p-4 bg-sky-50 border-l-4 border-sky-500 rounded-lg">
                    <h4 class="font-bold text-sky-800 mb-2 flex items-center gap-2">
                        <i data-lucide="info" class="w-5 h-5"></i>
                        Nota Clave sobre el Flujo de Caja y Runway
                    </h4>
                    <p class="text-sm text-sky-700">
                        Este grfico visualiza el <strong>gasto total de 12 meses ($9.18M)</strong>, incluyendo el costo operativo base y el nuevo liderazgo (COO/PMO). El <strong>"Efectivo Restante"</strong> al final del Mes 12 de <strong>~$819k</strong> es el capital estratgico remanente para extender el runway y financiar la preparacin para la Serie A.
                    </p>
                </div>
                
                <div id="financial-breakdown-container" class="mt-6">
                    <!-- Breakdown se insertar aqu -->
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md mt-8">
              <h3 class="text-xl font-bold mb-4 text-teal-800 flex items-center">
                <i data-lucide="calculator" class="title-icon-mandatory"></i>
                Simulador de Funding "What-If"
              </h3>
                              <p class="text-slate-600 mb-6">Qu pasa si no tienes los $10M completos? Descubre el impacto real en tu capacidad de ejecucin.</p>
              
              <div class="mb-6">
                <label for="funding-slider" class="block text-sm font-medium text-slate-700 mb-2">
                                      Funding Disponible: <span id="funding-amount" class="font-bold text-orange-600">$10M</span>
                </label>
                                  <input id="funding-slider" type="range" min="3" max="12" step="0.1" value="10" 
                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                  <div class="flex justify-between text-xs text-slate-500 mt-1">
                    <span>$3M</span>
                    <span>$12M</span>
                  </div>
              </div>
              
              <div id="funding-impact" class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Contenido generado por JS -->
              </div>
            </div>
            <!-- AGREGAR: Calculadora Interactiva de Escenarios -->
            <div class="card-premium-enforced">
              <div class="title-enhanced">
                <i data-lucide="calculator" class="title-icon-mandatory"></i>
                Calculadora Serie A 'At a Glance'
              </div>
              <p class="text-slate-600 mb-6">Proyeccin de TIR, EBITDA y valuacin para diferentes escenarios de escalamiento post-SEED.</p>

              <div class="grid md:grid-cols-4 gap-4 mb-6">
                <div>
                  <label class="block text-sm font-medium mb-2 text-slate-700">Escenario</label>
                  <select id="scenario-select" onchange="updateScenarioCalculation()"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-teal-500">
                    <option value="conservative">Steady Growth</option>
                    <option value="base" selected>Market Expansion</option>
                    <option value="optimistic">Category Leader</option>
                  </select>
                </div>
                <div class="kpi-card-premium-mandatory">
                  <div class="kpi-icon-container-mandatory">
                    <i data-lucide="trending-up" class="kpi-icon-mandatory"></i>
                  </div>
                  <div class="kpi-value-mandatory" id="scenario-roi-result">33%</div>
                  <div class="kpi-label-mandatory">TIR Equity</div>
                  <div class="kpi-status-bar-mandatory">
                    <div class="status-fill-excellent" style="width: 82.5%"></div>
                  </div>
                </div>
                <div class="kpi-card-premium-mandatory">
                  <div class="kpi-icon-container-mandatory">
                    <i data-lucide="clock" class="kpi-icon-mandatory"></i>
                  </div>
                  <div class="kpi-value-mandatory" id="scenario-payback-result">Ao 2</div>
                  <div class="kpi-label-mandatory">Cash Positive</div>
                  <div class="kpi-status-bar-mandatory">
                    <div class="status-fill-excellent" style="width: 90%"></div>
                  </div>
                </div>
                <div class="kpi-card-premium-mandatory">
                  <div class="kpi-icon-container-mandatory">
                    <i data-lucide="target" class="kpi-icon-mandatory"></i>
                  </div>
                  <div class="kpi-value-mandatory" id="scenario-value-result">$247M</div>
                  <div class="kpi-label-mandatory">Valuacin Exit</div>
                  <div class="kpi-status-bar-mandatory">
                    <div class="status-fill-excellent" style="width: 95%"></div>
                  </div>
                </div>
              </div>

              <div class="chart-container" style="height: 300px;">
                <canvas id="scenario-chart" role="img" aria-label="Grfico de escenarios de crecimiento post-SEED mostrando TIR, EBITDA y valuacin de salida"></canvas>
              </div>

              <div class="card-premium-alert-blue">
                <div class="text-center mb-4">
                  <div class="title-enhanced flex items-center justify-center">
                    <i data-lucide="info" class="title-icon-mandatory"></i>
                    Supuestos del Escenario
                  </div>
                </div>
                <div id="scenario-assumptions" class="text-sm text-slate-600 mt-3"></div>
              </div>
            </div>

            <div class="mt-12">
              <div class="card-premium-enforced">
                <div class="title-enhanced mb-6">
                  <i data-lucide="door-exit" class="title-icon-mandatory"></i>
                  Estrategia de Salida: Realizacin de Valor
                </div>
                <div class="grid md:grid-cols-3 gap-8">
                  <div class="bg-slate-50 p-6 rounded-lg border">
                    <div class="flex items-center gap-3 mb-3">
                      <i data-lucide="calendar-check" class="w-8 h-8 text-teal-600"></i>
                      <h4 class="font-bold text-xl text-slate-800">Horizonte</h4>
                    </div>
                    <p class="text-3xl font-bold text-teal-600">5-7 Aos</p>
                    <p class="text-sm text-slate-600">Periodo estndar para maximizar el mltiplo de valoracin en venture capital.</p>
                  </div>
                  <div class="bg-slate-50 p-6 rounded-lg border">
                    <div class="flex items-center gap-3 mb-3">
                      <i data-lucide="users" class="w-8 h-8 text-orange-600"></i>
                      <h4 class="font-bold text-xl text-slate-800">Compradores</h4>
                    </div>
                    <ul class="text-sm text-slate-600 list-disc list-inside space-y-1">
                      <li>Fintechs consolidadas buscando nichos.</li>
                      <li>Empresas de logstica/transporte internacional.</li>
                      <li>Banca tradicional en proceso de digitalizacin.</li>
                    </ul>
                  </div>
                  <div class="bg-slate-50 p-6 rounded-lg border">
                    <div class="flex items-center gap-3 mb-3">
                      <i data-lucide="line-chart" class="w-8 h-8 text-sky-600"></i>
                      <h4 class="font-bold text-xl text-slate-800">Mltiplo</h4>
                    </div>
                    <p class="text-3xl font-bold text-sky-600">9x - 12x EBITDA</p>
                    <p class="text-sm text-slate-600">Mltiplo estndar para empresas Mobility-Tech con IA propietaria y SaaS.</p>
                  </div>
                </div>
              </div>
            </div>


        </section>

        <!-- RISK MITIGATION SECTION -->
        <div class="card-premium mb-12">
          <h3 class="title-enhanced">
            <i data-lucide="shield" class="title-icon-mandatory"></i>
            Riesgos y Mitigacin: Nuestro Modelo como Escudo
          </h3>
          <p class="text-slate-600 mb-6">Hemos diseado nuestro negocio para convertir los riesgos tradicionales del sector en fortalezas competitivas.</p>
          
          <div class="grid md:grid-cols-2 gap-6">
            <div class="space-y-4">
              <div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                <h4 class="font-bold text-red-800 mb-2"> Riesgo: Alta Morosidad (>8%)</h4>
                <p class="text-red-700 text-sm mb-2"><strong>Mitigacin:</strong> HASE + PIA actan ANTES de la mora. No reaccionamos, prevenimos.</p>
                <div class="text-xs text-red-600 font-semibold"> Proyeccin: 50% reduccin incumplimientos</div>
              </div>
              
              <div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                <h4 class="font-bold text-yellow-800 mb-2"> Riesgo: Abuso de Flexibilidad</h4>
                <p class="text-yellow-700 text-sm mb-2"><strong>Mitigacin:</strong> TIR Termostato automtico protege rentabilidad global.</p>
                <div class="text-xs text-yellow-600 font-semibold"> Validado por Stress Testing de Cartera</div>
              </div>
            </div>
            
            <div class="space-y-4">
              <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg">
                <h4 class="font-bold text-blue-800 mb-2"> Riesgo: Dependencia Datos Externos</h4>
                <p class="text-blue-700 text-sm mb-2"><strong>Mitigacin:</strong> Convertimos dependencia en foso via alianzas exclusivas GNV.</p>
                <div class="text-xs text-blue-600 font-semibold"> Barrera entrada para competidores</div>
              </div>
              
              <div class="p-4 bg-green-50 border-l-4 border-green-500 rounded-lg">
                <h4 class="font-bold text-green-800 mb-2"> Riesgo: Transicin Energtica</h4>
                <p class="text-green-700 text-sm mb-2"><strong>Mitigacin:</strong> Modelo agnstico a combustible + partnerships elctricos.</p>
                <div class="text-xs text-green-600 font-semibold"> Diversificacin tecnolgica progresiva</div>
              </div>
            </div>
          </div>
        </div>

        <!-- 3. Plan de Desarrollo Tecnolgico -->
        <section id="tecnologia" class="mb-16 scroll-mt-16">
            <h2 class="title-enhanced">
              <i data-lucide="brain-circuit" class="title-icon-mandatory" aria-hidden="true"></i>
              Nuestro Ecosistema de IA: <span class="highlight-text">El Motor detrs de Proteccin Conductores</span>
            </h2>
            <p class="text-lg text-slate-600 mb-8">No es un solo algoritmo, es la sinergia de un escuadrn de agentes especializados que trabajan en conjunto para hacer posible la "Resiliencia como Servicio".</p>
            
            <div id="agentes-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                <!-- Los agentes se insertarn aqu por JS -->
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="font-bold text-xl mb-4 text-teal-800">Arquitectura y Pipeline de Datos</h3>
                <div id="arquitectura-datos-container">
                    <!-- La arquitectura de datos se insertar aqu por JS -->
                </div>
            </div>
        </section>

        <!-- La Matemtica de Nuestra Ventaja -->
        <section id="matematica-ventaja" class="mb-16 scroll-mt-16">
            <h2 class="text-5xl md:text-6xl font-black text-slate-900 mb-6 tracking-tighter text-center">
                La Matemtica de Nuestra Ventaja: <span class="highlight-text">Empata Rentable por Diseo</span>
            </h2>
            <p class="text-lg text-slate-600 mb-12 max-w-4xl mx-auto text-center leading-relaxed">
                Nuestra flexibilidad no es un costo, es un activo cuantificable. "Proteccin Conductores" es el mecanismo que nos permite ser empticos y rentables a la vez.
            </p>
            
            <div class="grid md:grid-cols-2 gap-8 mb-8">
                <div class="card-standard border-accent-green">
                    <div class="flex items-center mb-4">
                        <i data-lucide="trending-down" class="w-8 h-8 text-emerald-600 mr-3"></i>
                        <h3 class="font-bold text-xl text-slate-800">Reduccin de P_default</h3>
                    </div>
                    <p class="text-slate-700 mb-4">
                        Nuestra intervencin proactiva es un factor matemtico que reduce drsticamente la probabilidad de incumplimiento. La integracin con "Proteccin Conductores" permite una <strong class="text-slate-900">reduccin de los incumplimientos del 50% al 67.5%</strong>.
                    </p>
                    <div class="bg-emerald-50 p-4 rounded-lg border border-emerald-200">
                        <div class="text-2xl font-bold text-emerald-600 mb-1">50-67.5%</div>
                        <div class="text-sm text-emerald-700">Reduccin de defaults vs modelo tradicional</div>
                    </div>
                </div>
                
                <div class="card-standard border-accent-sky">
                    <div class="flex items-center mb-4">
                        <i data-lucide="thermometer" class="w-8 h-8 text-blue-600 mr-3"></i>
                        <h3 class="font-bold text-xl text-slate-800">Algoritmo de Equilibrio de TIR</h3>
                    </div>
                    <p class="text-slate-700 mb-4">
                        El "Algoritmo de Equilibrio de TIR" funciona como un termostato financiero, ajustando los planes de pago para asegurar que cada crdito mantenga su rentabilidad proyectada, incluso despus de activar "Proteccin Conductores".
                    </p>
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <div class="text-2xl font-bold text-blue-600 mb-1">TIR Intacta</div>
                        <div class="text-sm text-blue-700">Rentabilidad protegida automticamente</div>
                    </div>
                </div>
            </div>
            
            <div class="bg-gradient-to-br from-slate-900 to-slate-800 p-8 rounded-lg text-center text-white">
                <h3 class="text-2xl font-bold mb-4">El Resultado: Empata = Rentabilidad</h3>
                <p class="text-lg max-w-4xl mx-auto leading-relaxed opacity-90">
                    Mientras otros ven la flexibilidad como un costo, nosotros la hemos convertido en nuestra ventaja competitiva ms defendible. 
                    <strong>Proteccin Conductores no es caridad, es matemtica superior.</strong>
                </p>
            </div>
        </section>
        <!-- 3.4. Customer Journey: Del Problema a la Solucin -->
        <section id="customer-journey" class="mb-16 scroll-mt-16">
            <h2 class="title-enhanced">
              <i data-lucide="phone" class="title-icon-mandatory"></i>
              Customer Journey: Del Problema a la Solucin "At a Glance"
            </h2>
            <p class="text-lg text-slate-600 mb-8">El dolor real de 15,000 transportistas mexicanos convertido en oportunidad de negocio validada.</p>
            
            <div class="bg-gradient-to-br from-orange-50 to-red-50 p-8 rounded-lg mb-8 border border-orange-200">
                <div class="flex items-center mb-6">
                    <div class="w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center mr-4">
                      <i data-lucide="phone" class="w-8 h-8 text-white"></i>
                    </div>
                    <h3 class="font-bold text-2xl text-orange-800">La Realidad del Transportista Mexicano</h3>
                </div>
                
                <div class="grid md:grid-cols-4 gap-4">
                    <div class="card-standard border-accent-orange text-center">
                        <div class="w-12 h-12 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-3">
                            <span class="text-white font-bold">1</span>
                        </div>
                        <h5 class="font-bold text-red-800 mb-2"> Llamada Desesperada</h5>
                        <p class="text-sm text-red-700">"Mi vagoneta se descompuso, no tengo dinero, mi familia depende de esto"</p>
                    </div>
                    
                    <div class="card-standard border-accent-orange text-center">
                        <div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-3">
                            <span class="text-white font-bold">2</span>
                        </div>
                        <h5 class="font-bold text-yellow-800 mb-2"> Prestamista Predatorio</h5>
                        <p class="text-sm text-yellow-700">"Te presto, pero a 60% anual + garantas imposibles + hostigamiento"</p>
                    </div>
                    
                    <div class="card-standard border-accent-orange text-center">
                        <div class="w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-3">
                            <span class="text-white font-bold">3</span>
                        </div>
                        <h5 class="font-bold text-purple-800 mb-2"> Ciclo de Deuda</h5>
                        <p class="text-sm text-purple-700">"Cada reparacin me endeuda ms. Mi vagoneta vale menos que lo que debo"</p>
                    </div>
                    
                    <div class="card-standard border-accent-orange text-center">
                        <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-3">
                            <span class="text-white font-bold">4</span>
                        </div>
                        <h5 class="font-bold text-green-800 mb-2"> Conductores Llega</h5>
                        <p class="text-sm text-green-700">"Socios, no acreedores. Flexibilidad real + IA que me cuida"</p>
                    </div>
                </div>
                
                <div class="mt-6 p-4 bg-teal-50 border border-teal-200 rounded-lg">
                    <div class="flex items-center gap-3">
                        <i data-lucide="target" class="w-6 h-6 text-teal-600"></i>
                        <div>
                            <h5 class="font-bold text-teal-800">Oportunidad de Mercado Real</h5>
                            <p class="text-sm text-teal-700">15,000 transportistas atrapados = $1.1B MXN mercado direccionable</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

<section id="mvp-validacion" class="mb-16 scroll-mt-16">
  <div class="mb-12">
    <h2 class="title-enhanced">
      <i data-lucide="compass" class="title-icon-mandatory"></i>
      MVP: Nuestro Primer Hito con Capital SEED
    </h2>
    <p class="text-lg text-slate-600 mt-4">
      Este no es un experimento, es un plan quirrgico. El siguiente desglose detalla cmo validaremos nuestra tesis central en campo con el "Proyecto Higer 17", nuestro primer objetivo post-inversin.
    </p>
    <div class="mt-6 p-6 card-premium-alert-orange">
      <h3 class="font-bold text-xl text-orange-800 mb-2">Objetivo Central del MVP:</h3>
      <p class="text-orange-700">Reducir la friccin postventa mediante la automatizacin del soporte tcnico para 17 vagonetas operativas, integrando OCR, IA conversacional y flujos API escalables para demostrar la viabilidad y el valor de nuestro ecosistema tecnolgico.</p>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
    <div class="lg:col-span-2 space-y-8">
      <div class="card-premium-enforced">
        <h3 class="title-enhanced mb-4">
          <i data-lucide="cpu" class="title-icon-mandatory"></i>
          Stack Tecnolgico del MVP
        </h3>
        <div class="space-y-3">
          <div class="saas-item"><div class="item-icon !bg-purple-600"><i data-lucide="brain-circuit" class="item-icon-sm"></i></div><span class="item-name"><strong>GPT-4 + Vision:</strong> Diagnstico visual de fallas (placas, partes).</span></div>
          <div class="saas-item"><div class="item-icon !bg-blue-600"><i data-lucide="workflow" class="item-icon-sm"></i></div><span class="item-name"><strong>Flowise (Low-Code):</strong> Orquestacin de agentes y lgica condicional.</span></div>
          <div class="saas-item"><div class="item-icon !bg-green-600"><i data-lucide="webhook" class="item-icon-sm"></i></div><span class="item-name"><strong>Make (Integraciones):</strong> Automatizacin de workflows entre APIs.</span></div>
          <div class="saas-item"><div class="item-icon !bg-green-500"><i data-lucide="message-circle" class="item-icon-sm"></i></div><span class="item-name"><strong>WhatsApp Business API:</strong> Canal nativo de interaccin con conductores.</span></div>
          <div class="saas-item"><div class="item-icon !bg-sky-500"><i data-lucide="database" class="item-icon-sm"></i></div><span class="item-name"><strong>Vector del SSOT:</strong> Base de conocimiento semntico embebida.</span></div>
        </div>
      </div>
      
      <div class="card-premium-enforced">
        <h3 class="title-enhanced mb-4">
          <i data-lucide="archive" class="title-icon-mandatory"></i>
          Presupuesto y Horas Asignadas
        </h3>
        <table class="w-full text-sm">
          <thead class="border-b-2 border-slate-200">
            <tr>
              <th class="text-left font-semibold text-slate-700 pb-2">Concepto</th>
              <th class="text-right font-semibold text-slate-700 pb-2">Horas</th>
              <th class="text-right font-semibold text-slate-700 pb-2">Costo (MXN)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-slate-200"><td class="py-2 text-slate-600">Diseo + Arquitectura</td><td class="text-right py-2 text-slate-600">60</td><td class="text-right py-2 text-slate-600">$43,125</td></tr>
            <tr class="border-b border-slate-200"><td class="py-2 text-slate-600">IA Conversacional</td><td class="text-right py-2 text-slate-600">100</td><td class="text-right py-2 text-slate-600">$71,875</td></tr>
            <tr class="border-b border-slate-200"><td class="py-2 text-slate-600">OCR + Lector Visual</td><td class="text-right py-2 text-slate-600">80</td><td class="text-right py-2 text-slate-600">$57,500</td></tr>
            <tr class="border-b border-slate-200"><td class="py-2 text-slate-600">Integraciones API</td><td class="text-right py-2 text-slate-600">90</td><td class="text-right py-2 text-slate-600">$64,688</td></tr>
            <tr class="border-b border-slate-200"><td class="py-2 text-slate-600">QA + Validacin en Campo</td><td class="text-right py-2 text-slate-600">150</td><td class="text-right py-2 text-slate-600">$107,812</td></tr>
          </tbody>
          <tfoot class="border-t-2 border-slate-300">
            <tr>
              <td class="text-left font-bold text-slate-800 pt-2">TOTAL</td>
              <td class="text-right font-bold text-slate-800 pt-2">480h</td>
              <td class="text-right font-bold text-slate-800 pt-2">$345,000</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>

    <div class="lg:col-span-3 space-y-8">
      <div class="card-premium-enforced">
        <h3 class="title-enhanced mb-4">
          <i data-lucide="check-check" class="title-icon-mandatory"></i>
          KPIs de xito y Criterios de Validacin
        </h3>
        <p class="text-slate-600 text-sm mb-4">Mediremos el xito del piloto Higer 17 con las siguientes mtricas, basadas en proyecciones sobre datos reales:</p>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="mvp-metric-enhanced"><div class="metric-icon-container"><i data-lucide="percent" class="metric-icon"></i></div><div class="metric-value-large">>70%</div><div class="metric-label">Consultas Automatizadas</div><div class="metric-detail">Objetivo basado en anlisis de logs de soporte.</div></div>
            <div class="mvp-metric-enhanced"><div class="metric-icon-container"><i data-lucide="scan-text" class="metric-icon"></i></div><div class="metric-value-large">>95%</div><div class="metric-label">Precisin OCR</div><div class="metric-detail">Validado contra documentos y fotos reales.</div></div>
            <div class="mvp-metric-enhanced"><div class="metric-icon-container"><i data-lucide="arrow-left-right" class="metric-icon"></i></div><div class="metric-value-large">>15%</div><div class="metric-label">Tasa de Defleccin</div><div class="metric-detail">Consultas resueltas sin intervencin humana.</div></div>
            <div class="mvp-metric-enhanced"><div class="metric-icon-container"><i data-lucide="timer" class="metric-icon"></i></div><div class="metric-value-large"><2 seg</div><div class="metric-label">Tiempo de Respuesta IA</div><div class="metric-detail">Medido en entorno de produccin controlada.</div></div>
        </div>
      </div>
      
      <div class="card-premium-enforced">
        <h3 class="title-enhanced mb-4">
          <i data-lucide="arrow-up-right" class="title-icon-mandatory"></i>
          Impacto y Trazabilidad del ROI
        </h3>
        <p class="text-slate-600 text-sm mb-4">Este MVP no es un gasto aislado. Su presupuesto y resultados se integran directamente en el modelo financiero global:</p>
        <div class="space-y-4">
          <div class="bg-slate-100 p-4 rounded-lg border-l-4 border-purple-500">
            <p class="font-semibold text-purple-800">Inversin Trazable</p>
            <p class="text-sm text-slate-700">Los <strong>$345,000 MXN</strong> de este MVP son una partida dentro de la inversin de <strong>$2.13M MXN en Core IA</strong>, financiando el primer agente clave.</p>
          </div>
          <div class="bg-slate-100 p-4 rounded-lg border-l-4 border-green-500">
            <p class="font-semibold text-green-800">Retorno Cuantificable</p>
            <p class="text-sm text-slate-700">El xito de este mdulo contribuye directamente a los ahorros anuales proyectados de <strong>$475k en "Soporte Automatizado"</strong> y <strong>$360k en "Optimizacin Operativa"</strong>, justificando su ROI.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

        <!-- 4. Plan de Ejecucin y Compliance -->
        <section id="ejecucion" class="mb-16 scroll-mt-16">
            <h2 class="title-enhanced">
              <i data-lucide="users" class="title-icon-mandatory"></i>
              Plan de Ejecucin "At a Glance"
            </h2>
            <p class="text-lg text-slate-600 mb-8">Cronograma semanal, hitos de negocio y timeline regulatorio.</p>

            <!-- AGREGAR: Phase Filter Section -->
            <div class="mb-8 text-center">
              <h3 class="text-lg font-semibold mb-4">Filtrar por Fase del Plan</h3>
              <div class="flex justify-center space-x-4 flex-wrap" role="group" aria-label="Filtros de fase del proyecto">
                <button class="phase-btn-premium-mandatory active" data-phase="all" onclick="filterByPhase('all')" aria-label="Mostrar todas las fases del proyecto">
                  <i data-lucide="layers" class="btn-icon-mandatory" aria-hidden="true"></i>
                  <span>Todas las Fases</span>
                </button>
                <button class="phase-btn-premium-mandatory" data-phase="foundation" onclick="filterByPhase('foundation')" aria-label="Filtrar por fase de fundacin, meses 1 a 3">
                  <i data-lucide="foundation" class="btn-icon-mandatory" aria-hidden="true"></i>
                  <span class="phase-indicator-mandatory blue" aria-hidden="true"></span>
                  <span>Fundacin (M1-3)</span>
                </button>
                <button class="phase-btn-premium-mandatory" data-phase="development" onclick="filterByPhase('development')" aria-label="Filtrar por fase de desarrollo, meses 4 a 6">
                  <i data-lucide="code" class="btn-icon-mandatory" aria-hidden="true"></i>
                  <span class="phase-indicator-mandatory green" aria-hidden="true"></span>
                  <span>Desarrollo (M4-6)</span>
                </button>
                <button class="phase-btn-premium-mandatory" data-phase="validation" onclick="filterByPhase('validation')" aria-label="Filtrar por fase de validacin, meses 7 a 9">
                  <i data-lucide="check-circle" class="btn-icon-mandatory" aria-hidden="true"></i>
                  <span class="phase-indicator-mandatory purple" aria-hidden="true"></span>
                  <span>Validacin (M7-9)</span>
                </button>
                <button class="phase-btn-premium-mandatory" data-phase="traction" onclick="filterByPhase('traction')" aria-label="Filtrar por fase de traccin, meses 10 a 12">
                  <i data-lucide="rocket" class="btn-icon-mandatory" aria-hidden="true"></i>
                  <span class="phase-indicator-mandatory orange" aria-hidden="true"></span>
                  <span>Traccin (M10-12)</span>
                </button>
              </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-xl text-teal-800">Roadmap de Desarrollo</h3>
                    <div class="flex bg-gray-100 rounded-lg p-1">
                        <button id="vista-ejecutiva-btn" class="px-4 py-2 text-sm font-medium rounded-md bg-teal-600 text-white transition-all flex items-center gap-2">
                            <i data-lucide="target" class="w-4 h-4"></i>
                            Vista Ejecutiva
                        </button>
                        <button id="vista-operacional-btn" class="px-4 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-gray-900 transition-all flex items-center gap-2">
                            <i data-lucide="wrench" class="w-4 h-4"></i>
                            Vista Operacional
                        </button>
                    </div>
                </div>
                
                <!-- VISTA EJECUTIVA (Nueva) -->
                <div id="executive-view-content" class="block">
                    <!-- KPI Cards por Agente -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border-l-4 border-blue-500">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-bold text-blue-800">HASE</h4>
                                <span class="text-blue-600"></span>
                            </div>
                            <p class="text-2xl font-bold text-blue-600">$710K</p>
                            <p class="text-sm text-blue-700">Mes 1-6  Target: >90% AUC</p>
                            <div class="mt-2 text-xs text-blue-600">Social Scoring nico</div>
                        </div>
                        <div class="bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border-l-4 border-green-500">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-bold text-green-800">PIA</h4>
                                <span class="text-green-600"></span>
                            </div>
                            <p class="text-2xl font-bold text-green-600">$475K</p>
                            <p class="text-sm text-green-700">Mes 2-5  Target: <2min SLA</p>
                            <div class="mt-2 text-xs text-green-600">WhatsApp + LLMs empticos</div>
                        </div>
                        <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border-l-4 border-purple-500">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-bold text-purple-800">Super-PMA</h4>
                                <i data-lucide="wrench" class="w-5 h-5 text-purple-600"></i>
                            </div>
                            <p class="text-2xl font-bold text-purple-600">$600K</p>
                            <p class="text-sm text-purple-700">Mes 3-8  Target: >85% precisin</p>
                            <div class="mt-2 text-xs text-purple-600">Marketplace + Kafka streaming</div>
                        </div>
                        <div class="bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg border-l-4 border-orange-500">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-bold text-orange-800">Asistente</h4>
                                <i data-lucide="bot" class="w-5 h-5 text-orange-600"></i>
                            </div>
                            <p class="text-2xl font-bold text-orange-600">$345K</p>
                            <p class="text-sm text-orange-700">Mes 4-8  Target: 70% automation</p>
                            <div class="mt-2 text-xs text-orange-600">GPT-4 Vision + Flowise + Make/n8n</div>
                        </div>
                    </div>
                    <!-- Gantt Visual Simple -->
                    <div class="bg-slate-50 p-6 rounded-lg mb-6">
                        <h4 class="font-semibold text-slate-800 mb-4">Timeline & Dependencies</h4>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <div class="w-20 text-xs font-medium text-blue-800">HASE</div>
                                <div class="flex-1 bg-gray-200 rounded-full h-3 mx-2">
                                    <div class="bg-blue-500 h-3 rounded-full" style="width: 50%; margin-left: 0%;"></div>
                                </div>
                                <div class="text-xs text-slate-600">Mes 1-6</div>
                            </div>
                            <div class="flex items-center">
                                <div class="w-20 text-xs font-medium text-green-800">PIA</div>
                                <div class="flex-1 bg-gray-200 rounded-full h-3 mx-2">
                                    <div class="bg-green-500 h-3 rounded-full" style="width: 33%; margin-left: 16.67%;"></div>
                                </div>
                                <div class="text-xs text-slate-600">Mes 2-5</div>
                            </div>
                            <div class="flex items-center">
                                <div class="w-20 text-xs font-medium text-purple-800">Super-PMA</div>
                                <div class="flex-1 bg-gray-200 rounded-full h-3 mx-2">
                                    <div class="bg-purple-500 h-3 rounded-full" style="width: 50%; margin-left: 25%;"></div>
                                </div>
                                <div class="text-xs text-slate-600">Mes 3-8</div>
                            </div>
                            <div class="flex items-center">
                                <div class="w-20 text-xs font-medium text-orange-800">Asistente</div>
                                <div class="flex-1 bg-gray-200 rounded-full h-3 mx-2">
                                    <div class="bg-orange-500 h-3 rounded-full" style="width: 41.67%; margin-left: 33.33%;"></div>
                                </div>
                                <div class="text-xs text-slate-600">Mes 4-8</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Critical Path -->
                    <div class="bg-gradient-to-r from-amber-50 to-red-50 p-4 rounded-lg border border-amber-200">
                        <h4 class="font-bold text-amber-800 mb-2 flex items-center gap-2">
                          <i data-lucide="alert-triangle" class="w-4 h-4"></i>
                          Critical Path hacia Serie A
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-3 text-sm">
                            <div class="text-center">
                                <div class="font-semibold text-red-700">Mes 4</div>
                                <div class="text-red-600">REPUVE Legal</div>
                            </div>
                            <div class="text-center">
                                <div class="font-semibold text-orange-700">Mes 6</div>
                                <div class="text-orange-600">1ra Vagoneta</div>
                            </div>
                            <div class="text-center">
                                <div class="font-semibold text-blue-700">Mes 9</div>
                                <div class="text-blue-600">Validacin Piloto</div>
                            </div>
                            <div class="text-center">
                                <div class="font-semibold text-green-700">Mes 12</div>
                                <div class="text-green-600">Serie A $45M</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- VISTA OPERACIONAL (Mover cronograma actual aqu) -->
                <div id="operational-view-content" class="hidden">
                    <div id="weekly-timeline-container">
                        <!-- El cronograma semanal actual se renderizar aqu -->
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-r from-teal-50 to-blue-50 p-6 rounded-lg mt-8">
              <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
                Tracker de Gasto vs Progreso
              </h3>
              <p class="text-slate-600 mb-6">Seguimiento real del burn rate de desarrollo y progreso tcnico mes a mes.</p>
              
              <div class="mb-6">
                <label for="execution-month" class="block text-sm font-medium text-slate-700 mb-2">
                  Mes Actual: <span id="current-month" class="font-bold text-teal-600">6</span>
                </label>
                <input id="execution-month" type="range" min="1" max="12" value="6" 
                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                <div class="flex justify-between text-xs text-slate-500 mt-1">
                  <span>Mes 1</span>
                  <span>Mes 12</span>
                </div>
              </div>
              
              <div id="execution-summary" class="grid md:grid-cols-4 gap-4 mb-6">
                <!-- KPIs generados por JS -->
              </div>
              
              <div id="progress-details" class="grid md:grid-cols-2 gap-6">
                <!-- Detalles generados por JS -->
              </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md mb-12">
                <h3 class="font-bold text-xl mb-4 text-teal-800">Hitos y KPIs Clave (Business-Tcnico)</h3>
                <div id="kpis-correlacionados-container" class="space-y-6">
                    <!-- Los KPIs se insertarn aqu por JS -->
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="font-bold text-xl mb-4 text-teal-800">Timeline Regulatorio y de Compliance Vehicular</h3>
                <div id="compliance-container" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- El timeline de compliance se insertar aqu por JS -->
                </div>
            </div>
        </section>

        <!-- 5. Plan de Equipo -->
        <section id="equipo" class="mb-16 scroll-mt-16">
            <h2 class="title-enhanced">
              <i data-lucide="star" class="title-icon-mandatory"></i>
              Plan de Equipo "At a Glance"
            </h2>
            <p class="text-lg text-slate-600 mb-8">La ventaja competitiva ms defendible y el principal mitigador del riesgo de ejecucin.</p>
            
            <div class="card-premium-alert-orange mb-8">
                <h3 class="font-bold text-xl text-orange-800 mb-2">Liderazgo Dual: La Garanta de Ejecucin</h3>
                <p class="text-orange-700">Mitigamos el principal riesgo de una inversin semilla con una estructura de liderazgo dual: el <strong>Visionario (CEO)</strong> que define el norte estratgico, y el <strong>Ejecutor (COO/PMO)</strong>, financiado por el tramo de $2.34M, cuya nica misin es garantizar que este plan se cumpla semana a semana. Abajo se detalla el ncleo tcnico que har posible la visin.</p>
            </div>

            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="font-bold text-xl mb-4 text-teal-800">La Piedra Angular: El Ncleo ESOP</h3>
                    <div class="space-y-4 text-slate-700">
                        <p>La certeza de ejecucin recae sobre un equipo pre-ensamblado de miembros tcnicos senior con qumica y velocidad probadas.</p>
                        <blockquote class="border-l-4 border-orange-500 pl-4 italic">
                            Su compensacin es un modelo hbrido estratgico: salarios base competitivos ms un <strong>10% de equity</strong> colectivo, creando <strong>"golden handcuffs"</strong> que eliminan el riesgo de fuga de talento.
                        </blockquote>
                        <p>Para los inversionistas, esto no es un plan de RRHH, es la garanta de que el equipo que construye el valor permanecer para entregarlo. Es una asignacin de capital sofisticada que dirige el equity a los creadores de IP a largo plazo.</p>
                    </div>
                </div>
                 <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="font-bold text-xl mb-4 text-teal-800">Asignacin Detallada por Persona/Mes</h3>
                    <p class="text-slate-600 mb-4">Matriz completa mostrando la asignacin de cada rol a los hitos del plan maestro.</p>
                    
                    <div class="mb-4">
                        <label for="role-filter" class="block text-sm font-medium text-gray-700">Filtrar por Rol:</label>
                        <select id="role-filter" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md">
                            <option value="all">Todos los Roles</option>
                        </select>
                    </div>
                    <div class="overflow-x-auto">
                        <table id="hr-table" class="min-w-full divide-y divide-gray-200" data-ref="team-cost">
                            <thead class="bg-gray-50">
                                <!-- Cabecera generada por JS -->
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <!-- Filas generadas por JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>



    </main>
    
    <section id="ecosistema-en-accion" class="py-16 bg-slate-50">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl md:text-5xl font-bold text-slate-900 mb-4">El Ecosistema en Accin</h2>
            <p class="text-lg text-slate-600 mb-12 max-w-3xl mx-auto">
                Ofrecemos un <strong>cockpit en tiempo real</strong> para que dueos y flotas puedan monitorear ingresos, alertas de mantenimiento, cumplimiento y condiciones financieras de cada unidad.
            </p>
            <p class="text-lg text-slate-600 mb-12 max-w-3xl mx-auto">De la Data al Conductor: As se ve nuestra ventaja competitiva en operacin.</p>
            <div id="wireframes-container" class="space-y-16">
                
                <div class="text-left">
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold text-teal-700">1. HASE Dashboard: Control y Visibilidad Total</h3>
                        <p class="text-md text-slate-600">La vista de 360 que nos permite gestionar el riesgo de la cartera en tiempo real, optimizar la flota y proteger la inversin. Escalabilidad por diseo.</p>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center bg-white p-6 rounded-xl shadow-lg">
                        <img src="https://res.cloudinary.com/dytmjjb9l/image/upload/v1754416767/Visily-Export_26-06-2025_07-31-page-00001_evppmv.jpg" alt="Dashboard principal de HASE mostrando KPIs como Tasa de Morosidad, TIR de Cartera y Consumo de GNV." class="rounded-lg shadow-md w-full">
                        <img src="https://res.cloudinary.com/dytmjjb9l/image/upload/v1754416769/Visily-Export_26-06-2025_07-31-page-00002_rmymwl.jpg" alt="Vista detallada de un vehculo en el sistema FleetTrack Pro con historial de consumo y alertas crticas." class="rounded-lg shadow-md w-full">
                    </div>
                </div>

                <div class="text-left">
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold text-purple-700">2. SuperApp Conductor: Empoderamiento y Lealtad</h3>
                        <p class="text-md text-slate-600">La interfaz que transforma a los conductores en socios. Visualizan sus ahorros, gestionan sus pagos y acceden a "Proteccin Rodando", creando un foso competitivo basado en la confianza.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center bg-white p-6 rounded-xl shadow-lg">
                        <img src="https://res.cloudinary.com/dytmjjb9l/image/upload/v1754416767/Visily-Export_26-06-2025_07-31-page-00003_ba6yl5.jpg" alt="Pantalla principal de la SuperApp mostrando saldo, ahorro y el botn para activar Proteccin Rodando." class="rounded-xl shadow-md mx-auto" style="max-height: 550px;">
                        <img src="https://res.cloudinary.com/dytmjjb9l/image/upload/v1754416769/Visily-Export_26-06-2025_07-31-page-00004_monhtz.jpg" alt="Pantalla de la SuperApp 'Rodando a Gas' que muestra la recaudacin del da, el ahorro de GNV y alertas de mantenimiento." class="rounded-xl shadow-md mx-auto" style="max-height: 550px;">
                    </div>
                </div>

                <div class="text-left">
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold text-orange-700">3. PMA: La IA Aplicada que Ahorra Dinero</h3>
                        <p class="text-md text-slate-600">Nuestra tecnologa en accin. El conductor sube una foto y recibe un pre-diagnstico basado en nuestra base de conocimiento (RAG-DNA), reduciendo costos y tiempos de inactividad.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg flex justify-center">
                        <img src="https://res.cloudinary.com/dytmjjb9l/image/upload/v1754416768/Visily-Export_26-06-2025_07-31-page-00005_mynsl6.jpg" alt="Interfaz del Diagnstico Inteligente donde un usuario sube una foto de una falla y la IA ofrece un posible diagnstico y siguientes pasos." class="rounded-xl shadow-md" style="max-height: 550px;">
                    </div>
                </div>

            </div>
        </div>
    </section>
    
    <!-- ENHANCED: Crisis = Ventana Histrica nica Section -->
    <section id="video-cierre" class="py-16 relative overflow-hidden">
        <!-- Premium background -->
        <div class="absolute inset-0 bg-gradient-to-br from-slate-900 via-teal-900 to-slate-900"></div>
        
        <div class="container mx-auto px-4 text-center relative z-10">
            <!-- Crisis = Oportunidad Header -->
            <div class="mb-16">
                <div class="inline-flex items-center gap-3 px-6 py-3 bg-red-500/20 border border-red-400 rounded-2xl mb-6">
                    <i data-lucide="zap" class="w-5 h-5 text-red-400"></i>
                    <span class="text-red-200 font-bold text-sm tracking-wide">TIMING CRTICO</span>
                </div>
                
                <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">
                    Crisis = <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-red-500">Ventana Histrica nica</span>
                </h2>
                <div class="w-24 h-1 bg-gradient-to-r from-orange-400 to-red-500 mx-auto mb-8"></div>
                
                <p class="text-lg md:text-xl text-teal-100 max-w-4xl mx-auto">
                    Nuestros 15+ aos de relaciones con transportistas nos dan una ventana de oportunidad nica. La tecnologa IA ya est madura. Nuestro plan de ejecucin es quirrgico. Este es el momento de construir.
                </p>
            </div>

            <!-- Crisis Points Grid -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
                <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-6 hover:bg-white/15 transition-all duration-300">
                    <div class="text-3xl mb-4"></div>
                    <h3 class="text-white font-bold mb-2">Post-COVID Crisis</h3>
                    <p class="text-teal-200 text-sm">Financing gaps creando renovacin desesperada NOW</p>
                </div>
                
                <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-6 hover:bg-white/15 transition-all duration-300">
                    <div class="text-3xl mb-4"></div>
                    <h3 class="text-white font-bold mb-2">Infraestructura Idle</h3>
                    <p class="text-teal-200 text-sm">85% capacidad GNV subutilizada = oportunidad masiva</p>
                </div>
                
                <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-6 hover:bg-white/15 transition-all duration-300">
                    <div class="text-3xl mb-4"></div>
                    <h3 class="text-white font-bold mb-2">Mercado Educated</h3>
                    <p class="text-teal-200 text-sm">Ya saben GNV, solo necesitan financing humano</p>
                </div>
                
                <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-6 hover:bg-white/15 transition-all duration-300">
                    <div class="text-3xl mb-4"></div>
                    <h3 class="text-white font-bold mb-2">Predatory Gap</h3>
                    <p class="text-teal-200 text-sm">Otras Financieras crearon el pain, nosotros la solucin</p>
                </div>
            </div>

            <!-- Video Section with Context (TU CONTENIDO ACTUAL) -->
            <div class="max-w-6xl mx-auto mb-16">
                <div class="bg-gradient-to-br from-black/40 to-slate-900/40 p-8 rounded-2xl shadow-2xl backdrop-filter backdrop-blur-sm border border-white/10">
                    <div class="text-center mb-8">
                        <h3 class="text-3xl font-bold text-white mb-4 flex items-center justify-center gap-3">
                            <i data-lucide="truck" class="w-8 h-8"></i> Conductores: De la Visin a la Realidad
                        </h3>
                        <p class="text-teal-200 text-lg">
                            La transformacin del transporte mexicano en accin
                        </p>
                    </div>
                    
                    <!-- Video with enhanced styling -->
                    <div class="relative rounded-2xl overflow-hidden shadow-2xl mb-8">
                        <div class="relative w-full" style="padding-bottom: 56.25%;">
                            <iframe 
                                class="absolute top-0 left-0 w-full h-full" 
                                src="https://www.youtube.com/embed/t2CnK7d69Fg?rel=0&showinfo=0&modestbranding=1" 
                                frameborder="0" 
                                allowfullscreen
                                title="Rodando a Gas - Modelo de Negocio">
                            </iframe>
                        </div>
                        <!-- Video overlay decoration -->
                        <div class="absolute inset-0 border-4 border-white/10 rounded-2xl pointer-events-none"></div>
                    </div>
                    
                    <!-- Enhanced video context (TU CONTENIDO ACTUAL) -->
                    <div class="grid md:grid-cols-2 gap-8 text-left">
                        <div class="space-y-4">
                            <h4 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                                <i data-lucide="lightbulb" class="w-5 h-5"></i> En Este Video Descubres:
                            </h4>
                            <div class="space-y-3">
                                <div class="flex items-start gap-3 p-3 bg-white/5 rounded-lg backdrop-filter backdrop-blur-sm">
                                    <i data-lucide="play" class="w-5 h-5 text-orange-400 mt-0.5"></i>
                                    <span class="text-teal-200 text-sm">El problema real de miles de transportistas atrapados en deudas</span>
                                </div>
                                <div class="flex items-start gap-3 p-3 bg-white/5 rounded-lg backdrop-filter backdrop-blur-sm">
                                    <i data-lucide="brain-circuit" class="w-5 h-5 text-green-400 mt-0.5"></i>
                                    <span class="text-teal-200 text-sm">Cmo nuestro *plan* de IA predecir y prevendr problemas antes de que ocurran</span>
                                </div>
                                <div class="flex items-start gap-3 p-3 bg-white/5 rounded-lg backdrop-filter backdrop-blur-sm">
                                    <i data-lucide="handshake" class="w-5 h-5 text-blue-400 mt-0.5"></i>
                                    <span class="text-teal-200 text-sm">Por qu somos "socios, no acreedores" - filosofa diferencial</span>
                                </div>
                                <div class="flex items-start gap-3 p-3 bg-white/5 rounded-lg backdrop-filter backdrop-blur-sm">
                                    <i data-lucide="rocket" class="w-5 h-5 text-purple-400 mt-0.5"></i>
                                    <span class="text-teal-200 text-sm">El camino estratgico hacia nuestra Serie A de $45M</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <h4 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                                <i data-lucide="trending-up" class="w-5 h-5"></i> Los Nmeros Defendibles:
                            </h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center p-4 bg-gradient-to-r from-orange-500/20 to-red-500/20 rounded-lg backdrop-filter backdrop-blur-sm border border-orange-500/30">
                                    <span class="text-white font-medium">ROI Realista (5 aos)</span>
                                    <span class="text-orange-400 font-bold text-2xl">58%</span>
                                </div>
                                <div class="flex justify-between items-center p-4 bg-gradient-to-r from-green-500/20 to-emerald-500/20 rounded-lg backdrop-filter backdrop-blur-sm border border-green-500/30">
                                    <span class="text-white font-medium">Payback Period</span>
                                    <span class="text-green-400 font-bold text-2xl">30 meses</span>
                                </div>
                                <div class="flex justify-between items-center p-4 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-lg backdrop-filter backdrop-blur-sm border border-blue-500/30">
                                    <span class="text-white font-medium">Mercado Objetivo</span>
                                    <span class="text-blue-400 font-bold text-2xl">$1.1B MXN</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Perfect Storm + Urgency (NUEVO CIERRE PODEROSO) -->
            <div class="bg-gradient-to-r from-red-600 to-orange-500 p-12 rounded-2xl text-white shadow-2xl">
                <h3 class="text-3xl font-bold mb-6">
                    Next 90 Das: Category Winner o Permanent Follower
                </h3>
                <p class="text-lg leading-relaxed mb-8 text-white/90">
                    Tenemos el equipo probado, el mercado validado y el plan ms detallado de la industria. Mientras otros VCs escuchan ideas, t ests viendo un plan de ejecucin listo para ser financiado. El SEED de $10M nos permite construir el motor tecnolgico y garantizar la ejecucin impecable, asegurando nuestra posicin como ganadores de la categora antes de que otros terminen su primer Power Point.
                </p>
                
                <div class="flex flex-col sm:flex-row items-center justify-center gap-6 mb-8">
                    
                    <a href="https://calendly.com/contacto-conductores/new-meeting" target="_blank"
                       class="group bg-white/20 hover:bg-white backdrop-filter backdrop-blur-sm border border-white/30 hover:border-white text-white hover:text-orange-600 font-bold py-6 px-8 rounded-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 w-full sm:w-auto">
                        <i data-lucide="calendar" class="w-6 h-6 group-hover:scale-110 transition-transform"></i>
                        <div class="text-left">
                            <div class="font-bold">Agendar Reunin (45 min)</div>
                            <div class="text-sm opacity-75 group-hover:opacity-100">Deep Dive Tcnico y Estratgico</div>
                        </div>
                    </a>
                    
                    <a href="mailto:contacto@conductores.lat?subject=Inters%20en%20Ronda%20SEED%20de%20Conductores&body=Hola%20equipo%20de%20Conductores%2C%0A%0AMi%20nombre%20es%20%5BNOMBRE%5D%20de%20%5BFONDO%2FEMPRESA%5D%20y%20estoy%20interesado%2Fa%20en%20conocer%20m%C3%A1s%20sobre%20su%20ronda%20SEED.%0A%0ASaludos%2C"
                       class="group bg-white/10 hover:bg-white/20 backdrop-filter backdrop-blur-sm border border-white/30 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 w-full sm:w-auto">
                        <i data-lucide="mail" class="w-6 h-6 group-hover:scale-110 transition-transform"></i>
                        <div class="text-left">
                            <div class="font-bold">Iniciar Conversacin</div>
                            <div class="text-sm opacity-75 group-hover:opacity-100">Enviar un Email Directo</div>
                        </div>
                    </a>

                </div>
                
                <!-- Contact info -->
                <div class="text-center">
                    <div class="inline-flex items-center gap-2 text-white/75 text-sm bg-white/10 backdrop-filter backdrop-blur-sm px-4 py-2 rounded-full">
                        <i data-lucide="mail" class="w-4 h-4"></i>
                        <span>Contacto directo:</span>
                        <a href="mailto:contacto@conductores.lat" class="font-semibold hover:text-white transition-colors">
                            contacto@conductores.lat
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Modals -->
    <div id="agent-modal" class="fixed inset-0 bg-black bg-opacity-70 z-50 hidden items-center justify-center p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto" id="modal-content-wrapper">
            <div class="sticky top-0 bg-white border-b p-4 flex justify-between items-center">
                <h2 id="modal-title" class="text-xl font-bold text-slate-800"></h2>
                <button id="close-modal" class="text-slate-500 hover:text-slate-700 text-2xl" aria-label="Cerrar modal">&times;</button>
            </div>
            <div id="modal-content" class="p-6">
                <!-- Contenido del modal inyectado por JS -->
            </div>
        </div>
    </div>
    <div id="capex-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4" role="dialog" aria-modal="true" aria-labelledby="capex-modal-title">
        <div class="bg-white rounded-lg max-w-3xl w-full">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 id="capex-modal-title" class="text-xl font-bold text-slate-800">CAPEX Vagonetas - Breakdown Detallado</h3>
                <button id="close-capex-modal" class="text-slate-500 hover:text-slate-700 text-2xl" aria-label="Cerrar modal de CAPEX">&times;</button>
            </div>
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-slate-800 mb-3">Costo por Unidad</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>Vagoneta para conversin GNV:</span>
                                <span class="font-semibold">$730,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Hardware IoT completo:</span>
                                <span class="font-semibold">$100,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Seguro + registro REPUVE:</span>
                                <span class="font-semibold">$46,667</span>
                            </div>
                            <div class="border-t pt-2 flex justify-between font-bold">
                                <span>Total por unidad:</span>
                                <span>$876,667</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-slate-800 mb-3">Hardware IoT ($100k)</h4>
                        <div class="text-sm text-slate-600 space-y-1">
                            <div> OBD-II diagnsticos avanzados</div>
                            <div> GPS tracking + geofencing</div>
                            <div> Medidores flujo GNV + alertas</div>
                            <div> Acelermetros comportamiento</div>
                            <div> Conectividad LTE/4G + backup 3G</div>
                            <div class="text-xs text-amber-600 mt-2">*Sin desglose especfico por sensor</div>
                        </div>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-slate-800 mb-3">Cronograma Despliegue</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>Unidad 1 (validacin):</span>
                                <span class="font-semibold text-blue-600">Mes 6</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Unidad 2 (escalamiento):</span>
                                <span class="font-semibold text-green-600">Mes 7</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Unidad 3 (validacin final):</span>
                                <span class="font-semibold text-purple-600">Mes 8</span>
                            </div>
                            <div class="text-xs text-slate-500 mt-3">
                                Total: 3 unidades  $876,667 = $2,630,000
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>





    <footer class="bg-slate-800 text-white mt-16">
        <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p>&copy; 2025 Conductores del Mundo SAPI de CV. Blueprint Operacional.</p>
        </div>
    </footer>

    <script>
    // MOBILE OPTIMIZATION UTILITIES
    const isMobile = window.innerWidth < 768;
    const isTouch = 'ontouchstart' in window;
    
    // MOBILE CHART CONFIGURATION
    const mobileChartConfig = {
      plugins: {
        tooltip: {
          mode: 'nearest',
          intersect: false,
          backgroundColor: 'rgba(15, 23, 42, 0.95)',
          titleFont: { size: 14 },
          bodyFont: { size: 12 },
          padding: 16,
          displayColors: false,
          position: 'nearest'
        },
        legend: {
          labels: {
            boxWidth: 20,
            padding: 15,
            font: { size: 11 }
          }
        }
      },
      scales: {
        x: {
          ticks: { 
            maxRotation: 45,
            font: { size: 10 }
          }
        },
        y: {
          ticks: { 
            font: { size: 10 }
          }
        }
      }
    };

    // PERFORMANCE OPTIMIZATION - LAZY LOADING FOR CHARTS
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '50px'
    };

    const chartObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const chartCanvas = entry.target;
          const chartId = chartCanvas.id;
          
          // Initialize chart when visible
          if (!chartCanvas.hasAttribute('data-initialized')) {
            initializeChart(chartId);
            chartCanvas.setAttribute('data-initialized', 'true');
          }
          
          chartObserver.unobserve(entry.target);
        }
      });
    }, observerOptions);

    // Function to initialize specific charts
    function initializeChart(chartId) {
      // This will be called by the existing chart initialization functions
      // when the chart becomes visible
      console.log(`Initializing chart: ${chartId}`);
    }

    // MANDATORY CHART CONFIG - REPLACE ALL Chart.js INSTANCES
    const MANDATORY_CHART_COLORS = {
      teal: '#0d9488',
      orange: '#ea580c', 
      sky: '#0ea5e9',
      green: '#10b981',
      amber: '#f59e0b',
      purple: '#8b5cf6'
    };

    // PREMIUM PITCHDECK CHART CONFIG
    const CONDUCTORES_CHART_CONFIG = {
      colors: {
        primary: '#0d9488',      // Teal
        secondary: '#0ea5e9',    // Sky  
        accent1: '#ea580c',      // Orange
        accent2: '#06b6d4',      // Cyan
        success: '#10b981',      
        warning: '#f59e0b',      
        error: '#ef4444',
        gradients: {
          primary: 'linear-gradient(135deg, #0d9488, #0ea5e9)',
          accent: 'linear-gradient(135deg, #ea580c, #06b6d4)'
        }
      },
      
      defaultOptions: {
        responsive: true,
        maintainAspectRatio: false,
        ...(isMobile ? mobileChartConfig : {}),
        plugins: {
          legend: {
            display: true,
            position: 'bottom',
            labels: {
              color: '#64748b',
              font: { family: 'Inter', size: 12, weight: '500' },
              padding: 20,
              usePointStyle: true,
              pointStyle: 'circle'
            }
          },
          tooltip: {
            backgroundColor: 'rgba(15, 23, 42, 0.95)',
            titleColor: '#e2e8f0',
            bodyColor: '#e2e8f0',
            titleFont: { family: 'Inter', size: 14, weight: '600' },
            bodyFont: { family: 'Inter', size: 12 },
            cornerRadius: 8,
            padding: 16,
            displayColors: true,
            borderColor: 'rgba(13, 148, 136, 0.3)',
            borderWidth: 1
          }
        },
        scales: {
          x: {
            ticks: { 
              color: '#64748b', 
              font: { family: 'Inter', size: 11, weight: '500' } 
            },
            grid: { 
              color: 'rgba(148, 163, 184, 0.1)',
              drawBorder: false 
            },
            border: { display: false }
          },
          y: {
            ticks: { 
              color: '#64748b', 
              font: { family: 'Inter', size: 11, weight: '500' } 
            },
            grid: { 
              color: 'rgba(148, 163, 184, 0.1)',
              drawBorder: false 
            },
            border: { display: false },
            beginAtZero: true
          }
        },
        elements: {
          point: {
            radius: 6,
            hoverRadius: 8,
            backgroundColor: '#ffffff',
            borderWidth: 3
          },
          line: {
            tension: 0.4,
            borderWidth: 3
          },
          bar: {
            borderRadius: 4,
            borderSkipped: false
          }
        }
      }
    };

    // REPLACE ALL CHART DATASETS WITH BRANDED COLORS
    function enforceChartBranding(chart) {
      if (chart.config.type === 'line') {
        chart.data.datasets.forEach((dataset, index) => {
          const colors = [MANDATORY_CHART_COLORS.orange, MANDATORY_CHART_COLORS.green, MANDATORY_CHART_COLORS.purple];
          dataset.borderColor = colors[index % colors.length];
          dataset.backgroundColor = colors[index % colors.length] + '1A'; // 10% opacity
          dataset.borderWidth = 5;
          dataset.pointRadius = 12;
          dataset.pointBackgroundColor = '#ffffff';
          dataset.pointBorderWidth = 4;
          dataset.pointBorderColor = colors[index % colors.length];
        });
      }
      
      if (chart.config.type === 'bar' || chart.config.type === 'doughnut') {
        const colors = [
          MANDATORY_CHART_COLORS.teal,
          MANDATORY_CHART_COLORS.orange,
          MANDATORY_CHART_COLORS.sky,
          MANDATORY_CHART_COLORS.amber,
          MANDATORY_CHART_COLORS.green
        ];
        chart.data.datasets[0].backgroundColor = colors;
        chart.data.datasets[0].borderColor = colors.map(color => color);
        chart.data.datasets[0].borderWidth = 3;
      }
      
      // MANDATORY TOOLTIP STYLING
      chart.options.plugins.tooltip = {
        backgroundColor: 'rgba(15, 23, 42, 0.95)',
        titleColor: '#f8fafc',
        bodyColor: '#e2e8f0',
        titleFont: { family: 'Inter', size: 16, weight: 'bold' },
        bodyFont: { family: 'Inter', size: 14 },
        cornerRadius: 12,
        padding: 24,
        borderColor: 'rgba(13, 148, 136, 0.3)',
        borderWidth: 2
      };
      
      chart.update();
    }

    // PREMIUM TOOLTIP CONFIGURATION
    const PREMIUM_TOOLTIP_CONFIG = {
      backgroundColor: 'rgba(15, 23, 42, 0.98)',
      titleColor: '#f8fafc',
      bodyColor: '#e2e8f0',
      titleFont: { family: 'Inter', size: 16, weight: 'bold' },
      bodyFont: { family: 'Inter', size: 14, weight: '500' },
      cornerRadius: 16,
      padding: 24,
      borderColor: 'rgba(13, 148, 136, 0.4)',
      borderWidth: 2,
      displayColors: true,
      usePointStyle: true
    };

    // APPLY TO ALL EXISTING CHARTS
    document.addEventListener('DOMContentLoaded', function() {
      Chart.instances.forEach(chart => {
        enforceChartBranding(chart);
        // Apply premium tooltips
        chart.options.plugins.tooltip = PREMIUM_TOOLTIP_CONFIG;
        chart.update();
      });
    });
    // AGREGAR: Cross-Reference Navigation System
    class CrossReferenceController {
      constructor() {
        this.references = {
          'core-ia-budget': {
            sourceSelector: '[data-ref="core-ia-budget"]',
            target: 'tecnologia',
            description: 'Ver desglose tcnico por agente',
            highlightSelector: '.agent-card'
          },
          'team-cost': {
            sourceSelector: '[data-ref="team-cost"]',
            target: 'equipo',
            description: 'Ver estructura y roles del equipo',
            highlightSelector: '#hr-table'
          },
          'hase-development': {
            sourceSelector: '[data-ref="hase-development"]',
            target: 'ejecucion',
            description: 'Ver cronograma de desarrollo HASE',
            highlightSelector: '[data-month="1"], [data-month="2"], [data-month="3"]'
          },
          'pia-development': {
            sourceSelector: '[data-ref="pia-development"]',
            target: 'ejecucion',
            description: 'Ver cronograma de desarrollo PIA',
            highlightSelector: '[data-month="4"], [data-month="5"]'
          },
          'superPma-development': {
            sourceSelector: '[data-ref="superPma-development"]',
            target: 'ejecucion',
            description: 'Ver cronograma de desarrollo Super-PMA',
            highlightSelector: '[data-month="5"], [data-month="6"]'
          },
          'asistente-development': {
            sourceSelector: '[data-ref="asistente-development"]',
            target: 'ejecucion',
            description: 'Ver cronograma de desarrollo Asistente',
            highlightSelector: '[data-month="4"], [data-month="5"]'
          },
          'ragDna-development': {
            sourceSelector: '[data-ref="ragDna-development"]',
            target: 'ejecucion',
            description: 'Ver cronograma RAG-DNA',
            highlightSelector: '[data-month="1"], [data-month="2"]'
          },
          'capex-breakdown': {
            sourceSelector: '[data-ref="capex-breakdown"]',
            target: 'ejecucion',
            description: 'Ver despliegue de vagonetas',
            highlightSelector: '[data-month="6"], [data-month="7"], [data-month="8"]'
          },
          'roi-calculation': {
            sourceSelector: '[data-ref="roi-calculation"]',
            target: 'financiero',
            description: 'Ver clculos financieros detallados',
            highlightSelector: '#roiComparisonChart'
          }
        };
        this.init();
      }

      init() {
        this.createCrossReferences();
        this.bindEvents();
      }

      createCrossReferences() {
        Object.entries(this.references).forEach(([id, ref]) => {
          const sourceElements = document.querySelectorAll(ref.sourceSelector);
          sourceElements.forEach(element => {
            this.addCrossReferenceLink(element, ref);
          });
        });
      }

      addCrossReferenceLink(element, reference) {
        const link = document.createElement('button');
        link.className = 'cross-ref-link text-teal-600 hover:text-teal-800 text-xs ml-2 underline';
        link.innerHTML = ` ${reference.description}`;
        link.onclick = (e) => {
          e.preventDefault();
          this.navigateToReference(reference);
        };
        element.appendChild(link);
      }

      navigateToReference(reference) {
        const targetElement = document.getElementById(reference.target);
        if (targetElement) {
          // Smooth scroll to target
          targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
          
          // Highlight target section
          this.highlightSection(targetElement);
          
          // Highlight specific elements if specified
          if (reference.highlightSelector) {
            setTimeout(() => {
              this.highlightElements(reference.highlightSelector);
            }, 500);
          }
        }
      }

      highlightSection(element) {
        element.classList.add('section-highlight');
        setTimeout(() => {
          element.classList.remove('section-highlight');
        }, 3000);
      }
      highlightElements(selector) {
        document.querySelectorAll(selector).forEach(el => {
          el.classList.add('cross-ref-highlight');
          setTimeout(() => {
            el.classList.remove('cross-ref-highlight');
          }, 3000);
        });
      }

      bindEvents() {
        // Additional event bindings if needed
      }
    }

    // AGREGAR: Comprehensive Data Validation System
    class DataValidator {
      constructor() {
        this.foundationalData = {
          totalBudget: 10000000,
          teamCost: 1940000 + 2340000,
          coreTech: 2265000,
          pilotCapex: 2630000,
          saasStack: 631000,
          ragDNA: 150000,
          reserva: 44000,
          runway: 15,
          teamSize: 9,
          coreESOP: 3
        };
        
        this.tolerance = 1000; // Tolerance for rounding differences
        this.discrepancies = [];
        this.init();
      }

      init() {
        this.validateAll();
        this.displayValidationBadge();
      }

      validateAll() {
        this.discrepancies = [];
        this.validateFinancialData();
        this.validateTeamData();
        this.validateTechnicalData();
        this.validateTimelineData();
        return this.generateValidationReport();
      }

      validateFinancialData() {
        // Validate total budget matches sum of components
        const componentSum = this.foundationalData.teamCost +
                            this.foundationalData.coreTech +
                            this.foundationalData.pilotCapex +
                            this.foundationalData.saasStack +
                            this.foundationalData.ragDNA +
                            this.foundationalData.reserva;

        if (Math.abs(componentSum - this.foundationalData.totalBudget) > this.tolerance) {
          this.discrepancies.push({
            type: 'financial',
            field: 'totalBudget',
            expected: this.foundationalData.totalBudget,
            actual: componentSum,
            severity: 'high',
            message: 'Presupuesto total no coincide con suma de componentes'
          });
        }

        // Validate monthly burn rate
        const avgMonthlyBurn = this.foundationalData.totalBudget / this.foundationalData.runway;
        const expectedBurn = 638000; // From documents

        if (Math.abs(avgMonthlyBurn - expectedBurn) > 50000) {
          this.discrepancies.push({
            type: 'financial',
            field: 'burnRate',
            expected: expectedBurn,
            actual: Math.round(avgMonthlyBurn),
            severity: 'medium',
            message: 'Burn rate promedio fuera de rango esperado'
          });
        }
      }

      validateTeamData() {
        const teamElements = document.querySelectorAll('#hr-table tbody tr');
        if (teamElements.length !== this.foundationalData.teamSize) {
          this.discrepancies.push({
            type: 'team',
            field: 'teamSize',
            expected: this.foundationalData.teamSize,
            actual: teamElements.length,
            severity: 'medium',
            message: 'Nmero de miembros del equipo no coincide'
          });
        }

        // Validate ESOP members
        const esopMembers = Object.keys(equipoMatrizCompleta?.roles?.filter(r => r.type === 'ESOP') || {}).length;
        if (esopMembers !== this.foundationalData.coreESOP) {
          this.discrepancies.push({
            type: 'team',
            field: 'esopSize',
            expected: this.foundationalData.coreESOP,
            actual: esopMembers,
            severity: 'low',
            message: 'Nmero de perfiles ESOP no coincide'
          });
        }
      }

      validateTechnicalData() {
        // Validate agent budget allocation
        const agentBudgets = {
          hase: 710000,
          pia: 475000,
          superPma: 600000,
          asistente: 330000,
          ragDna: 150000
        };

        const totalAgentBudget = Object.values(agentBudgets).reduce((sum, budget) => sum + budget, 0);

        if (Math.abs(totalAgentBudget - this.foundationalData.coreTech) > this.tolerance) {
          this.discrepancies.push({
            type: 'technical',
            field: 'agentBudgets',
            expected: this.foundationalData.coreTech,
            actual: totalAgentBudget,
            severity: 'high',
            message: 'Presupuesto total de agentes no coincide con Core Tech'
          });
        }
      }

      validateTimelineData() {
        // Validate timeline has 12 months of data
        const timelineElements = document.querySelectorAll('[data-month]');
        const uniqueMonths = new Set();
        
        timelineElements.forEach(el => {
          const month = el.getAttribute('data-month');
          if (month) uniqueMonths.add(parseInt(month));
        });

        if (uniqueMonths.size < 10) { // Allow some flexibility
          this.discrepancies.push({
            type: 'timeline',
            field: 'monthCoverage',
            expected: 12,
            actual: uniqueMonths.size,
            severity: 'medium',
            message: 'Timeline no cubre suficientes meses del cronograma'
          });
        }
      }

      generateValidationReport() {
        if (this.discrepancies.length === 0) {
          return {
            status: 'valid',
            message: 'Todos los datos estn alineados con documentos fundacionales',
            discrepancies: []
          };
        }

        return {
          status: 'invalid',
          discrepancies: this.discrepancies,
          recommendations: this.generateRecommendations()
        };
      }

      generateRecommendations() {
        return this.discrepancies.map(disc => {
          switch (disc.type) {
            case 'financial':
              return `Revisar clculos financieros en ${disc.field}`;
            case 'team':
              return `Verificar datos del equipo: ${disc.field}`;
            case 'technical':
              return `Validar presupuestos tcnicos: ${disc.field}`;
            case 'timeline':
              return `Completar datos de cronograma: ${disc.field}`;
            default:
              return `Revisar inconsistencia en ${disc.field}`;
          }
        });
      }

      displayValidationBadge() {
        const validation = this.validateAll();
        
        // Remove existing badge
        const existingBadge = document.getElementById('validation-badge');
        if (existingBadge) existingBadge.remove();

        const badge = document.createElement('div');
        badge.id = 'validation-badge';
        badge.className = `fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm z-50 cursor-pointer transition-all duration-300 ${
          validation.status === 'valid' 
            ? 'bg-green-500 hover:bg-green-600' 
            : 'bg-red-500 hover:bg-red-600'
        }`;

        const icon = validation.status === 'valid' ? '' : '';
        const text = validation.status === 'valid' ? 'Datos Validados' : `${this.discrepancies.length} Inconsistencias`;

        badge.innerHTML = `${icon} ${text}`;
        badge.onclick = () => this.showValidationModal(validation);

        document.body.appendChild(badge);

        // Animate in
        setTimeout(() => {
          badge.style.transform = 'translateY(0)';
        }, 100);
      }
      showValidationModal(validation) {
        // Remove existing modal
        const existingModal = document.getElementById('validation-modal');
        if (existingModal) existingModal.remove();

        const modal = document.createElement('div');
        modal.id = 'validation-modal';
        modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
        
        modal.innerHTML = `
          <div class="bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto">
            <div class="p-6 border-b flex justify-between items-center">
              <h3 class="text-xl font-bold text-slate-800">
                ${validation.status === 'valid' ? ' Validacin Exitosa' : ' Inconsistencias Detectadas'}
              </h3>
              <button onclick="document.getElementById('validation-modal').remove()" 
                      class="text-slate-500 hover:text-slate-700 text-2xl">&times;</button>
            </div>
            
            <div class="p-6">
              ${validation.status === 'valid' ? `
                <div class="text-green-700 mb-4">
                  <p class="mb-2">${validation.message}</p>
                  <div class="bg-green-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-2">Validaciones Completadas:</h4>
                    <ul class="text-sm space-y-1">
                      <li> Coherencia presupuestal</li>
                      <li> Estructura del equipo</li>
                      <li> Asignacin tcnica</li>
                      <li> Cronograma completo</li>
                    </ul>
                  </div>
                </div>
              ` : `
                <div class="space-y-4">
                  ${validation.discrepancies.map(disc => `
                    <div class="border-l-4 ${disc.severity === 'high' ? 'border-red-500 bg-red-50' : 
                                           disc.severity === 'medium' ? 'border-yellow-500 bg-yellow-50' : 
                                           'border-blue-500 bg-blue-50'} p-4 rounded">
                      <div class="flex justify-between items-start mb-2">
                        <h4 class="font-semibold text-slate-800">${disc.message}</h4>
                        <span class="text-xs px-2 py-1 rounded ${
                          disc.severity === 'high' ? 'bg-red-200 text-red-800' :
                          disc.severity === 'medium' ? 'bg-yellow-200 text-yellow-800' :
                          'bg-blue-200 text-blue-800'
                        }">${disc.severity}</span>
                      </div>
                      <div class="text-sm text-slate-600">
                        <div>Esperado: ${this.formatValue(disc.expected)}</div>
                        <div>Actual: ${this.formatValue(disc.actual)}</div>
                      </div>
                    </div>
                  `).join('')}
                  
                  <div class="bg-slate-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-2">Recomendaciones:</h4>
                    <ul class="text-sm space-y-1">
                      ${validation.recommendations.map(rec => `<li> ${rec}</li>`).join('')}
                    </ul>
                  </div>
                </div>
              `}
            </div>
          </div>
        `;

        document.body.appendChild(modal);

        // Click outside to close
        modal.addEventListener('click', (e) => {
          if (e.target === modal) modal.remove();
        });
      }

      formatValue(value) {
        if (typeof value === 'number') {
          return new Intl.NumberFormat('es-MX').format(value);
        }
        return value;
      }
    }
    // AGREGAR: Testing and Validation Utilities
    class TestingController {
      constructor() {
        this.tests = [];
        this.results = {
          passed: 0,
          failed: 0,
          total: 0
        };
        this.init();
      }

      init() {
        this.setupTestSuite();
        this.runTests();
      }

      setupTestSuite() {
        // Functional Tests
        this.addTest('Navigation Links', () => this.testNavigationLinks());
        this.addTest('Charts Loading', () => this.testChartsLoading());
        this.addTest('Role Switching', () => this.testRoleSwitching());
        this.addTest('Phase Filtering', () => this.testPhaseFiltering());
        this.addTest('Data Validation', () => this.testDataValidation());
        this.addTest('Cross References', () => this.testCrossReferences());
        this.addTest('Progress Tracking', () => this.testProgressTracking());
        this.addTest('Mobile Navigation', () => this.testMobileNavigation());
      }

      addTest(name, testFunction) {
        this.tests.push({ name, testFunction });
      }

      runTests() {
        console.log(' Ejecutando suite de pruebas...');
        
        this.tests.forEach(test => {
          try {
            const result = test.testFunction();
            if (result) {
              this.results.passed++;
              console.log(` ${test.name}: PASS`);
            } else {
              this.results.failed++;
              console.log(` ${test.name}: FAIL`);
            }
          } catch (error) {
            this.results.failed++;
            console.log(` ${test.name}: ERROR - ${error.message}`);
          }
          this.results.total++;
        });

        this.displayResults();
      }

      testNavigationLinks() {
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('section[id]');
        let allLinksValid = true;

        navLinks.forEach(link => {
          const href = link.getAttribute('href');
          if (href && href.startsWith('#')) {
            const targetId = href.replace('#', '');
            const targetSection = document.getElementById(targetId);
            if (!targetSection) {
              allLinksValid = false;
              console.warn(`Missing target section: ${targetId}`);
            }
          }
        });

        return navLinks.length > 0 && sections.length > 0 && allLinksValid;
      }

      testChartsLoading() {
        const charts = document.querySelectorAll('canvas');
        let chartsLoaded = true;

        charts.forEach(canvas => {
          if (!canvas.getContext) {
            chartsLoaded = false;
          }
        });

        return charts.length > 0 && chartsLoaded;
      }

      testRoleSwitching() {
        if (!window.audienceController) return false;
        
        const roleSelector = document.getElementById('role-selector');
        if (!roleSelector) return false;

        // Test role switching
        window.audienceController.switchRole('investor');
        const bodyHasRoleClass = document.body.className.includes('role-investor');
        
        window.audienceController.switchRole('general');
        return bodyHasRoleClass;
      }

      testPhaseFiltering() {
        if (!window.phaseController) return false;
        
        const phaseButtons = document.querySelectorAll('.phase-btn');
        if (phaseButtons.length === 0) return false;

        // Test phase filtering
        window.phaseController.filterByPhase('foundation');
        const hasActiveButton = document.querySelector('.phase-btn.active');
        
        window.phaseController.filterByPhase('all');
        return hasActiveButton !== null;
      }

      testDataValidation() {
        if (!window.dataValidator) return false;
        
        const validation = window.dataValidator.validateAll();
        return validation && validation.hasOwnProperty('status');
      }

      testCrossReferences() {
        if (!window.crossReferenceController) return false;
        
        const crossRefLinks = document.querySelectorAll('.cross-ref-link');
        return crossRefLinks.length > 0;
      }

      testProgressTracking() {
        if (!window.progressTracker) return false;
        
        const progressBars = document.querySelectorAll('.milestone-progress');
        const milestoneCards = document.querySelectorAll('.milestone-card');
        
        return progressBars.length > 0 && milestoneCards.length > 0;
      }

      testMobileNavigation() {
        const mobileNav = document.getElementById('mobile-nav');
        const mobileLinks = document.querySelectorAll('.mobile-nav-link');
        
        return mobileNav !== null && mobileLinks.length > 0;
      }

      displayResults() {
        const successRate = Math.round((this.results.passed / this.results.total) * 100);
        
        console.log('\n Resultados de Pruebas:');
        console.log(` Exitosas: ${this.results.passed}`);
        console.log(` Fallidas: ${this.results.failed}`);
        console.log(` Tasa de xito: ${successRate}%`);
        
        if (successRate >= 90) {
          console.log(' EXCELENTE: Sistema funcionando correctamente');
        } else if (successRate >= 75) {
          console.log(' BUENO: Algunos problemas menores detectados');
        } else {
          console.log(' ATENCIN: Problemas crticos detectados');
        }

        // Show results in UI if in development mode
        if (window.location.hostname === 'localhost' || window.location.search.includes('debug=true')) {
          this.showTestResults(successRate);
        }
      }

      showTestResults(successRate) {
        const resultsModal = document.createElement('div');
        resultsModal.className = 'fixed top-4 left-4 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50 max-w-sm';
        resultsModal.innerHTML = `
          <div class="flex justify-between items-center mb-2">
            <h4 class="font-bold text-slate-800"> Test Results</h4>
            <button onclick="this.parentElement.parentElement.remove()" class="text-slate-500">&times;</button>
          </div>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span>Passed:</span>
              <span class="text-green-600 font-semibold">${this.results.passed}</span>
            </div>
            <div class="flex justify-between">
              <span>Failed:</span>
              <span class="text-red-600 font-semibold">${this.results.failed}</span>
            </div>
            <div class="flex justify-between">
              <span>Success Rate:</span>
              <span class="font-bold ${successRate >= 90 ? 'text-green-600' : 
                                     successRate >= 75 ? 'text-yellow-600' : 
                                     'text-red-600'}">${successRate}%</span>
            </div>
          </div>
          <div class="mt-2 text-xs text-slate-500">
            ${successRate >= 90 ? ' All systems operational' :
              successRate >= 75 ? ' Minor issues detected' :
              ' Critical issues found'}
          </div>
        `;

        document.body.appendChild(resultsModal);

        // Auto-hide after 5 seconds
        setTimeout(() => {
          if (resultsModal.parentElement) {
            resultsModal.remove();
          }
        }, 5000);
      }
    }

    // --- GLOBAL DATA OBJECTS (Available before DOMContentLoaded) ---
    const equipoMatrizCompleta = { roles: [ { name: 'COO / PMO', type: 'Leadership', hours: 1920, focus: 'Garantizar ejecucin del plan, gestin de riesgos, Human-in-the-loop', allocations: ['Planificacin', 'Seguimiento', 'Riesgos', 'Reporte', 'Coordinacin', 'Ejecucin', 'Validacin', 'Optimizacin', 'Escalamiento', 'Serie A Prep', 'Due Diligence', 'Cierre'] }, { name: 'Cientfico de Datos', type: 'ESOP', hours: 1584, focus: 'HASE lder + Social Scoring + RAG-DNA', allocations: ['Features Base Histrica + RAG-DNA', 'HASE/Social', 'Social OCR', 'HASE API', 'Deploy RT', 'Super-PMA', 'Anlisis', 'Optimizacin', 'Validacin', 'Doc Tech', 'Serie A', 'Serie A'] }, { name: 'Ingeniero ML', type: 'ESOP', hours: 1440, focus: 'PIA lder + Asistente NLP/CV + HASE support', allocations: ['HASE Support', 'PIA/HASE', 'PIA Core', 'PIA WhatsApp', 'PIA Deploy', 'Asistente', 'Asistente CV', 'Multimodal', 'Optimizacin', 'Doc IA', 'Serie A', 'Serie A'] }, { name: 'Full-Stack IA', type: 'ESOP', hours: 1536, focus: 'SaaS arquitecto + RAG-DNA + Integration', allocations: ['SaaS Setup', 'SaaS/RAG-DNA', 'SaaS Complete', 'PIA Frontend', 'PIA Dash', 'Super-PMA UI', 'Marketplace', 'Integration', 'Optimization', 'Final Integration', 'Support', 'Support'] }, { name: 'Backend Developer', type: 'Contractor', hours: 1296, focus: 'APIs Core + Social Scoring + Pagos Inclusivos', allocations: ['DB Schema', 'HASE APIs', 'Social APIs', 'PIA APIs', 'Pagos APIs', 'Integration', 'Support APIs', 'Optimization', 'Performance', 'Documentation', 'Maintenance', 'Maintenance'] }, { name: 'IoT Engineer', type: 'Contractor', hours: 768, focus: 'Sensores + Kafka streaming + Hardware', allocations: ['-', 'Super-PMA HW', 'Kafka Setup', 'Sensors Select', 'Streaming', 'Deploy V1', 'Deploy V2', 'Deploy V3', 'Monitoring', 'Optimization', '-', '-'] }, { name: 'Frontend Developer', type: 'Contractor', hours: 720, focus: 'App Android + Dashboards + UX', allocations: ['-', '-', 'App Start', 'App Core', 'App Beta', 'App Production', 'Dashboard', 'UX Optimization', 'Final Polish', 'Documentation', '-', '-'] }, { name: 'DevOps Engineer', type: 'Contractor', hours: 480, focus: 'Infrastructure + CI/CD + Monitoring', allocations: ['AWS Setup', 'CI/CD', 'Monitoring', 'Scaling', 'Security', 'Support', '-', '-', '-', '-', '-', '-'] }, { name: 'QA Engineer', type: 'Contractor', hours: 384, focus: 'Testing automation + Validation', allocations: ['-', '-', '-', '-', '-', 'Setup QA', 'Testing', 'Validation', 'Regression', 'Final QA', '-', '-'] } ], totalHours: 7760, totalCost: 1940000, esopEquity: '10%', esopUpside: '~$15M MXN en Serie A exitosa @$150M' };

    // --- DATA OBJECTS (Global scope for widgets) ---
            const presupuestoReal = { total: 10000000, distribucion: { coreIA: 2265000, capexPiloto: 2630000, equipoTotal: 1940000, saasStack: 631000, ragDNA: 150000, garantiaEjecucion: 2340000, reserva: 44000 } };
    const flujosEfectivoReales = {
        gastoEquipoTecnico: [120000, 130000, 140000, 140000, 140000, 140000, 140000, 140000, 140000, 130000, 120000, 110000],
        gastoLiderazgo: [130000, 130000, 130000, 130000, 130000, 130000, 130000, 130000, 130000, 130000, 130000, 130000],
        gastoDesarrollo: [260000, 260000, 280000, 320000, 320000, 317000, 200000, 200000, 180000, 180000, 180000, 263000],
        gastoCapex: [0, 0, 0, 0, 0, 876667, 876667, 876666, 0, 0, 0, 0],
        stackInclusivo: [10000, 15000, 25000, 35000, 35000, 35000, 35000, 35000, 35000, 35000, 35000, 35000],
        compliance: [5000, 8000, 12000, 15000, 8000, 5000, 3000, 3000, 3000, 3000, 3000, 8000],
        inversionInicial: 10000000
    };
    document.addEventListener('DOMContentLoaded', function() {
        // --- ADDITIONAL DATA OBJECTS ---
        const agentesDetalleCompleto = { hase: { presupuesto: 710000, breakdown: { desarrollo: 600000, socialScoring: 110000 }, horas: 1584, arquitectura: ['XGBoost', 'FastAPI <200ms', 'PostgreSQL', 'TimescaleDB', 'SHAP XAI', 'Apache Airflow'], diferenciadorUnico: 'Modelos de scoring que aprenden del comportamiento operativo real, no de un bur de crdito. Incluyen variables como uso, rutas, cumplimiento y contexto.', apis: ['POST /api/v1/score', 'POST /api/v1/social-scoring', 'GET /api/v1/risk-profile'], kpisTecnicos: ['Mes 3: >80% AUC offline', 'Mes 6: >90% AUC tiempo real', 'Social scoring >85% correlacin'], sla: { latency: '200ms', accuracy: '90% AUC', uptime: '99.9%' } }, pia: { presupuesto: 475000, breakdown: { desarrollo: 400000, whatsappBusiness: 45000, llmTraining: 30000 }, horas: 576, arquitectura: ['WhatsApp Business API', 'LLMs empticos', 'Decision Trees', 'FastAPI', 'Redis queue'], apis: ['POST /api/v1/trigger-alert', 'POST /api/v1/whatsapp-webhook', 'GET /api/v1/intervention-analytics'], kpisTecnicos: ['<2min response SLA', 'Motor alertas funcional', 'WhatsApp integrado'], sla: { responseTime: '2min', availability: '99.9%', successRate: '95%' } }, superPma: { presupuesto: 600000, breakdown: { desarrollo: 450000, marketplace: 100000, partnerships: 50000 }, horas: 768, arquitectura: ['Kafka', 'Spark Streaming', 'InfluxDB', 'Arquitectura Kappa', 'React', 'Python'], sensores: ['OBD-II', 'GPS 30-60seg', 'Acelermetros', 'Medidores GNV', 'LTE conectividad'], marketplace: { comision: '15-20%', partners: ['Jetz App 90min', 'Meru 1000+ brands'] }, apis: ['POST /api/v1/telemetry', 'GET /api/v1/maintenance-predictions', 'POST /api/v1/marketplace/order'], kpisTecnicos: ['>85% precisin prediccin', '>1000 events/sec Kafka', '99.5% uptime sensores'], beneficios: ['25% reduccin costos mantenimiento', '30-50% menos inactividad', 'Hasta 40% optimizacin combustible'], diferenciadorUnico: 'La primera fase ofrece alertas inteligentes basadas en kilometraje y contexto operativo, sin necesidad de hardware complejo, entregando valor desde el da uno.' }, asistente: { presupuesto: 345000, breakdown: { desarrollo: 220000, gpt4Vision: 45000, baseConocimiento: 35000, automationTools: 30000, flowise: 15000 }, horas: 480, arquitectura: ['GPT-4 Vision', 'Flowise (worker IA)', 'Make (orquestador)', 'WhatsApp Business API', 'Airtable', 'Vector DB SSOT'], diferenciadorUnico: 'MVP validado con 17 vagonetas operativas - defleccin taller + diagnstico acelerado', apis: ['POST /api/v1/chat', 'POST /api/v1/visual-diagnosis', 'GET /api/v1/knowledge-base', 'POST /api/v1/flowise-query'], kpisTecnicos: ['70% consultas automatizadas', '<3seg response time', '24/7 uptime', 'MVP >95% OCR accuracy'], monetizacion: ['Diagnsticos premium $500-800/consulta', 'Base conocimiento 50+ escenarios'] }, ragDna: { presupuesto: 150000, breakdown: { entrevistas: 60000, algoritmatizacion: 50000, validacion: 40000 }, horas: 432, proposito: 'Sistematizacin 15+ aos experiencia RAG en algoritmos', impacto: 'Conocimiento humano  Activo tecnolgico escalable', diferenciador: 'Experience-to-Algorithm nico en mercado' } };
        const arquitecturaDatos = { fuentes: { gnv: { campos: ['litros_cargados', 'sobreprecio_por_litro'], endpoint: 'POST /api/v1/transactions', frecuencia: 'tiempo real' }, gps: { campos: ['odometro', 'estado_motor', 'lat_lng'], endpoint: 'POST /api/v1/telemetry', frecuencia: '30-60 segundos' }, baseHistorica: { campos: ['consumo_gnv_historico', 'patrones_ruta', 'eventos_criticos', 'comportamiento_operador'], proceso: 'Pre-funding EDA completo  Feature engineering', periodo: '2013-2025 (12 aos data)', estado: 'EDA completado pre-inversin' }, cartaAval: { campos: ['ocr_texto', 'firma_validada', 'presidente_ruta'], endpoint: 'POST /api/v1/social-scoring', frecuencia: 'onboarding' }, iotSensores: { campos: ['obd_codes', 'acelerometro', 'flujo_gnv'], endpoint: 'POST /api/v1/sensors', frecuencia: 'streaming' } }, storage: { postgresql: 'Base Histrica (2013-2025) + scoring + datos estructurados', timescaledb: 'Series temporales GPS/GNV', influxdb: 'Datos IoT alta frecuencia', redis: 'Cache APIs + cola mensajes PIA' }, etl: { herramienta: 'Apache Airflow', pipeline: 'Ingesta  Limpieza  Enriquecimiento  Storage', latencia: '<500ms datos crticos' } };
        const cronogramaSemanalCompleto = { mes1: { titulo: 'Fundacin + RAG-DNA', sem1: { tasks: ['AWS setup VPC+IAM', 'Odoo installation config', 'Deploy Base Histrica (EDA ya completado)', 'RAG-DNA indexacin vectorial manuales Higer existentes'], owners: ['DevOps', 'Full-Stack', 'Data Scientist', 'Data Scientist'], hours: 240, milestone: 'Infra base + datos limpios' }, sem2: { tasks: ['Auth0 setup', 'Features engineering HASE', 'RAG-DNA entrevistas start'], owners: ['Full-Stack', 'Data Scientist', 'Data Scientist'], hours: 240, milestone: 'Seguridad + arquitectura definida' }, sem3: { tasks: ['HASE baseline v0.5', 'API structure design', 'Database schema'], owners: ['Data Scientist', 'Backend', 'Backend'], hours: 240, milestone: 'Baseline modelo + APIs diseadas' }, sem4: { tasks: ['RAG-DNA sistematizacin', 'SaaS basic integration', 'Social scoring design', 'WhatsApp Business API setup + Make workflows bsicos'], owners: ['Data Scientist', 'Full-Stack', 'ML Engineer', 'ML Engineer'], hours: 240, milestone: 'RAG-DNA iniciado + social scoring diseado' } }, mes2: { titulo: 'Social Scoring + Pagos Inclusivos', sem1: { tasks: ['Carta Aval OCR research', 'STP integration start', 'PIA architecture', 'Flowise integration + GPT-4 Vision testing'], owners: ['Data Scientist', 'Backend', 'ML Engineer', 'ML Engineer'], hours: 240, milestone: 'OCR research + pagos inclusivos start' }, sem2: { tasks: ['OCR engine development', 'Oxxo Pay API integration', 'XGBoost + social hybrid'], owners: ['Data Scientist', 'Backend', 'Data Scientist'], hours: 240, milestone: 'OCR funcional + pagos inclusivos' }, sem3: { tasks: ['Social scoring validation', 'PLD compliance', 'Motor alertas PIA', 'MVP Asistente stack completo + Airtable operativo'], owners: ['Data Scientist', 'Backend', 'ML Engineer', 'ML Engineer'], hours: 240, milestone: 'Hbrido HASE+social funcional' }, sem4: { tasks: ['Correlacin >85% social', 'Stack pagos testing', 'WhatsApp Business setup'], owners: ['Data Scientist', 'Backend', 'ML Engineer'], hours: 240, milestone: 'Social scoring >85% + pagos operativos' } }, mes3: { titulo: 'HASE Tiempo Real + App MVP', sem1: { tasks: ['HASE v0.8 deployment', 'Android app start', 'Super-PMA design'], owners: ['Data Scientist', 'Frontend', 'IoT Engineer'], hours: 240, milestone: 'HASE tiempo real' }, sem2: { tasks: ['API FastAPI optimization', 'App backend APIs', 'Kafka setup', 'MVP deployment en 17 vagonetas operativas'], owners: ['Backend', 'Frontend', 'IoT Engineer', 'IoT Engineer'], hours: 240, milestone: 'APIs optimizadas + Kafka streaming' }, sem3: { tasks: ['HASE >80% AUC validation', 'App UI/UX', 'Legal REPUVE prep'], owners: ['Data Scientist', 'Frontend', 'Legal'], hours: 240, milestone: 'HASE validado + legal iniciado' }, sem4: { tasks: ['Social scoring integration final', 'App MVP beta', 'SEMARNAT applications', 'Casos WhatsApp validacin MVP'], owners: ['Data Scientist', 'Frontend', 'Legal', 'Product Manager'], hours: 240, milestone: 'Dual validation: HASE >80% AUC + MVP Asistente operativo 17 vagonetas' } }, mes4: { titulo: 'PIA + Asistente Digital + Legal', sem1: { tasks: ['PIA v1.0 WhatsApp', 'BERT espaol setup', 'REPUVE documentation'], owners: ['ML Engineer', 'ML Engineer', 'Legal'], hours: 240, milestone: 'PIA funcional + BERT core' }, sem2: { tasks: ['LLMs empticos training', 'IoT sensors selection', 'Contratos piloto'], owners: ['ML Engineer', 'IoT Engineer', 'Business'], hours: 240, milestone: 'LLMs trained + sensores seleccionados' }, sem3: { tasks: ['Decision trees escalamiento', '1ra vagoneta prep', 'App Android beta'], owners: ['ML Engineer', 'IoT Engineer', 'Frontend'], hours: 240, milestone: 'PIA completo + 1ra vagoneta prep' }, sem4: { tasks: ['WhatsApp integration testing', 'Base conocimiento', 'REPUVE final'], owners: ['ML Engineer', 'ML Engineer', 'Legal'], hours: 240, milestone: 'PIA <2min SLA + legal avanzado' } }, mes5: { titulo: 'Super-PMA Streaming + Marketplace', sem1: { tasks: ['Kafka streaming production', 'Asistente base conocimiento', 'SEMARNAT final'], owners: ['IoT Engineer', 'ML Engineer', 'Legal'], hours: 240, milestone: 'Streaming operativo + legal completo' }, sem2: { tasks: ['Sensores installation', 'GPT-4 Vision integration', 'App beta testing'], owners: ['IoT Engineer', 'ML Engineer', 'QA'], hours: 240, milestone: 'Sensores instalados + Vision AI' }, sem3: { tasks: ['InfluxDB optimization', 'Marketplace MVP design', 'Dashboard operativo'], owners: ['IoT Engineer', 'Full-Stack', 'Frontend'], hours: 240, milestone: 'DB optimizada + marketplace diseado' }, sem4: { tasks: ['Modelos predictivos', 'Proveedores onboarding', 'App production'], owners: ['Data Scientist', 'Full-Stack', 'Frontend'], hours: 240, milestone: 'Modelos >85% + marketplace funcional' } }, mes6: { titulo: 'Deployment 1ra Vagoneta + Ecosistema Integrado', sem1: { tasks: ['1ra vagoneta deployment', 'Marketplace transaccional', 'HASE >90% validation'], owners: ['IoT Engineer', 'Full-Stack', 'Data Scientist'], hours: 240, milestone: '1ra vagoneta transmitiendo datos' }, sem2: { tasks: ['Streaming datos validacin', 'Asistente multimodal', 'Contratos firmados'], owners: ['IoT Engineer', 'ML Engineer', 'Business'], hours: 240, milestone: 'Datos streaming + contratos' }, sem3: { tasks: ['Super-PMA predicciones', 'Jetz+Meru integration', 'Compliance validation'], owners: ['Data Scientist', 'Full-Stack', 'Legal'], hours: 240, milestone: 'Predicciones funcionales + partnerships' }, sem4: { tasks: ['Ecosistema 4 agentes integrado', 'Marketplace primeras transacciones', 'QA setup'], owners: ['All Team', 'Full-Stack', 'QA Engineer'], hours: 240, milestone: 'MVP completo operacional' } }, mes7: { titulo: '2da Vagoneta + Validacin Comercial', sem1: { tasks: ['2da vagoneta deployment', 'Marketplace optimizacin', 'Pruebas carga'], owners: ['IoT Engineer', 'Full-Stack', 'QA Engineer'], hours: 240, milestone: '2da vagoneta operativa' }, sem2: { tasks: ['Anlisis datos piloto', 'Comisiones automatizadas', 'Performance monitoring'], owners: ['Data Scientist', 'Backend', 'DevOps'], hours: 240, milestone: 'Datos validacin + comisiones' }, sem3: { tasks: ['Correlacin mantenimiento-riesgo', 'Primeros ingresos marketplace', 'NPS >50 tracking'], owners: ['Data Scientist', 'Business', 'Business'], hours: 240, milestone: 'Correlacin cuantificada + ingresos' }, sem4: { tasks: ['Optimizacin modelos', 'Feedback loops', 'Documentacin QA'], owners: ['ML Engineer', 'All Team', 'QA Engineer'], hours: 240, milestone: 'Optimizacin + feedback integrado' } }, mes8: { titulo: '3ra Vagoneta + Marketplace Escalamiento', sem1: { tasks: ['3ra vagoneta deployment', 'Marketplace scaling', 'Diagnsticos premium'], owners: ['IoT Engineer', 'Full-Stack', 'ML Engineer'], hours: 240, milestone: '3ra vagoneta + premium services' }, sem2: { tasks: ['3 vagonetas >95% uptime', 'Proveedores expansion', 'Automatizacin testing'], owners: ['IoT Engineer', 'Business', 'QA Engineer'], hours: 240, milestone: '3 vagonetas estables' }, sem3: { tasks: ['Anlisis economa unitaria', '$500/vehculo/mes target', 'Regresin testing'], owners: ['Data Scientist', 'Business', 'QA Engineer'], hours: 240, milestone: 'Economa unitaria validada' }, sem4: { tasks: ['Refinamiento ecosistema', 'Business validation', 'Documentation'], owners: ['All Team', 'Business', 'QA Engineer'], hours: 240, milestone: 'Ecosistema refinado + validacin business' } }, mes9: { titulo: 'Optimizacin Final + Datos Validacin', sem1: { tasks: ['Optimizacin performance', 'Morosidad = 0% validation', 'Stress testing'], owners: ['All Team', 'Business', 'QA Engineer'], hours: 240, milestone: 'Performance optimizado' }, sem2: { tasks: ['Machine learning refinement', 'Business metrics final', 'Load testing'], owners: ['ML Team', 'Business', 'QA Engineer'], hours: 240, milestone: 'ML optimizado + mtricas' }, sem3: { tasks: ['Final validation KPIs', 'NPS >50 achieved', 'Security testing'], owners: ['All Team', 'Business', 'QA Engineer'], hours: 240, milestone: 'KPIs validados' }, sem4: { tasks: ['Piloto final analysis', 'Serie A preparation start', 'Final documentation'], owners: ['All Team', 'Business', 'All Team'], hours: 240, milestone: 'Piloto completo + Serie A prep' } }, mes10: { titulo: 'Documentacin + Serie A Preparacin', sem1: { tasks: ['Technical documentation', 'Business case documentation', 'Data room start'], owners: ['Tech Team', 'Business', 'All Team'], hours: 200, milestone: 'Documentacin tcnica completa' }, sem2: { tasks: ['API documentation', 'Financial projections', 'Investor materials'], owners: ['Backend', 'CFO', 'Business'], hours: 200, milestone: 'Documentacin APIs + financiera' }, sem3: { tasks: ['Architecture diagrams', 'ROI validation', 'Pitch deck'], owners: ['CTO', 'CFO', 'CEO'], hours: 200, milestone: 'Materiales investor ready' }, sem4: { tasks: ['Final testing', 'Business validation', 'Legal compliance'], owners: ['QA Engineer', 'Business', 'Legal'], hours: 200, milestone: 'Validacin final completa' } }, mes11: { titulo: 'Data Room + Investor Outreach', sem1: { tasks: ['Data room 100% complete', 'NPS >70 achievement', 'Investor meetings'], owners: ['All Team', 'Business', 'CEO'], hours: 180, milestone: 'Data room completo' }, sem2: { tasks: ['Due diligence prep', 'Financial audits', 'Tech presentations'], owners: ['All Team', 'CFO', 'CTO'], hours: 180, milestone: 'Due diligence ready' }, sem3: { tasks: ['Investor demos', 'Technical deep dives', 'Legal reviews'], owners: ['CEO', 'CTO', 'Legal'], hours: 180, milestone: 'Investor engagement activo' }, sem4: { tasks: ['Term sheet negotiations', 'Technical validation', 'Compliance final'], owners: ['CEO', 'CTO', 'Legal'], hours: 180, milestone: 'Negociaciones activas' } }, mes12: { titulo: 'Serie A Cierre + Roadmap Post-Inversin', sem1: { tasks: ['Term sheet $45M negotiation', 'Technical roadmap post-Serie A', 'Team scaling plan'], owners: ['CEO', 'CTO', 'HR'], hours: 160, milestone: 'Term sheet en negociacin' }, sem2: { tasks: ['Legal documentation', 'Technology transition plan', 'Operational scaling'], owners: ['Legal', 'CTO', 'COO'], hours: 160, milestone: 'Documentacin legal avanzada' }, sem3: { tasks: ['Final validations', 'Post-investment planning', 'Team preparation'], owners: ['All Team', 'Leadership', 'HR'], hours: 160, milestone: 'Preparacin post-inversin' }, sem4: { tasks: ['Serie A closing', 'Roadmap execution start', 'Celebration'], owners: ['CEO', 'All Team', 'All Team'], hours: 160, milestone: 'Serie A cerrada exitosamente' } } };
        const complianceTimeline = { 
            repuve: { 
                periodo: 'Mes 2-4', 
                proceso: [
                    'Alta de la Empresa como \'Sujeto Obligado\'',
                    'Inscripcin de cada unidad al padrn vehicular',
                    'Colocacin de constancia (chip/calcomana)',
                    'Reporte de estatus legal y de propiedad'
                ], 
                costo: 15000, 
                timeline: '6-8 semanas proceso', 
                criticidad: 'ALTA - Requisito indispensable para operar y dar certeza jurdica.' 
            }, 
            semarnat: { 
                periodo: 'Mes 3-4', 
                proceso: [
                    'Verificacin de Emisiones Contaminantes (NOM-041)',
                    'Verificacin de Lmites de Ruido del Motor (NOM-082)',
                    'Obtencin de hologramas y certificados vigentes',
                    'Cumplimiento con inspecciones de PROFEPA'
                ], 
                timeline: '6-8 semanas paralelo REPUVE', 
                criticidad: 'ALTA - Requisito para la circulacin legal de la flota.' 
            }, 
            pld: { 
                periodo: 'Mes 1-12 (Continuo)', 
                proceso: [
                    'Alta como Sujeto de Actividad Vulnerable (compra/venta de vehculos)',
                    'Identificacin de Clientes en transacciones',
                    'Restriccin de uso de efectivo en pagos > 3,210 UMA (~$350K MXN)',
                    'Presentacin de Avisos a la UIF por operaciones > 6,420 UMA (~$700K MXN)'
                ], 
                criticidad: 'CONTINUA - Riesgo legal y financiero mayor.' 
            } 
        };
        const kpisConCorrelacion = { mes3: { tecnicos: ['HASE >80% AUC (features Base Histrica validadas)', 'Social >85%', 'OCR >95%', 'MVP Asistente >95% OCR accuracy'], business: ['Equipo 100%', 'RAG-DNA completo', '17 vagonetas adoptando sistema MVP'], financial: ['Burn rate: $638k/mes', 'Runway: 8.5 meses'], correlacion: 'Precisin tcnica  Confianza investor  Capital availability' }, mes6: { tecnicos: ['HASE >90% AUC', 'PIA <2min SLA', '1ra vagoneta 99.5% uptime'], business: ['Contratos piloto firmados', 'REPUVE/SEMARNAT OK'], financial: ['Burn rate: $875k/mes', 'Runway: 5 meses'], correlacion: 'Performance tcnico  Viabilidad comercial' }, mes9: { tecnicos: ['Super-PMA >85% accuracy', 'Marketplace transaccional', '3 vagonetas >95% uptime'], business: ['Ingresos marketplace', 'NPS >50'], financial: ['Ingresos: $15k/mes', 'Burn rate (neto): $850k/mes'], correlacion: 'Eficiencia operativa  Rentabilidad comprobada' }, mes12: { tecnicos: ['Ecosistema optimizado', 'Documentacin completa', 'SOC2-ready'], business: ['Data room completo', 'NPS >70'], financial: ['Term sheet $45M', 'Economa unitaria validada'], correlacion: 'Madurez tcnica  Readiness Serie A' } };
        const diferenciadores = { filosofia: { titulo: 'Humanamente Tecnolgica', descripcion: 'IA para escalar empata, no reemplazar humanos', implementacion: 'PIA emptico + Social scoring + Support 24/7', ventaja: 'Confianza en mercado histricamente explotado' }, cartaAval: { titulo: 'Carta Aval de Ruta + Dacin en Pago - Colateral Social nico', descripcion: 'Primer scoring financiero basado en capital social', implementacion: 'OCR + validacin + algoritmo correlacin >85%', ventaja: 'Imposible replicar - conocimiento cultural 15+ aos' }, pagosInclusivos: { titulo: 'Stack Pagos 100% Inclusivo', descripcion: '70% poblacin no-bancarizada  100% accesible', implementacion: 'STP + Oxxo + PLD + Terminal POS', ventaja: 'TAM mantiene $10.9B vs $3B competencia' }, ragDna: { titulo: 'RAG-DNA: Experience-to-Algorithm', descripcion: '15+ aos experiencia convertida en IA', implementacion: 'Entrevistas  Sistematizacin  Algoritmos', ventaja: 'Conocimiento imposible adquirir por competidores' }, socios: { titulo: 'Socios, No Acreedores', descripcion: 'Resiliencia como Servicio vs prstamo tradicional', implementacion: 'Flexibilidad + Support + Marketplace + Maintenance', ventaja: 'Loyalty en mercado con desconfianza histrica' }, edaAdvantage: { titulo: 'EDA Pre-Investment Completado', descripcion: 'Base Histrica 2013-2025 ya analizada  Features validadas  Zero discovery risk', implementacion: '12 aos patrones + comportamientos + eventos crticos sistematizados', ventaja: 'Competidores necesitan 6-12 meses EDA, nosotros Day 1 productive' } };

        
        // --- HELPERS ---
        const formatCurrency = (value) => new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN', minimumFractionDigits: 0 }).format(value);
        const formatNumber = (value) => new Intl.NumberFormat('es-MX').format(value);



        // --- RENDER FUNCTIONS ---

        // 1. Tesis y Diferenciadores
        function renderInvestmentChart() {
            const ctx = document.getElementById('investmentDonutChart')?.getContext('2d');
            if (!ctx) return;
            const data = presupuestoReal.distribucion;
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Core IA', 'CAPEX Piloto', 'Equipo Total', 'SaaS + Pagos', 'RAG-DNA', 'Reserva'],
                    datasets: [{
                        data: [data.coreIA, data.capexPiloto, data.equipoTotal, data.saasStack, data.ragDNA, data.reserva],
                        backgroundColor: [MANDATORY_CHART_COLORS.teal, MANDATORY_CHART_COLORS.sky, MANDATORY_CHART_COLORS.orange, MANDATORY_CHART_COLORS.amber, MANDATORY_CHART_COLORS.purple, MANDATORY_CHART_COLORS.green],
                        borderColor: '#f8f7f4',
                        borderWidth: 4
                    }]
                },
                options: { 
                    ...CONDUCTORES_CHART_CONFIG.defaultOptions,
                    cutout: '60%', 
                    plugins: { 
                        ...CONDUCTORES_CHART_CONFIG.defaultOptions.plugins,
                        legend: { 
                            ...CONDUCTORES_CHART_CONFIG.defaultOptions.plugins.legend,
                            position: 'bottom' 
                        }, 
                        tooltip: { 
                            ...CONDUCTORES_CHART_CONFIG.defaultOptions.plugins.tooltip,
                            callbacks: { label: (c) => `${c.label}: ${formatCurrency(c.parsed)}` } 
                        } 
                    } 
                }
            });
        }
        
        // ROI COMPETITIVO ENGINE - NUESTRO MODELO VS TRADICIONAL
        const COMPETITIVE_ROI_ENGINE = {
            // Costos anuales modelo tradicional (por 750 unidades objetivo)
            tradicionalAnual: {
                personal: 1568000,        // 49 FTE @ $32K promedio
                scoringManual: 840000,    // Procesos manuales + scoring bsico  
                mantenimiento: 1125000,   // Reactivo, sin prediccin
                cobranza: 680000,         // Departamento completo
                inspeccion: 320000,       // Inspecciones manuales
                total: 4533000           // $4.53M anuales operativo tradicional
            },
            
            // Costos anuales modelo IA-nativo (mismo volumen)
            iaNativoAnual: {
                personal: 936000,         // 18 FTE @ $52K promedio (mayor skill)
                techStack: 400000,        // SaaS + APIs + Infrastructure (optimizado)
                mantenimiento: 550000,    // 50% reduccin va Super-PMA + AI
                aiOperations: 350000,     // Operacin optimizada de 4 agentes IA
                total: 2236000           // $2.24M anuales operativo IA-nativo
            },
            
            // Inversin inicial (SEED) - solo para ROI competitivo
            inversionInicial: 5800000,  // $5.80M inversin competitiva (58% target)
            
            // Ahorros anuales = diferencia operativa
            ahorroAnual: function() {
                return this.tradicionalAnual.total - this.iaNativoAnual.total;
            },
            
            // Clculo ROI competitivo ao por ao
            calculateCompetitiveROI: function(year) {
                let cumulativeTradicional = 0;
                let cumulativeIANativo = this.inversionInicial; // Inversin inicial
                let totalAhorros = 0;
                
                // Factores de ramp-up realistas
                const rampFactors = [0.5, 0.7, 0.85, 0.95, 1.0];
                
                for(let y = 1; y <= year; y++) {
                    const rampFactor = rampFactors[y-1] || 1.0;
                    
                    // Costos acumulados
                    cumulativeTradicional += this.tradicionalAnual.total * rampFactor;
                    cumulativeIANativo += this.iaNativoAnual.total * rampFactor;
                    
                    // Ahorros anuales acumulados
                    const ahorroAnual = this.ahorroAnual() * rampFactor;
                    totalAhorros += ahorroAnual;
                }
                
                // Ahorros netos = ahorros totales - inversin inicial
                const cumulativeAhorros = totalAhorros - this.inversionInicial;
                
                // ROI = ahorros netos / inversin inicial
                const roi = (cumulativeAhorros / this.inversionInicial) * 100;
                
                return {
                    year,
                    cumulativeTradicional,
                    cumulativeIANativo, 
                    cumulativeAhorros,
                    totalAhorros,
                    roi: Math.round(roi * 10) / 10,
                    paybackMonths: this.calculatePayback(year),
                    ahorroAnual: this.ahorroAnual()
                };
            },
            
            calculatePayback: function(year) {
                const monthlyAhorro = this.ahorroAnual() / 12;
                if (monthlyAhorro <= 0) return 'N/A';
                return Math.round(this.inversionInicial / monthlyAhorro);
            }
        };

        // TECH STACK ROI ENGINE - RETORNO INVERSIN IA
        const TECH_ROI_ENGINE = {
            // Inversin tech pura (sin CAPEX)
            techInvestment: {
                coreIA: 2130000,          // 4 agentes IA
                equipoTech: 1455000,      // Solo roles tech del ESOP
                saasStack: 631000,        // SaaS + APIs + Infrastructure
                ragDNA: 150000,           // RAG-DNA development
                infrastructure: 538000,   // AWS + DevOps + Security
                total: 4904000           // $4.90M inversin tech pura
            },
            
            // Ahorros generados especficamente por tech
            techSavings: {
                automationSavings: 850000,      // Procesos automatizados
                predictiveMaintenance: 385000,   // Super-PMA savings
                aiScoringEfficiency: 680000,     // HASE + PIA efficiency
                supportAutomation: 475000,       // Asistente + deflection
                operationalOptimization: 360000, // Workflow optimization
                total: 2750000                  // $2.75M ahorros tech anuales
            },
            
            // Clculo ROI tech stack ao por ao
            calculateTechROI: function(year) {
                let cumulativeSavings = 0;
                const rampFactors = [0.4, 0.6, 0.8, 0.95, 1.0]; // Tech ramp ms conservador
                
                for(let y = 1; y <= year; y++) {
                    const rampFactor = rampFactors[y-1] || 1.0;
                    cumulativeSavings += this.techSavings.total * rampFactor;
                }
                
                const netReturn = cumulativeSavings - this.techInvestment.total;
                const roi = (netReturn / this.techInvestment.total) * 100;
                
                return {
                    year,
                    techInvestment: this.techInvestment.total,
                    cumulativeSavings,
                    netReturn,
                    roi: Math.round(roi * 10) / 10,
                    paybackMonths: Math.round(this.techInvestment.total / (this.techSavings.total / 12))
                };
            }
        };
        function renderROIChart() {
            const ctx = document.getElementById('roiComparisonChart')?.getContext('2d');
            if (!ctx) return;

            // Generar datos dinmicos usando COMPETITIVE_ROI_ENGINE
            const labels = Array.from({length: 5}, (_, i) => `Ao ${i + 1}`);
            const tradicionalData = [];
            const iaNativoData = [];
            const ahorrosData = [];
            
            for(let year = 1; year <= 5; year++) {
                const result = COMPETITIVE_ROI_ENGINE.calculateCompetitiveROI(year);
                tradicionalData.push(result.cumulativeTradicional);
                iaNativoData.push(result.cumulativeIANativo);
                ahorrosData.push(result.cumulativeAhorros);
            }

            const roiChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Costo Acumulado Tradicional',
                            data: tradicionalData,
                            borderColor: MANDATORY_CHART_COLORS.orange,
                            backgroundColor: MANDATORY_CHART_COLORS.orange + '1A',
                            fill: false,
                            tension: 0.3,
                            borderWidth: 4,
                            pointRadius: 8
                        },
                        {
                            label: 'Costo Acumulado IA-Nativo',
                            data: iaNativoData,
                            borderColor: MANDATORY_CHART_COLORS.green,
                            backgroundColor: MANDATORY_CHART_COLORS.green + '1A',
                            fill: false,
                            tension: 0.3,
                            borderWidth: 4,
                            pointRadius: 8
                        },
                        {
                            label: 'Ahorros Netos Acumulados',
                            data: ahorrosData,
                            borderColor: MANDATORY_CHART_COLORS.teal,
                            backgroundColor: MANDATORY_CHART_COLORS.teal + '1A',
                            fill: true,
                            tension: 0.3,
                            borderWidth: 5,
                            pointRadius: 10
                        }
                    ]
                },
                options: {
                    ...CONDUCTORES_CHART_CONFIG.defaultOptions,
                    plugins: {
                        ...CONDUCTORES_CHART_CONFIG.defaultOptions.plugins,
                        tooltip: {
                            ...CONDUCTORES_CHART_CONFIG.defaultOptions.plugins.tooltip,
                            callbacks: {
                                label: (c) => `${c.dataset.label}: ${formatCurrency(c.parsed.y)}`,
                                afterBody: (tooltipItems) => {
                                    const year = tooltipItems[0].dataIndex + 1;
                                    const result = COMPETITIVE_ROI_ENGINE.calculateCompetitiveROI(year);
                                    return [`ROI vs Competencia: ${result.roi}%`, `Payback: ${result.paybackMonths} meses`];
                                }
                            }
                        }
                    },
                    scales: {
                        ...CONDUCTORES_CHART_CONFIG.defaultOptions.scales,
                        y: {
                            ...CONDUCTORES_CHART_CONFIG.defaultOptions.scales.y,
                            title: { display: true, text: 'Costo Acumulado (MXN)', color: '#94a3b8' }
                        }
                    }
                }
            });

            // Actualizar ROI slider para competitivo
            const roiSlider = document.getElementById('roi-years');
            if (roiSlider) {
                const updateCompetitiveMetrics = (year) => {
                    const result = COMPETITIVE_ROI_ENGINE.calculateCompetitiveROI(year);
                    
                    document.getElementById('roi-percentage').textContent = `${result.roi}%`;
                    document.getElementById('payback-period').textContent = `${result.paybackMonths} meses`;
                    document.getElementById('savings-total').textContent = formatCurrency(Math.max(0, result.cumulativeAhorros));
                };

                roiSlider.addEventListener('input', (e) => {
                    const years = parseInt(e.target.value);
                    document.getElementById('years-label').textContent = years;
                    updateCompetitiveMetrics(years);
                });

                updateCompetitiveMetrics(5); // Render inicial
            }
        }

        function renderTechROIChart() {
            const ctx = document.getElementById('techROIChart')?.getContext('2d');
            if (!ctx) return;

            // Generar datos tech ROI
            const labels = Array.from({length: 5}, (_, i) => `Ao ${i + 1}`);
            const investmentLine = [];
            const savingsData = [];
            const netReturnData = [];
            
            for(let year = 1; year <= 5; year++) {
                const result = TECH_ROI_ENGINE.calculateTechROI(year);
                investmentLine.push(result.techInvestment);
                savingsData.push(result.cumulativeSavings);
                netReturnData.push(result.netReturn);
            }

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Inversin Tech Stack',
                            data: investmentLine,
                            borderColor: MANDATORY_CHART_COLORS.orange,
                            backgroundColor: MANDATORY_CHART_COLORS.orange + '1A',
                            fill: false,
                            borderDash: [5, 5],
                            tension: 0.1
                        },
                        {
                            label: 'Ahorros Tech Acumulados',
                            data: savingsData,
                            borderColor: MANDATORY_CHART_COLORS.green,
                            backgroundColor: MANDATORY_CHART_COLORS.green + '1A',
                            fill: false,
                            tension: 0.3,
                            borderWidth: 4
                        },
                        {
                            label: 'Retorno Neto Tech',
                            data: netReturnData,
                            borderColor: MANDATORY_CHART_COLORS.teal,
                            backgroundColor: MANDATORY_CHART_COLORS.teal + '1A',
                            fill: true,
                            tension: 0.3,
                            borderWidth: 4
                        }
                    ]
                },
                options: {
                    ...CONDUCTORES_CHART_CONFIG.defaultOptions,
                    plugins: {
                        ...CONDUCTORES_CHART_CONFIG.defaultOptions.plugins,
                        tooltip: {
                            ...CONDUCTORES_CHART_CONFIG.defaultOptions.plugins.tooltip,
                            callbacks: {
                                label: (c) => `${c.dataset.label}: ${formatCurrency(c.parsed.y)}`,
                                afterBody: (tooltipItems) => {
                                    const year = tooltipItems[0].dataIndex + 1;
                                    const result = TECH_ROI_ENGINE.calculateTechROI(year);
                                    return [`ROI Tech: ${result.roi}%`, `Payback: ${result.paybackMonths} meses`];
                                }
                            }
                        }
                    },
                    scales: {
                        ...CONDUCTORES_CHART_CONFIG.defaultOptions.scales,
                        y: {
                            ...CONDUCTORES_CHART_CONFIG.defaultOptions.scales.y,
                            title: { display: true, text: 'Inversin y Retorno Tech (MXN)', color: '#94a3b8' }
                        }
                    }
                }
            });
        }
        // Populate ROI Competitive Table
        function populateCompetitiveROI() {
            const tbody = document.getElementById('competitive-roi-breakdown');
            if (!tbody) return;
            
            const rampFactors = [0.5, 0.7, 0.85, 0.95, 1.0];
            
            tbody.innerHTML = '';
            for(let year = 1; year <= 5; year++) {
                const result = COMPETITIVE_ROI_ENGINE.calculateCompetitiveROI(year);
                const rampFactor = rampFactors[year-1];
                const ahorroAnual = COMPETITIVE_ROI_ENGINE.ahorroAnual() * rampFactor;
                
                const row = document.createElement('tr');
                row.className = year === 5 ? 'bg-green-100 border-2 border-green-400' : '';
                if (year <= 2) row.className += ' bg-red-50';
                if (year === 3) row.className += ' bg-yellow-50';
                if (year >= 4) row.className += ' bg-green-50';
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">Ao ${year}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-gray-600">${Math.round(rampFactor * 100)}%</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-red-600">${formatCurrency(result.cumulativeTradicional)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-green-600">${formatCurrency(result.cumulativeIANativo)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-center font-semibold ${ahorroAnual >= 0 ? 'text-green-600' : 'text-red-600'}">${formatCurrency(ahorroAnual)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-center font-bold ${result.roi >= 0 ? 'text-green-700' : 'text-red-700'} text-lg">${result.roi}%</td>
                `;
                tbody.appendChild(row);
            }
        }

        // Populate Tech ROI Breakdown
        function populateTechROI() {
            // Investment breakdown
            const investmentContainer = document.getElementById('tech-investment-breakdown');
            if (investmentContainer) {
                investmentContainer.innerHTML = Object.entries(TECH_ROI_ENGINE.techInvestment)
                    .filter(([key]) => key !== 'total')
                    .map(([key, value]) => {
                        const labels = {
                            coreIA: 'Core IA (4 agentes)',
                            equipoTech: 'Equipo Tech ESOP',
                            saasStack: 'SaaS + Infrastructure',
                            ragDNA: 'RAG-DNA Development',
                            infrastructure: 'AWS + DevOps + Security'
                        };
                        return `
                            <div class="flex justify-between">
                                <span>${labels[key]}:</span>
                                <span class="font-semibold">${formatCurrency(value)}</span>
                            </div>
                        `;
                    }).join('') + `
                    <div class="border-t pt-2 flex justify-between font-bold text-lg">
                        <span>Total Tech Investment:</span>
                        <span class="text-purple-600">${formatCurrency(TECH_ROI_ENGINE.techInvestment.total)}</span>
                    </div>
                `;
            }

            // Savings breakdown
            const savingsContainer = document.getElementById('tech-savings-breakdown');
            if (savingsContainer) {
                savingsContainer.innerHTML = Object.entries(TECH_ROI_ENGINE.techSavings)
                    .filter(([key]) => key !== 'total')
                    .map(([key, value]) => {
                        const labels = {
                            automationSavings: 'Automatizacin procesos',
                            predictiveMaintenance: 'Mantenimiento predictivo',
                            aiScoringEfficiency: 'Eficiencia scoring IA',
                            supportAutomation: 'Soporte automatizado',
                            operationalOptimization: 'Optimizacin operativa'
                        };
                        return `
                            <div class="flex justify-between">
                                <span>${labels[key]}:</span>
                                <span class="font-semibold">${formatCurrency(value)}</span>
                            </div>
                        `;
                    }).join('') + `
                    <div class="border-t pt-2 flex justify-between font-bold text-lg">
                        <span>Total Ahorro Anual Tech:</span>
                        <span class="text-green-600">${formatCurrency(TECH_ROI_ENGINE.techSavings.total)}</span>
                    </div>
                `;
            }

            // Update tech metrics
            const result5Year = TECH_ROI_ENGINE.calculateTechROI(5);
            document.getElementById('tech-roi-percentage').textContent = `${result5Year.roi}%`;
            document.getElementById('tech-payback-period').textContent = `${result5Year.paybackMonths} meses`;
            document.getElementById('tech-investment-total').textContent = formatCurrency(TECH_ROI_ENGINE.techInvestment.total);
            document.getElementById('tech-cumulative-savings').textContent = `${(result5Year.cumulativeSavings/1000000).toFixed(2)}M`;
            document.getElementById('tech-investment-display').textContent = `${(TECH_ROI_ENGINE.techInvestment.total/1000000).toFixed(2)}M`;
        }

        function renderRoiBreakdownTable(year) {
            const body = document.getElementById('roi-breakdown-body');
            if (!body) return;

            const tradicionalCosts = {
                personal: 3760000 / 5 * year,
                scoringManual: 1800000 / 5 * year,
                mantenimientoReactivo: 2200000 / 5 * year
            };
            const iaNativoCosts = {
                personal: 1490000 / 5 * year,
                scoringManual: (2265000 + 631000) / 5, // Simplified annual cost of tech
                mantenimientoReactivo: 950000 / 5 * year
            };

            const data = [
                { component: 'Costo de Personal', trad: tradicionalCosts.personal, ia: iaNativoCosts.personal },
                { component: 'Scoring y Operaciones', trad: tradicionalCosts.scoringManual, ia: iaNativoCosts.scoringManual },
                { component: 'Mantenimiento', trad: tradicionalCosts.mantenimientoReactivo, ia: iaNativoCosts.mantenimientoReactivo }
            ];

            body.innerHTML = data.map(row => `
                <tr class="text-sm">
                    <td class="px-4 py-3 font-medium text-gray-900">${row.component}</td>
                    <td class="px-4 py-3 text-center text-red-600">${formatCurrency(row.trad)}</td>
                    <td class="px-4 py-3 text-center text-green-600">${formatCurrency(row.ia)}</td>
                    <td class="px-4 py-3 text-center font-semibold text-teal-700">${formatCurrency(row.trad - row.ia)}</td>
                </tr>
            `).join('');
        }

        function renderDiferenciadores() {
            const container = document.getElementById('diferenciadores-container');
            if (!container) return;
            container.innerHTML = Object.values(diferenciadores).map(d => `
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                    <h4 class="font-bold text-teal-800 mb-2">${d.titulo}</h4>
                    <p class="text-sm text-slate-600 mb-2">${d.descripcion}</p>
                    <p class="text-xs font-semibold text-slate-500">Ventaja: <span class="font-normal text-slate-700">${d.ventaja}</span></p>
                </div>
            `).join('');
        }

        // 2. Financiero
        function renderFinancials() {
            const ctx = document.getElementById('financialPlanChart')?.getContext('2d');
            if (!ctx) return;
            
            const labels = Array.from({ length: 12 }, (_, i) => `Mes ${i + 1}`);
            const datasets = [
                { label: 'Equipo Tcnico (ESOP)', data: flujosEfectivoReales.gastoEquipoTecnico, backgroundColor: MANDATORY_CHART_COLORS.teal, stack: 'gastos' },
                { label: 'Liderazgo (COO/PMO)', data: flujosEfectivoReales.gastoLiderazgo, backgroundColor: MANDATORY_CHART_COLORS.orange, stack: 'gastos' },
                { label: 'Desarrollo', data: flujosEfectivoReales.gastoDesarrollo, backgroundColor: MANDATORY_CHART_COLORS.purple, stack: 'gastos' },
                { label: 'CAPEX', data: flujosEfectivoReales.gastoCapex, backgroundColor: MANDATORY_CHART_COLORS.sky, stack: 'gastos' },
                { label: 'Pagos/SaaS', data: flujosEfectivoReales.stackInclusivo, backgroundColor: MANDATORY_CHART_COLORS.amber, stack: 'gastos' },
                { label: 'Compliance', data: flujosEfectivoReales.compliance, backgroundColor: MANDATORY_CHART_COLORS.green, stack: 'gastos' },
            ];

            let gastoAcumulado = 0;
            const efectivoRestante = flujosEfectivoReales.gastoEquipoTecnico.map((_, i) => {
                const gastoMes = datasets.reduce((sum, ds) => sum + ds.data[i], 0);
                gastoAcumulado += gastoMes;
                return flujosEfectivoReales.inversionInicial - gastoAcumulado;
            });

            datasets.push({
                label: 'Efectivo Restante',
                data: efectivoRestante,
                type: 'line',
                borderColor: MANDATORY_CHART_COLORS.orange,
                backgroundColor: MANDATORY_CHART_COLORS.orange + '1A',
                fill: true,
                yAxisID: 'y1',
                tension: 0.3
            });

            const financialChart = new Chart(ctx, {
                type: 'bar',
                data: { labels, datasets },
                options: {
                    ...CONDUCTORES_CHART_CONFIG.defaultOptions,
                    plugins: { 
                        ...CONDUCTORES_CHART_CONFIG.defaultOptions.plugins,
                        tooltip: { 
                            ...CONDUCTORES_CHART_CONFIG.defaultOptions.plugins.tooltip,
                            callbacks: { label: (c) => `${c.dataset.label}: ${formatCurrency(c.parsed.y)}` } 
                        }, 
                        legend: { 
                            ...CONDUCTORES_CHART_CONFIG.defaultOptions.plugins.legend,
                            position: 'bottom' 
                        } 
                    },
                    scales: {
                        x: { 
                            ...CONDUCTORES_CHART_CONFIG.defaultOptions.scales.x,
                            stacked: true 
                        },
                        y: { 
                            ...CONDUCTORES_CHART_CONFIG.defaultOptions.scales.y,
                            stacked: true, 
                            title: { display: true, text: 'Gasto Mensual (MXN)', color: '#94a3b8' } 
                        },
                        y1: { 
                            position: 'right', 
                            beginAtZero: true, 
                            title: { display: true, text: 'Efectivo Restante (MXN)', color: '#94a3b8' }, 
                            grid: { drawOnChartArea: false },
                            ticks: { color: '#94a3b8', font: { family: 'Inter', size: 11, weight: '500' } },
                            border: { color: 'rgba(148, 163, 184, 0.2)' }
                        }
                    }
                }
            });

            const monthSlider = document.getElementById('month-slider');
            const updateKPIs = (month) => {
                const index = month - 1;
                
                const datasets = [
                    { data: flujosEfectivoReales.gastoEquipoTecnico },
                    { data: flujosEfectivoReales.gastoLiderazgo },
                    { data: flujosEfectivoReales.gastoDesarrollo },
                    { data: flujosEfectivoReales.gastoCapex },
                    { data: flujosEfectivoReales.stackInclusivo },
                    { data: flujosEfectivoReales.compliance },
                ];
                let gastoAcumuladoCalc = 0;
                const efectivoRestanteCalc = flujosEfectivoReales.gastoEquipoTecnico.map((_, i) => {
                    const gastoMesCalc = datasets.reduce((sum, ds) => sum + (ds.data[i] || 0), 0);
                    gastoAcumuladoCalc += gastoMesCalc;
                    return flujosEfectivoReales.inversionInicial - gastoAcumuladoCalc;
                });

                document.getElementById('month-label').textContent = month;
                const gastoMes = datasets.reduce((sum, ds) => sum + (ds.data[index] || 0), 0);
                const gastoAcc = datasets.reduce((total, ds) => total + ds.data.slice(0, month).reduce((a, b) => a + b, 0), 0);
                
                document.getElementById('kpi-gasto-mes').textContent = formatCurrency(gastoMes);
                document.getElementById('kpi-gasto-acumulado').textContent = formatCurrency(gastoAcc);
                document.getElementById('kpi-efectivo').textContent = formatCurrency(efectivoRestanteCalc[index]);
            };
            monthSlider.addEventListener('input', (e) => updateKPIs(parseInt(e.target.value)));
            updateKPIs(1);
        }
        
        function renderFinancialBreakdown() {
            const container = document.getElementById('financial-breakdown-container');
            if (!container) return;
            container.innerHTML = `
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                    <h4 class="font-semibold text-slate-800 mb-2">Notas del Flujo de Caja:</h4>
                    <ul class="text-sm text-slate-600 list-disc list-inside space-y-1">
                        <li><strong>Stack Inclusivo:</strong> Escala de $10k a $35k en el Mes 4 con la activacin de APIs.</li>
                        <li><strong>Compliance:</strong> Pico de $15k en Mes 4 por setups iniciales, luego se estabiliza.</li>
                        <li><strong>CAPEX:</strong> Concentrado 100% en los Meses 6-8 para el despliegue de las 3 vagonetas piloto.</li>
                        <li><strong>Reserva:</strong> Los $44k se mantienen intactos como red de seguridad.</li>
                    </ul>
                </div>
            `;
        }

        // 3. Tecnologa
        function renderAgentes() {
            const container = document.getElementById('agentes-container');
            if (!container) return;
            container.innerHTML = Object.entries(agentesDetalleCompleto).map(([key, agent]) => {
                const breakdownTooltip = Object.entries(agent.breakdown).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)}: ${formatCurrency(v)}`).join(' | ');
                return `
                <div class="agent-card bg-white p-6 rounded-lg shadow-md border-l-4 border-teal-600 cursor-pointer" data-agent-key="${key}" data-ref="${key}-development" data-tooltip="${breakdownTooltip}">
                    <h3 class="font-bold text-lg text-slate-800">${key.toUpperCase()}</h3>
                    <p class="text-sm text-slate-600 mb-3">${agent.proposito || agent.diferenciadorUnico || ''}</p>
                    <p class="text-2xl font-bold text-teal-600">${formatCurrency(agent.presupuesto)}</p>
                    <p class="text-xs text-slate-500">${formatNumber(agent.horas)} horas desarrollo</p>
                    <div class="mt-3 text-xs text-slate-400">Click para detalles tcnicos </div>
                </div>
            `}).join('');
        }

        function renderArquitecturaDatos() {
            const container = document.getElementById('arquitectura-datos-container');
            if (!container) return;
            container.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <h4 class="font-semibold text-slate-800 mb-3">Fuentes de Datos y Endpoints</h4>
                        <div class="space-y-2 text-sm">
                            ${Object.entries(arquitecturaDatos.fuentes).map(([key, val]) => `
                                <div class="p-2 bg-slate-50 rounded">
                                    <div class="font-semibold">${key} <span class="text-xs font-normal text-slate-500">(${val.frecuencia})</span></div>
                                    <div class="text-xs text-teal-700 font-mono">${val.endpoint}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold text-slate-800 mb-3">Almacenamiento (Storage)</h4>
                        <div class="space-y-2 text-sm">
                            ${Object.entries(arquitecturaDatos.storage).map(([key, val]) => `
                                <div class="p-2 bg-slate-50 rounded"><strong>${key}:</strong> ${val}</div>
                            `).join('')}
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold text-slate-800 mb-3">ETL Pipeline</h4>
                        <div class="p-3 bg-slate-50 rounded">
                            <p><strong>Herramienta:</strong> ${arquitecturaDatos.etl.herramienta}</p>
                            <p><strong>Pipeline:</strong> ${arquitecturaDatos.etl.pipeline}</p>
                            <p><strong>Latencia Crtica:</strong> ${arquitecturaDatos.etl.latencia}</p>
                        </div>
                    </div>
                </div>
            `;
        }
        // 4. Ejecucin
        function renderWeeklyTimeline() {
            const container = document.getElementById('weekly-timeline-container');
            if (!container) return;

            const tabs = Object.keys(cronogramaSemanalCompleto).map((mesKey, index) => `
                <button class="tab-button px-4 py-2 text-sm font-medium rounded-md ${index === 0 ? 'active' : ''}" data-tab="${mesKey}">
                    ${mesKey.replace('mes', 'Mes ')}
                </button>
            `).join('');

            const content = Object.entries(cronogramaSemanalCompleto).map(([mesKey, mesData], index) => `
                <div class="tab-content mt-4 ${index === 0 ? 'active' : ''}" id="${mesKey}">
                    <h4 class="text-lg font-bold mb-4">${mesData.titulo}</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        ${Object.entries(mesData).filter(([key]) => key.startsWith('sem')).map(([semKey, semData]) => `
                            <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                                <h5 class="font-bold text-slate-800">Semana ${semKey.replace('sem', '')}</h5>
                                <ul class="text-xs text-slate-600 mt-2 space-y-1 list-disc list-inside">
                                    ${semData.tasks.map(t => `<li>${t}</li>`).join('')}
                                </ul>
                                <p class="text-xs font-semibold text-teal-700 mt-3">Owner(s): ${semData.owners.join(', ')}</p>
                                <div class="mt-3 pt-3 border-t">
                                    <p class="text-xs font-bold text-orange-600">Milestone: <span class="font-normal text-slate-700">${semData.milestone}</span></p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            container.innerHTML = `<div class="flex flex-wrap gap-2">${tabs}</div>${content}`;
            
            container.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', () => {
                    container.querySelector('.tab-button.active').classList.remove('active');
                    button.classList.add('active');
                    container.querySelector('.tab-content.active').classList.remove('active');
                    container.querySelector(`#${button.dataset.tab}`).classList.add('active');
                });
            });
        }
        function renderKpisCorrelacionados() {
            const container = document.getElementById('kpis-correlacionados-container');
            if(!container) return;
            container.innerHTML = Object.entries(kpisConCorrelacion).map(([mes, data]) => `
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                    <h4 class="font-bold text-lg text-slate-800 mb-3">Hitos del ${mes.replace('mes', 'Mes ')}</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div>
                            <h5 class="font-semibold text-teal-700 mb-2">KPIs Tcnicos</h5>
                            <ul class="list-disc list-inside space-y-1">${data.tecnicos.map(k => `<li>${k}</li>`).join('')}</ul>
                        </div>
                        <div>
                            <h5 class="font-semibold text-orange-700 mb-2">KPIs de Negocio</h5>
                            <ul class="list-disc list-inside space-y-1">${data.business.map(k => `<li>${k}</li>`).join('')}</ul>
                        </div>
                        <div>
                            <h5 class="font-semibold text-indigo-700 mb-2">KPIs Financieros</h5>
                            <ul class="list-disc list-inside space-y-1">${data.financial.map(k => `<li>${k}</li>`).join('')}</ul>
                        </div>
                    </div>
                    <div class="mt-3 pt-3 border-t">
                        <p class="text-sm font-semibold text-slate-700">Correlacin: <span class="font-normal">${data.correlacion}</span></p>
                    </div>
                </div>
            `).join('');
        }

        function renderCompliance() {
            const container = document.getElementById('compliance-container');
            if(!container) return;
            
            // Mapa de ttulos legibles
            const titles = {
                'repuve': 'REPUVE',
                'semarnat': 'SEMARNAT / PROFEPA', 
                'pld': 'PLD (Ley Antilavado)'
            };
            
            container.innerHTML = Object.entries(complianceTimeline).map(([key, data]) => `
                <div style="background-color: #fefce8; border: 1px solid #fde68a; border-left: 5px solid #facc15; padding: 1.5rem; border-radius: 8px;">
                    <h4 style="font-weight: 800; color: #1e293b; font-size: 1.1rem;">${titles[key] || key.toUpperCase()}</h4>
                    <p style="font-size: 0.9rem; color: #475569; margin-bottom: 1rem;">${data.periodo}</p>
                    <ul style="list-style-position: inside; padding-left: 0; margin: 0; space-y: 0.5rem;">
                        ${data.proceso.map(p => `<li style="font-size: 0.9rem; color: #374151;"> ${p}</li>`).join('')}
                    </ul>
                    <div style="border-top: 1px solid #fde68a; margin-top: 1rem; padding-top: 1rem;">
                        <p style="font-size: 0.8rem; color: #854d0e; font-weight: 600;">Criticidad: ${data.criticidad}</p>
                    </div>
                </div>
            `).join('');
        }

        // 5. Equipo
        function renderTeamTable() {
            const table = document.getElementById('hr-table');
            const filter = document.getElementById('role-filter');
            if (!table || !filter) return;

            const thead = table.querySelector('thead');
            const tbody = table.querySelector('tbody');
            
            thead.innerHTML = `<tr>
                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rol</th>
                ${Array.from({length: 12}, (_, i) => `<th class="px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">M${i+1}</th>`).join('')}
            </tr>`;

            tbody.innerHTML = '';
            filter.innerHTML = '<option value="all">Todos los Roles</option>';
            equipoMatrizCompleta.roles.forEach(role => {
                const option = document.createElement('option');
                option.value = role.name;
                option.textContent = role.name;
                filter.appendChild(option);

                const tr = document.createElement('tr');
                tr.dataset.role = role.name;
                tr.className = role.type === 'ESOP' ? 'bg-amber-50' : '';
                tr.innerHTML = `
                    <td class="px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900">
                        <div class="flex items-center">
                            ${role.type === 'ESOP' ? '<span class="text-amber-500 mr-2"></span>' : ''}
                            ${role.name}
                        </div>
                        <div class="text-xs text-slate-500">${role.focus}</div>
                    </td>
                    ${role.allocations.map(task => `<td class="px-2 py-2 text-center text-xs text-gray-600">${task}</td>`).join('')}
                `;
                tbody.appendChild(tr);
            });

            filter.addEventListener('change', () => {
                const selectedRole = filter.value;
                tbody.querySelectorAll('tr').forEach(tr => {
                    tr.style.display = (selectedRole === 'all' || tr.dataset.role === selectedRole) ? '' : 'none';
                });
            });
            // AGREGAR al final de renderTeamTable() antes del cierre de funcin:
            // Render ESOP Profiles
            const profilesContainer = document.createElement('div');
            profilesContainer.className = 'mt-12';
            profilesContainer.innerHTML = `
              <div class="bg-gradient-to-r from-amber-50 to-orange-50 p-8 rounded-lg border border-amber-200">
                <div class="flex items-center mb-6">
                  <span class="text-3xl mr-3"></span>
                  <h3 class="font-bold text-2xl text-amber-800">Perfiles del Ncleo ESOP</h3>
                </div>
                <p class="text-amber-700 mb-6 text-sm">
                  El equipo de liderazgo tcnico con equity significativo y compromiso de largo plazo. 
                  <strong>10% equity pool</strong> con potencial de <strong>~$15MM MXN</strong> en Serie A exitosa @150M.
                </p>
                
                <div class="grid md:grid-cols-3 gap-6">
                  ${Object.entries(equipoESOPProfiles).map(([role, profile]) => `
                    <div class="esop-profile-card-premium-enhanced">
                      <div class="esop-card-background ${profile.color}-gradient-bg"></div>
                      <div class="esop-card-content">
                        <div class="profile-header-enhanced">
                          <div class="profile-avatar-mega">
                            <div class="avatar-background ${profile.color}-gradient"></div>
                            <i data-lucide="${profile.lucideIcon}" class="avatar-icon-enhanced"></i>
                            <div class="avatar-pulse-ring ${profile.color}"></div>
                          </div>
                          <div class="esop-badge-premium">
                            <i data-lucide="star" class="badge-icon"></i>
                            <span class="badge-text">ESOP Core</span>
                            <div class="badge-glow"></div>
                          </div>
                        </div>
                        
                        <div class="profile-title-section">
                          <h4 class="profile-name-enhanced"> ${role}</h4>
                          <div class="profile-subtitle-enhanced">ESOP Core Member</div>
                        </div>
                      
                      <div class="space-y-3">
                        <div>
                          <h5 class="font-semibold text-slate-700 text-sm mb-1">Perfil:</h5>
                          <p class="text-xs text-slate-600 leading-relaxed">${profile.bio}</p>
                        </div>
                        
                        <div>
                          <h5 class="font-semibold text-slate-700 text-sm mb-1">Expertise:</h5>
                          <p class="text-xs text-slate-600">${profile.expertise}</p>
                        </div>
                        
                        <div>
                          <h5 class="font-semibold text-slate-700 text-sm mb-1">Diferenciador:</h5>
                          <p class="text-xs text-${profile.color}-700 font-medium">${profile.diferenciador}</p>
                        </div>
                        
                        <div class="equity-highlight-banner">
                          <div class="equity-icon">
                            <i data-lucide="gem" class="w-6 h-6 text-amber-600"></i>
                          </div>
                          <div class="equity-text">
                            <strong>Equity Tier:</strong> ESOP Fundador
                          </div>
                          <div class="equity-value">~$upside</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  `).join('')}
                </div>
                
                <div class="mt-6 p-4 bg-amber-100 rounded-lg border border-amber-300">
                  <h4 class="font-bold text-amber-800 mb-2 flex items-center gap-2">
                    <i data-lucide="target" class="w-4 h-4"></i>
                    Alineacin de Incentivos
                  </h4>
                  <div class="grid md:grid-cols-2 gap-4 text-sm text-amber-700">
                    <div>
                      <strong>Modelo Hybrid:</strong> Salario competitivo + equity significativo = "golden handcuffs"
                    </div>
                    <div>
                      <strong>Upside Potencial:</strong> ~$15MM MXN valor colectivo en Serie A exitosa @150M
                    </div>
                  </div>
                </div>
              </div>
            `;

            // Insert after existing team table
            const teamSection = document.getElementById('equipo');
            const teamGrid = teamSection.querySelector('.grid');
            if (teamGrid && teamGrid.parentElement) {
                teamGrid.parentElement.appendChild(profilesContainer);
            }
        }
        
        // 6. Progreso
        function renderProgressTrackers() {
            const techContainer = document.getElementById('tech-progress-bars');
            const businessContainer = document.getElementById('business-progress-bars');
            const burnCtx = document.getElementById('burn-rate-chart')?.getContext('2d');
            if (!techContainer || !businessContainer || !burnCtx) return;

            // Simple progress simulation (replace with real data later)
            const techProgress = { 'HASE': 100, 'PIA': 80, 'Super-PMA': 60, 'Asistente': 50 };
            const businessProgress = { 'Piloto': 75, 'Legal': 100, 'Serie A Prep': 25 };

            techContainer.innerHTML = Object.entries(techProgress).map(([key, value]) => `
                <div>
                    <div class="flex justify-between mb-1"><span class="text-sm font-medium">${key}</span><span class="text-sm font-medium">${value}%</span></div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-teal-600 h-2.5 rounded-full" style="width: ${value}%"></div></div>
                </div>
            `).join('');

            businessContainer.innerHTML = Object.entries(businessProgress).map(([key, value]) => `
                <div>
                    <div class="flex justify-between mb-1"><span class="text-sm font-medium">${key}</span><span class="text-sm font-medium">${value}%</span></div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-orange-500 h-2.5 rounded-full" style="width: ${value}%"></div></div>
                </div>
            `).join('');

            const plannedBurn = flujosEfectivoReales.gastoEquipoTecnico.map((e, i) => e + flujosEfectivoReales.gastoLiderazgo[i] + flujosEfectivoReales.gastoDesarrollo[i] + flujosEfectivoReales.stackInclusivo[i] + flujosEfectivoReales.compliance[i] + flujosEfectivoReales.gastoCapex[i]);
            // Simulate actual burn for demo
            const actualBurn = plannedBurn.map((p, i) => i < 6 ? p * (1 - Math.random() * 0.1) : 0).filter(b => b > 0);
            
            new Chart(burnCtx, {
                type: 'line',
                data: {
                    labels: Array.from({length: actualBurn.length}, (_, i) => `Mes ${i+1}`),
                    datasets: [
                        { label: 'Burn Rate Planeado', data: plannedBurn, borderColor: '#a1a1aa', borderDash: [5, 5], fill: false },
                        { label: 'Burn Rate Real', data: actualBurn, borderColor: '#ef4444', fill: false }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
            });
        }

        // --- MODAL LOGIC WITH ACCESSIBILITY ---
        function setupModal() {
            const agentModal = document.getElementById('agent-modal');
            const closeAgentModalBtn = document.getElementById('close-modal');
            const capexModal = document.getElementById('capex-modal');
            const closeCapexModalBtn = document.getElementById('close-capex-modal');
            let lastActiveElement = null;

            // Function to trap focus within modal
            function trapFocus(modal) {
                const focusableElements = modal.querySelectorAll(
                    'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
                );
                const firstFocusable = focusableElements[0];
                const lastFocusable = focusableElements[focusableElements.length - 1];

                modal.addEventListener('keydown', (e) => {
                    if (e.key === 'Tab') {
                        if (e.shiftKey) {
                            if (document.activeElement === firstFocusable) {
                                e.preventDefault();
                                lastFocusable.focus();
                            }
                        } else {
                            if (document.activeElement === lastFocusable) {
                                e.preventDefault();
                                firstFocusable.focus();
                            }
                        }
                    }
                    if (e.key === 'Escape') {
                        if (modal === agentModal) closeAgentModal();
                        if (modal === capexModal) closeCapexModal();
                    }
                });
            }

            document.body.addEventListener('click', (e) => {
                const card = e.target.closest('.agent-card');
                if (card) {
                    const agentKey = card.dataset.agentKey;
                    const agentData = agentesDetalleCompleto[agentKey];
                    if (agentData) {
                        lastActiveElement = document.activeElement;
                        document.getElementById('modal-title').textContent = `${agentKey.toUpperCase()} - Blueprint Tcnico`;
                        document.getElementById('modal-content').innerHTML = createAgentModalContent(agentData);
                        agentModal.style.display = 'flex';
                        trapFocus(agentModal);
                        closeAgentModalBtn.focus();
                    }
                }
            });

            const closeAgentModal = () => {
                agentModal.style.display = 'none';
                if (lastActiveElement) {
                    lastActiveElement.focus();
                    lastActiveElement = null;
                }
            };
            
            const closeCapexModal = () => {
                capexModal.style.display = 'none';
                if (lastActiveElement) {
                    lastActiveElement.focus();
                    lastActiveElement = null;
                }
            };

            closeAgentModalBtn.addEventListener('click', closeAgentModal);
            agentModal.addEventListener('click', (e) => {
                if (e.target === agentModal) closeAgentModal();
            });

            if(closeCapexModalBtn) {
                closeCapexModalBtn.addEventListener('click', closeCapexModal);
                // Setup CAPEX modal opening
                document.body.addEventListener('click', (e) => {
                    if (e.target.textContent && e.target.textContent.includes('Ver desglose')) {
                        lastActiveElement = document.activeElement;
                        capexModal.style.display = 'flex';
                        trapFocus(capexModal);
                        closeCapexModalBtn.focus();
                    }
                });
            }
            
            if(capexModal) capexModal.addEventListener('click', (e) => {
                if (e.target === capexModal) closeCapexModal();
            });
        }

        function createAgentModalContent(agent) {
            return `
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                        <div class="bg-slate-50 p-3 rounded-lg"><p class="text-sm text-slate-500">Presupuesto</p><p class="text-xl font-bold">${formatCurrency(agent.presupuesto)}</p></div>
                        <div class="bg-slate-50 p-3 rounded-lg"><p class="text-sm text-slate-500">Horas</p><p class="text-xl font-bold">${formatNumber(agent.horas)}</p></div>
                        <div class="bg-slate-50 p-3 rounded-lg"><p class="text-sm text-slate-500">Diferenciador</p><p class="text-sm font-semibold">${agent.diferenciadorUnico || agent.proposito}</p></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Arquitectura y Stack</h4>
                            <div class="flex flex-wrap gap-2">${(agent.arquitectura || []).map(t => `<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">${t}</span>`).join('')}</div>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Endpoints API Clave</h4>
                            <div class="font-mono text-xs space-y-1">${(agent.apis || []).map(a => `<div>${a}</div>`).join('')}</div>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">KPIs Tcnicos</h4>
                            <ul class="text-sm list-disc list-inside">${(agent.kpisTecnicos || []).map(k => `<li>${k}</li>`).join('')}</ul>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">SLAs Operacionales</h4>
                            <div class="text-sm">${Object.entries(agent.sla || {}).map(([k,v]) => `<div><strong>${k}:</strong> ${v}</div>`).join('')}</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // AGREGAR: Perfiles ESOP Detallados
        const equipoESOPProfiles = {
          "Cientfico de Datos": {
            bio: "Ingeniera en Sistemas con Master en IA, 4+ aos liderando equipos de datos en empresas tech, especialista en infraestructura cloud y analytics avanzados",
            expertise: "Data Engineering, ETL pipelines, Azure/AWS, forecasting, team leadership, RPA automation",
            achievements: "Lder tcnica en RPA y analytics para empresas Fortune 500, experiencia en computer vision industrial",
            diferenciador: "Experiencia end-to-end: desde infraestructura hasta insights de negocio",
            icon: "",
            lucideIcon: "brain",
            color: "blue"
          },
          "Ingeniero ML": {
            bio: "Ingeniera en Sistemas y Robtica con Master en IA en curso, 4+ aos en RPA y desarrollo full-stack, lder tcnica con experiencia en visin artificial",
            expertise: "Python, Pandas, Selenium, Angular, computer vision, team leadership, industrial automation",
            achievements: "Desarrollo de sistemas automatizados para Samsung, GM, Ford, especialista en Cognex/Matrox",
            diferenciador: "Combina ML/IA con ingeniera de sistemas industriales",
            icon: "",
            lucideIcon: "bot",
            color: "green"
          },
          "Full-Stack IA": {
            bio: "Ingeniero en Ciencias Computacionales con 4+ aos en desarrollo backend/full-stack, certificado Scrum Master, experiencia en startups tech",
            expertise: "Backend APIs, web development, C++, Agile methodologies, system architecture, startup scaling",
            achievements: "Co-founder de startup tech, experiencia en Zebrands, Scrum Master certificado",
            diferenciador: "Arquitectura de sistemas escalables con metodologas giles",
            icon: "",
            lucideIcon: "zap",
            color: "teal"
          }
        };
        // AGREGAR: Sistema de Navegacin por Audiencia
        class AudienceController {
          constructor() {
            this.currentRole = 'general';
            this.roles = {
              investor: {
                name: 'Inversionista ',
                focus: ['roi', 'team', 'traction', 'financials'],
                sections: ['tesis', 'financiero', 'equipo'],
                highlightElements: ['.kpi-card', '#roi-percentage', '#hr-table', '.progress-bars']
              },
              cto: {
                name: 'CTO ',
                focus: ['tech-stack', 'apis', 'roadmap', 'architecture'],
                sections: ['tecnologia', 'ejecucion'],
                highlightElements: ['.agent-card', '#arquitectura-datos-container', '.timeline-item']
              },
              coo: {
                name: 'COO ',
                focus: ['timeline', 'dependencies', 'milestones', 'operations'],
                sections: ['ejecucion', 'equipo'],
                highlightElements: ['#weekly-timeline-container', '#compliance-container', '#hr-table']
              },
              cfo: {
                name: 'CFO ',
                focus: ['burn-rate', 'cash-flow', 'unit-economics', 'roi'],
                sections: ['financiero'],
                highlightElements: ['#financialPlanChart', '#roi-breakdown-body', '#burn-rate-chart']
              }
            };
            this.updateDynamicDashboard(this.currentRole);
          }

          switchRole(role) {
            this.currentRole = role;
            document.body.className = `role-${role}`;
            
            // Update navigation highlights
            this.updateNavigation(role);
            
            // Add contextual hints
            this.addContextualHints(role);
            
            // Highlight relevant elements
            this.highlightRoleElements(role);
            
            // Update dynamic dashboard
            this.updateDynamicDashboard(role);
          }

          updateNavigation(role) {
            const navLinks = document.querySelectorAll('.nav-link');
            const roleConfig = this.roles[role];
            
            navLinks.forEach(link => {
              const href = link.getAttribute('href').replace('#', '');
              if (roleConfig && roleConfig.sections.includes(href)) {
                link.classList.add('role-highlight');
                link.style.borderBottomColor = '#c2410c';
                link.style.fontWeight = 'bold';
              } else {
                link.classList.remove('role-highlight');
                link.style.borderBottomColor = 'transparent';
                link.style.fontWeight = 'normal';
              }
            });
          }

          highlightRoleElements(role) {
            // Remove previous highlights
            document.querySelectorAll('.role-highlight-element').forEach(el => {
              el.classList.remove('role-highlight-element');
            });
            
            if (role === 'general') return;
            
            const roleConfig = this.roles[role];
            roleConfig.highlightElements.forEach(selector => {
              document.querySelectorAll(selector).forEach(element => {
                element.classList.add('role-highlight-element');
              });
            });
          }

          addContextualHints(role) {
            // Remove existing hints
            document.querySelectorAll('.role-hint').forEach(hint => hint.remove());
            
            if (role === 'general') return;
            
            const roleConfig = this.roles[role];
            const hint = document.createElement('div');
            hint.className = 'role-hint fixed top-20 right-4 bg-orange-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
            hint.innerHTML = `
              <div class="text-sm font-medium">${roleConfig.name} Focus:</div>
              <div class="text-xs">${roleConfig.focus.join(', ')}</div>
            `;
            document.body.appendChild(hint);
            
            // Auto-hide after 5 seconds
            setTimeout(() => hint.remove(), 5000);
          }

          updateDynamicDashboard(role) {
            const dashboardContainer = document.getElementById('dynamic-dashboard-content');
            if (!dashboardContainer) return;

            const dashboardData = {
              general: [
                { label: 'ROI Operativo', value: '58.4%', icon: 'trending-up', link: '#tesis' },
                { label: 'Inversin SEED', value: '$10M', icon: 'dollar-sign', link: '#financiero' },
                { label: 'Agentes IA', value: '4', icon: 'cpu', link: '#tecnologia' },
                { label: 'Runway', value: '15 meses', icon: 'calendar', link: '#financiero' }
              ],
              investor: [
                { label: 'ROI Competitivo', value: '58%', icon: 'trending-up', link: '#tesis' },
                { label: 'ROI Tech Stack', value: '110.3%', icon: 'rocket', link: '#tesis' },
                { label: 'Valuacin Exit', value: '$247M', icon: 'target', link: '#financiero' },
                { label: 'Payback', value: '24 meses', icon: 'clock', link: '#tesis' }
              ],
              cto: [
                { label: 'ROI Tech Stack', value: '110.3%', icon: 'rocket', link: '#tesis' },
                { label: 'Presupuesto Core IA', value: '$2.13M', icon: 'cpu', link: '#tesis' },
                                  { label: 'Horas Desarrollo', value: '8,208h', icon: 'hourglass', link: '#tesis' },
                { label: 'Milestone Clave', value: 'MVP en Mes 6', icon: 'flag', link: '#ejecucion' }
              ],
              coo: [
                { label: 'Runway', value: '12 meses', icon: 'calendar', link: '#financiero' },
                { label: 'Vagonetas Piloto', value: '3', icon: 'truck', link: '#tesis' },
                { label: 'Productividad', value: '2.8x', icon: 'zap', link: '#tesis' },
                { label: 'Equipo ESOP', value: '3 Core', icon: 'users', link: '#equipo' }
              ],
              cfo: [
                { label: 'Inversin SEED', value: '$10M', icon: 'dollar-sign', link: '#financiero' },
                { label: 'Payback', value: '24 meses', icon: 'clock', link: '#tesis' },
                { label: 'Ahorro Anual Y5', value: '$8.65M', icon: 'piggy-bank', link: '#tesis' },
                { label: 'TIR Equity', value: '33%', icon: 'line-chart', link: '#financiero' }
              ]
            };

            const data = dashboardData[role] || dashboardData.general;
            dashboardContainer.innerHTML = ''; // Limpiar panel

            data.forEach(kpi => {
              const kpiCard = document.createElement('a');
              kpiCard.href = kpi.link;
              kpiCard.className = 'kpi-card-premium-mandatory text-center p-4 transition-all duration-300 hover:!scale-105';
              kpiCard.innerHTML = `
                <div class="kpi-icon-container-mandatory !w-16 !h-16 !mb-2">
                  <i data-lucide="${kpi.icon}" class="kpi-icon-mandatory !w-8 !h-8"></i>
                </div>
                <div class="kpi-label-mandatory !text-sm !font-semibold">${kpi.label}</div>
                <div class="kpi-value-mandatory !text-2xl !my-1">${kpi.value}</div>
              `;
              dashboardContainer.appendChild(kpiCard);
            });
            
            if (typeof lucide !== 'undefined') {
              lucide.createIcons();
            }
          }
        }
        // AGREGAR: Phase Controller System
        class PhaseController {
          constructor() {
            this.phases = {
              foundation: { name: 'Fundacin', months: [1,2,3], color: 'blue' },
              development: { name: 'Desarrollo', months: [4,5,6], color: 'green' },
              validation: { name: 'Validacin', months: [7,8,9], color: 'purple' },
              traction: { name: 'Traccin', months: [10,11,12], color: 'orange' }
            };
            this.currentPhase = 'all';
            this.addDataAttributes();
          }

          addDataAttributes() {
            // Add data-month attributes to existing timeline items
            document.querySelectorAll('.tab-content').forEach((content, monthIndex) => {
              content.setAttribute('data-month', monthIndex + 1);
            });
            
            // Add data-phase attributes based on month
            Object.entries(this.phases).forEach(([phaseKey, phase]) => {
              phase.months.forEach(month => {
                const monthElements = document.querySelectorAll(`[data-month="${month}"]`);
                monthElements.forEach(el => {
                  el.setAttribute('data-phase', phaseKey);
                });
              });
            });
          }

          filterByPhase(phase) {
            this.currentPhase = phase;
            
            // Update active button
            document.querySelectorAll('.phase-btn').forEach(btn => {
              btn.classList.toggle('active', btn.dataset.phase === phase);
            });

            // Filter timeline content
            this.filterTimelineContent(phase);
            
            // Update phase summary
            this.updatePhaseSummary(phase);
          }

          filterTimelineContent(phase) {
            const allItems = document.querySelectorAll('[data-phase]');
            
            allItems.forEach(item => {
              if (phase === 'all') {
                item.style.display = '';
                item.style.opacity = '1';
              } else {
                const itemPhase = item.getAttribute('data-phase');
                if (itemPhase === phase) {
                  item.style.display = '';
                  item.style.opacity = '1';
                  item.classList.add('phase-highlighted');
                } else {
                  item.style.opacity = '0.3';
                  item.classList.remove('phase-highlighted');
                }
              }
            });
          }

          updatePhaseSummary(phase) {
            let existingSummary = document.getElementById('phase-summary');
            if (existingSummary) existingSummary.remove();
            
            if (phase === 'all') return;
            
            const phaseConfig = this.phases[phase];
            const summary = document.createElement('div');
            summary.id = 'phase-summary';
            summary.className = `mt-6 p-4 bg-${phaseConfig.color}-50 border-l-4 border-${phaseConfig.color}-500 rounded-lg`;
            summary.innerHTML = `
              <h4 class="font-bold text-${phaseConfig.color}-800 mb-2">Fase ${phaseConfig.name} - Resumen</h4>
              <div class="grid md:grid-cols-3 gap-4 text-sm">
                <div>
                  <strong class="text-${phaseConfig.color}-700">Periodo:</strong> 
                  Meses ${phaseConfig.months.join(', ')}
                </div>
                <div>
                  <strong class="text-${phaseConfig.color}-700">Objetivo Principal:</strong> 
                  ${this.getPhaseObjective(phase)}
                </div>
                <div>
                  <strong class="text-${phaseConfig.color}-700">Entregables Clave:</strong> 
                  ${this.getPhaseDeliverables(phase)}
                </div>
              </div>
            `;
            
            const activeBtn = document.querySelector('.phase-btn.active');
            if (activeBtn) {
              activeBtn.parentElement.insertAdjacentElement('afterend', summary);
            }
          }

          getPhaseObjective(phase) {
            const objectives = {
              foundation: 'Establecer infraestructura tcnica y operativa',
              development: 'Desarrollar MVP tecnolgico y lanzar piloto',
              validation: 'Validar modelo de negocio con flota piloto',
              traction: 'Demostrar traccin y preparar Serie A'
            };
            return objectives[phase];
          }

          getPhaseDeliverables(phase) {
            const deliverables = {
              foundation: 'Equipo completo, RAG-DNA, infraestructura base',
              development: 'HASE >90% AUC, PIA funcional, 1ra vagoneta',
              validation: '3 vagonetas operando, ingresos marketplace, NPS >50',
              traction: 'Data room completo, NPS >70, term sheet preparado'
            };
            return deliverables[phase];
          }
        }

        //  CALCULADORA SERIE A "AT A GLANCE" - POST SEED ULTRA-SIMPLE
        class ScenarioCalculator {
          constructor() {
            // 3 ESCENARIOS FIJOS - ULTRA SIMPLES
            this.scenarios = {
              conservative: {
                name: "Steady Growth",
                units: 500,
                description: "Crecimiento controlado y sostenible",
                marketCondition: "Expansin gradual con foco en eficiencia",
                growth: 1.45,
                margin: 0.35,
                morosidad: 0.06
              },
              base: {
                name: "Market Expansion", 
                units: 750,
                description: "Escalamiento acelerado en mercados clave",
                marketCondition: "Captura agresiva de mercado con IA premium",
                growth: 1.50,
                margin: 0.37,
                morosidad: 0.05
              },
              optimistic: {
                name: "Category Leader",
                units: 1000, 
                description: "Dominio de mercado con expansin geogrfica",
                marketCondition: "Lder indiscutible con network effects",
                growth: 1.55,
                margin: 0.38,
                morosidad: 0.04
              }
            };

            // DATOS DEL MODELO REAL - ULTRA SIMPLES
            this.modelData = {
              // Unit economics del modelo
              packageCost: 706000,           // $706K CAPEX por unidad
              annualRevenuePerUnit: 135000,  // $135.0K revenue anual por unidad
              
              // Estructura de capital fijo
              seedCompleted: 10000000,        // $10M SEED ya usado
              serieAFixed: 45000000,         // $45M Serie A fijo
              
              // Costos y eficiencias
              fixedCostsAnnual: 12000000,    // $12M costos fijos optimizados
              operationalEfficiency: 0.92,   // 92% eficiencia IA-native
              marketPenetration: 0.82,       // 82% penetracin
              
              // Mltiplos y tasas
              industryMultiple: 9.0,         // 9X EBITDA mobility premium
              ventureDebtRate: 0.18,         // 18% venture debt
              commercialDebtRate: 0.14,      // 14% commercial debt
              
              // Timeline
              timeToExitYears: 5
            };

            this.init();
          }

          init() { 
            this.createChart(); 
            this.updateCalculation(); 
          }
          createChart() {
            const ctx = document.getElementById('scenario-chart')?.getContext('2d');
            if (!ctx) return;

            this.chart = new Chart(ctx, {
              type: 'line',
              data: { 
                labels: ['Steady Growth', 'Market Expansion', 'Category Leader'], 
                datasets: [
                  { 
                    label: 'TIR Equity %', 
                    data: [28, 35, 37], // Aproximados iniciales
                    borderColor: '#dc2626', 
                    backgroundColor: 'rgba(220, 38, 38, 0.1)', 
                    fill: true, 
                    tension: 0.4, 
                    pointRadius: 8, 
                    pointHoverRadius: 12,
                    borderWidth: 4
                  }, 
                  { 
                    label: 'EBITDA Ao 5 (M MXN)', 
                    data: [15, 29, 47], // Aproximados iniciales
                    borderColor: '#059669', 
                    backgroundColor: 'rgba(5, 150, 105, 0.1)', 
                    yAxisID: 'y1', 
                    fill: false, 
                    tension: 0.4, 
                    pointRadius: 8, 
                    pointHoverRadius: 12,
                    borderWidth: 4
                  }, 
                  { 
                    label: 'Valuacin Exit (M MXN)', 
                    data: [128, 247, 400], // Aproximados iniciales
                    borderColor: '#7c3aed', 
                    backgroundColor: 'rgba(124, 58, 237, 0.1)', 
                    yAxisID: 'y2', 
                    fill: false, 
                    tension: 0.4, 
                    pointRadius: 8, 
                    pointHoverRadius: 12,
                    borderWidth: 4
                  }
                ] 
              },
              options: { 
                responsive: true, 
                maintainAspectRatio: false, 
                plugins: { 
                  tooltip: { 
                    backgroundColor: 'rgba(15, 23, 42, 0.95)', 
                    titleColor: '#f8fafc', 
                    bodyColor: '#e2e8f0',
                    titleFont: { size: 16, weight: 'bold' },
                    bodyFont: { size: 14 },
                    callbacks: { 
                      label: (context) => {
                        if (context.datasetIndex === 0) return ` TIR: ${context.parsed.y}%`;
                        else if (context.datasetIndex === 1) return ` EBITDA: $${context.parsed.y}M`;
                        else return ` Exit: $${context.parsed.y}M`;
                      } 
                    } 
                  }, 
                  legend: { 
                    labels: { 
                      color: '#94a3b8', 
                      font: { size: 12, weight: 'bold' },
                      usePointStyle: true
                    } 
                  } 
                }, 
                scales: { 
                  x: { 
                    ticks: { color: '#94a3b8', font: { weight: 'bold', size: 12 } }, 
                    title: { display: true, text: 'Escenarios Post-SEED', color: '#94a3b8', font: { size: 16, weight: 'bold' } },
                    grid: { color: 'rgba(148, 163, 184, 0.2)' }
                  }, 
                  y: { 
                    beginAtZero: true,
                    max: 45,
                    title: { display: true, text: 'TIR Equity (%)', color: '#dc2626', font: { size: 14, weight: 'bold' } }, 
                    ticks: { color: '#dc2626', font: { weight: 'bold' } }, 
                    position: 'left',
                    grid: { color: 'rgba(220, 38, 38, 0.1)' }
                  }, 
                  y1: { 
                    beginAtZero: true, 
                    title: { display: true, text: 'EBITDA (M MXN)', color: '#059669', font: { size: 14, weight: 'bold' } }, 
                    ticks: { color: '#059669', font: { weight: 'bold' } }, 
                    position: 'right', 
                    grid: { drawOnChartArea: false } 
                  }, 
                  y2: { 
                    beginAtZero: true, 
                    display: false 
                  } 
                } 
              }
            });
          }

          calculateCapitalStructure(units) {
            const totalCapex = units * this.modelData.packageCost;
            const seedUsed = this.modelData.seedCompleted;
            const serieA = this.modelData.serieAFixed;
            const additionalCapex = totalCapex - seedUsed;

            let ventureDebt, commercialDebt, serieBorC;

            // ESTRUCTURA INTELIGENTE ULTRA-SIMPLE
            if (units <= 500) {
              // Steady Growth - Conservative debt
              ventureDebt = serieA * 2; // $90M
              commercialDebt = totalCapex * 0.25; // 25% of CAPEX
              serieBorC = Math.max(0, additionalCapex - serieA - ventureDebt - commercialDebt);
            } else if (units <= 750) {
              // Market Expansion - Aggressive debt
              ventureDebt = serieA * 3; // $135M  
              commercialDebt = totalCapex * 0.36; // 36% of CAPEX
              const serieBNeeded = Math.max(0, additionalCapex - serieA - ventureDebt - commercialDebt);
              serieBorC = serieBNeeded;
            } else {
              // Category Leader - Maximum leverage
              ventureDebt = 200000000; // $200M cap
              commercialDebt = totalCapex * 0.35; // 35% of CAPEX
              const serieBNeeded = 120000000; // $120M Serie B
              const remaining = additionalCapex - serieA - serieBNeeded - ventureDebt - commercialDebt;
              serieBorC = serieBNeeded + Math.max(0, remaining); // Serie B + Serie C if needed
            }

            const totalEquity = seedUsed + serieA + serieBorC;
            const totalDebt = ventureDebt + commercialDebt;
            const totalFunding = totalEquity + totalDebt;

            return {
              totalCapex,
              seedUsed,
              serieA,
              serieBorC,
              ventureDebt,
              commercialDebt,
              totalEquity,
              totalDebt,
              totalFunding,
              leverageRatio: totalDebt / totalEquity,
              fundingGap: Math.max(0, totalCapex - totalFunding)
            };
          }
          calculateScenario(scenarioKey) {
            const scenario = this.scenarios[scenarioKey];
            const capitalStructure = this.calculateCapitalStructure(scenario.units);
            
            // Revenue y EBITDA ao 5
            const year5Revenue = scenario.units * this.modelData.annualRevenuePerUnit * 
                                Math.pow(scenario.growth, 4) * this.modelData.marketPenetration;
            
            const grossEBITDA = year5Revenue * scenario.margin;
            const netEBITDA = Math.max(0, (grossEBITDA - this.modelData.fixedCostsAnnual) * 
                                      this.modelData.operationalEfficiency);
            
            // Exit valuation
            const exitValuation = netEBITDA * this.modelData.industryMultiple;
            
            // Interest payments anuales
            const annualInterest = (capitalStructure.ventureDebt * this.modelData.ventureDebtRate) +
                                  (capitalStructure.commercialDebt * this.modelData.commercialDebtRate);
            
            // Net equity value at exit
            const netEquityValue = Math.max(0, exitValuation - capitalStructure.totalDebt);
            
            // TIR simple calculation
            const equityMultiple = capitalStructure.totalEquity > 0 ? 
                                  netEquityValue / capitalStructure.totalEquity : 0;
            const tirEquity = equityMultiple > 0 ? 
                             (Math.pow(equityMultiple, 1/this.modelData.timeToExitYears) - 1) * 100 : 0;
            
            // Cash positive year (simplified)
            let cashPositiveYear = 3;
            if (netEBITDA > 8000000) cashPositiveYear = 2;
            if (netEBITDA > 15000000) cashPositiveYear = 1;

            return {
              units: scenario.units,
              totalCapex: capitalStructure.totalCapex,
              year5Revenue,
              year5EBITDA: netEBITDA,
              exitValuation,
              tirEquity: Math.min(tirEquity, 45), // Cap at 45%
              capitalStructure,
              cashPositiveYear,
              annualInterest
            };
          }

          updateCalculation() {
            const scenario = document.getElementById('scenario-select')?.value || 'base';
            const results = this.calculateScenario(scenario);
            
            // Update displays
            this.updateResultDisplay('scenario-roi-result', `${Math.round(results.tirEquity)}%`);
            this.updateResultDisplay('scenario-payback-result', `Ao ${results.cashPositiveYear}`);
            this.updateResultDisplay('scenario-value-result', `$${(results.exitValuation/1000000).toFixed(0)}M`);
            this.updateResultDisplay('scenario-revenue-result', `$${(results.year5Revenue/1000000).toFixed(1)}M`);

            // Update chart with all three scenarios
            this.updateChart();
            this.updateAssumptions(scenario, results);
          }

          updateResultDisplay(elementId, value) { 
            const element = document.getElementById(elementId); 
            if (element) element.textContent = value; 
          }

          updateChart() {
            if (!this.chart) return;

            // Calculate all three scenarios for chart
            const conservativeResults = this.calculateScenario('conservative');
            const baseResults = this.calculateScenario('base');
            const optimisticResults = this.calculateScenario('optimistic');

            this.chart.data.datasets[0].data = [
              Math.round(conservativeResults.tirEquity),
              Math.round(baseResults.tirEquity), 
              Math.round(optimisticResults.tirEquity)
            ];
            
            this.chart.data.datasets[1].data = [
              Math.round(conservativeResults.year5EBITDA / 1000000),
              Math.round(baseResults.year5EBITDA / 1000000),
              Math.round(optimisticResults.year5EBITDA / 1000000)
            ];
            
            this.chart.data.datasets[2].data = [
              Math.round(conservativeResults.exitValuation / 1000000),
              Math.round(baseResults.exitValuation / 1000000),
              Math.round(optimisticResults.exitValuation / 1000000)
            ];

            this.chart.update();
          }

          updateAssumptions(scenarioKey, results) {
            const scenario = this.scenarios[scenarioKey];
            const assumptionsElement = document.getElementById('scenario-assumptions'); 
            if (!assumptionsElement) return;

            let viabilityStatus = '';
            if (results.tirEquity >= 35) {
              viabilityStatus = `<div class="scenario-status-card excellent">
                <div class="status-icon-container">
                  <i data-lucide="rocket" class="status-icon"></i>
                  <div class="icon-pulse-effect"></div>
                </div>
                <div class="status-content">
                  <div class="status-badge excellent"> EXCELLENT RETURNS</div>
                  <div class="status-metric">TIR ${results.tirEquity.toFixed(1)}%</div>
                  <div class="status-description">Top tier mobility tech</div>
                </div>
                <div class="status-glow excellent"></div>
              </div>`;
            } else if (results.tirEquity >= 25) {
              viabilityStatus = `<div class="scenario-status-card good">
                <div class="status-icon-container">
                  <i data-lucide="gem" class="status-icon"></i>
                  <div class="icon-pulse-effect"></div>
                </div>
                <div class="status-content">
                  <div class="status-badge good"> STRONG RETURNS</div>
                  <div class="status-metric">TIR ${results.tirEquity.toFixed(1)}%</div>
                  <div class="status-description">Attractive Serie A+</div>
                </div>
                <div class="status-glow good"></div>
              </div>`;
            } else {
              viabilityStatus = `<div class="scenario-status-card warning">
                <div class="status-icon-container">
                  <i data-lucide="zap" class="status-icon"></i>
                  <div class="icon-pulse-effect"></div>
                </div>
                <div class="status-content">
                  <div class="status-badge warning"> SOLID RETURNS</div>
                  <div class="status-metric">TIR ${results.tirEquity.toFixed(1)}%</div>
                  <div class="status-description">Viable mobility investment</div>
                </div>
                <div class="status-glow warning"></div>
              </div>`;
            }

            let fundingAlert = ''; 
            if (results.capitalStructure.fundingGap > 0) {
              fundingAlert = `<div class="bg-orange-900/30 border border-orange-600 text-orange-200 p-3 rounded-lg mb-4">
                 <strong>Funding Gap:</strong> ${this.formatCurrency(results.capitalStructure.fundingGap)} adicional requerido
              </div>`;
            }

            assumptionsElement.innerHTML = `
              ${viabilityStatus}${fundingAlert}
              
              <div class="grid md:grid-cols-2 gap-6">
                <div class="space-y-3">
                  <div class="font-semibold text-sky-400"> ${scenario.name}</div>
                  <div class="space-y-2 text-sm">
                    <div><strong>Descripcin:</strong> ${scenario.description}</div>
                    <div><strong>Condiciones:</strong> ${scenario.marketCondition}</div>
                    <div><strong>Flota Target:</strong> <span class="text-yellow-400">${scenario.units} unidades</span></div>
                    <div><strong>CAPEX Total:</strong> <span class="text-orange-400">${this.formatCurrency(results.totalCapex)}</span></div>
                    <div><strong>Crecimiento anual:</strong> <span class="text-emerald-400">${((scenario.growth - 1) * 100).toFixed(1)}%</span></div>
                    <div><strong>Margen EBITDA:</strong> <span class="text-emerald-400">${(scenario.margin * 100).toFixed(1)}%</span></div>
                  </div>
                </div>
                
                <div class="space-y-3">
                  <div class="font-semibold text-emerald-400 flex items-center gap-2">
                    <i data-lucide="pie-chart" class="w-4 h-4"></i>
                    Estructura de Capital
                  </div>
                  <div class="space-y-2 text-sm">
                    <div><strong>SEED (usado):</strong> ${this.formatCurrency(results.capitalStructure.seedUsed)}</div>
                    <div><strong>Serie A:</strong> ${this.formatCurrency(results.capitalStructure.serieA)}</div>
                    <div><strong>Serie B/C:</strong> ${this.formatCurrency(results.capitalStructure.serieBorC)}</div>
                    <div><strong>Venture Debt:</strong> ${this.formatCurrency(results.capitalStructure.ventureDebt)}</div>
                    <div><strong>Commercial Debt:</strong> ${this.formatCurrency(results.capitalStructure.commercialDebt)}</div>
                    <div><strong>Leverage Ratio:</strong> <span class="text-blue-400">${results.capitalStructure.leverageRatio.toFixed(1)}x</span></div>
                  </div>
                </div>
              </div>
              <div class="mt-4 p-4 bg-gradient-to-r from-slate-900/40 to-blue-900/20 rounded-lg border border-slate-600/30">
                <div class="text-center mb-4">
                  <div class="font-semibold text-slate-300 mb-2 flex items-center justify-center gap-2">
                    <i data-lucide="target" class="w-5 h-5"></i>
                    Post-SEED Reality
                  </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                  <div class="text-center p-3 bg-slate-800/30 rounded-lg border border-slate-600/20">
                    <div class="text-2xl mb-2"></div>
                    <div class="font-semibold text-slate-400 mb-1">Proven Model</div>
                    <div class="text-slate-300">${scenario.units} units vs 3 piloto exitoso</div>
                  </div>
                  <div class="text-center p-3 bg-slate-800/30 rounded-lg border border-slate-600/20">
                    <div class="text-2xl mb-2"></div>
                    <div class="font-semibold text-slate-400 mb-1">Smart Capital</div>
                    <div class="text-slate-300">${results.capitalStructure.leverageRatio.toFixed(1)}x leverage optimiza TIR</div>
                  </div>
                  <div class="text-center p-3 bg-slate-800/30 rounded-lg border border-slate-600/20">
                    <div class="text-2xl mb-2"></div>
                    <div class="font-semibold text-slate-400 mb-1">AI Premium</div>
                    <div class="text-slate-300">8.5x mltiplo vs traditional mobility</div>
                  </div>
                </div>
              </div>
            `;
          }

          formatCurrency(value) { 
            if (Math.abs(value) >= 1000000) return `$${(value / 1000000).toFixed(1)}M`; 
            return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN', minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(value); 
          }
        }

        // AGREGAR: DataValidator class
        class DataValidator {
          constructor() {
            this.foundationalData = { totalBudget: 10000000, teamCost: 1940000 + 2340000, coreTech: 2265000, pilotCapex: 2630000, saasStack: 631000, ragDNA: 150000, reserva: 44000, runway: 15, teamSize: 9, coreESOP: 3 };
            this.tolerance = 1000; this.discrepancies = []; this.init();
          }
          init() { this.validateAll(); this.displayValidationBadge(); }
          validateAll() { this.discrepancies = []; this.validateFinancialData(); this.validateTeamData(); this.validateTechnicalData(); this.validateTimelineData(); return this.generateValidationReport(); }
          validateFinancialData() {
            const componentSum = this.foundationalData.teamCost + this.foundationalData.coreTech + this.foundationalData.pilotCapex + this.foundationalData.saasStack + this.foundationalData.ragDNA + this.foundationalData.reserva;
            if (Math.abs(componentSum - this.foundationalData.totalBudget) > this.tolerance) this.discrepancies.push({ type: 'financial', field: 'totalBudget', expected: this.foundationalData.totalBudget, actual: componentSum, severity: 'high', message: 'Presupuesto total no coincide con suma de componentes' });
            const avgMonthlyBurn = this.foundationalData.totalBudget / this.foundationalData.runway; const expectedBurn = 638000;
            if (Math.abs(avgMonthlyBurn - expectedBurn) > 50000) this.discrepancies.push({ type: 'financial', field: 'burnRate', expected: expectedBurn, actual: Math.round(avgMonthlyBurn), severity: 'medium', message: 'Burn rate promedio fuera de rango esperado' });
          }
          validateTeamData() {
            const teamElements = document.querySelectorAll('#hr-table tbody tr');
            if (teamElements.length !== this.foundationalData.teamSize) this.discrepancies.push({ type: 'team', field: 'teamSize', expected: this.foundationalData.teamSize, actual: teamElements.length, severity: 'medium', message: 'Nmero de miembros del equipo no coincide' });
          }
          validateTechnicalData() {
            const agentBudgets = { hase: 710000, pia: 475000, superPma: 600000, asistente: 330000, ragDna: 150000 };
            const totalAgentBudget = Object.values(agentBudgets).reduce((sum, budget) => sum + budget, 0);
            if (Math.abs(totalAgentBudget - this.foundationalData.coreTech) > this.tolerance) this.discrepancies.push({ type: 'technical', field: 'agentBudgets', expected: this.foundationalData.coreTech, actual: totalAgentBudget, severity: 'high', message: 'Presupuesto total de agentes no coincide con Core Tech' });
          }
          validateTimelineData() {
            const timelineElements = document.querySelectorAll('[data-month]'); const uniqueMonths = new Set();
            timelineElements.forEach(el => { const month = el.getAttribute('data-month'); if (month) uniqueMonths.add(parseInt(month)); });
            if (uniqueMonths.size < 10) this.discrepancies.push({ type: 'timeline', field: 'monthCoverage', expected: 12, actual: uniqueMonths.size, severity: 'medium', message: 'Timeline no cubre suficientes meses del cronograma' });
          }
          generateValidationReport() {
            if (this.discrepancies.length === 0) return { status: 'valid', message: 'Todos los datos estn alineados con documentos fundacionales', discrepancies: [] };
            return { status: 'invalid', discrepancies: this.discrepancies, recommendations: this.generateRecommendations() };
          }
          generateRecommendations() {
            return this.discrepancies.map(disc => {
              switch (disc.type) {
                case 'financial': return `Revisar clculos financieros en ${disc.field}`;
                case 'team': return `Verificar datos del equipo: ${disc.field}`;
                case 'technical': return `Validar presupuestos tcnicos: ${disc.field}`;
                case 'timeline': return `Completar datos de cronograma: ${disc.field}`;
                default: return `Revisar inconsistencia en ${disc.field}`;
              }
            });
          }
          displayValidationBadge() {
            const validation = this.validateAll(); const existingBadge = document.getElementById('validation-badge'); if (existingBadge) existingBadge.remove();
            const badge = document.createElement('div'); badge.id = 'validation-badge';
            badge.className = `fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm z-50 cursor-pointer transition-all duration-300 ${validation.status === 'valid' ? 'bg-green-500 hover:bg-green-600' : 'bg-red-500 hover:bg-red-600'}`;
            const icon = validation.status === 'valid' ? '' : ''; const text = validation.status === 'valid' ? 'Datos Validados' : `${this.discrepancies.length} Inconsistencias`;
            badge.innerHTML = `${icon} ${text}`; badge.onclick = () => this.showValidationModal(validation); document.body.appendChild(badge);
            setTimeout(() => { badge.style.transform = 'translateY(0)'; }, 100);
          }
          showValidationModal(validation) {
            const existingModal = document.getElementById('validation-modal'); if (existingModal) existingModal.remove();
            const modal = document.createElement('div'); modal.id = 'validation-modal'; modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
            modal.innerHTML = `<div class="bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto"><div class="p-6 border-b flex justify-between items-center"><h3 class="text-xl font-bold text-slate-800">${validation.status === 'valid' ? ' Validacin Exitosa' : ' Inconsistencias Detectadas'}</h3><button onclick="document.getElementById('validation-modal').remove()" class="text-slate-500 hover:text-slate-700 text-2xl">&times;</button></div><div class="p-6">${validation.status === 'valid' ? `<div class="text-green-700 mb-4"><p class="mb-2">${validation.message}</p><div class="bg-green-50 p-4 rounded-lg"><h4 class="font-semibold mb-2">Validaciones Completadas:</h4><ul class="text-sm space-y-1"><li> Coherencia presupuestal</li><li> Estructura del equipo</li><li> Asignacin tcnica</li><li> Cronograma completo</li></ul></div></div>` : `<div class="space-y-4">${validation.discrepancies.map(disc => `<div class="border-l-4 ${disc.severity === 'high' ? 'border-red-500 bg-red-50' : disc.severity === 'medium' ? 'border-yellow-500 bg-yellow-50' : 'border-blue-500 bg-blue-50'} p-4 rounded"><div class="flex justify-between items-start mb-2"><h4 class="font-semibold text-slate-800">${disc.message}</h4><span class="text-xs px-2 py-1 rounded ${disc.severity === 'high' ? 'bg-red-200 text-red-800' : disc.severity === 'medium' ? 'bg-yellow-200 text-yellow-800' : 'bg-blue-200 text-blue-800'}">${disc.severity}</span></div><div class="text-sm text-slate-600"><div>Esperado: ${this.formatValue(disc.expected)}</div><div>Actual: ${this.formatValue(disc.actual)}</div></div></div>`).join('')}<div class="bg-slate-50 p-4 rounded-lg"><h4 class="font-semibold mb-2">Recomendaciones:</h4><ul class="text-sm space-y-1">${validation.recommendations.map(rec => `<li> ${rec}</li>`).join('')}</ul></div></div>`}</div></div>`;
            document.body.appendChild(modal); modal.addEventListener('click', (e) => { if (e.target === modal) modal.remove(); });
          }
          formatValue(value) { if (typeof value === 'number') return new Intl.NumberFormat('es-MX').format(value); return value; }
        }

        // AGREGAR: TestingController class
        class TestingController {
          constructor() { this.tests = []; this.results = { passed: 0, failed: 0, total: 0 }; this.init(); }
          init() { this.setupTestSuite(); this.runTests(); }
          setupTestSuite() {
            this.addTest('Navigation Links', () => this.testNavigationLinks());
            this.addTest('Charts Loading', () => this.testChartsLoading());
            this.addTest('Role Switching', () => this.testRoleSwitching());
            this.addTest('Phase Filtering', () => this.testPhaseFiltering());
            this.addTest('Data Validation', () => this.testDataValidation());
            this.addTest('Cross References', () => this.testCrossReferences());
            this.addTest('Progress Tracking', () => this.testProgressTracking());
            this.addTest('Mobile Navigation', () => this.testMobileNavigation());
          }

          runTests() {
            console.log(' Ejecutando suite de pruebas...');
            this.tests.forEach(test => {
              try {
                const result = test.testFunction();
                if (result) { this.results.passed++; console.log(` ${test.name}: PASS`); } else { this.results.failed++; console.log(` ${test.name}: FAIL`); }
              } catch (error) { this.results.failed++; console.log(` ${test.name}: ERROR - ${error.message}`); }
              this.results.total++;
            });
            this.displayResults();
          }
          testNavigationLinks() {
            const navLinks = document.querySelectorAll('.nav-link'); const sections = document.querySelectorAll('section[id]'); let allLinksValid = true;
            navLinks.forEach(link => { const href = link.getAttribute('href'); if (href && href.startsWith('#')) { const targetId = href.replace('#', ''); const targetSection = document.getElementById(targetId); if (!targetSection) { allLinksValid = false; console.warn(`Missing target section: ${targetId}`); } } });
            return navLinks.length > 0 && sections.length > 0 && allLinksValid;
          }
          testChartsLoading() { const charts = document.querySelectorAll('canvas'); let chartsLoaded = true; charts.forEach(canvas => { if (!canvas.getContext) chartsLoaded = false; }); return charts.length > 0 && chartsLoaded; }
          testRoleSwitching() { if (!window.audienceController) return false; const roleSelector = document.getElementById('role-selector'); if (!roleSelector) return false; window.audienceController.switchRole('investor'); const bodyHasRoleClass = document.body.className.includes('role-investor'); window.audienceController.switchRole('general'); return bodyHasRoleClass; }
          testPhaseFiltering() { if (!window.phaseController) return false; const phaseButtons = document.querySelectorAll('.phase-btn'); if (phaseButtons.length === 0) return false; window.phaseController.filterByPhase('foundation'); const hasActiveButton = document.querySelector('.phase-btn.active'); window.phaseController.filterByPhase('all'); return hasActiveButton !== null; }
          testDataValidation() { if (!window.dataValidator) return false; const validation = window.dataValidator.validateAll(); return validation && validation.hasOwnProperty('status'); }
          testCrossReferences() { if (!window.crossReferenceController) return false; const crossRefLinks = document.querySelectorAll('.cross-ref-link'); return crossRefLinks.length > 0; }
          testProgressTracking() { if (!window.progressTracker) return false; const progressBars = document.querySelectorAll('.milestone-progress'); const milestoneCards = document.querySelectorAll('.milestone-card'); return progressBars.length > 0 && milestoneCards.length > 0; }
          testMobileNavigation() { const mobileNav = document.getElementById('mobile-nav'); const mobileLinks = document.querySelectorAll('.mobile-nav-link'); return mobileNav !== null && mobileLinks.length > 0; }
          displayResults() {
            const successRate = Math.round((this.results.passed / this.results.total) * 100);
            console.log('\n Resultados de Pruebas:'); console.log(` Exitosas: ${this.results.passed}`); console.log(` Fallidas: ${this.results.failed}`); console.log(` Tasa de xito: ${successRate}%`);
            if (successRate >= 90) console.log(' EXCELENTE: Sistema funcionando correctamente'); else if (successRate >= 75) console.log(' BUENO: Algunos problemas menores detectados'); else console.log(' ATENCIN: Problemas crticos detectados');
            if (window.location.hostname === 'localhost' || window.location.search.includes('debug=true')) this.showTestResults(successRate);
          }
          showTestResults(successRate) {
            const resultsModal = document.createElement('div'); resultsModal.className = 'fixed top-4 left-4 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50 max-w-sm';
            resultsModal.innerHTML = `<div class="flex justify-between items-center mb-2"><h4 class="font-bold text-slate-800"> Test Results</h4><button onclick="this.parentElement.parentElement.remove()" class="text-slate-500">&times;</button></div><div class="space-y-2 text-sm"><div class="flex justify-between"><span>Passed:</span><span class="text-green-600 font-semibold">${this.results.passed}</span></div><div class="flex justify-between"><span>Failed:</span><span class="text-red-600 font-semibold">${this.results.failed}</span></div><div class="flex justify-between"><span>Success Rate:</span><span class="font-bold ${successRate >= 90 ? 'text-green-600' : successRate >= 75 ? 'text-yellow-600' : 'text-red-600'}">${successRate}%</span></div></div><div class="mt-2 text-xs text-slate-500">${successRate >= 90 ? ' All systems operational' : successRate >= 75 ? ' Minor issues detected' : ' Critical issues found'}</div>`;
            document.body.appendChild(resultsModal); setTimeout(() => { if (resultsModal.parentElement) resultsModal.remove(); }, 5000);
          }
        }

        // AGREGAR: CrossReferenceController class
        class CrossReferenceController {
          constructor() {
            this.references = {
              'core-ia-budget': { sourceSelector: '[data-ref="core-ia-budget"]', target: 'tecnologia', description: 'Ver desglose tcnico por agente', highlightSelector: '.agent-card' },
              'team-cost': { sourceSelector: '[data-ref="team-cost"]', target: 'equipo', description: 'Ver estructura y roles del equipo', highlightSelector: '#hr-table' },
              'hase-development': { sourceSelector: '[data-ref="hase-development"]', target: 'ejecucion', description: 'Ver cronograma de desarrollo HASE', highlightSelector: '[data-month="1"], [data-month="2"], [data-month="3"]' },
              'pia-development': { sourceSelector: '[data-ref="pia-development"]', target: 'ejecucion', description: 'Ver cronograma de desarrollo PIA', highlightSelector: '[data-month="4"], [data-month="5"]' },
              'superPma-development': { sourceSelector: '[data-ref="superPma-development"]', target: 'ejecucion', description: 'Ver cronograma de desarrollo Super-PMA', highlightSelector: '[data-month="5"], [data-month="6"]' },
              'asistente-development': { sourceSelector: '[data-ref="asistente-development"]', target: 'ejecucion', description: 'Ver cronograma de desarrollo Asistente', highlightSelector: '[data-month="4"], [data-month="5"]' },
              'ragDna-development': { sourceSelector: '[data-ref="ragDna-development"]', target: 'ejecucion', description: 'Ver cronograma RAG-DNA', highlightSelector: '[data-month="1"], [data-month="2"]' },
              'capex-breakdown': { sourceSelector: '[data-ref="capex-breakdown"]', target: 'ejecucion', description: 'Ver despliegue de vagonetas', highlightSelector: '[data-month="6"], [data-month="7"], [data-month="8"]' },
              'roi-calculation': { sourceSelector: '[data-ref="roi-calculation"]', target: 'financiero', description: 'Ver clculos financieros detallados', highlightSelector: '#roiComparisonChart' }
            };
            this.init();
          }
          init() { this.createCrossReferences(); this.bindEvents(); }
          createCrossReferences() { Object.entries(this.references).forEach(([id, ref]) => { const sourceElements = document.querySelectorAll(ref.sourceSelector); sourceElements.forEach(element => { this.addCrossReferenceLink(element, ref); }); }); }
          addCrossReferenceLink(element, reference) {
            const link = document.createElement('button'); link.className = 'cross-ref-link text-teal-600 hover:text-teal-800 text-xs ml-2 underline'; link.innerHTML = ` ${reference.description}`;
            link.onclick = (e) => { e.preventDefault(); this.navigateToReference(reference); }; element.appendChild(link);
          }
          navigateToReference(reference) {
            const targetElement = document.getElementById(reference.target);
            if (targetElement) { targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' }); this.highlightSection(targetElement); if (reference.highlightSelector) setTimeout(() => { this.highlightElements(reference.highlightSelector); }, 500); }
          }
          highlightSection(element) { element.classList.add('section-highlight'); setTimeout(() => { element.classList.remove('section-highlight'); }, 3000); }
          highlightElements(selector) { document.querySelectorAll(selector).forEach(el => { el.classList.add('cross-ref-highlight'); setTimeout(() => { el.classList.remove('cross-ref-highlight'); }, 3000); }); }
          bindEvents() { }
        }
        // AGREGAR: Real-time Progress Tracking System
        class ProgressTracker {
          constructor() {
            this.milestones = {
              month3: { 
                name: 'Fundacin Completa', 
                weight: 0.2, 
                status: 'completed',
                completion: 100,
                kpis: ['HASE >80% AUC', 'Infraestructura base', 'Equipo 100% operativo'],
                nextActions: []
              },
              month6: { 
                name: 'MVP Tecnolgico', 
                weight: 0.3, 
                status: 'in-progress',
                completion: 60,
                kpis: ['HASE >90% AUC', 'PIA <2min SLA', '1ra Vagoneta >99.5% uptime'],
                nextActions: ['Completar integracin social scoring', 'Deploy PIA produccin']
              },
              month9: { 
                name: 'Piloto Validado', 
                weight: 0.3, 
                status: 'pending',
                completion: 0,
                kpis: ['Super-PMA >85% accuracy', '3 vagonetas >95% uptime', 'NPS >50'],
                nextActions: ['Instalar sensores IoT', 'Marketplace transaccional']
              },
              month12: { 
                name: 'Serie A Ready', 
                weight: 0.2, 
                status: 'pending',
                completion: 0,
                kpis: ['Data room completo', 'NPS >70', 'Term sheet $45M'],
                nextActions: ['Preparar documentacin investor', 'Validar mtricas finales']
              }
            };
            this.overallProgress = 0;
            this.init();
          }

          init() {
            this.calculateProgress();
            this.setupProgressUpdates();
          }

          calculateProgress() {
            this.overallProgress = Object.values(this.milestones).reduce((total, milestone) => {
              return total + (milestone.completion / 100) * milestone.weight;
            }, 0) * 100;
            
            this.updateProgressDisplay();
          }

          updateProgressDisplay() {
            // Update overall progress
            const overallBar = document.getElementById('overall-progress-bar');
            const overallPercentage = document.getElementById('overall-percentage');
            
            if (overallBar) {
              overallBar.style.width = `${this.overallProgress}%`;
            }
            
            if (overallPercentage) {
              overallPercentage.textContent = `${Math.round(this.overallProgress)}%`;
            }

            // Update individual milestone cards
            Object.entries(this.milestones).forEach(([milestoneId, milestone]) => {
              this.updateMilestoneCard(milestoneId, milestone);
            });
            
            // Update next actions
            this.updateNextActions();
          }

          updateMilestoneCard(milestoneId, milestone) {
            const card = document.querySelector(`[data-milestone="${milestoneId}"]`);
            if (!card) return;

            const progressBar = card.querySelector('.milestone-progress');
            const statusIcon = card.querySelector('.milestone-status');
            
            if (progressBar) {
              progressBar.style.width = `${milestone.completion}%`;
            }
            
            if (statusIcon) {
              const icons = {
                completed: '',
                'in-progress': '',
                pending: '',
                blocked: ''
              };
              statusIcon.textContent = icons[milestone.status] || '';
            }
            
            // Add click handler for milestone details
            card.style.cursor = 'pointer';
            card.onclick = () => this.showMilestoneDetails(milestoneId, milestone);
          }

          updateNextActions() {
            const actionsContainer = document.getElementById('next-actions');
            if (!actionsContainer) return;

            // Collect next actions from in-progress milestones
            const nextActions = [];
            Object.values(this.milestones).forEach(milestone => {
              if (milestone.status === 'in-progress' || (milestone.status === 'pending' && milestone.nextActions.length > 0)) {
                nextActions.push(...milestone.nextActions.slice(0, 2)); // Limit to 2 per milestone
              }
            });

            // Limit to 3 total actions
            const limitedActions = nextActions.slice(0, 3);
            
            if (limitedActions.length > 0) {
              actionsContainer.innerHTML = limitedActions.map((action, index) => {
                const colors = ['blue', 'green', 'purple', 'orange'];
                const color = colors[index % colors.length];
                const icons = ['', '', '', ''];
                const icon = icons[index % icons.length];
                
                return `
                  <div class="flex items-center p-2 bg-${color}-50 rounded border-l-4 border-${color}-500">
                    <span class="text-${color}-500 mr-2">${icon}</span>
                    <span class="text-sm text-${color}-800">${action}</span>
                  </div>
                `;
              }).join('');
            }
          }

          setupProgressUpdates() {
            // Simulate real-time updates (in production, this would come from actual data)
            setInterval(() => {
              // Update in-progress milestones
              Object.entries(this.milestones).forEach(([id, milestone]) => {
                if (milestone.status === 'in-progress' && milestone.completion < 100) {
                  // Simulate progress increment
                  const increment = Math.random() * 1; // 0-1% increase
                  milestone.completion = Math.min(100, milestone.completion + increment);
                  
                  if (milestone.completion >= 100) {
                    milestone.status = 'completed';
                    this.triggerCelebration(milestone.name);
                  }
                }
              });
              
              this.calculateProgress();
            }, 30000); // Update every 30 seconds
          }

          triggerCelebration(milestoneName) {
            // Create confetti effect
            this.showCelebration(`${milestoneName} Completado!`);
            
            // Add celebration to milestone card
            const cards = document.querySelectorAll('.milestone-card');
            cards.forEach(card => {
              if (card.textContent.includes(milestoneName)) {
                card.classList.add('celebration-pulse');
                setTimeout(() => {
                  card.classList.remove('celebration-pulse');
                }, 2000);
              }
            });
          }
          showCelebration(message) {
            const celebration = document.createElement('div');
            celebration.className = 'fixed inset-0 flex items-center justify-center z-50 pointer-events-none';
            celebration.innerHTML = `
              <div class="bg-green-500 text-white px-8 py-4 rounded-lg shadow-lg transform scale-0 transition-transform duration-500">
                <div class="text-center">
                  <span class="text-3xl block mb-2"></span>
                  <div class="font-bold text-lg">${message}</div>
                  <div class="text-sm opacity-90">Excelente progreso hacia Serie A!</div>
                </div>
              </div>
            `;
            
            document.body.appendChild(celebration);
            
            // Animate in
            setTimeout(() => {
              celebration.firstElementChild.classList.add('scale-100');
            }, 100);
            
            // Remove after animation
            setTimeout(() => {
              celebration.remove();
            }, 3000);
          }

          showMilestoneDetails(milestoneId, milestone) {
            // Create modal with milestone details
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
            modal.innerHTML = `
              <div class="bg-white rounded-lg max-w-lg w-full">
                <div class="p-6 border-b flex justify-between items-center">
                  <h3 class="text-xl font-bold text-slate-800">${milestone.name}</h3>
                  <button onclick="this.closest('.fixed').remove()" 
                          class="text-slate-500 hover:text-slate-700 text-2xl">&times;</button>
                </div>
                
                <div class="p-6">
                  <div class="mb-4">
                    <div class="flex justify-between items-center mb-2">
                      <span class="font-medium">Progreso</span>
                      <span class="font-bold">${milestone.completion}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                      <div class="bg-teal-500 h-3 rounded-full transition-all duration-500" 
                           style="width: ${milestone.completion}%"></div>
                    </div>
                  </div>
                  
                  <div class="mb-4">
                    <h4 class="font-semibold mb-2">KPIs Objetivo:</h4>
                    <ul class="space-y-1">
                      ${milestone.kpis.map(kpi => `
                        <li class="flex items-center text-sm">
                          <span class="text-green-500 mr-2"></span>
                          ${kpi}
                        </li>
                      `).join('')}
                    </ul>
                  </div>
                  
                  ${milestone.nextActions.length > 0 ? `
                    <div>
                      <h4 class="font-semibold mb-2">Acciones Pendientes:</h4>
                      <ul class="space-y-1">
                        ${milestone.nextActions.map(action => `
                          <li class="flex items-center text-sm">
                            <span class="text-orange-500 mr-2"></span>
                            ${action}
                          </li>
                        `).join('')}
                      </ul>
                    </div>
                  ` : ''}
                </div>
              </div>
            `;
            
            document.body.appendChild(modal);
            
            // Click outside to close
            modal.addEventListener('click', (e) => {
              if (e.target === modal) modal.remove();
            });
          }
        }

        // AGREGAR: Moat Details System for Competitive Analysis
        function showMoatDetails(moatType) {
          const moatData = {
            datos: {
              title: 'Foso de Datos: Carta Aval de Ruta + Dacin en Pago',
              content: `
                <div class="space-y-4">
                  <div class="bg-blue-50 p-4 rounded-lg">
                    <h4 class="font-bold text-blue-800 mb-2">Activo Propietario nico</h4>
                    <p class="text-blue-700 text-sm">La "Carta Aval de Ruta + Dacin en Pago" representa 15+ aos de conocimiento cultural del sector transportista mexicano, imposible de replicar por competidores tradicionales o fintechs.</p>
                  </div>
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <h5 class="font-semibold mb-2">Componentes nicos:</h5>
                      <ul class="text-sm space-y-1">
                        <li> Capital social comunitario digitalizado</li>
                        <li> Validacin por presidentes de ruta</li>
                        <li> Historial reputacional no-financiero</li>
                        <li> Network effects culturales</li>
                      </ul>
                    </div>
                    <div>
                      <h5 class="font-semibold mb-2">Barrera de Entrada:</h5>
                      <ul class="text-sm space-y-1">
                        <li> Tiempo: 15+ aos para construir</li>
                        <li> Costo: Imposible monetizar</li>
                        <li> Acceso: Requiere confianza cultural</li>
                        <li> Competidores: Sin equivalente</li>
                      </ul>
                    </div>
                  </div>
                </div>
              `
            },
            tech: {
              title: 'Foso Tecnolgico: Arquitectura Multi-Agente',
              content: `
                <div class="space-y-4">
                  <div class="bg-green-50 p-4 rounded-lg">
                    <h4 class="font-bold text-green-800 mb-2">4 Agentes IA Sinrgicos</h4>
                    <p class="text-green-700 text-sm">Arquitectura nica donde cada agente se especializa y retroalimenta a los dems, creando un ecosistema de IA ms potente que la suma de sus partes.</p>
                  </div>
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <h5 class="font-semibold mb-2">Sinergia Tcnica:</h5>
                      <ul class="text-sm space-y-1">
                        <li> HASE  scoring  triggers PIA</li>
                        <li> Super-PMA  datos  mejora HASE</li>
                        <li> Asistente  interacciones  entrena PIA</li>
                        <li> RAG-DNA  conocimiento  todos</li>
                      </ul>
                    </div>
                    <div>
                      <h5 class="font-semibold mb-2">Ventaja Competitiva:</h5>
                      <ul class="text-sm space-y-1">
                        <li> Fintechs: Monolticos, no especializados</li>
                        <li> Bancos: Legacy systems, no IA-nativo</li>
                        <li> Startups: Single-purpose, no ecosystem</li>
                        <li> RAG: Multi-agent, self-improving</li>
                      </ul>
                    </div>
                  </div>
                </div>
              `
            },
            ops: {
              title: 'Foso Operacional: Escalabilidad sin Headcount',
              content: `
                <div class="space-y-4">
                  <div class="bg-purple-50 p-4 rounded-lg">
                    <h4 class="font-bold text-purple-800 mb-2">Automatizacin de Costos Variables</h4>
                    <p class="text-purple-700 text-sm">La IA convierte costos variables tradicionales (soporte, cobranza, mantenimiento) en inversin de capital fija, mejorando mrgenes conforme escala.</p>
                  </div>
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <h5 class="font-semibold mb-2">Reducciones Operativas:</h5>
                      <ul class="text-sm space-y-1">
                        <li> Soporte: 40% menos agentes humanos</li>
                        <li> Cobranza: Automtica + emptica</li>
                        <li> Mantenimiento: 30% menos reparaciones</li>
                        <li> Diagnsticos: 70% automatizados</li>
                      </ul>
                    </div>
                    <div>
                      <h5 class="font-semibold mb-2">Escalabilidad:</h5>
                      <ul class="text-sm space-y-1">
                        <li> 10 vehculos: Margen 25%</li>
                        <li> 100 vehculos: Margen 35%</li>
                        <li> 1000 vehculos: Margen 45%</li>
                        <li> AI mejora con ms datos</li>
                      </ul>
                    </div>
                  </div>
                </div>
              `
            },
            network: {
              title: 'Foso de Red: Flywheel Auto-Reforzado',
              content: `
                <div class="space-y-4">
                  <div class="bg-orange-50 p-4 rounded-lg">
                    <h4 class="font-bold text-orange-800 mb-2">Efecto Red Compuesto</h4>
                    <p class="text-orange-700 text-sm">Cada nuevo cliente mejora el servicio para todos: ms datos  IA ms smart  mejor servicio  ms clientes  ms datos.</p>
                  </div>
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <h5 class="font-semibold mb-2">Flywheel Components:</h5>
                      <ul class="text-sm space-y-1">
                        <li> Ms operadores  ms datos</li>
                        <li> Ms datos  mejores modelos</li>
                        <li> Mejores modelos  mejor servicio</li>
                        <li> Mejor servicio  ms operadores</li>
                      </ul>
                    </div>
                    <div>
                      <h5 class="font-semibold mb-2">Network Effects:</h5>
                      <ul class="text-sm space-y-1">
                        <li> Marketplace: Ms oferta/demanda</li>
                        <li> Datos: Benchmarking colectivo</li>
                        <li> Comunidad: Support peer-to-peer</li>
                        <li> Poder negociacin: Mejores rates</li>
                      </ul>
                    </div>
                  </div>
                </div>
              `
            }
          };

          const detailsContainer = document.getElementById('moat-details');
          const contentContainer = document.getElementById('moat-content');
          
          if (detailsContainer && contentContainer) {
            const moat = moatData[moatType];
            if (moat) {
              contentContainer.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-slate-800">${moat.title}</h3>
                ${moat.content}
                <div class="mt-6 p-4 bg-slate-100 rounded-lg">
                  <button onclick="hideMoatDetails()" class="text-slate-600 hover:text-slate-800 font-medium">
                     Volver a vista general
                  </button>
                </div>
              `;
              
              detailsContainer.classList.remove('hidden');
              detailsContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
          }
        }

        function hideMoatDetails() {
          const detailsContainer = document.getElementById('moat-details');
          if (detailsContainer) {
            detailsContainer.classList.add('hidden');
          }
        }

        // Make functions globally available
        window.showMoatDetails = showMoatDetails;
        window.hideMoatDetails = hideMoatDetails;

        // ACCESSIBILITY: Enhanced Keyboard Navigation
        function setupKeyboardNavigation() {
            // Add keyboard support for interactive cards
            document.querySelectorAll('.agent-card, .kpi-card, .interactive-element').forEach(element => {
                element.setAttribute('tabindex', '0');
                element.setAttribute('role', 'button');
                
                element.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        element.click();
                    }
                });
            });

            // Add keyboard support for phase buttons
            document.querySelectorAll('.phase-btn-premium-mandatory').forEach(button => {
                button.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                        e.preventDefault();
                        const buttons = Array.from(document.querySelectorAll('.phase-btn-premium-mandatory'));
                        const currentIndex = buttons.indexOf(button);
                        let nextIndex;
                        
                        if (e.key === 'ArrowLeft') {
                            nextIndex = currentIndex > 0 ? currentIndex - 1 : buttons.length - 1;
                        } else {
                            nextIndex = currentIndex < buttons.length - 1 ? currentIndex + 1 : 0;
                        }
                        
                        buttons[nextIndex].focus();
                    }
                });
            });

            // Add skip links for keyboard users
            const skipLink = document.createElement('a');
            skipLink.href = '#main';
            skipLink.textContent = 'Saltar al contenido principal';
            skipLink.className = 'sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-blue-600 text-white p-2 z-50';
            skipLink.style.cssText = 'position: absolute; top: -40px; left: 6px; background: #1e40af; color: white; padding: 8px; text-decoration: none; z-index: 100; transition: top 0.3s;';
            
            skipLink.addEventListener('focus', () => {
                skipLink.style.top = '6px';
            });
            
            skipLink.addEventListener('blur', () => {
                skipLink.style.top = '-40px';
            });
            
            document.body.insertAdjacentElement('afterbegin', skipLink);

            // Announce dynamic content changes to screen readers
            const announceChange = (message) => {
                const liveRegion = document.getElementById('aria-live-region');
                if (liveRegion) {
                    liveRegion.textContent = message;
                    setTimeout(() => {
                        liveRegion.textContent = '';
                    }, 1000);
                }
            };

            // Hook into role switching to announce changes
            const originalSwitchRole = window.switchRole;
            if (originalSwitchRole) {
                window.switchRole = function(role) {
                    originalSwitchRole(role);
                    announceChange(`Vista cambiada a ${role}`);
                };
            }

            // Hook into phase filtering to announce changes
            const originalFilterByPhase = window.filterByPhase;
            if (originalFilterByPhase) {
                window.filterByPhase = function(phase) {
                    originalFilterByPhase(phase);
                    announceChange(`Filtro aplicado: ${phase}`);
                };
            }
        }
        // Add scroll progress indicator
        const progressBar = document.createElement('div');
        progressBar.className = 'scroll-progress';
        document.body.insertAdjacentElement('afterbegin', progressBar);

        // --- INITIALIZATION ---
        // Initialize data and render base components (MANTENER existente)
        renderInvestmentChart();
        renderROIChart();
        renderDiferenciadores();
        renderFinancials();
        renderFinancialBreakdown();
        renderAgentes();
        renderArquitecturaDatos();
        renderWeeklyTimeline();
        renderKpisCorrelacionados();
        renderCompliance();
        renderTeamTable();
        renderTechROIChart();
        renderProgressTrackers();
        setupModal();

        // Populate ROI tables
        populateCompetitiveROI();
        populateTechROI();

        // AGREGAR: Initialize new systems
        console.log(' Inicializando sistemas avanzados...');
        
        // Initialize controllers in order
        try {
            window.audienceController = new AudienceController();
            console.log(' Audience Controller initialized');
            
            window.phaseController = new PhaseController();
            console.log(' Phase Controller initialized');
            
            window.scenarioCalculator = new ScenarioCalculator();
            console.log(' Scenario Calculator initialized');
            
            window.progressTracker = new ProgressTracker();
            console.log(' Progress Tracker initialized');
            
            window.crossReferenceController = new CrossReferenceController();
            console.log(' Cross Reference Controller initialized');
            
            window.dataValidator = new DataValidator();
            console.log(' Data Validator initialized');

            // Initialize testing in development mode
            if (window.location.hostname === 'localhost' || window.location.search.includes('test=true')) {
              setTimeout(() => {
                window.testingController = new TestingController();
                console.log(' Testing Controller initialized');
              }, 2000);
            }
            
            // Setup global functions
            window.switchRole = (role) => window.audienceController.switchRole(role);
            window.filterByPhase = (phase) => window.phaseController.filterByPhase(phase);
            window.updateScenarioCalculation = () => window.scenarioCalculator.updateCalculation();
            
            console.log(' Todos los sistemas inicializados correctamente');
            
            // Setup accessibility enhancements
            setupKeyboardNavigation();
            console.log(' Keyboard Navigation initialized');
            
            // Show success notification
            showInitializationSuccess();
            
        } catch (error) {
            console.error(' Error durante la inicializacin:', error);
            showInitializationError(error);
        }

        // MANTENER: Navigation and existing functionality
        setupViewToggle();
        // AGREGAR: Initialization feedback functions
        function showInitializationSuccess() {
          const notification = document.createElement('div');
          notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-500';
          notification.innerHTML = `
            <div class="flex items-center">
              <span class="text-xl mr-2"></span>
              <div>
                <div class="font-semibold">Plan Seed v5 Cargado</div>
                <div class="text-sm opacity-90">Todos los sistemas operativos</div>
              </div>
            </div>
          `;
          
          document.body.appendChild(notification);
          
          // Animate in
          setTimeout(() => {
            notification.style.transform = 'translateX(0)';
          }, 100);
          
          // Auto-hide after 3 seconds
          setTimeout(() => {
            notification.style.transform = 'translateX(full)';
            setTimeout(() => notification.remove(), 500);
          }, 3000);
        }

        function showInitializationError(error) {
          const notification = document.createElement('div');
          notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
          notification.innerHTML = `
            <div class="flex items-center">
              <span class="text-xl mr-2"></span>
              <div>
                <div class="font-semibold">Error de Inicializacin</div>
                <div class="text-sm opacity-90">${error.message}</div>
              </div>
            </div>
          `;
          
          document.body.appendChild(notification);
          
          // Keep visible until clicked
          notification.onclick = () => notification.remove();
        }



        // MANTENER: Existing view toggle functionality
        function setupViewToggle() {
          const vistaEjecutivaBtn = document.getElementById('vista-ejecutiva-btn');
          const vistaOperacionalBtn = document.getElementById('vista-operacional-btn');
          const executiveView = document.getElementById('executive-view-content');
          const operationalView = document.getElementById('operational-view-content');

          if (vistaEjecutivaBtn && vistaOperacionalBtn && executiveView && operationalView) {
            vistaEjecutivaBtn.addEventListener('click', () => {
              executiveView.style.display = 'block';
              operationalView.style.display = 'none';
              vistaEjecutivaBtn.classList.add('bg-teal-600', 'text-white');
              vistaEjecutivaBtn.classList.remove('text-gray-600');
              vistaOperacionalBtn.classList.remove('bg-teal-600', 'text-white');
              vistaOperacionalBtn.classList.add('text-gray-600');
            });

            vistaOperacionalBtn.addEventListener('click', () => {
              executiveView.style.display = 'none';
              operationalView.style.display = 'block';
              vistaOperacionalBtn.classList.add('bg-teal-600', 'text-white');
              vistaOperacionalBtn.classList.remove('text-gray-600');
              vistaEjecutivaBtn.classList.remove('bg-teal-600', 'text-white');
              vistaEjecutivaBtn.classList.add('text-gray-600');
            });
          }
        }
    });

    // PREMIUM NAVIGATION CONTROLLER
    class PremiumNavigationController {
      constructor() {
        this.init();
      }

      init() {
        this.setupMobileNavigation();
        this.setupScrollSpy();
        this.setupSmoothScrolling();
      }

      setupMobileNavigation() {
        const mobileNavItems = document.querySelectorAll('.mobile-nav-item');
        const desktopNavItems = document.querySelectorAll('.nav-link-premium');
        
        // Enhanced mobile nav with touch feedback
        mobileNavItems.forEach(item => {
          // Touch feedback for mobile
          if (isTouch) {
            item.addEventListener('touchstart', () => {
              item.style.transform = 'scale(0.95)';
            });
            
            item.addEventListener('touchend', () => {
              item.style.transform = 'scale(1)';
            });
          }
          
          item.addEventListener('click', (e) => {
            // Remove active from all items
            mobileNavItems.forEach(nav => nav.classList.remove('active'));
            // Add active to clicked item
            item.classList.add('active');
          });
        });

        // Add click handlers for desktop nav
        desktopNavItems.forEach(item => {
          item.addEventListener('click', (e) => {
            // Remove active from all items
            desktopNavItems.forEach(nav => nav.classList.remove('active'));
            // Add active to clicked item
            item.classList.add('active');
          });
        });
      }

      setupScrollSpy() {
        const sections = document.querySelectorAll('section[id]');
        const navItems = document.querySelectorAll('.mobile-nav-item, .nav-link-premium');
        
        // Enhanced scroll spy with mobile optimizations
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const sectionId = entry.target.id;
              
              // Update mobile nav
              document.querySelectorAll('.mobile-nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === `#${sectionId}`) {
                  item.classList.add('active');
                }
              });
              
              // Update desktop nav
              document.querySelectorAll('.nav-link-premium').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === `#${sectionId}`) {
                  item.classList.add('active');
                }
              });
            }
          });
        }, {
          rootMargin: "-40% 0px -60% 0px"
        });

        sections.forEach(section => observer.observe(section));
      }
      setupSmoothScrolling() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
              target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
              });
            }
          });
        });
      }
    }

    // PREMIUM ANIMATIONS CONTROLLER
    class PremiumAnimationsController {
      constructor() {
        this.init();
      }

      init() {
        this.setupScrollAnimations();
        this.setupStaggerAnimations();
      }

      setupScrollAnimations() {
        const animatedElements = document.querySelectorAll('.fade-in-up, .card-premium, .interactive-element');
        
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('visible');
            }
          });
        }, {
          threshold: 0.1,
          rootMargin: '0px 0px -10% 0px'
        });

        animatedElements.forEach(el => observer.observe(el));
      }

      setupStaggerAnimations() {
        const staggerContainers = document.querySelectorAll('.stagger-animation');
        
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const children = entry.target.children;
              Array.from(children).forEach((child, index) => {
                setTimeout(() => {
                  child.style.opacity = '1';
                  child.style.transform = 'translateY(0)';
                }, index * 100);
              });
            }
          });
        }, {
          threshold: 0.2
        });

        staggerContainers.forEach(container => observer.observe(container));
      }
    }

    // CORE ENGINE - SISTEMA DE CLCULO REAL
    // 1. MAPEO REAL: Cronograma  Progreso por Agente
    const AGENT_TASK_MAPPING = {
      hase: {
        mes1: ['Features engineering HASE', 'HASE baseline v0.5', 'Social scoring design'],
        mes2: ['XGBoost + social hybrid', 'Social scoring validation'],
        mes3: ['HASE v0.8 deployment', 'HASE >80% AUC validation'],
        mes4: ['Social scoring production', 'HASE optimization'],
        mes5: ['HASE v0.9 release', 'Performance tuning'],
        mes6: ['HASE >90% AUC validation', 'Production deployment'],
        totalTasks: 18
      },
      pia: {
        mes2: ['PIA architecture'],
        mes3: ['Motor alertas PIA'],
        mes4: ['PIA v1.0 WhatsApp', 'LLMs empticos training'],
        mes5: ['PIA optimization', 'WhatsApp Business API'],
        mes6: ['PIA production deployment'],
        totalTasks: 12
      },
      superPma: {
        mes3: ['Super-PMA design'],
        mes4: ['Marketplace foundation'],
        mes5: ['Kafka streaming production', 'Sensores installation'],
        mes6: ['Super-PMA v1.0'],
        mes7: ['Marketplace integration'],
        mes8: ['Super-PMA optimization'],
        totalTasks: 16
      },
      asistente: {
        mes4: ['BERT espaol setup'],
        mes5: ['Asistente base conocimiento', 'GPT-4 Vision integration'],
        mes6: ['Flowise + Make/n8n setup'],
        mes7: ['Asistente v1.0 deployment'],
        mes8: ['70% automation target'],
        totalTasks: 10
      },
      capex: {
        mes6: ['1ra vagoneta deployment'],
        mes7: ['2da vagoneta deployment'],
        mes8: ['3ra vagoneta deployment'],
        totalTasks: 3
      }
    };

    // Real financial data from the plan (using global definition)

    // 2. FUNCIN CLCULO REAL
    function calculateRealProgress(targetMonth, availableFunding) {
      const results = {};
      let cumulativeSpent = 0;
      
      // Calcular gasto acumulado hasta targetMonth
      for (let month = 1; month <= targetMonth; month++) {
        const monthlyBurn = flujosEfectivoReales.gastoEquipoTecnico[month-1] + 
                           flujosEfectivoReales.gastoLiderazgo[month-1] + 
                           flujosEfectivoReales.gastoDesarrollo[month-1] + 
                           flujosEfectivoReales.gastoCapex[month-1] + 
                           flujosEfectivoReales.stackInclusivo[month-1] + 
                           flujosEfectivoReales.compliance[month-1];
        
        cumulativeSpent += monthlyBurn;
        
        // Si nos quedamos sin funding, calcular qu tasks NO se completan
        if (cumulativeSpent > availableFunding) {
          const deficit = cumulativeSpent - availableFunding;
          results.fundingShortfall = {
            month: month,
            deficit: deficit,
            impact: calculateTaskImpact(deficit, month)
          };
          break;
        }
      }
      
      // Calcular progreso por agente basado en funding available
      Object.keys(AGENT_TASK_MAPPING).forEach(agent => {
        const agentTasks = AGENT_TASK_MAPPING[agent];
        let completedTasks = 0;
        
        for (let month = 1; month <= targetMonth; month++) {
          if (agentTasks[`mes${month}`] && canAffordMonth(month, availableFunding)) {
            completedTasks += agentTasks[`mes${month}`].length;
          }
        }
        
        results[agent] = {
          completedTasks,
          totalTasks: agentTasks.totalTasks,
          percentage: Math.round((completedTasks / agentTasks.totalTasks) * 100),
          status: getAgentStatus(completedTasks, agentTasks.totalTasks)
        };
      });
      
      return results;
    }

    // 3. FUNCIN IMPACTO REAL
    function calculateTaskImpact(deficit, month) {
      const impacts = [];
      
      // Si deficit afecta CAPEX (meses 6-8)
      if (month >= 6 && deficit >= 876667) {
        const vagonetasLost = Math.floor(deficit / 876667);
        impacts.push(`${vagonetasLost} vagoneta(s) menos  Sin validacin comercial real`);
      }
      
      // Si deficit afecta desarrollo core
      if (deficit >= 500000) {
        impacts.push('Agentes IA incompletos  Sin diferenciacin tcnica');
      }
      
      // Si deficit crtico para Serie A
      if (month >= 9 && deficit > 1000000) {
        impacts.push('Serie A IMPOSIBLE  Sin data room viable');
      }
      
      return impacts;
    }
    function canAffordMonth(month, availableFunding) {
      let cumulativeSpent = 0;
      for (let m = 1; m <= month; m++) {
        const monthlyBurn = flujosEfectivoReales.gastoEquipoTecnico[m-1] + 
                           flujosEfectivoReales.gastoLiderazgo[m-1] + 
                           flujosEfectivoReales.gastoDesarrollo[m-1] + 
                           flujosEfectivoReales.gastoCapex[m-1] + 
                           flujosEfectivoReales.stackInclusivo[m-1] + 
                           flujosEfectivoReales.compliance[m-1];
        cumulativeSpent += monthlyBurn;
      }
      return cumulativeSpent <= availableFunding;
    }

    function getAgentStatus(completed, total) {
      const percentage = (completed / total) * 100;
      if (percentage >= 90) return ' Completo';
      if (percentage >= 70) return ' En progreso';
      if (percentage >= 50) return ' Riesgo';
      return ' Crtico';
    }
    // Update function for the real progress tracker
    function updateRealProgress() {
      const fundingAmount = parseInt(document.getElementById('funding-slider').value);
      const targetMonth = parseInt(document.getElementById('target-month-slider').value);
      
      // Update display values
      document.getElementById('funding-amount').textContent = `$${(fundingAmount / 1000000).toFixed(2)}M`;
      document.getElementById('target-month').textContent = `Mes ${targetMonth}`;
      
      // Calculate real progress
      const results = calculateRealProgress(targetMonth, fundingAmount);
      
      // Calculate efficiency score
      let totalProgress = 0;
      let totalBudgetUsed = 0;
      
      Object.keys(AGENT_TASK_MAPPING).forEach(agent => {
        if (results[agent]) {
          totalProgress += results[agent].percentage;
          // Estimate budget used based on completion
          totalBudgetUsed += (results[agent].percentage / 100) * (fundingAmount / 5); // Rough estimate
        }
      });
      
      const avgProgress = totalProgress / Object.keys(AGENT_TASK_MAPPING).length;
      const budgetEfficiency = totalBudgetUsed > 0 ? (avgProgress / 100) / (totalBudgetUsed / fundingAmount) : 0;
      const efficiencyScore = Math.max(0.1, Math.min(2.0, budgetEfficiency));
      
      document.getElementById('efficiency-score').textContent = efficiencyScore.toFixed(1);
      
      let efficiencyStatus = ' Rojo';
      let efficiencyColor = 'text-red-600';
      if (efficiencyScore >= 1.0) {
        efficiencyStatus = ' Verde';
        efficiencyColor = 'text-green-600';
      } else if (efficiencyScore >= 0.8) {
        efficiencyStatus = ' Amarillo';
        efficiencyColor = 'text-yellow-600';
      }
      
      const efficiencyElement = document.getElementById('efficiency-status');
      efficiencyElement.textContent = efficiencyStatus;
      efficiencyElement.className = `text-xs ${efficiencyColor}`;
      
      // Update agent progress results
      updateAgentProgressResults(results);
      
      // Update funding impact
      updateFundingImpact(results);
      
      // Update scenario validations
      updateScenarioValidations(fundingAmount);
      
      // Update progress bars
      updateAgentProgressBars(results);
    }

    function updateAgentProgressResults(results) {
      const container = document.getElementById('agent-progress-results');
      container.innerHTML = '';
      
      Object.keys(AGENT_TASK_MAPPING).forEach(agent => {
        if (results[agent]) {
          const result = results[agent];
          const div = document.createElement('div');
          div.className = 'bg-white p-3 rounded-lg border text-center';
          
          let statusColor = 'text-red-600';
          if (result.percentage >= 90) statusColor = 'text-green-600';
          else if (result.percentage >= 70) statusColor = 'text-blue-600';
          else if (result.percentage >= 50) statusColor = 'text-yellow-600';
          
          div.innerHTML = `
            <div class="font-bold text-sm uppercase">${agent.toUpperCase()}</div>
            <div class="text-lg font-bold ${statusColor}">${result.completedTasks}/${result.totalTasks}</div>
            <div class="text-xs text-slate-600">${result.percentage}%</div>
            <div class="text-xs ${statusColor}">${result.status}</div>
          `;
          
          container.appendChild(div);
        }
      });
    }

    function updateFundingImpact(results) {
      const impactContainer = document.getElementById('funding-impact');
      const impactDetails = document.getElementById('impact-details');
      
      if (results.fundingShortfall) {
        impactContainer.style.display = 'block';
        impactContainer.className = 'mt-4 p-4 rounded-lg border-l-4 border-red-500 bg-red-50';
        
        let impactHtml = `<p class="text-red-800 font-medium">Dficit de $${(results.fundingShortfall.deficit / 1000000).toFixed(2)}M en Mes ${results.fundingShortfall.month}</p>`;
        
        if (results.fundingShortfall.impact.length > 0) {
          impactHtml += '<ul class="mt-2 text-sm text-red-700">';
          results.fundingShortfall.impact.forEach(impact => {
            impactHtml += `<li> ${impact}</li>`;
          });
          impactHtml += '</ul>';
        }
        
        impactDetails.innerHTML = impactHtml;
      } else {
        impactContainer.style.display = 'none';
      }
    }

    function updateScenarioValidations(currentFunding) {
      // Scenario with $5M
      const results5M = calculateRealProgress(12, 5000000);
      let scenario5MHtml = '';
      if (results5M.fundingShortfall) {
        scenario5MHtml = `<p> Dficit: $${(results5M.fundingShortfall.deficit / 1000000).toFixed(1)}M</p>`;
        scenario5MHtml += '<p> CAPEX incompleto</p>';
        scenario5MHtml += '<p> Solo 2 agentes IA</p>';
      } else {
        scenario5MHtml = '<p> Factible con limitaciones</p>';
      }
      document.getElementById('scenario-5m').innerHTML = scenario5MHtml;
      
      // Scenario with $7.6M
      const results76M = calculateRealProgress(12, 7665000);
      let scenario76MHtml = '';
      if (results76M.fundingShortfall) {
        scenario76MHtml = `<p> Ajustado: $${(results76M.fundingShortfall.deficit / 1000000).toFixed(1)}M</p>`;
      } else {
        scenario76MHtml = '<p> Timeline completo</p>';
        scenario76MHtml += '<p> Serie A viable</p>';
        scenario76MHtml += '<p> 3 vagonetas operativas</p>';
      }
      document.getElementById('scenario-7-6m').innerHTML = scenario76MHtml;
      
      // Scenario with $10M
      const results10M = calculateRealProgress(12, 10000000);
      let scenario10MHtml = '<p> Aceleracin posible</p>';
      scenario10MHtml += '<p> Desarrollo paralelo</p>';
      scenario10MHtml += '<p> Ms vagonetas piloto</p>';
      scenario10MHtml += '<p> Serie A anticipada</p>';
      document.getElementById('scenario-10m').innerHTML = scenario10MHtml;
    }
    function updateAgentProgressBars(results) {
      const container = document.getElementById('agent-progress-bars');
      container.innerHTML = '';
      
      Object.keys(AGENT_TASK_MAPPING).forEach(agent => {
        if (results[agent]) {
          const result = results[agent];
          const div = document.createElement('div');
          
          let barColor = 'bg-red-500';
          if (result.percentage >= 90) barColor = 'bg-green-500';
          else if (result.percentage >= 70) barColor = 'bg-blue-500';
          else if (result.percentage >= 50) barColor = 'bg-yellow-500';
          
          div.innerHTML = `
            <div class="flex justify-between items-center mb-1">
              <span class="font-medium text-sm">${agent.toUpperCase()}</span>
              <span class="text-sm text-slate-600">${result.percentage}%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
              <div class="${barColor} h-2 rounded-full transition-all duration-500" style="width: ${result.percentage}%"></div>
            </div>
            <div class="text-xs text-slate-500 mt-1">${result.completedTasks}/${result.totalTasks} tasks completadas</div>
          `;
          
          container.appendChild(div);
        }
      });
    }

    function setupFundingSimulator() {
        const slider = document.getElementById('funding-slider');
        const amountSpan = document.getElementById('funding-amount');
        const impactDiv = document.getElementById('funding-impact');

        if (!slider || !amountSpan || !impactDiv) {
            console.error('Elementos del simulador no encontrados.');
            return;
        }

        const budgets = {
            equipoCompleto: 4280000,       // $1.94M (ESOP) + $2.34M (COO/PMO)
            coreIA: 2265000,
            saasYOperaciones: 825000,      // $631k (SaaS) + $150k (RAG) + $44k (Reserva)
            capexPiloto: 2630000
        };
        const totalBudget = Object.values(budgets).reduce((a, b) => a + b, 0);

        function calculateFundingImpact(fundingMM) {
            const funding = fundingMM * 1000000;
            amountSpan.textContent = `$${fundingMM.toFixed(1)}M`;

            let remaining = funding;
            let results = {};
            
            results.equipo = { percent: Math.min(100, Math.round((remaining / budgets.equipoCompleto) * 100)) };
            remaining = Math.max(0, remaining - budgets.equipoCompleto);

            results.coreIA = { percent: Math.min(100, Math.round((remaining / budgets.coreIA) * 100)) };
            remaining = Math.max(0, remaining - budgets.coreIA);
            
            results.saasStack = { percent: Math.min(100, Math.round((remaining / budgets.saasYOperaciones) * 100)) };
            remaining = Math.max(0, remaining - budgets.saasYOperaciones);

            results.capex = { percent: Math.min(100, Math.round((remaining / budgets.capexPiloto) * 100)) };
            
            Object.keys(results).forEach(key => {
                const p = results[key].percent;
                results[key].status = p === 100 ? 'success' : p > 65 ? 'warning' : 'danger';
                let message = '';
                if(key === 'equipo') message = p === 100 ? 'Equipo completo ' : `Equipo incompleto (${p}%) `;
                if(key === 'coreIA') message = p === 100 ? '4 agentes completos ' : p > 0 ? `IA parcial (${p}%) ` : 'Sin agentes IA ';
                if(key === 'saasStack') message = p === 100 ? 'Stack empresarial ' : p > 0 ? `Stack bsico (${p}%) ` : 'Sin infraestructura ';
                if(key === 'capex') {
                    const vagonetas = Math.floor(p / 33.33);
                    message = vagonetas >= 3 ? '3 vagonetas ' : vagonetas >= 2 ? '2 vagonetas ' : vagonetas >= 1 ? '1 vagoneta ' : 'Sin vagonetas ';
                }
                results[key].message = message;
            });
            
            const serieAViable = results.equipo.percent === 100 && results.coreIA.percent >= 80 && results.capex.percent >= 67;
            const overallStatus = serieAViable ? 'success' : (results.coreIA.percent >= 50 ? 'warning' : 'danger');
            const overfunding = Math.max(0, funding - totalBudget);
            const statusColors = { success: 'green', warning: 'yellow', danger: 'red' };

            let htmlContent = `
            <div class="bg-${statusColors[results.equipo.status]}-50 p-4 rounded-lg border-l-4 border-${statusColors[results.equipo.status]}-500">
                <h5 class="font-semibold text-${statusColors[results.equipo.status]}-800 mb-2 flex items-center gap-2"><i data-lucide="users" class="w-4 h-4"></i>Equipo</h5>
                <div class="text-2xl font-bold text-${statusColors[results.equipo.status]}-600">${results.equipo.percent}%</div>
                <p class="text-sm text-${statusColors[results.equipo.status]}-700">${results.equipo.message}</p>
            </div>
            <div class="bg-${statusColors[results.coreIA.status]}-50 p-4 rounded-lg border-l-4 border-${statusColors[results.coreIA.status]}-500">
                <h5 class="font-semibold text-${statusColors[results.coreIA.status]}-800 mb-2 flex items-center gap-2"><i data-lucide="cpu" class="w-4 h-4"></i>Core IA</h5>
                <div class="text-2xl font-bold text-${statusColors[results.coreIA.status]}-600">${results.coreIA.percent}%</div>
                <p class="text-sm text-${statusColors[results.coreIA.status]}-700">${results.coreIA.message}</p>
            </div>
            <div class="bg-${statusColors[results.saasStack.status]}-50 p-4 rounded-lg border-l-4 border-${statusColors[results.saasStack.status]}-500">
                <h5 class="font-semibold text-${statusColors[results.saasStack.status]}-800 mb-2 flex items-center gap-2"><i data-lucide="settings" class="w-4 h-4"></i>SaaS Stack</h5>
                <div class="text-2xl font-bold text-${statusColors[results.saasStack.status]}-600">${results.saasStack.percent}%</div>
                <p class="text-sm text-${statusColors[results.saasStack.status]}-700">${results.saasStack.message}</p>
            </div>
            <div class="bg-${statusColors[results.capex.status]}-50 p-4 rounded-lg border-l-4 border-${statusColors[results.capex.status]}-500">
                <h5 class="font-semibold text-${statusColors[results.capex.status]}-800 mb-2 flex items-center gap-2"><i data-lucide="truck" class="w-4 h-4"></i>CAPEX</h5>
                <div class="text-2xl font-bold text-${statusColors[results.capex.status]}-600">${results.capex.percent}%</div>
                <p class="text-sm text-${statusColors[results.capex.status]}-700">${results.capex.message}</p>
            </div>
            <div class="col-span-full mt-4 p-4 bg-${statusColors[overallStatus]}-50 border border-${statusColors[overallStatus]}-200 rounded-lg text-center">
                <h4 class="font-bold text-${statusColors[overallStatus]}-800 text-lg mb-2"> Resultado Serie A</h4>
                <p class="text-${statusColors[overallStatus]}-700">
                    ${serieAViable ? 'Serie A viable - Plan completo ejecutable ' :
                    (results.coreIA.percent >= 50 ? 'Serie A con riesgo - Validacin limitada ' :
                    'Serie A imposible - Sin modelo validado ')}
                </p>
            </div>
            `;
            
            if(overfunding > 1000) {
                const vagonetasExtra = Math.floor(overfunding / 876667);
                const overfundingHtml = `
                <div class="col-span-full mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg text-center">
                    <h4 class="font-bold text-blue-800 text-lg mb-2"> Aceleracin con Overfunding</h4>
                    <p class="text-blue-700">Con <strong>$${(overfunding/1000000).toFixed(2)}M</strong> extra se puede lograr:</p>
                    <ul class="mt-2 text-sm text-blue-700 list-inside text-left">
                        ${vagonetasExtra > 0 ? `<li>+ <strong>${vagonetasExtra} vagoneta(s)</strong> para validar economa de escala.</li>` : ''}
                        <li>Aceleracin del roadmap tcnico en <strong>2-3 meses</strong>.</li>
                        <li>Expansin anticipada del equipo de Go-to-Market.</li>
                    </ul>
                </div>
                `;
                htmlContent += overfundingHtml;
            }
            
            impactDiv.innerHTML = htmlContent;
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        slider.addEventListener('input', (e) => calculateFundingImpact(parseFloat(e.target.value)));
        slider.value = 10;
        calculateFundingImpact(10);
    }
    // Initialize premium controllers
    document.addEventListener('DOMContentLoaded', function() {
        console.log(' DOM loaded, initializing functions...');
        
        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }

        // Setup mobile performance optimizations
        if (isMobile) {
            // Observe all chart canvases for lazy loading
            document.querySelectorAll('.chart-container canvas').forEach(canvas => {
                chartObserver.observe(canvas);
            });
            
            // Add mobile-specific performance optimizations
            document.body.classList.add('mobile-optimized');
        }

        // Initialize premium controllers (with error handling)
        try {
            if (typeof PremiumNavigationController !== 'undefined') {
                new PremiumNavigationController();
            }
            if (typeof PremiumAnimationsController !== 'undefined') {
                new PremiumAnimationsController();
            }
        } catch (error) {
            console.warn('Premium controllers not available:', error.message);
        }
        
        // Initialize real progress tracker (with error handling)
        try {
            if (typeof updateRealProgress !== 'undefined') {
                updateRealProgress();
            }
        } catch (error) {
            console.warn('updateRealProgress not available:', error.message);
        }
        
        // Initialize Lucide icons (CRITICAL for UI)
        try {
            if (typeof lucide !== 'undefined' && lucide.createIcons) {
                console.log(' Initializing Lucide icons...');
                lucide.createIcons();
                console.log(' Lucide icons initialized');
            }
        } catch (error) {
            console.warn(' Lucide icons not available:', error.message);
        }
        
        // Initialize widgets (PRIORITY - These should always work)
        try {
            console.log(' Initializing funding simulator...');
            setupFundingSimulator();
            console.log(' Funding simulator initialized');
            
            console.log(' Initializing execution tracker...');
            setupExecutionTracker();
            console.log(' Execution tracker initialized');
            
            console.log(' All critical functions initialized successfully');
        } catch (error) {
            console.error(' ERROR initializing critical functions:', error);
            console.error('Full error:', error.stack);
        }
    });
    </script>

    <!-- PARTE 3: LGICA DE TRACKING AVANZADO -->
    <script>
    // AGREGADO: Lgica de Analtica Avanzada y Captura de Leads
    document.addEventListener('DOMContentLoaded', () => {

        // --- Helper para enviar eventos a GA4 ---
        const trackEvent = (eventName, params = {}) => {
            if (typeof gtag === 'function') {
                gtag('event', eventName, { ...params, 'send_to': 'G-XXXXXXXXXX' });
                console.log(`Event Tracked: ${eventName}`, params);
            } else {
                console.warn(`GA4 not available. Event not tracked: ${eventName}`);
            }
        };

        // --- 1. Engagement Bsico: Scroll Depth ---
        const scrollMilestones = { 25: false, 50: false, 75: false, 90: false };
        window.addEventListener('scroll', () => {
            const scrollPercent = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
            for (const milestone in scrollMilestones) {
                if (scrollPercent >= milestone && !scrollMilestones[milestone]) {
                    scrollMilestones[milestone] = true;
                    trackEvent('scroll_depth', { 'scroll_percentage': parseInt(milestone) });
                }
            }
        }, { passive: true });

        // --- 2. Engagement por Seccin: Tiempo en Pantalla ---
        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const sectionId = entry.target.id;
                if (entry.isIntersecting) {
                    entry.target.dataset.timeStart = Date.now();
                } else if (entry.target.dataset.timeStart) {
                    const timeSpent = Date.now() - parseInt(entry.target.dataset.timeStart, 10);
                    trackEvent('time_on_section', {
                        'section_id': sectionId,
                        'duration_seconds': Math.round(timeSpent / 1000)
                    });
                    delete entry.target.dataset.timeStart;
                }
            });
        }, { threshold: 0.5 });
        document.querySelectorAll('section[id]').forEach(section => sectionObserver.observe(section));

        // --- 3. Interacciones Clave con Elementos ---
        
        // Video Engagement
        const videoIframe = document.querySelector('iframe[title="Rodando a Gas - Modelo de Negocio"]');
        if (videoIframe) {
            // Simple click tracking as we can't access iframe internals easily
            videoIframe.parentElement.addEventListener('click', () => {
                 trackEvent('video_play_intent');
            }, { once: true });
        }
        
        // Sliders Financieros
        document.getElementById('roi-years')?.addEventListener('change', (e) => trackEvent('slider_interaction', { 'slider_id': 'roi_years', 'value': e.target.value }));
        document.getElementById('funding-slider')?.addEventListener('change', (e) => trackEvent('slider_interaction', { 'slider_id': 'funding_simulator', 'value': e.target.value }));
        document.getElementById('month-slider')?.addEventListener('change', (e) => trackEvent('slider_interaction', { 'slider_id': 'financial_plan_month', 'value': e.target.value }));

        // Selectores y Filtros
        document.getElementById('role-selector')?.addEventListener('change', (e) => trackEvent('filter_used', { 'filter_type': 'role_selector', 'selection': e.target.value }));
        document.getElementById('scenario-select')?.addEventListener('change', (e) => trackEvent('filter_used', { 'filter_type': 'scenario_calculator', 'selection': e.target.value }));
        document.querySelectorAll('.phase-btn-premium-mandatory').forEach(btn => btn.addEventListener('click', () => trackEvent('filter_used', { 'filter_type': 'phase_filter', 'selection': btn.dataset.phase })));

        // Clics en Modales
        document.body.addEventListener('click', (e) => {
            const agentCard = e.target.closest('.agent-card');
            if (agentCard) {
                trackEvent('modal_opened', { 'modal_type': 'agent_details', 'agent_name': agentCard.dataset.agentKey });
            }
        });

        // --- 3.5. Validacin de Conversin de Enlaces (Email y Calendly) ---
        document.addEventListener('click', (e) => {
            const link = e.target.closest('a');
            if (!link) return;

            const href = link.href;

            // Validacin para el correo de Conductores
            if (href.startsWith('mailto:') && href.includes('@conductores.lat')) {
                trackEvent('conversion_click', {
                    type: 'email_directo',
                    url: href
                });
            } 
            // Validacin para el enlace de Calendly
            else if (href.includes('calendly.com')) {
                trackEvent('conversion_click', {
                    type: 'calendly_meeting',
                    url: href
                });
            }
        });

        // --- 4. Tracking de Conversin: CTAs ---
        document.querySelectorAll('.btn-primary-hero-enhanced, .btn-secondary-hero-enhanced, a[href^="mailto:"], a[href*="calendly.com"]').forEach(cta => {
            cta.addEventListener('click', () => {
                let ctaId = 'unknown_cta';
                if (cta.textContent.includes('Ver Financiero')) ctaId = 'hero_ver_financiero';
                else if (cta.textContent.includes('Explorar Tecnologa')) ctaId = 'hero_explorar_tecnologia';
                else if (cta.href && cta.href.includes('mailto')) ctaId = 'contact_email_click';
                else if (cta.href && cta.href.includes('calendly')) ctaId = 'calendly_meeting_click';
                trackEvent('cta_click', { 'cta_id': ctaId });
            });
        });

        // --- 5. Lgica del Formulario de Captura de Leads ---
        const investorForm = document.getElementById('seed-investor-form');
        const formStatus = document.getElementById('form-status');
        if (investorForm) {
            investorForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(investorForm);
                const data = Object.fromEntries(formData.entries());
                
                // Validar
                if (!data.email || !data.role || !data.ticket_size) {
                    formStatus.textContent = 'Por favor, completa todos los campos.';
                    formStatus.style.color = '#ef4444'; // red
                    return;
                }

                formStatus.textContent = 'Enviando...';
                formStatus.style.color = '#f59e0b'; // amber

                // Enva el evento a GA4 ANTES de la peticin de red
                trackEvent('lead_generated', {
                    'role': data.role,
                    'ticket_size_category': data.ticket_size
                });

                // Enva los datos a tu endpoint (e.g., Formspree, webhook, etc.)
                // REEMPLAZA ESTA URL con tu propio endpoint
                fetch('https://your-webhook-endpoint.com/your-path', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data),
                })
                .then(response => {
                    if (response.ok) {
                        formStatus.textContent = 'Gracias! Te contactaremos en menos de 24 horas.';
                        formStatus.style.color = '#10b981'; // green
                        investorForm.reset();
                    } else {
                        throw new Error('Network response was not ok.');
                    }
                })
                .catch(error => {
                    formStatus.textContent = 'Error al enviar. Intenta de nuevo o contctanos por email.';
                    formStatus.style.color = '#ef4444'; // red
                    console.error('Form submission error:', error);
                });
            });
        }
    });
    </script>
</body>
</html>
